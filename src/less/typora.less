/**************************************
 *
 * VLOOKâ„¢ CSS - Typora ç¼–è¾‘æ—¶å†…ç½®æ ·å¼
 * (é…åˆ base.less è¿›è¡Œä½¿ç”¨)
 *
 * V2026.1
 * 2026-01-30
 * Powered by MAXÂ°å­Ÿå…†
 *
 * QQ Group: 805502564
 * Telegram Channel: t.me/vlook_markdown
 * email: maxchow@qq.com
 *
 * https://github.com/MadMaxChow/VLOOK
 * https://gitee.com/madmaxchow/VLOOK
 *
 *************************************/

:root {
    // é’ˆå¯¹ Typora ç¼–è¾‘æ—¶ UI ç›¸å…³å˜é‡
    --active-file-bg: var(--pn-c);
    --active-file-text-color: var(--d-fc);
    --text-color: var(--d-fc);
    --active-toggle-btn-color: var(--a-o-c);
    --monospace: var(--v-fm-code);

    --cm-keyword-lg: #770088;
    --cm-variable-lg: var(--d-fc-lg);
    --cm-variable-2-lg: #0055AA;
    --cm-variable-3-lg: #008855;
    --cm-tag-lg: #9ab696;
    --cm-attribute-lg: #0000CC;
    --cm-string-lg: #AA1111;
    --cm-string-2-lg: #FF5500;
    --cm-comment-lg: #AA5500;
    --cm-header-lg: #0000FF;
    --cm-quote-lg: #009900;
    --cm-hr-lg: #999999;
    --cm-link-lg: #0000CC;
    --cm-negative-lg: #DD4444;
    --cm-positive-lg: #229922;
    --cm-meta-lg: #555555;
    --cm-bulidin-lg: #3300AA;
    --cm-bracket-lg: #999977;
    --cm-atom-lg: #221199;
    --cm-number-lg: #116644;

    --cm-keyword-dk: #C88FD0;
    --cm-variable-dk: var(--d-fc-dk);
    --cm-variable-2-dk: #9FBAD5;
    --cm-variable-3-dk: #1CC685;
    --cm-tag-dk: #7DF46A;
    --cm-attribute-dk: #7575E4;
    --cm-string-dk: #D26B6B;
    --cm-string-2-dk: #FF5500;
    --cm-comment-dk: #DA924A;
    --cm-header-dk: #8D8DF0;
    --cm-quote-dk: #57AC57;
    --cm-hr-dk: #D8D5D5;
    --cm-link-dk: #D3D3EF;
    --cm-negative-dk: #D95050;
    --cm-positive-dk: #50E650;
    --cm-meta-dk: #B7B3B3;
    --cm-bulidin-dk: #F3B3F8;
    --cm-bracket-dk: #999977;
    --cm-atom-dk: #84B6CB;
    --cm-number-dk: #64AB8F;

    --cm-keyword: var(--cm-keyword-lg);
    --cm-variable: var(--cm-variable-lg);
    --cm-variable-2: var(--cm-variable-2-lg);
    --cm-variable-3: var(--cm-variable-3-lg);
    --cm-tag: var(--cm-tag-lg);
    --cm-attribute: var(--cm-attribute-lg);
    --cm-CodeMirror-cursor: var(--a-o-c);
    --cm-string: var(--cm-string-lg);
    --cm-string-2: var(--cm-string-2-lg);
    --cm-comment: var(--cm-comment-lg);
    --cm-header: var(--cm-header-lg);
    --cm-quote: var(--cm-quote-lg);
    --cm-hr: var(--cm-hr-lg);
    --cm-link: var(--cm-link-lg);
    --cm-negative: var(--cm-negative-lg);
    --cm-positive: var(--cm-positive-lg);
    --cm-meta: var(--cm-meta-lg);
    --cm-bulidin: var(--cm-bulidin-lg);
    --cm-bracket: var(--cm-bracket-lg);
    --cm-atom: var(--cm-atom-lg);
    --cm-number: var(--cm-number-lg);

    // --------------------
    // é’ˆå¯¹ Typora UI é¢œè‰²å˜é‡
    --bg-color: var(--d-bc); // æ›¿æ¢ä¸ºé€æ˜è‰²ï¼Œä»¥åœ¨ Typora ç¼–è¾‘æ—¶æ­£å¸¸æ˜¾ç¤ºèƒŒæ™¯å›¾ç‰‡
    --side-bar-bg-color: var(--d-bc);

    --border-color: var(--d-fc-a);

    // é€‰æ‹©çš„æ–‡æœ¬èƒŒæ™¯
    --select-text-bg-color: var(--v-selected-c);

    --search-select-bg-color: var(--v-selected-c);

    --control-text-color: var(--d-fc-lg);
    --control-text-hover-color: var(--d-fc-lg);
    --window-border: 1px solid var(--pn-c-lg);

    --active-file-bg-color:  var(--d-bc-lg);
    --active-file-bder: var(--select-text-bg-color);

    --item-hover-bg-color: var(--a-o-c);
    --item-hover-text-color: @buttonForeHoverColor;

    --primary-color: @theme1;

    --rawblock-edit-panel-bd: var(--pn-c);
}

@windows: ~'os-windows';
@macos: ~'html-for-mac';

// é€‰ä¸­å†…å®¹çš„æ ·å¼
::selection {
    background: var(--v-selected-c);
    fill: var(--d-fc); // é’ˆå¯¹ SVG text
}

// é’ˆå¯¹ Typora å¯¼å‡ºæ—¶è‡ªå¸¦çš„ä¾§è¾¹æ 
.typora-export-sidebar {
    display: none;
}

// ä¿ç•™åŸå§‹ fa å›¾æ ‡å¼ºåˆ¶ä½¿ç”¨æŒ‡å®šçš„å­—ä½“
.fa {
    font-family: FontAwesome, sans-serif;
}

.md-toc-inner {
    text-decoration: none;
    box-shadow: none;
}

// å¤§çº² / æ–‡ä»¶é¢æ¿å›¾æ ‡
.ty-icon,
.file-node-icon,
.outline-expander::before,
#md-notification::before,
.ion-chevron-left::before,
.ion-checkmark::before,
.fa-code::before,
#top-titlebar :is(.ty-menu-btn-area-sub1, .ty-menu-btn-area-sub2, .ty-menu-btn-area-sub3),
.fa-sort-desc::before,
.fa-sort-asc::before {
    .genOutlineContentStyle(@style) when not (@style = edge) {
        color: var(--h-f);
    }
    .genOutlineContentStyle(@style) when (@style = edge) {
        color: @buttonForeColor;
    }
    .genOutlineContentStyle(@navCenterStyle);

    vertical-align: middle;
}
.ion-folder::before {
    color: var(--d-fc-lg);
}
.ty-icon.ty-list,
:is(.sidebar-tabs, .sidebar-footer) .ty-icon:is(.ty-file-tree, .ty-three-cells),
.sidebar-footer :is(.ty-icon.ty-add, .ty-icon.ty-file-tree, .ty-icon.ty-dots-v) {
    .genTyIconStyle(@style) when not (@style = simple) {
        color: @buttonForeColor;
    }
    .genTyIconStyle(@toolbarStyle);

    vertical-align: middle;
}
.ty-icon.ty-left-arrow,
.ion-ios7-search-strong {
    vertical-align: middle;
}
.ty-icon.ty-left-arrow {
    color: var(--h-f);
}
#sidebar-search-btn {
    margin-top: 0;
    line-height: @sidebarTabHeight - 2px;
}

content>.auto-suggest-container li:hover {
    color: var(--item-hover-text-color);
}

#top-titlebar .ty-icon {
    color: var(--d-fc);
}
.megamenu-opened #top-titlebar .ty-icon {
    color: var(--d-fc-lg);
}

.ty-menu-btn-area>span {
    border-top-width: 2px;
}
.ty-sidebar-search-panel svg.icon {
    fill: var(--h-f);
}
.fa-folder::before,
.fa-caret-right::before {
    color: var(--d-fc-a);
}
.md-resize-table .ty-icon,
.md-align-gp .ty-icon {
    color: var(--a-c);
}
.ion-android-arrow-back::before {
    color: @buttonForeColor;
}

// è¡¨æ ¼ç¼–è¾‘æ 
.ty-table-edit {
    margin-top: -26px;
    margin-left: var(--v-r-b);
    background: var(--v-ui-bg);
    border-radius: var(--v-r-s) var(--v-r-s) 0 0;
    padding: 0 3px 2px 3px;
    width: auto !important;
    z-index: 3000;
}

.ty-table-edit .ty-icon {
    color: @buttonForeColor;
    line-height: 1;
}

// è¡¨æ ¼è¡Œåˆ—æ•°è°ƒæ•´é¢æ¿æ ·å¼
.md-resize-table-th .popover {
    width: max-content;
    padding-bottom: 10px;
}
.md-grid-board-wrap .popover-title {
    padding-top: 10px;
}
.ty-table-edit div {
    width: max-content;
    padding: 0 5px;
}
.md-grid-board {
    border-radius: 0;
}
.md-grid-board a:hover,
.md-grid-board a.md-active {
    border-color: var(--ac-t2);
    background: var(--ac-t2);
}
.md-grid-board :is(tr, tr:hover)::before {
    content: "";
}
.md-grid-board tr>:is(th, td),
.md-grid-board tr>:is(th, td):first-child {
    padding: 5px;
    background: var(--ac-t2) !important;
    box-shadow: none;
}

// è°ƒæ•´è¡¨æ ¼å¤§å°
.md-resize-table {
    margin-right: 50px;
}

// åˆ é™¤è¡¨æ ¼
.md-delete-table {
    margin-left: 50px;
}

.md-notification-container {
    background: var(--d-bc);
    z-index: 3100;
}

// å¯¼å‡ºæˆåŠŸåé€šçŸ¥æ å›¾æ ‡
#md-notification::before {
    top: 16px;
}

// å¯¼å‡ºæˆåŠŸåé€šçŸ¥æ é“¾æ¥å›¾æ ‡
#md-notification a {
    color: var(--a-c);
    text-decoration: none;
    font-weight: var(--v-fw-bd);
}
#md-notification :is(a:hover, a.default-btn:hover) {
    color: var(--a-o-c);
}

.btn,
.searchpanel-search-option-btn,
.outline-item,
.file-node-content,
.outline-label,
.outline-expander {
    cursor: var(--cur-ptr);
}

.outline-expander {
    min-width: 1rem;
    display: flex;
    align-items: center;
}

#md-notification .btn {
    border-radius: var(--c-br-s);
    margin-left: 5px;
    color: @buttonForeColor;
    background: var(--v-ui-bg);
}
#md-notification .btn:hover {
    color: @buttonForeHoverColor;
    background: var(--a-o-c);
}
#md-notification .btn-default {
    font-weight: var(--v-fw-bd);
}

// æ³¨é‡Š
.md-comment {
    color: var(--d-fc-a);
    font-family: inherit;
}

// é’ˆå¯¹ Win å³é”®èœå•å›¾æ ‡ hover
a.menu-style-btn:hover .ty-icon {
    color: @buttonForeColor;
}

// é’ˆå¯¹ Win ä¸€ä½“åŒ–èœå•
body.@{windows} :is(.megamenu-menu, .megamenu-menu-header-title-menu) {
    background: var(--v-ui-bg);
    color: @buttonForeColor;
}
.megamenu-menu-header {
    border-bottom-color: @buttonForeColor;
}
#megamenu-back-btn {
    border-color: var(--v-ui-bg);
}
.megamenu-menu-panel {
    color: var(--d-fc-a-lg);
}

.megamenu-menu-list li a {
    color: @buttonForeColor;
}
.megamenu-menu-list li a.active {
    background: @aActiveColor;
    color: @buttonForeHoverColor;
}
.megamenu-menu-list:not(.saved) li a:hover {
    background: var(--a-o-c);
    color: @buttonForeHoverColor;
}

// ç”¨äºåœ¨ Typora Windows ç‰ˆæœ¬çš„ä¸€ä½“åŒ–èœå•ä¸­ï¼Œè¿›è¡Œä¸»é¢˜é€‰æ‹©æ—¶çš„é¢„è§ˆæ•ˆæœ
body:not([class]) :is(h1,h2,h3,h4,h5,h6) {
    color: var(--h-f);
}

// è¡¨æ ¼å·¥å…·æ æŒ‰é’®ç»„ã€æŒ‰é’®
.btn-group .btn+.btn {
    margin-left: 0;
}
.btn.active {
    border-color: var(--d-bc);
    box-shadow: none;
    background-color: var(--d-bc);
}
// å½“å‰é€‰ä¸­çŠ¶æ€
.btn.active>.ty-icon::before {
    color: var(--d-fc);
}

.btn,
.sidebar-footer-main-item-label {
    font-family: var(--v-fm-bd);
    background: none;
}

.btn,
.megamenu-content input {
    border-radius: calc(var(--v-r-s) - 2px);
    color: var(--d-fc);
}
.megamenu-section input {
    background: var(--d-bc-lg);
    color: var(--d-fc-lg);
}

.megamenu-content table {
    color: var(--d-fc-lg);
}

.megamenu-section :is(.long-btn, .btn) {
    border-radius: var(--c-br-s);
    color: var(--d-fc-lg) !important;
}
.megamenu-section :is(.long-btn:hover, .btn:hover) {
    color: var(--d-fc-lg) !important;
    background: var(--bq-bg-lg);
}

.megamenu-menu-header:focus,
.megamenu-menu-header:hover,
.megamenu-menu-header:hover #megamenu-menu-header-title {
    color: @buttonForeColor;
}

.btn-primary {
    color: @buttonForeColor;
    background: var(--v-ui-bg);
    font-weight: var(--v-fw-bd);
}
.btn-primary:hover {
    background: var(--a-o-c);
}
.btn-primary:active {
    background: @aActiveColor;
}

// é’ˆå¯¹ Win å·¦ä¾§é¢æ¿æ ‡ç­¾åº•éƒ¨å½“å‰é€‰ä¸­çš„è¾¹æ¡†
body.@{windows} :is(.active-tab-files, .active-tab-outline) .info-panel-tab-border {
    height: 0 !important;
}

.md-image-src-span, // å›¾ç‰‡åœ°å€
.md-link .md-url { // é“¾æ¥
    font: var(--v-fw-text) .75em var(--monospace); // [style] [weight] [size/[line-height]] [family]
    text-decoration: none;
}

// å›¾ç‰‡ç›¸å…³æŒ‰é’®
.md-image-btn {
    background: var(--v-ui-bg);
}
.md-image-btn:hover {
    background: var(--a-o-c);
}
.md-image-input-src-btn {
    line-height: @defaultLineHeight;
    height: 30px;
    background: var(--pn-c);
    box-shadow: 0 0 0 1px var(--v-ui-bg) inset;
    border-radius: var(--v-r-si) 0 0 var(--v-r-si);
}
.md-image-input-src-btn::before {
    color: var(--d-fc-a);
}
.md-image-input-src-btn.selected,
.md-image-input-src-btn:hover {
    background: none;
}
.md-image-pick-file-btn {
    line-height: @defaultLineHeight;
    height: 30px;
    border-left-color: var(--d-bc);
    border-radius: 0 var(--v-r-si) var(--v-r-si) 0;
}
// é’ˆå¯¹ Win
body.@{windows} :is(.md-image-input-src-btn, .md-image-pick-file-btn) {
    line-height: @paragraphInnerLineHeight;
}

// é’ˆå¯¹ br å›è½¦
.hide-br-and-line-break .md-expand .md-br-content,
.md-raw-inline {
    font-size: .75em;
}

// é’ˆå¯¹ HTML æ ‡ç­¾
.md-html-inline .md-meta {
    font-size: .75em;
    font-weight: normal;
    opacity: .6;
}
.md-html-inline kbd .md-meta {
    font-size: 1em;
    opacity: 1;
}

// --------------------
// æ–‡æ¡£æ›´å¤šå†…å®¹
// æ–‡æ¡£æ›´å¤šå†…å®¹é®ç½©çš„é«˜åº¦
@{writeOnEditing}::before,
@{writeOnEditing}::after,
@{writeOnHTML}.done::before,
@{writeOnHTML}.done::after {
    content: "";
    position: sticky;
    display: block;
    left: 0;
    bottom: 0;
    margin: 0 -20px;
    width: calc(100% + 40px);
    padding: 0;
    background-image: linear-gradient(0deg, @docMoreContentLG);
    z-index: 150;
}
@{writeOnEditing}::after,
@{writeOnHTML}.done::after {
    height: var(--v-more-mask-a-h);
    margin-bottom: calc(0px - var(--v-more-mask-a-h));
    z-index: 150;
}
@{writeOnEditing}::before,
@{writeOnHTML}.done::before {
    height: var(--v-more-mask-b-h);
    margin-top: calc(0px - var(--v-more-mask-b-h));
    transform: rotate(180deg);
    top: 0;
    bottom: unset !important;
}

// å›¾ç‰‡åœ°å€
.md-image {
    font-size: 1em;
}
.md-image>.md-meta {
    color: var(--a-o-c);
}
@{writeOnEditing} a kbd .md-image>.md-meta {
    color: inherit;
    font-weight: normal;
}

:is(h3,h4,h5,h6).md-focus::before {
    border: none;
    position: inherit;
    left: inherit;
    float: none;
    top: initial;
    font-size: inherit;
    vertical-align: inherit;
    font-weight: inherit;
    line-height: inherit;
}

// ä¿®æ­£è·å–ç„¦ç‚¹æ—¶æŠ–åŠ¨
:is(h1,h2,h3,h4,h5,h6).md-focus::before {
    padding-left: 0;
    padding-right: 0;
}

// é’ˆå¯¹ Win
body.@{windows} :is(#top-titlebar,
.ty-footer,
#w-titlebar-left,
#w-traffic-lgs) {
    background: transparent;
}
body.@{windows} .ty-footer { // åº•æ 
    border-top-color: var(--d-bc);
}

#typora-sidebar { // ä¾§è¾¹æ 
    border-right: none;
    .genSidebarContentStyle(@style, @border) when not (@style = edge) {
        background: transparent;
    }
    .genSidebarContentStyle(@style, @border) when (@style = edge) {
        background-color: var(--v-ui-bg);
        color: @buttonForeColor;
        .genBorder(@border) when (@border = shadow) {
            box-shadow: var(--v-fl-sd);
        }
        .genBorder(@border);
    }
    .genSidebarContentStyle(@navCenterStyle, @panelBorder);
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-sidebar:hover .sidebar-tab-btn {
    -webkit-animation: none !important;
    animation: none !important;
}

.sidebar-tab-btn {
    opacity: 1;
    line-height: @sidebarTabHeight - 2px;
}
#ty-sidebar-search-back-btn {
    width: 20px;
    line-height: @sidebarTabHeight - 2px;
}
.sidebar-tab-btn>* {
    opacity: 1;
}

// ä¾§è¾¹æ 
.sidebar-content {
    margin: 10px;
    border-radius: var(--c-br-b);

    .genSidebarContentStyle(@style, @border) when (@style = std) {
        background-color: var(--pn-c);
        .genBorder(@border) when (@border = shadow) {
            box-shadow: var(--v-fl-sd);
        }
        .genBorder(@border) when (@border = line) {
            box-shadow: 0 0 0 1px @panelBorderColor inset;
        }
        .genBorder(@border);
    }
    .genSidebarContentStyle(@style, @border) when (@style = flat) {
        background-color: var(--d-bc);
        .genBorder(@border) when (@border = shadow) {
            box-shadow: var(--v-fl-sd);
        }
        .genBorder(@border) when (@border = line) {
            .genBorderCSS() when not (isdefined(@panelBorderColor)) {
                box-shadow: 0 0 0 1px var(--pn-c-a) inset !important;
            }
            .genBorderCSS() when (isdefined(@panelBorderColor)) {
                box-shadow: 0 0 0 1px @panelBorderColor inset;
            }
            .genBorderCSS();
        }
        .genBorder(@border);
    }
    .genSidebarContentStyle(@style, @border) when (@style = edge) {
    }
    .genSidebarContentStyle(@navCenterStyle, @panelBorder);

    .genSidebarContentStyle(@style) when (@style = edge) {
        color: @buttonForeColor;
    }
    .genSidebarContentStyle(@navCenterStyle);
}
.sidebar-content::after {
    content: "Styled & Enhanced by VLOOKâ„¢";
    font: normal .75em var(--v-fm-bd); // [style] [weight] [size/[line-height]] [family]
    color: currentColor;
    text-align: center;
    border-radius: var(--c-br-b);
    width: 100%;
    height: 30px;
    line-height: 30px;
    bottom: 0;
    opacity: .4;
    cursor: default;
    position: absolute;
    z-index: 2;
}
// æ˜¾ç¤ºæ–‡ä»¶åˆ—è¡¨æ—¶å¾®è°ƒ
.active-tab-files:is(.use-file-list-style, .use-file-tree-style) > .sidebar-content {
    margin-bottom: @bottomCopyrightHeight + 20px;
}

#typora-sidebar.use-file-tree-style:hover .sidebar-footer-item:not(#sidebar-new-file-btn) {
    opacity: 1;
}

.sidebar-footer {
    border: none;
    opacity: 1;
    display: block;
    width: auto;
    position: absolute !important;
    left: 10px;
    right: 10px;
    bottom: 10px;
    border-radius: var(--c-br-b);

    .genOutlineContentStyle(@style, @border) when not (@style = edge) {
        .genBorder(@border) when (@border = shadow) {
            box-shadow: var(--v-fl-sd);
        }
        .genBorder(@border);
    }
    .genOutlineContentStyle(@navCenterStyle, @panelBorder);
}
.genSidebarFooterStyle(@style) when (@style = std) {
    .sidebar-footer,
    .sidebar-footer div {
        color: @buttonForeColor;
        background-color: var(--v-ui-bg);
    }
    .sidebar-footer div {
        border-radius: var(--c-br-b);
    }
}
.genSidebarFooterStyle(@style) when (@style = simple) {
    .sidebar-footer,
    .sidebar-footer div {
        color: var(--v-ui-bg);
        background-color: var(--d-bc);
    }
    .sidebar-footer div {
        border-radius: var(--c-br-b);
    }
}
.genSidebarFooterStyle(@toolbarStyle);

:is(.html-for-mac, *) .sidebar-footer .sidebar-footer-item {
    padding: 3px 10px;
}

.sidebar-footer-item:hover {
    color: inherit;
    background: inherit;
}

.use-file-tree-style .sidebar-footer-item, // for Windows
.footer-btn {
    opacity: 1;
}
#typora-sidebar .sidebar-footer:not(.show-sidebar-footer-context) { // for Windows
    display: block;
}

// æ–°å»ºæ–‡ä»¶æŒ‰é’®
#sidebar-new-file-btn {
    border-radius: var(--v-r-b) 0 0 var(--v-r-b-xc);
}
// åˆ‡æ¢æ–‡ä»¶åˆ—è¡¨æŒ‰é’®
#switch-file-list-btn {
    border-radius: 0 var(--v-r-b-xc) var(--v-r-b-xc) 0;
}

// é’ˆå¯¹ Windows
body.@{windows} .sidebar-content {
    top: calc(@sidebarTabHeight + 10px) !important;
    width: calc(100% - 20px);
}
// é’ˆå¯¹ Windows ç¯å¢ƒä¸­å¯ç”¨ ä¸€ä½“åŒ– å¤–è§‚åçš„å¾®è°ƒ
body.@{windows}.unibody-window .sidebar-content {
    top: calc(@sidebarTabHeight + 40px) !important;
}
.sidebar-tab {
    line-height: 2rem;
    margin-top: auto;
}
// ä¾§è¾¹æ å½“å‰æ´»åŠ¨ tab
.sidebar-tab.active {
    font-family: var(--v-fm-tt);
    font-weight: var(--v-fw-tt);
    font-stretch: condensed;
}

// é’ˆå¯¹ Win ä¾§è¾¹æ  tab
body.@{windows} .info-panel-tab {
    margin-top: 23px;
    width: 50%;
}
body.@{windows} .info-panel-tab:hover {
    color: var(--a-o-c);
}
body.@{windows} .info-panel-tab-title {
    white-space: pre;
    padding: 2px 0;
}
body.@{windows} #info-panel-tab-file {
    padding-right: 10px;
}
body.@{windows} #info-panel-tab-outline {
    padding-left: 10px;
}

.sidebar-tabs>.sidebar-tab.active {
    .genSidebarStyle(@style, @navCenterStyle) when (@style = std), (@navCenterStyle = edge) {
        color: @buttonForeColor;
    }
    .genSidebarStyle(@style, @navCenterStyle) when (@style = simple) {
        .genSidebarStyleForNotEdge(@navCenterStyle) when not (@navCenterStyle = edge) {
            color: var(--v-ui-bg);
        }
        .genSidebarStyleForNotEdge(@navCenterStyle);
    }
    .genSidebarStyle(@toolbarStyle, @navCenterStyle);
}
@sidebarTabHeight: 50px;
@sidebarTabMargin: 10px;
.sidebar-osx-tab,
body.@{windows} .info-panel-tab-wrapper {
    .genSidebarStyle(@style, @navCenterStyle) when (@style = std), (@navCenterStyle = edge) {
        color: @buttonForeColor;
        background-color: var(--v-ui-bg);
    }
    .genSidebarStyle(@style, @navCenterStyle) when (@style = simple) {
        .genSidebarStyleForNotEdge(@navCenterStyle) when not (@navCenterStyle = edge) {
            color: var(--v-ui-bg);
            background-color: var(--d-bc);
        }
        .genSidebarStyleForNotEdge(@navCenterStyle);
    }
    .genSidebarStyle(@toolbarStyle, @navCenterStyle);

    margin: @sidebarTabMargin @sidebarTabMargin 0 @sidebarTabMargin;

    border-radius: var(--b-br-b);
    .genOutlineContentStyle(@style, @border) when (@style = std) {
        .genBorder(@border) when (@border = shadow) {
            box-shadow: var(--v-fl-sd);
        }
        .genBorder(@border);
    }
    .genOutlineContentStyle(@style, @border) when (@style = flat) {
        .genBorder(@border) when (@border = shadow) {
            box-shadow: var(--v-fl-sd);
        }
        .genBorder(@border) when (@border = line) {
            .genBorderCSS() when not (isdefined(@panelBorderColor)) {
                box-shadow: 0 0 0 1px var(--pn-c-a) inset !important;
            }
            .genBorderCSS() when (isdefined(@panelBorderColor)) {
                box-shadow: 0 0 0 1px @panelBorderColor inset !important;
            }
            .genBorderCSS();
        }
        .genBorder(@border);
    }
    .genOutlineContentStyle(@navCenterStyle, @panelBorder);
    height: @sidebarTabHeight;
    width: auto;
}
// é’ˆå¯¹ Windows ç¯å¢ƒä¸­å¯ç”¨ ä¸€ä½“ä¼‘ å¤–è§‚åçš„å¾®è°ƒ
body.@{windows}.unibody-window .info-panel-tab-wrapper {
    margin: (@sidebarTabMargin + 30px) @sidebarTabMargin 0 @sidebarTabMargin;
}
// é’ˆå¯¹ macOS ç¯å¢ƒä¸­å¯ç”¨ seamless å¤–è§‚åçš„å¾®è°ƒ
body.mac-seamless-mode .sidebar-osx-tab {
    margin: (@sidebarTabMargin + 10px) @sidebarTabMargin 0 @sidebarTabMargin;
}

.sidebar-osx-tab::before,
body.@{windows} .info-panel-tab-wrapper::before {
    content: "VLOOKâ„¢" @themeSpliter @themeDesc;
    white-space: pre;
    font: condensed var(--v-fw-tt) .875em var(--v-fm-tt); // [stretch] [style] [weight] [size/[line-height]] [family]
    margin-top: 4px;
    position: absolute;
    width: calc(100% - @sidebarTabMargin * 2);
    text-align: center;
}
.sidebar-osx-tab:hover::before,
body.@{windows} .info-panel-tab-wrapper:hover::before {
    content: "Version - " @themeVer;
}
body.@{windows} .info-panel-tab-wrapper::before {
    margin-top: 6px;
}

// å½“å‰é¢æ¿æ ‡é¢˜æ˜¾ç¤ºæ–‡æ¡£æ ‡ç­¾æ ã€æ”¶è—å¤¹å›¾æ ‡
@thmTabLogoBackground: no-repeat center center/20px 20px @thmTabLogo;
.sidebar-tab.active::before,
body.@{windows} :is(.active-tab-files, .active-tab-outline) .info-panel-tab-title::before {
    content: "";
    position: absolute;
    height: 22px;
    width: var(--sidebar-width);
    margin-top: -2px;
    left: 0;
    background: @thmTabLogoBackground;
    pointer-events: none;
}
// é’ˆå¯¹ for macOS
.sidebar-tab.active::before {
    .genSidebarStyle(@style, @navCenterStyle) when (@style = std), (@navCenterStyle = edge) {
        background: @thmTabLogoBackground var(--v-ui-bg);
    }
    .genSidebarStyle(@style, @navCenterStyle) when (@style = simple) {
        .genSidebarStyleForNotEdge(@navCenterStyle) when not (@navCenterStyle = edge) {
            background: @thmTabLogoBackground var(--d-bc);
        }
        .genSidebarStyleForNotEdge(@navCenterStyle);
    }
    .genSidebarStyle(@toolbarStyle, @navCenterStyle);

    margin-top: 5px;
    width: 200px;
    left: 50%;
    transform: translateX(-50%);
}
// ä»¥ä¸‹ for macOS
.sidebar-tab.active:hover::before {
    display: none;
}

// ä¾§è¾¹æ å†…å®¹ä¸ºç©ºçš„æ ·å¼
.genSidebarContentEmpty() {
    opacity: .5;
    // opacity: 1;
    border-radius: var(--c-br-b);

    // .genSidebarContentStyle(@style) when (@style = std) {
    //     background: var(--pn-c);
    // }
    // .genSidebarContentStyle(@style) when (@style = flat) {
    //     background: var(--d-bc);
    // }
    // .genSidebarContentStyle(@style) when (@style = edge) {
    //     background: transparent;
    // }
    // .genSidebarContentStyle(@navCenterStyle);
}
#typora-sidebar #file-library:empty,
#typora-sidebar .outline-content:empty {
    .genSidebarContentEmpty();
}
#typora-sidebar .outline-content:empty::after {
    background: none;
}

#outline-content,
#typora-sidebar #file-library-list {
    scrollbar-width: thin; // æ»šåŠ¨æ¡å®½åº¦
}

#outline-content::before,
#sidebar-content .file-node-root::before,
#sidebar-content #file-library-list::before,
#outline-content::after,
#sidebar-content .file-node-root::after,
#sidebar-content #file-library-list::after {
    content: "";
    left: 1px;
    bottom: @bottomCopyrightHeight;
    height: 20px;
    width: calc(100% - 2px);

    .genPanelMoreContentStyle(@style) when (@style = std) {
        background-image: linear-gradient(0deg, @pnMoreContentLG);
    };
    .genPanelMoreContentStyle(@style) when (@style = flat) {
        background-image: linear-gradient(0deg, @docMoreContentLG);
    }
    .genPanelMoreContentStyle(@style) when (@style = edge) {
        background-image: linear-gradient(0deg, @pnMoreContentLG_edge);
    }
    .genPanelMoreContentStyle(@navCenterStyle);
    position: absolute;
    z-index: 2;
    pointer-events: none;
}

#outline-content::before,
#sidebar-content .file-node-root::before,
#sidebar-content #file-library-list::before {
    height: 10px;
    top: 20px;
    bottom: unset;
    transform: rotate(180deg);
}

#sidebar-content #file-library-list::before {
    top: 0;
}

#sidebar-content .file-node-root::after,
#sidebar-content #file-library-list::after {
    bottom: 0;
}

// æ–‡ä»¶åº“
.active-tab-files.use-file-tree-style .sidebar-content {
    bottom: 0;
}
// é’ˆå¯¹ for Windows
body.@{windows} #sidebar-content #file-library {
    padding: 0 0 0 10px;
}
#sidebar-content #file-library {
    overflow-x: hidden;
    padding: 0 10px;
    margin-top: @outlineContentMarginTop;
    margin-bottom: @bottomCopyrightHeight;
}
#typora-sidebar #file-library-tree {
    border-radius: var(--c-br-b);
    padding: 0;
}
#typora-sidebar #file-library-tree:not(:empty) {
    background: inherit;
}

#typora-sidebar #file-library-list {
    height: 100%;
}
#typora-sidebar .file-node-root,
#typora-sidebar #file-library-list {
    overflow-y: auto;
}

#typora-sidebar .file-node-root {
    position: relative !important;
  overflow: auto !important;
}

// æ–‡ä»¶åº“å†…å®¹ä¸ºç©º
#typora-sidebar :is(#file-library-tree, #file-library-list-children):empty {
    .genSidebarContentEmpty();
    height: 100%;
}

// æ–‡ä»¶å¤¹èœå•
#sidebar-files-menu {
    background: var(--d-bc);
}

// æ–‡ä»¶å¤¹èœå•é¡¹
.dropdown-menu>li>a:focus,
.dropdown-menu>li>a:hover {
    color: @buttonForeHoverColor;
}

// é’ˆå¯¹ Win ç‰ˆæ ·å¼çš„å·®å¼‚è°ƒæ•´
body.@{windows} #file-library-tree {
    height: 100%;
}

// å³è¾¹æµ®åŠ¨æ˜¾ç¤ºçš„ä¾§è¾¹æ 
#toc-dropmenu {
    border-radius: var(--c-br-b);
    .genSidebarContentStyle(@style) when (@style = std) {
        background-color: var(--pn-c);
        box-shadow: var(--v-fl-sd);
    }
    .genSidebarContentStyle(@style) when (@style = flat) {
        background-color: var(--d-bc);
        box-shadow: var(--v-fl-sd);
    }
    .genSidebarContentStyle(@navCenterStyle);
    right: 20px;
    bottom: 20px;
    .genNavCenterFloat();
}
#toc-dropmenu>.outline-content {
    background: none;
    box-shadow: none;
    outline: none;
    margin-top: 0;
}

// å³ä¾§æµ®åŠ¨å¤§çº²
.outline-title-wrapper {
    color: var(--h-f);
    text-transform: uppercase;
    padding-top: 10px;
    padding-bottom: 10px;
}
.outline-title {
    font-weight: var(--v-fw-tt);
    font-size: 1.25em;
}
#toc-dropmenu .divider {
    display: none;
}

// ----- è‡ªåŠ¨æ”¶èµ·æ¨¡å¼ -----
// å°é¢
@outlineCover: ~".outline-content>li:first-child.outline-h6";
// å°åº•
@outlinebackcover: ~".outline-content>.outline-h6:first-child ~ .outline-h1.outline-item-signle:last-child";
// å¤§çº²é¢æ¿çš„å°é¢ã€å°åº•æ¡ç›®
@{outlineCover}>.outline-item, // å°é¢
@{outlinebackcover}>.outline-item { // å°åº•
    .genSidebarContentStyle(@style) when not (@style = edge) {
        color: var(--a-c);
    }
    .genSidebarContentStyle(@style) when (@style = edge) {
        color: @buttonForeColor;
    }
    .genSidebarContentStyle(@navCenterStyle);
    font-size: 14px;
    height: 40px;
    padding-left: 20px;
    display: block;
}

@{outlineCover}>.outline-item .outline-label :is(sup, sub) {
    opacity: 1;
    color: inherit;
    font-size: 1em;
    display: contents;
}
@{outlineCover}>.outline-item code, // å°é¢
@{outlinebackcover}>.outline-item code { // å°åº•
    color: inherit;
    background: none;
    padding: 0;
    box-shadow: none;
    display: inline;
    white-space: inherit;
}
@{outlineCover}>.outline-item u, // å°é¢
@{outlinebackcover}>.outline-item u { // å°åº•
    text-decoration: none;
}
// å¤§çº²é¢æ¿çš„å°é¢ã€å°åº•æ¡ç›®æ ‡è¯†
@{outlineCover}>.outline-item::before, // å°é¢
@{outlinebackcover}>.outline-item::before { // å°åº•
    content: "Cover";
    text-transform: uppercase;
    position: absolute;
    left: 20px;
    color: var(--a-o-c);
    font-size: .75em;
    font-style: normal;
}
// å¤§çº²é¢æ¿çš„å°é¢é¡¹ç›®ä¸‹çš„ outline-expander èŠ‚ç‚¹
@{outlineCover}>.outline-item .outline-expander {
    height: 15px;
    display: block;
}
@{outlinebackcover}>.outline-item .outline-expander {
    height: 15px;
    display: block;
}
// å¤§çº²é¢æ¿çš„å°é¢é¡¹ç›®ä¸‹çš„å†…å®¹èŠ‚ç‚¹
@{outlineCover}>.outline-item .outline-label,
@{outlinebackcover}>.outline-item .outline-label {
    display: block; // è°ƒæ•´ä¸ºè¯¥æ ·å¼åï¼Œæ‰èƒ½è§¦å‘å°é¢èŠ‚ç‚¹çš„çœç•¥æ˜¾ç¤º
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}
@{outlineCover}>.outline-item .outline-label::before,
@{outlinebackcover}>.outline-item .outline-label::before {
    counter-increment: h6toc;
    content: "";
    position: absolute;
    display: block;

    .genNavCenterStyle(@style) when not (@style = edge) {
        background: var(--ac-t1);
    }
    .genNavCenterStyle(@style) when (@style = edge) {
        background: currentColor;
    }
    .genNavCenterStyle(@navCenterStyle);

    left: 5px;
    top: 5px;
    width: 6px;
    height: 30px;
    border-radius: calc(var(--v-r-s) - 4px) calc(var(--v-r-s-xc) - 4px);
    opacity: .25;
}
@{outlineCover}>.outline-item-active .outline-label::before,
@{outlinebackcover}>.outline-item-active .outline-label::before {
    width: 10px;
}

// å°åº•
@{outlinebackcover}>.outline-item::before {
    content: "Back Cover";
    text-transform: uppercase;
}
@{outlinebackcover} .outline-label::before {
    content: "";
}
// ----- éè‡ªåŠ¨æ”¶èµ·æ¨¡å¼ -----
.no-collapse-outline .outline-label {
    padding: 3px 6px;
}
// å¤§çº²é¢æ¿çš„å°é¢æ¡ç›®
.no-collapse-outline .outline-content .outline-h6:first-child>.outline-item {
    padding-top: 3px;
    padding-bottom: 3px;
}
.no-collapse-outline .outline-content .outline-h6:first-child>.outline-item::before,
.no-collapse-outline @{outlinebackcover}>.outline-item::before {
    top: 6px;
}
.no-collapse-outline @{outlinebackcover}>.outline-item::before {
    left: 6px;
    top: 8px;
}

// å¤§çº²é¢æ¿
.outline-content {
    margin-top: @outlineContentMarginTop;
    margin-bottom: @bottomCopyrightHeight;
    padding: 10px;
}
// å¤§çº²èŠ‚ç‚¹
.outline-item {
    font: condensed normal @fontSizePx/1 var(--v-fm-toc); // [stretch] [style] [weight] [size/[line-height]] [family]
    padding-top: 5px;
    padding-right: 5px;
    padding-bottom: 5px;
    margin-bottom: 2px;
    display: flex;
    align-items: center;
}
// å½“å‰å¤§çº²èŠ‚ç‚¹
.pin-outline .outline-active,
.pin-outline .outline-active strong,
.pin-outline .outline-content .outline-active strong {
    font-weight: var(--v-fw-toc);
}
.outline-item-active {
    .genSidebarContentStyle(@style) when not (@style = edge) {
        box-shadow: @tocItemCurrent_boxShadow;
    }
    .genSidebarContentStyle(@style) when (@style = edge) {
        box-shadow: @tocItemCurrent_boxShadow_edge;
    }
    .genSidebarContentStyle(@navCenterStyle);

    border-radius: var(--c-br-s);
    margin-left: 0;
    border-left-width: 0;
    margin-right: 0;
    border-right-width: 0;
}
// å¤§çº²èŠ‚ç‚¹ hover
.outline-item:hover {
    .genSidebarContentStyle(@style) when (@style = std) {
        background: var(--pn-c-a);
    }
    .genSidebarContentStyle(@style) when (@style = flat) {
        background: var(--pn-c);
    }
    .genSidebarContentStyle(@style) when (@style = edge) {
        background: var(--db02);
    }
    .genSidebarContentStyle(@navCenterStyle);
    border-radius: var(--c-br-s);
    margin-left: 0;
    border-left-width: 0;
    margin-right: 0;
    border-right-width: 0;
}
// å¤§çº²èŠ‚ç‚¹ active
.outline-item:active,
.outline-item:active .outline-label,
.outline-item:active .outline-label::before,
.outline-label:active,
.file-library-file-node:active,
.file-library-file-node:active span {
    .genSidebarContentStyle(@style) when (@style = std) {
        color: var(--d-bc);
        background: var(--d-fc-a) !important;
    }
    .genSidebarContentStyle(@style) when (@style = flat) {
        background: var(--pn-c-a) !important;
    }
    .genSidebarContentStyle(@style) when (@style = edge) {
        background: @aActiveColor !important;
    }
    .genSidebarContentStyle(@navCenterStyle);
}
.outline-item:active {
    transform: @activePressedTransform_long;
}
// é’ˆå¯¹ before content, COVER, BACK COVER etc.
.outline-item:active>.outline-expander::before,
.outline-item:active::before {
    .genSidebarContentActiveStyle(@style) when (@style = std) {
        color: var(--d-bc) !important;
    }
    .genSidebarContentActiveStyle(@navCenterStyle);
}

.outline-label:hover {
    text-decoration: none;
}

// æœç´¢ã€æ›¿æ¢
#md-searchpanel svg.icon {
    fill: var(--d-fc);
}
#md-searchpanel .btn label {
    color: var(--d-fc);
}
#md-searchpanel input {
    border-radius: var(--c-br-s);
}

// ä¾§è¾¹æ æ–‡ä»¶åº“æœç´¢é€‰é¡¹
.searchpanel-search-option-btn {
    color: @buttonForeColor;
}
body.@{macos} .ty-sidebar-search-panel .searchpanel-search-option-btn {
    top: 16px !important;
}
body.@{windows} .ty-sidebar-search-panel .searchpanel-search-option-btn {
    top: 8px !important;
}
.searchpanel-search-option-btn.active {
    background-color: var(--a-o-c);
}
// é€‰ä¸­çš„æœç´¢é€‰é¡¹
.searchpanel-search-option-btn.active svg.icon {
    fill: @buttonForeHoverColor !important;
}

// ä¾§è¾¹æ æ–‡ä»¶åº“æœç´¢é€‰é¡¹æŒ‰é’®-å¤§å°å†™
#filesearch-case-option-btn {
    right: 60px;
}
// - å…¨å­—åŒ¹é…
#filesearch-word-option-btn {
    right: 40px;
}
// - æ­£åˆ™è¡¨è¾¾å¼
#filesearch-regexp-option-btn {
    right: 10px;
}

// å¿«é€Ÿæ‰“å¼€
#typora-quick-open {
    font-family: var(--v-fm-tag);
    font-stretch: condensed;

    .genQuickOpenStyle(@style) when (@style = std) {
        background: var(--pn-c);
    }
    .genQuickOpenStyle(@style) when (@style = flat), (@style = edge) {
        background: var(--d-bc);
    }
    .genQuickOpenStyle(@navCenterStyle);

    // ç”Ÿæˆå¿«é€Ÿæ‰“å¼€è¾¹æ¡†æ ·å¼
    .genQuickOpenRadiusStyle(@style) when (@style = std) {
        border-radius: var(--c-br-b);
    };
    .genQuickOpenRadiusStyle(@style) when not (@style = std) {
        border-radius: var(--c-br-b) var(--c-br-b) var(--v-r-b) var(--v-r-b);
    };
    .genQuickOpenRadiusStyle(@buttonRadiusStyle);
    box-shadow: var(--v-fl-sd);
    border: none;
}
// å¿«é€Ÿæ‰“å¼€è¾“å…¥æ¡†
#typora-quick-open-input {
    padding: 5px;
    font-family: var(--v-fm-text);
}
#typora-quick-open-input input {
    border-radius: var(--b-br-s);
    max-height: 40px;
    border-color: transparent;
    box-shadow: none;
    font-size: 1.5em;
    padding: 5px 10px;
}
.ty-quick-open-category-title {
    color: var(--h-f);
}
.typora-quick-open-list {
    padding: 5px 0;
}
// å¿«é€Ÿæ‰“å¼€æœç´¢ç»“æœæ¡ç›®
.typora-quick-open-item {
    height: 40px;
    border-radius: var(--c-br-s);
    margin-left: 5px;
    margin-right: 5px;
    padding-left: 15px;
}
.typora-quick-open-item:hover {
    background: var(--pn-c-a);
    color: var(--d-fc);
}
.typora-quick-open-item.active {
    box-shadow: @tocItemCurrent_boxShadow;
    background: inherit;
}
.typora-quick-open-item-path {
    font-size: .625em;
}

// ç›®å½•/æ–‡ä»¶èŠ‚ç‚¹
.file-list-item {
    padding: 10px;
    margin-bottom: 2px;
    border: none;
}
.file-tree-node,
.file-list-item-file-name,
.file-list-item-summary {
    font-family: var(--v-fm-tag);
    font-stretch: condensed;
}
// ç›®å½•èŠ‚ç‚¹
.file-tree-node[data-has-sub=true] {
    font-weight: var(--v-fw-bd);
}
.file-tree-node[data-has-sub=false] {
    font-weight: normal;
}
// æ–‡ä»¶èŠ‚ç‚¹
.file-library-file-node {
    border-radius: var(--c-br-s);
}
:is(.file-list-item, .file-library-file-node):hover {
    .genNavCenterStyle(@style) when not (@style = edge) {
        background: var(--pn-c-a) !important;
    }
    .genNavCenterStyle(@style) when (@style = edge) {
        background: var(--db02) !important;
    }
    .genNavCenterStyle(@navCenterStyle);
}
// å½“å‰èŠ‚ç‚¹
:is(.file-list-item, .file-library-file-node).active {
    box-shadow: @tocItemCurrent_boxShadow;
    background: inherit;
}
// ç‚¹å‡»èŠ‚ç‚¹
.file-library-node:not(.file-node-root):focus>.file-node-content {
    outline: 0;
}

.genFileListItemStyle(@style) when (@style = edge) {
    .file-library-file-node.active {
        box-shadow: none;
    }
    .file-list-item.active {
        background-color: var(--item-hover-bg-color);
        color: @buttonForeColor;
    }
}
.genFileListItemStyle(@navCenterStyle);

// æ–‡ä»¶åï¼ˆå«æ‰©å±•åï¼‰
body.@{windows} .file-node-title { // for Win
    margin-top: 0;
}
// æ‰©å±•å
.file-node-title-ext-part {
    color: var(--d-fc-a);
}

// ----------------------------------------
// æºç æ¨¡å¼

.typora-sourceview-on #toggle-sourceview-btn {
    background: revert;
}

#typora-source .CodeMirror {
    font-family: var(--monospace);
}
#typora-source .CodeMirror-lines {
    margin: 0 10px;
    max-width: 100%;
}
#typora-source .CodeMirror pre {
    font-family: var(--v-fm-text);
}
// é—ªåŠ¨å…‰æ ‡
#typora-source .CodeMirror-cursor {
    border-color: var(--a-o-c);
}
.CodeMirror div.CodeMirror-cursor {
    border-width: 2px;
    border-color: var(--a-o-c);
}
// æ ‡é¢˜
#typora-source .cm-header {
    color: var(--h-f);
    font-family: var(--v-fm-tt);
    font-weight: var(--v-fw-tt);
}
// é“¾æ¥
#typora-source .cm-link {
    color: var(--a-o-c);

    font-family: var(--monospace);
    font-weight: normal;
    text-decoration: none;
}
// å›¾ç‰‡è¯­æ³•å†…é“¾æ¥
#typora-source .cm-string+.cm-link,
#typora-source .cm-tag+.cm-link,
#typora-source .cm-overlay+.cm-link {
    color: var(--d-fc-a);
}
// å›¾ç‰‡
#typora-source .cm-tag {
    color: var(--a-c);
    font-family: var(--monospace);
}
// é“¾æ¥å†…å®¹
#typora-source .cm-string {
    color: var(--d-fc-a);
    font-family: var(--monospace);
}
// å¼•ç”¨å—
#typora-source pre.cm-atom {
    background: var(--bq-bg);
}
#typora-source .cm-atom,
#typora-source .cm-atom .cm-number {
    color: var(--d-fc);
}
// æ³¨é‡Šï¼ˆcodeï¼‰
#typora-source .cm-comment {
    font-size: .9em;
    font-family: var(--monospace);
    background: var(--code-bg);
    color: var(--code-t);
}
// ç²—ä½“
#typora-source .cm-strong {
    font-family: var(--v-fm-bd);
}
// åˆ é™¤
#typora-source .cm-del {
    color: var(--d-fc-a);
}
// è¡¨æ ¼è¡Œ
#typora-source pre.cm-table-row {
    font-family: var(--monospace);
}
// å½“å‰ç„¦ç‚¹è¡Œ
#typora-source .CodeMirror-activeline-background {
    border-bottom: @focusStyle;
}
// åˆ—è¡¨åºå·
#typora-source .cm-block-start.cm-variable-2 {
    color: var(--d-fc-a);
    font-family: var(--v-fm-tag);
    font-stretch: condensed;
}

// é”™è¯¯ä¿¡æ¯
.error-message {
    color: var(--a-o-c) !important;
}

// ç¼–è¾‘æ—¶çš„ Markdown è¯­æ³•ç¬¦å·
.md-meta {
    color: var(--a-o-c);
    line-height: 1;
}

// é’ˆå¯¹åœ¨ç¼–è¾‘æ¨¡å¼æ—¶æ— æ•ˆå›¾ç‰‡çš„æ ·å¼
// å¯¼å‡ºåå¯¹åº”çš„æ ·å¼ä¸º .v-img-lost
.md-img-error>.md-meta {
    color: var(--ac-rd-lg);
    font-style: italic;
    border: 2px dashed var(--ac-rd-lg);
    border-radius: var(--c-br-b);
    line-height: @paragraphInnerLineHeight;
    padding: 1px;
}
// è·å¾—ç„¦ç‚¹ç¼–è¾‘
.md-img-error[contenteditable=true]>.md-meta {
    width: initial;
    height: initial;
    display: inline;
}

// æ’é™¤å¤šåª’ä½“ç±»çš„
@errorAudio: ~':is(.md-img-error[data-src*=".mp3"], .md-img-error[data-src*=".m4a"], .md-img-error[data-src*=".ogg"], .md-img-error[data-src*=".wav"])';
@errorVideo: ~':is(.md-img-error[data-src*=".ogv"], .md-img-error[data-src*=".mp4"], .md-img-error[data-src*=".webm"])';
@{errorAudio}>.md-meta,
@{errorVideo}>.md-meta {
    border: none;
    color: var(--h-f);
    border: inherit;
    padding: 5px;
    border-radius: var(--c-br-b);
    background-image: none;
    background-color: var(--pn-c);
    width: initial;
    height: initial;
    display: inline-block;
    visibility: visible;
}
@{errorAudio}>.md-meta:first-of-type::before {
    content: "ğŸ”Š";
}
@{errorAudio}>.md-meta:first-of-type::after {
    content: "( Export HTML to Hear Audio )";
    text-transform: uppercase;
    color: var(--a-o-c);
    font-size: .625em;
    text-align: center;
    display: block;
}
@{errorVideo}>.md-meta:first-of-type::before {
    content: "ğŸ¦";
}
@{errorVideo}>.md-meta:first-of-type::after {
    content: "( Export HTML to Watch Video )";
    text-transform: uppercase;
    color: var(--a-o-c);
    font-size: .625em;
    text-align: center;
    display: block;
}

// é‡æ–°å®šä¹‰ emoji ç¬¦å·åœ¨ç¼–è¾‘æ—¶çš„æ’ç‰ˆ
.md-emoji-span::before {
    vertical-align: baseline;
}

// é’ˆå¯¹ YAML çš„æ ·å¼
@yamlMarginTopBottom: 20px;
@yamlMarginLeftRight: 0;
@yamlOnEditing: ~"@{writeOnEditing}>pre.md-meta-block:first-child";
@{yamlOnEditing} {
    font: var(--v-fw-text) .875em/@paragraphInnerLineHeight var(--monospace); // [style] [weight] [size/[line-height]] [family]
    border-radius: var(--c-br-b);
    padding: 24px 10px 5px 10px;
    color: var(--a-c);
    background: var(--code-bg);
    border: 1px solid var(--std-code-sd);
    margin: 0 @yamlMarginLeftRight @yamlMarginTopBottom;
    height: @defaultLineHeight * 14px * 1 + 24px + 5px; // è¿™é‡Œçš„ 14px ä¸º YAML å­—å·ï¼Œ10px ä¸º YAML è¯­æ³•æç¤ºå­—å·
}
// é’ˆå¯¹ YAML æç¤ºå†…å®¹
@{yamlOnEditing}:empty::before,
@{yamlOnEditing}::before {
    content: "--- YAML Front Matter ---";
    text-transform: uppercase;
    font: @syntaxTipsFont;
    position: absolute;
    color: var(--d-fc);
    opacity: .6;
    background: var(--std-code-sd);
    margin-top: -2em;
    padding: 5px 10px;
    left: 0;
    text-align: center;
    width: 100%;
}
@{yamlOnEditing}.md-focus::before {
    color: @uiForeColor;
    background: var(--v-ui-bg);
    font-weight: var(--v-fw-tag);
}
// å±•å¼€å…¨éƒ¨çš„æŒ‰é’®æ ·å¼
@{yamlOnEditing}::after {
    content: "More content has hidden / æ›´å¤šå†…å®¹å·²è¢«éšè— â–²";
    text-transform: uppercase;
    font: var(--v-fw-bd) .75em var(--v-fm-bd); // [style] [weight] [size/[line-height]] [family]
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding: 5px 10px;
    color: @buttonForeColor;
    border-radius: var(--c-br-b);
    line-height: 1;
    white-space: pre;
    text-align: center;
    height: 50px;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    background: radial-gradient(ellipse 800px 30px at bottom, var(--a-o-c), transparent 20%),
        radial-gradient(ellipse 600px 50px at bottom, var(--v-ui-bg), transparent 40%),
        radial-gradient(ellipse 800px 50px at bottom, var(--v-ui-bg), transparent 50%);
}
@{yamlOnEditing}:hover::after {
    content: "Click to show all content / ç‚¹å‡»æ˜¾ç¤ºå…¨éƒ¨å†…å®¹ â–¼";
    text-transform: uppercase;
    font-size: .875em;
    color: @buttonForeHoverColor;
    background: radial-gradient(ellipse 600px 50px at bottom, var(--a-o-c), transparent 50%),
        radial-gradient(ellipse 800px 50px at bottom, var(--a-o-c), transparent 60%);
}
// é’ˆå¯¹ YAML æ— å†…å®¹æ—¶
@{yamlOnEditing}:empty {
    padding: 5px 10px;
    height: auto;
}
// æç¤ºè¾“å…¥ YAML å†…å®¹
@{yamlOnEditing}:empty::before {
    content: "Input your --- YAML Front Matter ---";
    position: static;
    opacity: .5;
    border-radius: unset;
    background: none;
}
// é’ˆå¯¹ YAML æ— å†…å®¹ï¼Œæˆ–è·å¾—ç„¦ç‚¹åéšè—å±•å¼€å…¨éƒ¨æŒ‰é’®
@{yamlOnEditing}:empty::after,
@{yamlOnEditing}.md-focus::after {
    display: none;
}

// é’ˆå¯¹ YAML / code è·å¾—ç„¦ç‚¹
@{yamlOnEditing}.md-focus, // YAML ç­‰è·å¾—ç„¦ç‚¹
@{writeOnEditing} .md-expand code, // code è·å¾—ç„¦ç‚¹
// é¢„ç½®é¢œè‰²è‰²å·è·å¾—ç„¦ç‚¹
@{writeOnEditing} span:is([md-inline=code],[md-inline=strong],[md-inline=em],[md-inline=highlight],[md-inline=underline])+sub.md-expand .md-plain,
@{writeOnEditing} :is(sup, sub)+sub.md-expand .md-plain,
// å•å…ƒæ ¼é¢„ç½®é¢œè‰²è‰²å·è·å¾—ç„¦ç‚¹
@{writeOnEditing} table :is(th,td)>span>sub:first-child.md-expand .md-plain,
@{writeOnEditing} table :is(th,td)>span>sub:last-child.md-expand .md-plain,
// å¼•ç”¨å—å†…é¢„ç½®é¢œè‰²è‰²å·è·å¾—ç„¦ç‚¹
@{writeOnEditing} blockquote p>sub:only-child.md-expand .md-plain {
    opacity: 1;
    // è¾“å…¥å…‰æ ‡é¢œè‰²
    caret-color: var(--a-o-c);
    box-shadow: var(--v-input-focus-inn-sd), var(--v-input-focus-sd);
    border: none;
    height: auto;
}
@{yamlOnEditing}.md-focus { // YAML ç­‰è·å¾—ç„¦ç‚¹å
    border: none;
    // åœ¨åŸæ¥ margin åŸºç¡€ä¸Šï¼Œè¡¥å¿å›  border å–æ¶ˆåçš„ç©ºé—´å˜åŒ–
    margin: 2px @yamlMarginLeftRight+2px @yamlMarginTopBottom+2px;
}
// æºç æ¨¡å¼ä¸‹çš„ YAML
#typora-source pre.cm-yaml {
    font: var(--v-fw-text) .875em var(--monospace); // [style] [weight] [size/[line-height]] [family]
    background: var(--code-bg);
}

/**************************************
* Header Counters in TOC ç›®å½•ä¸­çš„æ ‡é¢˜åºå·æ ·å¼
**************************************/

/* No link underlines in TOC */

content .md-toc::before {
    content: "â˜° Table of contents / ç›®å½• â˜°";
    text-transform: uppercase;
    font: @syntaxTipsFont;
    color: var(--d-fc);
    opacity: .6;
    background: var(--std-code-sd);
    margin-left: 30px;
    padding: 5px 10px;
    border-radius: var(--c-br-b);
}

// ç›®å½•æ“ä½œæ 
#write .md-toc-tooltip {
    background-color: var(--d-fc);
    line-height: 1.5;
    color: var(--d-bc);
    border: none !important;
    margin-left: 30px;
    padding-left: 10px;
    width: 250px;
    border-radius: var(--v-r-b);
}
#write .md-toc-tooltip>span {
    font-size: .875em;
}
#write .md-toc-tooltip .btn {
    padding: 1px 6px;
    margin: 3px;
}
#write .md-toc-tooltip .btn:hover {
    background-color: var(--item-hover-bg-color);
    color: var(--item-hover-text-color);
}


.md-toc:focus .md-toc-content {
    border-color: var(--border-color);
}

.md-toc-content,
.outline-content {
    counter-reset: h1;
}

.md-toc-h1 {
    margin-left: 0;
    padding-left: 5px;
}
.md-toc-h1,
.outline-h1 {
    counter-reset: h2;
}

.md-toc-h2 {
    margin-left: 0;
    padding-left: 15px;
}
.md-toc-h2,
.outline-h2 {
    counter-reset: h3;
}

.md-toc-h3 {
    margin-left: 0;
    padding-left: 25px;
}
.md-toc-h3,
.outline-h3 {
    counter-reset: h4;
}

.md-toc-h4 {
    margin-left: 0;
    padding-left: 35px;
}
.md-toc-h4,
.outline-h4 {
    counter-reset: h5;
}

.md-toc-h5 {
    margin-left: 0;
    padding-left: 45px;
}
.md-toc-h5,
.outline-h5 {
    counter-reset: h6toc;
}

.md-toc-h6,
.outline-h6 {
    counter-reset: h6toc;
    content: "";
}

// éšè—æ­£æ–‡å†…å®¹çš„ h6
.md-toc-h6 {
    display: none !important;
}

// æ ¹æ®ä¸»é¢˜é…ç½®ï¼Œæ˜¯å¦æ§åˆ¶ç¼–è¾‘æ—¶æ˜¾ç¤ºçš„å¤§çº²å±‚çº§
.genHideOutlineOver() when (isdefined(@hideOutlineOver)) {
    .genHideOutlineOverFor(@hideOutlineOver) when (@hideOutlineOver = 2) {
        .outline-h2 .outline-expander,
        .md-toc-h2 .v-toc-folder {
            visibility: hidden;
        }
        .outline-h3,
        .outline-h4,
        .outline-h5,
        .md-toc-h3,
        .md-toc-h4,
        .md-toc-h5 {
            display: none;
        }
    }
    .genHideOutlineOverFor(@hideOutlineOver);
}
.genHideOutlineOver();

// å¾®è°ƒå¤§çº²èŠ‚ç‚¹çš„ç¼©è¿›
.outline-h1>.outline-item {
	padding-left: .35em;
}
.outline-h2>.outline-item {
	padding-left: 1.35em;
}
.outline-h3>.outline-item {
	padding-left: 2.35em;
}
.outline-h4>.outline-item {
	padding-left: 3.35em;
}
.outline-h5>.outline-item {
	padding-left: 4.35em;
}
.outline-h6>.outline-item {
	padding-left: 4.85em;
    .genSidebarContentStyle(@style) when not (@style = edge) {
        color: var(--toc-h-num-c);
    }
    .genSidebarContentStyle(@navCenterStyle);
    font-size: .875em;
}
.outline-h6>.outline-item>.outline-label::before {
    content: @h6BeforeContent;
    opacity: .6;
}

@coverAfterYAMLforToc: ~"@{writeOnEditing}>pre.md-meta-block:first-child+h6";
@coverWithoutYAMLforToc: ~"@{writeOnEditing}>h6:first-child";
@escbackcoverIdForToc: ~".md-toc>.md-toc-content>.md-toc-h1:last-child";
@{coverAfterYAMLforToc}+@{escbackcoverIdForToc}, // æœ‰ YAML çš„å°é¢æƒ…å†µä¸‹æ’é™¤æ–‡æ¡£å†… TOC çš„ h1(å°åº•) æƒ…å†µ
@{coverWithoutYAMLforToc}+@{escbackcoverIdForToc},  // æ—  YAML çš„å°é¢æƒ…å†µä¸‹æ’é™¤æ–‡æ¡£å†… TOC çš„ h1(å°åº•) æƒ…å†µ
.md-toc-h6 {
    display: none;
    margin-left: 0;
    padding-left: 50px;
}

// ç¼–è¾‘æ—¶å¤§çº²èŠ‚ç‚¹
.outline-label {
    word-break: break-word;
    // ä¸ä¸‹é¢çš„ ::before é…åˆï¼Œå®ç°å¤§çº²èŠ‚ç‚¹æ–‡æœ¬æ¢è¡Œåä¿æŒåœ¨å³ä¾§
    display: flex;
    align-items: flex-start;
    line-height: @tocItemLineHeight;
}
// å®ç°å¤§çº²èŠ‚ç‚¹æ–‡æœ¬æ¢è¡Œåä¿æŒåœ¨å³ä¾§
.outline-label::before {
    flex: 0 0 auto;
    margin-right: 5px;
    color: var(--toc-h-num-c);
}

// å¦‚æœæ ‡é¢˜è‡ªåŠ¨ç¼–å·é¢œè‰²æœ‰è®¾ç½®é€æ˜åº¦ï¼Œåˆ™ç¼–è¾‘æ—¶çš„å¤§çº²ç”Ÿæˆåˆé€‚çš„é€æ˜åº¦
.getOutlineLabel() when not (@contentHeaderNumOpacity = 1) {
    .genSidebarContentStyle(@style) when (@style = edge) {
        .outline-label::before {
            opacity: @contentHeaderNumOpacity;
        }
    }
    .genSidebarContentStyle(@navCenterStyle);
}
.getOutlineLabel();

.md-toc-h1::before,
.outline-h1 .outline-label::before {
    counter-increment: h1;
    content: @h1BeforeContent " ";
}

.md-toc-h1>.md-toc-inner {
    margin-left: 0;
    font-weight: var(--v-fw-toc);
}

.md-toc-h2::before,
.outline-h2 .outline-label::before {
    counter-increment: h2;
    content: @h2BeforeContent " ";
}

.md-toc-h2>.md-toc-inner {
    margin-left: 0;
}

.md-toc-h3::before,
.outline-h3 .outline-label::before {
    counter-increment: h3;
    content: @h3BeforeContent " ";
}

.md-toc-h3>.md-toc-inner {
    margin-left: 0;
}

.md-toc-h4::before,
.outline-h4 .outline-label::before {
    counter-increment: h4;
    content: @h4BeforeContent " ";
}

.md-toc-h4>.md-toc-inner {
    margin-left: 0;
}

.md-toc-h5::before,
.outline-h5 .outline-label::before {
    counter-increment: h5;
    content: @h5BeforeContent " ";
}

.md-toc-h5>.md-toc-inner {
    margin-left: 0;
}

.md-toc-h6::before,
.outline-h6 .outline-label::before {
    counter-increment: h6;
    content: "";
}

.typora-export-show-outline .typora-export-content {
    max-width: none;
    display: inherit;
}

// ç¼–è¾‘æ—¶ï¼Œé…åˆåˆ†æ æ ·å¼ä½¿ç”¨
@{writeOnEditing} hr {
    border: none;
    background: var(--ac-bk-fd);
    height: 2px;
    cursor: crosshair;
}
@{writeOnEditing} hr:hover {
    background: var(--a-o-c);
}
@{writeOnEditing} .md-hr+.md-hr>hr {
    margin-top: -14px;
}

// æ˜ä¿¡ç‰‡ç¼–è¾‘æ—¶æ ·å¼
@{writeOnEditing} blockquote:has(.md-image[data-src*="#card"]>img) {
    padding: 0;
    border-radius: var(--c-br-b);
    border: none;
}
@{writeOnEditing} blockquote p:has(.md-image[data-src*="#card"])+blockquote {
    color: var(--d-fc);
    background-color: var(--pn-c);
    border: none;
    margin: 0;
    padding: 10px;
    border-radius: 0 0 var(--v-r-b) var(--v-r-b-xc);
}

// ====================
// ç¼–è¾‘æ—¶é¢„ç½®é¢œè‰²è‰²å·çš„å…¬å…±æ ·å¼
@colorCode: ~'em>sub:only-child';
@colorCodeMd: ~'span[md-inline=em]>@{colorCode}';
@colorCodeOnStart: ~'span[md-inline=em]:first-child>em>sub:only-child';
// ---
@colorCodeInBlockquote: ~'blockquote p>@{colorCodeOnStart}';
@colorCodeOnPgStart: ~'p>@{colorCodeOnStart}';
@colorCodeOnCellStart: ~'table :is(th,td)>span>@{colorCodeOnStart}';
@colorCodeBeforeSpanFmt: ~'span:is([md-inline=code],[md-inline=strong],[md-inline=em],[md-inline=highlight],[md-inline=underline])+@{colorCodeMd}';
@colorCodeBeforeSupSub: ~':is(sup, sub)+@{colorCodeMd}';
@colorCodeInCell: ~'table :is(th,td)>span>span[md-inline=em]:last-child>em>sub:only-child';

@{writeOnEditing} @{colorCodeInCell}, // å•å…ƒæ ¼ç€è‰²
@{writeOnEditing} @{colorCodeInBlockquote}, // å¼•ç”¨å—ç€è‰²
@{writeOnEditing} @{colorCodeOnPgStart}, // æ–‡æœ¬ç€è‰²ï¼ˆæ®µè½ï¼‰
@{writeOnEditing} @{colorCodeOnCellStart}, // å•å…ƒæ ¼ï¼ˆæ®µè½ï¼‰
@{writeOnEditing} @{colorCodeBeforeSpanFmt}, // æ–‡æœ¬ç€è‰²
@{writeOnEditing} @{colorCodeBeforeSupSub} { // æ–‡æœ¬ç€è‰²ï¼ˆæŒ‡å®šæ ¼å¼ï¼‰
    font: @syntaxTipsFont;
    font-size: 10px;
    font-weight: bold;
    border-radius: 0 4px 4px 4px;
    bottom: 0;
    color: @buttonForeHoverColor;
    background: var(--ac-t2);
    margin: 0 5px 0 1px;
    line-height: @miniLineHeight;
    opacity: .6;
    display: inline-block;
    overflow: hidden;
    width: 0;
    height: 6px;
    padding: 3px;
}
// è¿›å…¥å¯¹åº”å†…å®¹çš„ç¼–è¾‘æ—¶æ‰æ˜¾ç¤º
@{writeOnEditing} .md-focus @{colorCodeInBlockquote}, // å¼•ç”¨å—ç€è‰²
@{writeOnEditing} .md-focus @{colorCodeOnStart}, // æ–‡æœ¬ç€è‰²ï¼ˆæ®µè½ï¼‰ã€å•å…ƒæ ¼ï¼ˆæ®µè½ï¼‰
@{writeOnEditing} .md-expand+@{colorCodeMd},
@{writeOnEditing} .md-expand @{colorCode},
@{writeOnEditing} .md-expand a>@{colorCodeMd} {
    display: initial !important;
}
// æ®µè½å¾®è°ƒ
@{writeOnEditing} @{colorCodeOnPgStart}, // æ–‡æœ¬ç€è‰²ï¼ˆæ®µè½ï¼‰
@{writeOnEditing} @{colorCodeOnCellStart} { // å•å…ƒæ ¼ï¼ˆæ®µè½ï¼‰
    color: var(--d-bc);
    border-radius: 4px 4px 0 4px;
    background: var(--d-fc);
    margin: 0 1px 0 0;
}

// é’ˆå¯¹ å¼•ç”¨å—ç€è‰² çš„å¾®è°ƒ
@{writeOnEditing} @{colorCodeInBlockquote} {
    bottom: 0;
}
// é’ˆå¯¹ æ–‡æœ¬ç€è‰²/å•å…ƒæ ¼ï¼ˆæ®µè½ï¼‰ çš„å‰ç¼€æç¤ºæ ·å¼
@{writeOnEditing} @{colorCodeOnPgStart}::before,
@{writeOnEditing} @{colorCodeOnCellStart}::before {
    content: "Â¶";
    color: var(--d-bc);
    padding-right: 2px;
    opacity: .6;
}
// é’ˆå¯¹ æ–‡æœ¬ç€è‰²ï¼ˆæŒ‡å®šæ ¼å¼ï¼‰ çš„å‰ç¼€æç¤ºæ ·å¼
@{writeOnEditing} @{colorCodeBeforeSpanFmt}::before,
@{writeOnEditing} @{colorCodeBeforeSupSub}::before {
    content: "";
}
// é’ˆå¯¹ å¼•ç”¨å—ç€è‰² çš„å‰ç¼€æç¤ºæ ·å¼
@{writeOnEditing} @{colorCodeInBlockquote}::before {
    content: ">";
    padding-right: 2px;
    opacity: .6;
}

// è¡¨æ ¼åˆ—æ ¼å¼ï¼šå³å¯¹é½
@{writeOnEditing} table th:not([style*=":right"])>span>span:not([md-inline=plain]):only-child::before,
@{writeOnEditing} table th[style*=":right"]>span::before {
    content: "CF/åˆ—æ ¼å¼";
    text-transform: uppercase;
    font: @syntaxTipsFont;
    font-size: 10px;
    display: block;
    margin-top: -.7em;
    opacity: .6;
}

// æœ‰åºã€æ— åºåˆ—è¡¨ä¸‹çš„å›¾ç‰‡ã€éå›¾ç‰‡æ®µè½
#write li .md-p>span:not([class*=md-image]) {
    margin-top: 0;
    margin-bottom: 0;
}
#write li .md-p>span[class*=md-image] {
    margin-bottom: @paragraphPadding;
}

// æ— åºåˆ—è¡¨ä¸‹çš„ä»»åŠ¡æ¸…å•
#write ul>.md-task-list-item { // 1 çº§
    list-style-type: none;
}
#write ul>li>ul>.md-task-list-item { // 2 çº§
    list-style-type: none;
}
#write ul>li>ul>li>ul>.md-task-list-item { // 3 çº§
    list-style-type: none;
}
#write ul>li>ul>li>ul>li>ul>.md-task-list-item { // 4 çº§
    list-style-type: none;
}
#write ul>li>ul>li>ul>li>ul>li>ul>.md-task-list-item { // 5 çº§
    list-style-type: none;
}
#write ul>li>ul>li>ul>li>ul>li>ul>li>ul>.md-task-list-item { // 6 çº§
    list-style-type: none;
}

// ä»»åŠ¡æ¸…å•å¤é€‰æ¡†
@taskListMarginLeft: -1.25em;
li label.checkbox {
    vertical-align: middle;
    position: absolute;
    margin-left: @taskListMarginLeft;
    margin-top: calc(1em - 14px); // å…¶ä¸­ 14px ä¸ºå¤é€‰æ¡†é«˜åº¦
}
.checkbox > svg {
    background-color: var(--d-bc);
    border-radius: 4px;
}

// ä»»åŠ¡æ¸…å•æ–‡æœ¬
.md-task-list-item>p {
    margin-top: 0;
    margin-bottom: 0;
}

.md-diagram-panel {
    border-radius: var(--c-br-b);
    padding: 0;
}

// ====================
// é¡µç­¾ç»„ï¼ˆç¼–è¾‘æ—¶æç¤ºæ ·å¼ï¼‰
@tabGroup_prefix: ~'span[md-inline=em]:only-child>em>sup';
@tabGroup_OnEditing: ~'p>@{tabGroup_prefix}';
.genTabGroupOnEditing(@style) {
    // é¡µç­¾ç»„ TabGroup
    @{writeOnEditing} @{tabGroup_OnEditing} {
        display: inline-block;
        opacity: 1;
        margin-top: @paragraphPadding;
        color: var(--d-fc-a);

        // æ ‡å‡†é£æ ¼æ ·å¼
        .genTagGroupForStyle(@style) when (@style = std) {
            font: @syntaxTipsFont;
            width: calc(100% - 2em);
            padding: @tabGroupPadding @tabGroupPadding 0 @tabGroupPadding;
            box-shadow: 0 -@tabGroupStdBdWidth 0 0 @tabGroupBgColor inset;
            // å§‹ç»ˆå±…ä¸­
            text-align: center;
        }
        // ç®€çº¦é£æ ¼æ ·å¼
        .genTagGroupForStyle(@style) when (@style = simple) {
            font: @syntaxTipsFont;
            width: calc(100% - 2em);
            padding: @tabGroupPadding @tabGroupPadding 0 @tabGroupPadding;
            box-shadow: 0 -@tabGroupStdBdWidth 0 0 @tabGroupBgColor inset;
            // å§‹ç»ˆå±…ä¸­
            text-align: center;
        }
        // ç®€çº¦é£æ ¼æ ·å¼ UP å˜ç§
        .genTagGroupForStyle(@style) when (@style = simple_up) {
            font: @syntaxTipsFont;
            width: calc(100% - 2em);
            .genTabGroupBackground_simpleUp();
            // å§‹ç»ˆå±…ä¸­
            text-align: center;
        }
        // ç°ä»£é£æ ¼æ ·å¼
        .genTagGroupForStyle(@style) when (@style = modern) {
            font: @syntaxTipsFont;
            background: @tabGroupBgColor;
            padding: 0 @tabGroupPadding * 2 0 0;
            border-radius: var(--v-r-si) var(--v-r-si-xc);
            width: max-content;
            max-width: 100%;
            // å§‹ç»ˆå±…ä¸­
            left: 50%;
            transform: translateX(-50%);
        }
        .genTagGroupForStyle(@style);
    }
    @{writeOnEditing} @{tabGroup_OnEditing}::before {
        content: "ğŸ—‚ï¸ Tab Group / é¡µç­¾ç»„";
        text-transform: uppercase;
        font: @syntaxTipsFont;
        color: var(--a-c);
        display: inline-block;

        // æ ‡å‡†é£æ ¼æ ·å¼
        .genTagGroupBeforeForStyle(@style) when (@style = std) {
            padding: @tabItemPadding * 2 @tabGroupPadding * 2;
            margin: 0 10px;
            background: var(--d-bc);
            border: @tabGroupStdBdWidth solid @tabGroupBgColor;
            border-bottom: none;
            border-radius: var(--v-r-s) var(--v-r-s-xc) 0 0;
        }
        // ç®€çº¦é£æ ¼æ ·å¼
        .genTagGroupBeforeForStyle(@style) when (@style = simple) {
            padding: @tabItemPadding * 2 @tabGroupPadding * 2;
            margin: 0 10px;
            border-bottom: 2px solid var(--a-c);
            border-radius: var(--v-r-s) var(--v-r-s-xc) 0 0;
        }
        // ç®€çº¦é£æ ¼æ ·å¼ UP å˜ç§
        .genTagGroupBeforeForStyle(@style)  when (@style = simple_up) {
            padding: @tabItemPadding * 2;
            margin: 0 10px;
            border-top: 2px solid var(--a-c);
            background: var(--d-bc);
        }
        // ç°ä»£é£æ ¼æ ·å¼
        .genTagGroupBeforeForStyle(@style)  when (@style = modern) {
            background: var(--d-bc);
            padding: @tabItemPadding * 2 @tabGroupPadding * 2;
            margin: @tabGroupPadding @tabGroupPadding * 2 @tabGroupPadding @tabGroupPadding;
            border-radius: calc(var(--v-r-si) - @tabGroupPadding) calc(var(--v-r-si-xc) - @tabGroupPadding);
            box-shadow: 0 0 @tabGroupPadding 0 var(--pn-c-a);
        }
        .genTagGroupBeforeForStyle(@style);
    }
}

// ====================
// ç¬¬ 1 é¢˜æ³¨ï¼ˆç¼–è¾‘æ—¶æ ·å¼ï¼‰
// æ³¨æ„ï¼šå› æ ¼å¼ä¸ @menuStepPath_OnEditing æ¥è¿‘ï¼Œæ³¨æ„è°ƒæ•´æ—¶è¿›è¡Œå¤šç‚¹éªŒè¯
//
// é«˜äº®å†…çš„æ–œä½“ï¼Œæˆ–æ–œä½“å†…çš„é«˜äº®
// é’ˆå¯¹é¢˜æ³¨ç®€åŒ–è¯­æ³•çš„æ ·å¼
@cap_prefix: ~'[md-inline=em]:only-child>em>[md-inline=highlight]:only-child>mark';
@cap1_OnEditing: ~'p>@{cap_prefix}';
@cap2_OnEditing: @cap1_OnEditing~'>span[md-inline=em]>em';
@{writeOnEditing} @{cap1_OnEditing} {
    font: normal .875em var(--v-fm-bd);
    color: @captionTextColor;
    background: @captionBackground !important;
    box-shadow: none;
    border-radius: var(--v-r-s) var(--v-r-s) 0 0;
    margin: 2px 0;
    padding: 5px 10px;
    display: inline-block;
    position: relative;
    width: fit-content;
}
// ç¼–è¾‘æ—¶æ·»åŠ äº†é¢˜æ³¨è¯­æ³•åçš„å†…å®¹å¾®è°ƒ
@{writeOnEditing} p:has(@{cap_prefix}) + :is(figure, .md-fences, .mathjax-block) { //}:not([class*="md-fences-math"]):not([class*="md-diagram"]) {
    margin-top: 0;
}
// åˆ—è¡¨ä¸‹çš„å¾®è°ƒ
@{writeOnEditing} li>@{cap1_OnEditing} {
    margin: 0;
}

// é™¤å›¾ç‰‡å¤–ï¼Œæ·»åŠ äº†é¢˜æ³¨è¯­æ³•çš„æç¤º
@{writeOnEditing} @{cap1_OnEditing}::before {
    content: "Caption/é¢˜æ³¨ â–¸ ";
    text-transform: uppercase;
    font: @syntaxTipsFont;
    color: var(--a-c);
}

// å›¾ç‰‡ï¼Œæ·»åŠ äº†é¢˜æ³¨çš„æç¤º
@captionPadding: 5px;
@needTipsImages: ~':has(img[alt]):not([data-src*="#logo"]):not([data-src*="#icon"]):not([data-src*="#card"])';
@captionTipsOnEditing: ~'@{writeOnEditing} .md-image@{needTipsImages}::after';
@{captionTipsOnEditing} {
    content: "Caption/é¢˜æ³¨ â–¸ (... Figure/æ’å›¾ ...)";
    text-transform: uppercase;
    font: @syntaxTipsFont;
    color: var(--a-c);
    background: @captionBackground !important;
    width: fit-content;
    border-radius: 0 0 var(--v-r-s) var(--v-r-s);
    margin: 0;
    padding: @captionPadding 10px;
    display: inline-block;
    position: relative;
}

// ç¼–è¾‘æ—¶ï¼Œä¸€ä¸ªæ®µè½æœ‰å¤šä¸ªå›¾ç‰‡ï¼Œæ·»åŠ äº†é¢˜æ³¨çš„æç¤º
@{writeOnEditing} p > .md-image:not(:only-child)@{needTipsImages} {
    display: inline-block;
}
@{writeOnEditing} p > .md-image:not(:only-child)@{needTipsImages}::before {
    position: absolute;
    margin-top: -(@smallFixedFontSize + @captionPadding * 2);
    width: 100%;
    text-align: center;
}

// --------------------
// ç¬¬ 2 é¢˜æ³¨ï¼ˆç¼–è¾‘æ—¶æ ·å¼ï¼‰
@{writeOnEditing} @{cap2_OnEditing}::before {
    content: " â”‚ B.Caption/åº•éƒ¨é¢˜æ³¨. ";
    text-transform: uppercase;
    font: @syntaxTipsFont;
    color: var(--ac-t1-lg);
}
@{writeOnEditing} .md-expand mark .md-meta {
    color: var(--a-o-c);
    opacity: 1 !important;
}

// ====================
// é¢åŒ…å±‘ï¼ˆåˆ†æ­¥åˆ†çº§ï¼‰æ ·å¼
// æ³¨æ„ï¼šå› æ ¼å¼ä¸ @cap1_OnEditing æ¥è¿‘ï¼Œæ³¨æ„è°ƒæ•´æ—¶è¿›è¡Œå¤šç‚¹éªŒè¯
@stepwisePrefix_OnEditing: ~'span[md-inline=em]';
@stepwiseSuffix_OnEditing: ~'>em>span[md-inline=highlight]>mark';
// è°ƒæ•´è¯¥é€‰æ‹©å™¨æ—¶é¡»åŒæ­¥è°ƒæ•´ vlook.js ä¸­ Stepwise å¯¹åº”çš„é€‰æ‹©å™¨
@triangleWidth: .5em;
@stepwiseTextColor: var(--d-fc);
@{writeOnEditing} p>@{stepwisePrefix_OnEditing}:not(:only-child)@{stepwiseSuffix_OnEditing},
@{writeOnEditing} .td-span>@{stepwisePrefix_OnEditing}@{stepwiseSuffix_OnEditing},
.v-stepwise {
    font: condensed normal @tagFontSize var(--v-fm-tag); // [stretch] [style] [weight] [size/[line-height]] [family]
    line-height: 1;
    color: @stepwiseTextColor;
    box-shadow: none;
    padding: 5px 5px 5px 8px;
    border-radius: var(--v-r-tag) 0 0 var(--v-r-tag);
    border: var(--c-b1);
    position: relative;
    display: inline-block;
    margin-right: 10px;
    background-color: var(--std-code-sd);
    background: var(--std-code-sd) !important;
}
@{writeOnEditing} p>@{stepwisePrefix_OnEditing}:not(:only-child)@{stepwiseSuffix_OnEditing} strong,
@{writeOnEditing} .td-span>@{stepwisePrefix_OnEditing}@{stepwiseSuffix_OnEditing} strong,
.v-stepwise strong {
    font-family: var(--v-fm-tag) !important;
}
@{writeOnEditing} p>@{stepwisePrefix_OnEditing}:not(:only-child)@{stepwiseSuffix_OnEditing}::before,
@{writeOnEditing} .td-span>@{stepwisePrefix_OnEditing}@{stepwiseSuffix_OnEditing}::before,
.v-stepwise::before {
    content: "";
    position: absolute;
    top: -1px;
    right: calc(-1em + 5.5px);
    width: 0;
    height: 0;
    border-top: calc(1em - 1px) solid transparent;
    border-bottom: calc(1em - 1px) solid transparent;
    border-left: calc(1em - 6px) solid var(--d-bc);
}
@{writeOnEditing} p>@{stepwisePrefix_OnEditing}:not(:only-child)@{stepwiseSuffix_OnEditing}::after,
@{writeOnEditing} .td-span>@{stepwisePrefix_OnEditing}@{stepwiseSuffix_OnEditing}::after,
.v-stepwise::after {
    content: '';
    position: absolute;
    top: 0;
    right: calc(-1em + 7px);
    width: 0;
    height: 0;
    border-top: calc(1em - 2px) solid transparent;
    border-bottom: calc(1em - 2px) solid transparent;
    border-left: calc(1em - 7px) solid var(--std-code-sd);
}
// åˆ†æ­¥åˆ†çº§å†…å®¹åˆ†éš”æ ·å¼
.v-stepwise {
    cursor: var(--cur-copy);
}
@arrowWidth: 30%;
.v-stepwise label {
    background-color: @stepwiseTextColor;
    width: @triangleWidth;
    display: inline-block;
    clip-path: polygon(0 0, @arrowWidth 0, 100% 50%, @arrowWidth 100%, 0 100%, 100% - @arrowWidth 50%);
    margin: 0 5px;
    opacity: .3;
}
@{writeOnEditing} p>@{stepwisePrefix_OnEditing}:not(:only-child)@{stepwiseSuffix_OnEditing} a,
@{writeOnEditing} .td-span>@{stepwisePrefix_OnEditing}@{stepwiseSuffix_OnEditing} a,
@{writeOnHTML} .v-stepwise a {
    color: var(--a-c);
    text-shadow: 0 1px var(--d-bc);
    font-weight: var(--v-fw-bd);
}
.genHoverStyle(@for) when (@for = stepwise) {
    @{writeOnEditing} p>@{stepwisePrefix_OnEditing}:not(:only-child)@{stepwiseSuffix_OnEditing} a:hover::after,
    @{writeOnEditing} .td-span>@{stepwisePrefix_OnEditing}@{stepwiseSuffix_OnEditing} a:hover::after,
    .v-stepwise a:hover::after {
        color: var(--a-o-c);
    }
}

/**************************************
* é‡å®šä¹‰TyporaåŸç”Ÿæ ·å¼
**************************************/

// å¼ºåˆ¶æŒ‡å®šä½¿ç”¨è¢«ä¿®æ”¹è¿‡åçš„ --bg-colorï¼Œç¡®ä¿èƒŒæ™¯å›¾ç‰‡èƒ½åœ¨ Typora ç¼–è¾‘æ—¶æ­£å¸¸æ˜¾ç¤º
@{writeOnEditing} {
    background: var(--d-bc) var(--d-bi);
}

@{writeOnEditing} img {
    padding: 0;
    border: none;
}

#write {
    max-width: 100%;
    margin: 0 auto;
    padding: @writePaddingRight;
}

// ------------------------------
// ç”Ÿæˆæ­£æ–‡å›ºå®šå®½åº¦æ—¶è¾¹ç¼˜æ ·å¼
.genFillWidthBorder(@border) when (@border = shadow) {
    box-shadow: 0 0 5px 0 #0000001A;
}
.genFillWidthBorder(@border) when (@border = line) {
    outline: var(--v-fl-bd);
}

// ç”Ÿæˆæ­£æ–‡å®½åº¦é€‚é…æ˜¾ç¤ºæ ·å¼
.genFillWidth(@fillMode) {
    // æƒ…å†µ-1: ç¼–è¾‘æ—¶å§‹ç»ˆä¿æŒå›ºå®šå®½åº¦
    .genFillWidthFor(@fillMode) when (@fillMode = fix) {
        @{writeOnEditing} {
            width: var(--v-write-w);
            .genFillWidthBorder(@panelBorder);
        }
    }
    // æƒ…å†µ-2: ç¼–è¾‘æ—¶æ ¹æ®æŒ‡å®šæ¡ä»¶å¯ç”¨é€‚é…å®½åº¦
    .genFillWidthFor(@fillMode) when (@fillMode = auto) {
        body[class*=pin-outline] @{writeOnEditing}, // ç¼–è¾‘æ—¶ï¼Œå¦‚æ”¶èµ·äº†å·¦ä¾§é¢æ¿
        body:not([class*=on-focus-mode]) @{writeOnEditing} { // ç¼–è¾‘æ—¶ï¼Œå¦‚å¯ç”¨äº†ã€Œä¸“æ³¨æ¨¡å¼ï¼ˆFocus Modeï¼‰ã€
            width: var(--v-write-w);
            .genFillWidthBorder(@panelBorder);
        }
        body:not([class*=pin-outline]) @{writeOnEditing}, // ç¼–è¾‘æ—¶ï¼Œå¦‚æ”¶èµ·äº†å·¦ä¾§é¢æ¿
        body[class*=on-focus-mode] @{writeOnEditing} { // ç¼–è¾‘æ—¶ï¼Œå¦‚å¯ç”¨äº†ã€Œä¸“æ³¨æ¨¡å¼ï¼ˆFocus Modeï¼‰ã€
            width: auto;
        }
        body[class*=on-focus-mode] content::before { // ç¼–è¾‘æ—¶ï¼Œå¦‚å¯ç”¨äº†ã€Œä¸“æ³¨æ¨¡å¼ï¼ˆFocus Modeï¼‰ã€
            display: none !important;
        }
    }
    // æƒ…å†µ-3: ç¼–è¾‘æ—¶å§‹ç»ˆé€‚é…å®½åº¦
    .genFillWidthFor(@fillMode) when (@fillMode = full) {
        @{writeOnEditing} {
            width: auto;
            box-shadow: none;
        }
        content::before {
            display: none !important;
        }
    }
    .genFillWidthFor(@fillMode);

    // é’ˆå¯¹å¯¼å‡ºåçš„å¤„ç†
    .typora-export-content.fill-width #write.max {
        margin-left: var(--v-write-ml-def) !important;
        width: auto;
        box-shadow: none;
        outline: none;
    }
    // å¯¼èˆªä¸­å¿ƒéšè—åçš„å¾®è°ƒ
    .typora-export-content.fill-width #write.max.navhidden {
        margin-left: 0 !important;
    }
}
.genFillWidth(@thmFillWidthMode);

#write>:is(ul,ol):first-child {
    margin-top: 30px;
}

// ------------------------------
// ç¼–è¾‘æ—¶çš„å¼•ç”¨å—æŠ˜å ï¼ˆdetailsã€summaryï¼‰
@summarySyntax: ~"blockquote>h6:first-child";
@{writeOnEditing} @{summarySyntax} {
    color: @h7Color;
    font: condensed var(--v-fw-toc) @h7FontSize var(--v-fm-toc); // [stretch] [style] [weight] [size/[line-height]] [family]
    padding: 0 0 .3125em 0;
    margin-bottom: .3125em;
    text-align: left;
    justify-content: left;
    display: flex;
    align-items: center;
    vertical-align: middle;
    white-space: pre-wrap;
    line-height: 1;
    border-radius: 0;
    width: 100%;
}
// åœ¨åˆ—è¡¨ã€å¼•ç”¨å—å†…æ—¶å¾®è°ƒ
@{writeOnEditing} :is(li, blockquote) @{summarySyntax},
#write :is(li, blockquote, details) summary {
    text-align: left;
    justify-content: left;
}
@{writeOnEditing} @{summarySyntax}::before {
    content: "" !important;
    background-color: var(--d-fc);
    mask: url("data:image/svg+xml,%3Csvg width='18' height='18' viewBox='0 0 18 18' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M9 0a9 9 0 1 1 0 18A9 9 0 0 1 9 0zm1 3H8v5H3v2h5v5h2v-5h5V8h-5V3z' fill='%23000' fill-rule='evenodd'/%3E%3C/svg%3E") no-repeat center;
    position: relative;
    display: inline-block;
    overflow: visible;
    border-radius: 0;
    width: 20px;
    height: 20px;
    font-size: 1.2em;
    margin-right: 5px;
    transition: all var(--v-trans-dur) ease-out;
    transform: rotate(45deg);
    opacity: .6;
}

// ç”Ÿæˆç¼–è¾‘æ—¶å¼•ç”¨å—æŠ˜å æ ·å¼
// å§‹ç»ˆæ˜¾ç¤º
.genSummaryOnEditing(@mode) when (@mode = open) {
    @{writeOnEditing} @{summarySyntax} {
        border-bottom: @quoteTitleBorderWidth solid var(--ac-bk-fd);
    }
}
// è¾“å…¥ç¼–è¾‘æ—¶è‡ªåŠ¨å±•ç¤ºï¼Œå®Œæˆåè‡ªåŠ¨æ”¶èµ·
.genSummaryOnEditing(@mode) when (@mode = auto) {
    @{writeOnEditing} @{summarySyntax}::before {
        transform: unset;
        opacity: 1;
    }

    // ç¼–è¾‘æ—¶è‡ªåŠ¨æŠ˜å æ”¶èµ·
    @hasSummarySyntax: ~"blockquote:has(>h6:first-child)";
    @{writeOnEditing} @{hasSummarySyntax} {
        overflow: hidden;
        height: 2.625em;
    }
    @{writeOnEditing} @{hasSummarySyntax} :is(blockquote,.md-alert)::before { // hr åˆ†æ å†…å®¹æç¤º
        display: none;
    }
    // å¼•ç”¨å†…çš„æŠ˜å 
    @{writeOnEditing} :is(li, blockquote) @{hasSummarySyntax} {
        height: 1.25em;
    }
    // ç¼–è¾‘æ—¶ä»»æ„å­å…ƒç´ è·å¾—ç„¦ç‚¹åï¼Œè‡ªåŠ¨å±•å¼€
    @summaryFocusOnEditing: ~"@{hasSummarySyntax}:has(.md-focus)";
    @{writeOnEditing} @{summaryFocusOnEditing} {
        height: auto;
    }
    @{writeOnEditing} @{summaryFocusOnEditing} :is(blockquote,.md-alert)::before { // hr åˆ†æ å†…å®¹æç¤º
        display: block;
    }
    @{writeOnEditing} @{summaryFocusOnEditing}>h6:first-child {
        border-bottom: @quoteTitleBorderWidth solid var(--ac-bk-fd);
    }
    @{writeOnEditing} @{summaryFocusOnEditing}>h6:first-child::before {
        transform: rotate(45deg);
        opacity: .6;
    }
}

// å¤šè¡Œä»£ç æ ·å¼ï¼ˆæ’é™¤ ```mathã€```mermaid è¯­æ³•ï¼‰
#write .md-fences:not([class*=md-fences-math]):not([class*=md-diagram]) {
    color: var(--d-fc);
    font-family: var(--v-fm-code);
    border-radius: var(--c-br-b);
    border: @imgBorderWidth solid var(--std-code-sd);
    margin: @paragraphPadding 0 0;
    background-color: var(--std-code-sd);
}
// é’ˆå¯¹ç”Ÿæˆé¢˜æ³¨åçš„å¾®è°ƒ
.v-caption > .md-fences {
    margin: 0 !important;
}

// ä»£ç å—è·å¾—ç„¦ç‚¹
@{writeOnEditing} .md-fences.md-focus {
    box-shadow: var(--v-input-focus-sd);
    border-color: var(--a-c);
}
@{writeOnEditing} .md-fences.md-focus .md-diagram-panel {
    margin-top: 4px;
}
.md-fences.md-diagram {
    box-shadow: none;
}
pre.md-fences-advanced.md-focus .md-fences-adv-panel {
    border: none;
}
.md-fences-advanced:not(.md-focus) {
    background: none;
}

// ç¼–è¾‘æ—¶ ```math è¯­æ³•é¢æ¿é¢œè‰²
@{writeOnEditing} .md-fences-math[lang=math]>.md-fences-adv-panel {
    background-color: var(--d-bc);
}

// è¡Œé—´å…¬å¼ã€HTML ä»£ç çš„å³ä¸Šè§’æ ‡ç­¾
@{writeOnEditing} .md-rawblock .md-rawblock-tooltip {
    border-radius: var(--v-r-s) var(--v-r-s) 0 0;
}
// è¡Œé—´å…¬å¼å®¹å™¨
@{writeOnEditing} .md-fences-math[lang=math] .md-diagram-panel-preview { // ```math å…¬å¼è¯­æ³•
    font-size: 1.25em;
}

// ç¼–è¾‘æ—¶å¼•ç”¨å—æŠ˜å æ ‡é¢˜ä¸‹ç´§è·Ÿçš„å†…å®¹
@{writeOnEditing} blockquote>h6+:is(.md-fences, figure) {
    margin-top: 1em;
}

// é’ˆå¯¹ Windows ç‰ˆ Typora åœ¨å¤§çº²ä¸‹æ»šåŠ¨åæ˜¾ç¤ºçš„æœç´¢é¢æ¿ï¼ˆå¤§çº²ã€æ–‡ä»¶åˆ—è¡¨æ˜¾ç¤ºæœç´¢åï¼‰
:is(.ty-show-outline-filter, .ty-show-search) #file-library-search {
    margin-top: 10px;
}
// é’ˆå¯¹ macos & Windows ç‰ˆ Typora åœ¨å¤§çº²ä¸‹æ»šåŠ¨åæ˜¾ç¤ºçš„æœç´¢é¢æ¿
.ty-sidebar-search-panel {
    background: var(--d-bc);
    box-shadow: var(--v-input-focus-inn-sd), var(--v-input-focus-sd);
    border: none;
    padding: 0 10px;
}
body.@{macos} .ty-sidebar-search-panel {
    border-radius: var(--b-br-b);
    height: @sidebarTabHeight;
}
@focusShadowWidth: 4px;
@searchPanelHeight: 36px;
body.@{windows} #file-library-search-panel {
    border-radius: var(--b-br-s);
    height: @searchPanelHeight;
    margin: @focusShadowWidth 10px @focusShadowWidth;
}
// æœç´¢é¢æ¿å›½çš„è¾“å…¥æ§ä»¶
#file-library-search-input {
    // æ ·å¼ä¸ .v-textfield-focus ä¿æŒä¸€è‡´
    .genTextfieldCommonStyle();
}
body.@{macos} #file-library-search-input {
    margin: 8px;
}
body.@{windows} #file-library-search-input {
    margin: @focusShadowWidth @focusShadowWidth @focusShadowWidth 0;
}
#close-outline-filter-btn {
    line-height: @searchPanelHeight - @focusShadowWidth; // æ¯” #file-library-search-panel é«˜åº¦å°‘ 4px
    width: 32px; // ä¸ line-height ä¿æŒä¸€è‡´
    top: 1px;
    right: 1px;
}

// é’ˆå¯¹ Quick Open
#typora-quick-open-input input:focus,
// è¾“å…¥æ§ä»¶
.form-control:focus {
    border-color: var(--v-input-focus-border);
    box-shadow: var(--v-input-focus-sd);
}

/**************************************
* æ•°å­¦å…¬å¼
**************************************/

@codeTooltipBg: var(--d-fc);
@codeTooltipText: var(--d-bc);
mjx-container>svg svg[data-labels] g,
.code-tooltip mjx-container>svg svg[data-labels] g {
    fill: var(--d-fc-a);
}

// ç¼–è¾‘æ—¶ï¼Œè¡Œå†…æ•°å­¦å…¬å¼
// é’ˆå¯¹ macOS
body.@{macos} @{writeOnEditing} .md-inline-math mjx-container {
    font-size: .66em;
}

// é¢„è§ˆï¼šå…¬å¼ã€è„šæ³¨
// .code-tooltip,
@{writeOnEditing} .md-fences-math[lang=math].md-focus .md-fences-adv-panel {
    color: var(--d-bc);
    background: var(--d-fc);
    font-weight: bold;
}
@{writeOnEditing} .md-fences-math[lang=math].md-focus .md-fences-adv-panel,
@{writeOnEditing} .md-fences .code-tooltip { // ä»£ç å—å†…çš„è¯­è¨€
    border-radius: calc(var(--v-r-b) - 2px) calc(var(--v-r-b-xc) - 2px) !important;
    bottom: 0;
    background: var(--d-fc);
}
.code-tooltip {
    border-radius: var(--v-r-b) var(--v-r-b-xc) !important;
    padding: 2px 5px !important;
    margin-right: @writePaddingRight;
    // color: var(--d-bc);
    // font-weight: bold;
    font-size: .875em;
    border-radius: var(--v-r-b) !important;
}

// è„šæ³¨æç¤ºå®¹å™¨çš„æ ·å¼
.code-tooltip.md-hover-tip {
    // -webkit-backdrop-filter: blur(5px);
    // backdrop-filter: blur(5px);
    // background: linear-gradient(0deg, var(--df06) 30%, var(--df10));
    color: var(--d-fc);
    border: 1px solid var(--ac-t2);
    background: var(--d-bc);
    box-shadow: 0 4px 12px 6px var(--ac-t2-fd);//var(--v-fl-sd);
}
// è„šæ³¨æç¤ºå†…å®¹çš„æ ·å¼
.md-f-tooltip .code-tooltip-content {
    border-radius: var(--v-r-b) !important;
    line-height: @defaultLineHeight;
    opacity: 1;
    // background: none;
}
// .code-tooltip-content a {
//     color: var(--d-bc) !important;
//     border-bottom: 1px solid currentColor;
// }

// æç¤ºçš„ç®­å¤´
.md-hover-tip .md-arrow {
    opacity: 1;
}
.md-hover-tip .md-arrow::after {
    // background: var(--df10);
    background: var(--d-bc);
    box-shadow: 0 4px 12px 6px var(--ac-t2-fd);//var(--v-fl-sd);
    border: 1px solid var(--ac-t2);
    width: 12px;
    height: 12px;
    z-index: 0;
}

// å…¬å¼å†…å®¹
.code-tooltip mjx-container>svg g,
@{writeOnEditing} .md-fences-math[lang=math].md-focus .md-fences-adv-panel mjx-container>svg g {
    fill: var(--d-bc);
}

// ä»£ç å—é¢æ¿
#write .md-fences-adv-panel {
    margin-top: 0;
    position: relative;
}
// å¯¼å‡ºåå¯¹ mermaid å›¾è¡¨çš„å¾®è°ƒ
@{writeOnHTML} .md-fences-adv-panel {
    margin-top: @paragraphPadding;
}

.md-math-container { // æ ‡å‡†å…¬å¼è¯­æ³•
    border-radius: var(--v-r-b) 0 var(--v-r-b) var(--v-r-b-xc);
    font-size: 1.25em;
}

.md-diagram-panel-preview {
    padding-top: 0;
}

// è¡Œé—´å…¬å¼åŒºï¼ˆ```math è¯­æ³•ï¼‰
#write .md-fences:not([class*=md-diagram]), // æ’é™¤ ```mermaid
.md-math-block { // $$ è¯­æ³•
    border-radius: var(--c-br-b);
    border: @captionContentBorder;
    background-color: var(--d-bc);
}
// é’ˆå¯¹å¯¼å‡ºåï¼ˆwrite ä¸ vlook çš„èŒƒå›´ï¼‰
.typora-export :is(.md-math-block, .md-fences-math) {
    margin: 0;
    padding: 1rem;
    width: auto;
}
.typora-export :is(.md-math-block, .md-fences-math) mjx-assistive-mml {
    display: none !important;
}

// é’ˆå¯¹ HTML ä»£ç å—
@{writeOnEditing} .md-htmlblock {
    margin-top: 0;
}
@{writeOnEditing} .md-htmlblock-container {
    border-radius: var(--v-r-b) 0 var(--v-r-b) var(--v-r-b-xc) !important;
}

// é’ˆå¯¹ HTML ä»£ç å—å¤–æ¡†
@{writeOnEditing} .md-htmlblock-panel,
@{writeOnEditing} .md-htmlblock-panel .md-rawblock-control:not(.md-rawblock-tooltip) {
    border-radius: var(--v-r-b) 0 var(--v-r-b) var(--v-r-b-xc);
}
// é’ˆå¯¹ HTML ä»£ç å—å†…æ¡†
@{writeOnEditing} .md-htmlblock-panel .md-rawblock-control:not(.md-rawblock-tooltip) .CodeMirror.cm-s-inner:not([lang=math]) {
    border-radius: calc(var(--v-r-b) - 4px) 0 calc(var(--v-r-b) - 4px) calc(var(--v-r-b-xc) - 4px);
}
// é’ˆå¯¹ HTML ä»£ç å—å†…è¾“å…¥æ¡†
@{writeOnEditing} .md-htmlblock-panel .md-rawblock-input {
    padding: 4px;
}

// å…¬å¼ç¼–è¾‘ç»„ä»¶
@{writeOnEditing} .md-mathblock-panel .md-rawblock-before {
    border-radius: var(--v-r-b) 0 0 0 !important;
}
@{writeOnEditing} .md-mathblock-panel .md-rawblock-control:not(.md-rawblock-tooltip) {
    border-radius: 0;
}
@{writeOnEditing} .md-mathblock-panel .CodeMirror-scroll {
    border-radius: 0;
}
@{writeOnEditing} .md-mathblock-panel .md-rawblock-after {
    border-radius: 0 0 var(--v-r-b) var(--v-r-b-xc) !important;
}

.md-math-block.md-focus .CodeMirror-sizer {
    box-shadow: var(--v-input-focus-inn-sd);
}

// è¡Œå†…å…¬å¼ï¼ˆç¼–è¾‘æ—¶ï¼‰
@inline_script: ~".md-expand .md-inline-math-container>script";
@{inline_script} {
    box-shadow: var(--v-input-focus-inn-sd), var(--v-input-focus-sd);
}
