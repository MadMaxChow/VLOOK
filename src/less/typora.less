/**************************************
 *
 * VLOOK CSS - Typora 编辑时内置样式
 * (配合 base.less 进行使用)
 *
 * V24.1
 * 2024-05-11
 * powered by MAX°孟兆
 *
 * QQ Group: 805502564
 * Telegram Channel: t.me/vlook_markdown
 * email: maxchow@qq.com
 *
 * https://github.com/MadMaxChow/VLOOK
 * https://gitee.com/madmaxchow/VLOOK
 *
 *************************************/

:root {
    --cm-keyword-lg: #770088;
    --cm-variable-lg: var(--d-fc-lg);
    --cm-variable-2-lg: #0055AA;
    --cm-variable-3-lg: #008855;
    --cm-tag-lg: #9ab696;
    --cm-attribute-lg: #0000CC;
    --cm-string-lg: #AA1111;
    --cm-string-2-lg: #FF5500;
    --cm-comment-lg: #AA5500;
    --cm-header-lg: #0000FF;
    --cm-quote-lg: #009900;
    --cm-hr-lg: #999999;
    --cm-link-lg: #0000CC;
    --cm-negative-lg: #DD4444;
    --cm-positive-lg: #229922;
    --cm-meta-lg: #555555;
    --cm-bulidin-lg: #3300AA;
    --cm-bracket-lg: #999977;
    --cm-atom-lg: #221199;
    --cm-number-lg: #116644;

    --cm-keyword-dk: #C88FD0;
    --cm-variable-dk: var(--d-fc-dk);
    --cm-variable-2-dk: #9FBAD5;
    --cm-variable-3-dk: #1CC685;
    --cm-tag-dk: #7DF46A;
    --cm-attribute-dk: #7575E4;
    --cm-string-dk: #D26B6B;
    --cm-string-2-dk: #FF5500;
    --cm-comment-dk: #DA924A;
    --cm-header-dk: #8D8DF0;
    --cm-quote-dk: #57AC57;
    --cm-hr-dk: #D8D5D5;
    --cm-link-dk: #D3D3EF;
    --cm-negative-dk: #D95050;
    --cm-positive-dk: #50E650;
    --cm-meta-dk: #B7B3B3;
    --cm-bulidin-dk: #F3B3F8;
    --cm-bracket-dk: #999977;
    --cm-atom-dk: #84B6CB;
    --cm-number-dk: #64AB8F;

    --cm-keyword: var(--cm-keyword-lg);
    --cm-variable: var(--cm-variable-lg);
    --cm-variable-2: var(--cm-variable-2-lg);
    --cm-variable-3: var(--cm-variable-3-lg);
    --cm-tag: var(--cm-tag-lg);
    --cm-attribute: var(--cm-attribute-lg);
    --cm-CodeMirror-cursor: @aHoverColor;
    --cm-string: var(--cm-string-lg);
    --cm-string-2: var(--cm-string-2-lg);
    --cm-comment: var(--cm-comment-lg);
    --cm-header: var(--cm-header-lg);
    --cm-quote: var(--cm-quote-lg);
    --cm-hr: var(--cm-hr-lg);
    --cm-link: var(--cm-link-lg);
    --cm-negative: var(--cm-negative-lg);
    --cm-positive: var(--cm-positive-lg);
    --cm-meta: var(--cm-meta-lg);
    --cm-bulidin: var(--cm-bulidin-lg);
    --cm-bracket: var(--cm-bracket-lg);
    --cm-atom: var(--cm-atom-lg);
    --cm-number: var(--cm-number-lg);

    // --------------------
    // Typora UI 颜色变量
    --bg-color: var(--d-bc-lg); // 替换为透明色，以在 Typora 编辑时正常显示背景图片
    --side-bar-bg-color: var(--d-bc-lg);
    --text-color: var(--d-fc-lg);

    --border-color: var(--tbl-bd);

    // 选择的文本前景
    // --select-text-font-color: var(--d-fc);
    // 选择的文本背景
    --select-text-bg-color: var(--v-selection-color);

    --search-select-bg-color: var(--v-selection-color);

    --control-text-color: var(--d-fc-lg);
    --control-text-hover-color: var(--d-fc-lg);
    --window-border: 1px solid var(--pn-c-lg);

    --active-file-bg-color:  var(--d-bc-lg);
    --active-file-bder: var(--select-text-bg-color);
    --active-file-text-color: var(--d-fc-lg);

    // --item-hover-bg-color: var(--d-fc-a);
    // --item-hover-text-color: var(--d-bc);
    --item-hover-bg-color: @aHoverColor;
    --item-hover-text-color: @buttonForeHoverColor;

    --primary-color: @themeBgColor;

    --rawblock-edit-panel-bd: var(--pn-c);
}

// 选中内容的样式
::selection {
    background: var(--v-selection-color) !important;
    fill: var(--d-fc) !important; // for SVG text
}

// Typora 导出时自带的侧边栏
.typora-export-sidebar {
    display: none !important;
}

// 保留原始 fa 图标强制使用指定的字体
.fa {
    font-family: FontAwesome, sans-serif !important;
}

.md-toc-inner {
    text-decoration: none;
    box-shadow: none;
}

// 大纲 / 文件面板图标
.ty-icon,
.file-node-icon,
.outline-expander::before,
.ion-ios7-search-strong::before,
#md-notification::before,
.ion-chevron-left:before,
.ion-checkmark::before,
.fa-code:before,
#top-titlebar :is(.ty-menu-btn-area-sub1, .ty-menu-btn-area-sub2, .ty-menu-btn-area-sub3),
.fa-sort-desc:before,
.fa-sort-asc:before {
    color: var(--h-f);
}
.ion-folder:before {
    color: var(--d-fc-lg);
}

// .outline-expander {
//     cursor: var(--cur-pointer);
// }

content>.auto-suggest-container li:hover {
    color: var(--item-hover-text-color);
}

#top-titlebar .ty-icon {
    color: var(--d-fc);
}
.megamenu-opened #top-titlebar .ty-icon {
    color: var(--d-fc-lg);
}

.ty-menu-btn-area>span {
    border-top-width: 2px;
}
.ty-sidebar-search-panel svg.icon {
    fill: var(--h-f);
}
.fa-folder::before,
.fa-caret-right::before {
    color: var(--d-fc-a);
}
.md-resize-table .ty-icon,
.md-align-gp .ty-icon {
    color: var(--a-color);
}
.ion-android-arrow-back:before {
    color: @buttonForeColor;
}

// 表格编辑栏
.ty-table-edit {
    // margin-left: 0;
    // margin-top: 0 !important;
    margin-top: -26px;
    margin-left: 0;
    background: @buttonBgColor;//var(--d-fc);
    // border-radius: 0 0 var(--v-r-b) var(--v-r-b);
    // border-radius: var(--v-r-b) var(--v-r-b) @tableBorderRadius @tableBorderRadius;
    border-radius: var(--v-r-b) var(--v-r-b) 0 var(--v-r-b);
    padding: 0 3px 2px 3px;
    width: auto !important;
    // left: 50%;
    // transform: translateX(-50%);
    z-index: 3000;
}

.ty-table-edit .ty-icon {
    color: @buttonForeColor;
    line-height: 1;
}

// 表格行列数调整面板样式
.md-resize-table-th .popover {
    width: max-content;
    padding-bottom: 10px !important;
}
.md-grid-board-wrap .popover-title {
    padding-top: 10px;
}
.ty-table-edit div {
    width: max-content;
    padding: 0 5px;
}
.md-grid-board {
    border-radius: 0 !important;
}
.md-grid-board a:hover,
.md-grid-board a.md-active {
    border-color: var(--ac-t1) !important;
    background: var(--ac-t1) !important;
    box-shadow: none !important;
}
.md-grid-board :is(tr, tr:hover)::before {
    content: "" !important;
}
.md-grid-board tr>:is(th, td),
.md-grid-board tr>:is(th, td):first-child {
    padding: 5px !important;
    background: var(--ac-t1) !important;
    box-shadow: none !important;
}

// 调整表格大小
.md-resize-table {
    margin-right: 50px;
}

// 删除表格
.md-delete-table {
    margin-left: 50px;
}
// .ty-icon.ty-delete {
//     color: @aHoverColor;
// }

.md-notification-container {
    background: var(--d-bc) !important;
}

// 导出成功后通知栏图标
#md-notification::before {
    top: 16px;
}

// 导出成功后通知栏链接图标
#md-notification a {
    color: var(--a-color);
    text-decoration: none;
    font-weight: var(--v-f-w-bd);
}
#md-notification :is(a:hover, a.default-btn:hover) {
    color: @aHoverColor;
}

.btn,
.searchpanel-search-option-btn,
.outline-item,
.file-node-content,
.outline-label,
.outline-expander {
    cursor: var(--cur-pointer);
}

#md-notification .btn {
    border-radius: var(--v-r-s);
    margin-left: 5px;
    color: @buttonForeColor !important;
    background: @buttonBgColor !important;
}
#md-notification .btn:hover {
    color: @buttonForeHoverColor !important;
    background: @aHoverColor !important;
}
#md-notification .btn-default {
    font-weight: var(--v-f-w-title);
}

// 注释
.md-comment {
    color: var(--d-fc-a);
    font-family: inherit;
}

// for Win 一体化菜单
body.os-windows :is(.megamenu-menu, .megamenu-menu-header-title-menu) {
    background: @buttonBgColor;
    color: @buttonForeColor;
}
.megamenu-menu-header {
    border-bottom-color: @buttonForeColor;
    // border-bottom-color: @docLibButtonBgColor;
}
#megamenu-back-btn {
    border-color: @docLibButtonBgColor;
    // border-color: @buttonBgColor;
}
.megamenu-menu-panel {
    color: var(--d-fc-a-lg);
}

.megamenu-menu-list li a {
    color: @buttonForeColor;
}
.megamenu-menu-list li a.active {
    background: @aActiveColor !important;
    color: @buttonForeHoverColor;
}
.megamenu-menu-list:not(.saved) li a:hover {
    background: @aHoverColor !important;
    color: @buttonForeHoverColor;
}

// 用于在 Typora Windows 版本的一体化菜单中，进行主题选择时的预览效果
body:not([class]) :is(h1,h2,h3,h4,h5,h6) {
    color: var(--h-f);
}

// 表格工具栏按钮组、按钮
.btn-group .btn+.btn {
    margin-left: 0;
}
.btn.active {
    border-color: var(--d-fc);//@buttonBgColor;
    background-color: var(--d-bc);//@buttonBgColor;
}
// 当前选中状态
.btn.active>.ty-icon::before {
    color: var(--d-fc);//@buttonForeColor;
}

.btn,
.sidebar-footer-main-item-label {
    font-family: var(--v-f-fm-bd);
    background: none;
}

.btn,
.megamenu-content input {
    border-radius: var(--v-r-s);
    color: var(--d-fc);
}
.megamenu-section input {
    background: var(--d-bc-lg);
    color: var(--d-fc-lg);
}

.megamenu-content table {
    color: var(--d-fc-lg);
}

.megamenu-section :is(.long-btn, .btn) {
    border-radius: var(--v-r-s);
    color: var(--d-fc-lg);
}
.megamenu-section :is(.long-btn:hover, .btn:hover) {
    color: var(--d-fc-lg) !important;
    background: var(--blockquote-bg-lg);
}

.megamenu-menu-header:focus,
.megamenu-menu-header:hover,
.megamenu-menu-header:hover #megamenu-menu-header-title {
    color: @buttonForeColor;
}

.btn-primary {
    color: @buttonForeColor;
    background: @buttonBgColor;
    font-weight: var(--v-f-w-title);
}
.btn-primary:hover {
    background: @aHoverColor;
}
.btn-primary:active {
    background: @aActiveColor;
}

// for Win 左侧面板标签底部当前选中的边框
body.os-windows .active-tab-files #info-panel-tab-file .info-panel-tab-border,
body.os-windows .active-tab-outline #info-panel-tab-outline .info-panel-tab-border {
    background: @buttonBgColor;
    height: 2px;
}

.md-image-src-span, // 图片链接
.md-link .md-url { // 链接
    // color: var(--a-color);
    color: var(--d-fc-a);
    font-family: var(--monospace);
    font-weight: var(--v-f-w-text);
    text-decoration: none;
}
kbd .md-image-src-span,
kbd .md-link .md-url {
    color: var(--pn-c);
}

// 图片相关按钮
.md-image-btn {
    background: @buttonBgColor;
}
.md-image-btn:hover {
    background: @aHoverColor;
}
.md-image-input-src-btn {
    line-height: @defaultLineHeight;
    height: 30px;
    background: var(--pn-c);
    box-shadow: 0 0 0 1px @buttonBgColor inset;
    border-radius: var(--v-r-si) 0 0 var(--v-r-si);
}
.md-image-input-src-btn::before {
    color: var(--d-fc-a);
}
.md-image-input-src-btn.selected,
.md-image-input-src-btn:hover {
    background: none;
}
.md-image-pick-file-btn {
    line-height: @defaultLineHeight;
    height: 30px;
    border-left-color: var(--d-bc);
    border-radius: 0 var(--v-r-si) var(--v-r-si) 0;
}
// for Win
body.os-windows :is(.md-image-input-src-btn, .md-image-pick-file-btn) {
    line-height: @paragraphInnerLineHeight;
}

// br 回车
.hide-br-and-line-break .md-expand .md-br-content,
.md-raw-inline {
    font-size: .75em;
    color: @buttonBgColor;
}

// HTML 标签
.md-html-inline .md-meta {
    font-size: .75em;
    font-weight: normal;
    opacity: .6 !important;
}
.md-html-inline kbd .md-meta {
    font-size: 1em;
    opacity: 1 !important;
}

// 图片链接
.md-image {
    font-size: 1em;
}
.md-image>.md-meta {
    color: @aHoverColor;
}
kbd .md-image>.md-meta {
    color: @buttonForeColor;
    font-weight: normal;
}

// 编辑状态时，a 内的 kbd 获得焦点
#write .md-focus a kbd:hover {
    background: var(--ac-t1) !important;
}

// 当前焦点、焦点行
.md-focus-container::before {
    content: @focusCursor !important;
    position: absolute;
    left: -15px !important;
}
// #write :is(h6+figure, li>figure) table .md-focus-container::before {
#write h6+figure table .md-focus-container::before {
    // left: 1em !important;
    margin-right: 1.5em;
}
// :is(li>figure, h6+figure) .md-focus-container::before {
h6+figure .md-focus-container::before {
    left: 10px;
}
// 当前段落（与列表段落配套）
p.md-focus::before {
    content: @focusCursor;
    position: absolute;
    left: -20px;
}
// 当前列表段落
li.md-focus-container::before {
    content: "" !important;
    position: absolute;
}
li p.md-focus::before { // 段落微调
    left: -30px;
}
li.md-task-list-item p.md-focus::before { // 任务清单微调
    left: -50px;
}

:is(h3,h4,h5,h6).md-focus::before {
    border: none;
    position: inherit;
    left: inherit;
    float: none;
    top: initial;
    font-size: inherit;
    vertical-align: inherit;
    font-weight: inherit;
    line-height: inherit;
}

// 修正获取焦点时抖动
:is(h1,h2,h3,h4,h5,h6).md-focus::before {
    padding-left: 0;
    padding-right: 0;
}

// for Win
body.os-windows :is(header, .ty-footer) {
    background: var(--d-bc) var(--d-bi);
}
body.os-windows :is(#top-titlebar,
.ty-footer,
#typora-sidebar,
#w-titlebar-left,
#w-traffic-lgs) {
    background: transparent;
}
body.os-windows .ty-footer { // 底栏
    border-top-color: var(--d-bc);
}

#typora-sidebar { // 侧边栏
    border-right: none;
}

.sidebar-tabs {
    border-bottom: none;
}

.sidebar-tab-btn {
    opacity: .4;
}

// 侧边栏
.sidebar-content {
    padding: 0 10px 10px 10px;
    background: none;
}
.sidebar-tab {
    line-height: 2rem !important;
    margin-top: auto !important;
}
// 侧边栏当前活动 tab
.sidebar-tab.active {
    font-family: var(--v-f-fm-title);
    font-weight: var(--v-f-w-title);
}

// for Win 侧边栏 tab
body.os-windows .info-panel-tab-title {
    white-space: pre;
    padding: 2px 0;
    background: @lgH1Bg;//eaderBg;
    background-clip: @lgH1BgClip;//eaderBgClip;
    -webkit-background-clip: @lgH1BgClip;//eaderBgClip;
    color: @lgH1Color;//eaderColor;
}
.sidebar-tabs>.sidebar-tab.active,
body.os-windows .info-panel-tab-wrapper {
    background: @lgH1Bg;//eaderBg;
    background-clip: @lgH1BgClip;//eaderBgClip;
    -webkit-background-clip: @lgH1BgClip;//eaderBgClip;
    color: @lgH1Color;//eaderColor;
}
.sidebar-osx-tab::before,
body.os-windows .info-panel-tab-wrapper::before {
    content: "VLOOK™ " @themeDesc " / " @themeVer;
    text-transform: uppercase;
    white-space: pre;
    font-size: .75em;
    font-weight: var(--v-f-w-title);
    background: @lgH1Bg;//eaderBg;
    background-clip: @lgH1BgClip;//eaderBgClip;
    -webkit-background-clip: @lgH1BgClip;//eaderBgClip;
    color: @lgH1Color;//eaderColor;
    position: absolute;
    width: 100%;
    text-align: center;
}

// 大纲内容为空
#typora-sidebar #file-library:empty,
#typora-sidebar .outline-content:empty {
// #typora-sidebar #outline-content:empty {
    opacity: .4;
    border: 2px dashed var(--d-fc-a);
    border-radius: var(--v-r-b);
    background: none;
}

// 文件库
.active-tab-files.use-file-tree-style .sidebar-content {
    bottom: 0;
}
#sidebar-content:hover #file-library {
    padding-bottom: 8px;
}
#typora-sidebar #file-library-tree {
    border-radius: var(--v-r-b);
    padding-top: 0;
    padding-left: 0;
}
#typora-sidebar #file-library-tree:not(:empty) {
    background: var(--pn-c);
}

#typora-sidebar #file-library-list {
    height: 100%;
}
// 文件库内容为空
#typora-sidebar :is(#file-library-tree, #file-library-list-children):empty {
    opacity: .4;
    border: 2px dashed var(--d-fc-a);
    border-radius: var(--v-r-b);
    background: none;
    height: 100%;
}

// for Win 版样式的差异调整
body.os-windows #file-library-tree {
    height: 100%;
}

// 右边浮动显示的侧边栏
#toc-dropmenu {
    border-radius: var(--v-r-b);
    box-shadow: var(--v-fl-sd), var(--v-fl-i-sd);
    top: 30px !important;
    right: 20px !important;
}
#toc-dropmenu>.outline-content {
    background: none;
}

// 右侧浮动大纲
.outline-title-wrapper {
    color: var(--h-f);
    text-transform: uppercase;
    padding-top: 10px;
    padding-bottom: 10px;
}
.outline-title {
    font-weight: var(--v-f-w-title);
    font-size: 1.25em;
}
.outline-title::after {
    content: " ･ VLOOK " @themeDesc;
    text-transform: uppercase;
}
#toc-dropmenu .divider {
    display: none;
}

// ----- 自动收起模式 -----
// 封面
@outlineCover: ~".outline-content>li:first-child.outline-h6";
// 封底
@outlineBackcover: ~".outline-content>.outline-h6:first-child ~ .outline-h1.outline-item-signle:last-child";
// 大纲面板的封面、封底条目
@{outlineCover}>.outline-item, // 封面
@{outlineBackcover}>.outline-item { // 封底
    color: var(--a-color);
    font-size: 14px;
    height: 40px;
    padding-left: 20px !important;
}

@{outlineCover}>.outline-item .outline-label :is(sup, sub) {
    opacity: 1;
    color: inherit !important;
    font-size: 1em !important;
    display: contents !important;
}
@{outlineCover}>.outline-item code, // 封面
@{outlineBackcover}>.outline-item code { // 封底
    color: inherit;
    background: none;
    font-family: var(--v-f-fm-tag);
    font-size: 1em;
    font-weight: inherit;
    padding: 0;
    box-shadow: none;
    display: inline;
    white-space: inherit;
}
@{outlineCover}>.outline-item u, // 封面
@{outlineBackcover}>.outline-item u { // 封底
    text-decoration: none;
}
// 大纲面板的封面、封底条目标识
@{outlineCover}>.outline-item::before, // 封面
@{outlineBackcover}>.outline-item::before { // 封底
    content: "COVER";
    position: absolute;
    left: 20px;
    color: @aHoverColor;
    font-size: .75em;
    font-style: normal !important;
}
// 大纲面板的封面项目下的 outline-expander 节点
@{outlineCover}>.outline-item .outline-expander {
    height: 10px !important;
    display: block;
}
@{outlineBackcover}>.outline-item .outline-expander {
    height: 15px !important;
    display: block;
}
// 大纲面板的封面项目下的内容节点
@{outlineCover}>.outline-item .outline-label,
@{outlineBackcover}>.outline-item .outline-label {
    display: block; // 调整为该样式后，才能触发封面节点的省略显示
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}
@{outlineCover}>.outline-item .outline-label::before,
@{outlineBackcover}>.outline-item .outline-label::before {
    counter-increment: h6toc;
    content: "";
    position: absolute;
    display: block;
    background-color: var(--d-fc-a);
    left: 5px;
    top: 5px;
    width: 6px;
    height: 30px;
    border-radius: calc(var(--v-r-s) - 4px);
    opacity: .25;
}
@{outlineCover}>.outline-item-active .outline-label::before,
@{outlineBackcover}>.outline-item-active .outline-label::before {
    background-color: var(--a-color);
    width: 10px;
}

// 封底
@{outlineBackcover}>.outline-item::before {
    content: "BACK COVER";
}
@{outlineBackcover} .outline-label::before {
    content: "";
}
// ----- 非自动收起模式 -----
.no-collapse-outline .outline-label {
    padding: 3px 6px !important;
}
// 大纲面板的封面条目
.no-collapse-outline .outline-content .outline-h6:first-child>.outline-item {
    padding-top: 3px !important;
    padding-bottom: 3px !important;
}
.no-collapse-outline .outline-content .outline-h6:first-child>.outline-item::before,
.no-collapse-outline @{outlineBackcover}>.outline-item::before {
    top: 6px !important;
}
.no-collapse-outline @{outlineBackcover}>.outline-item::before {
    left: 6px !important;
    top: 8px !important;
}

// .no-collapse-outline .outline-content em>code {
// }

// 大纲面板
.outline-content {
// #outline-content {
    font-family: var(--v-f-fm-title);
    background: var(--pn-c);
    border-radius: var(--v-r-b);
    padding: 10px;
}
// 大纲节点
.outline-item {
    line-height: 1;
    font-family: var(--v-f-fm-subtitle);
    font-weight: normal;
    padding-top: 5px;
    padding-right: 5px;
    padding-bottom: 5px;
    // cursor: var(--cur-pointer);
}
// 当前大纲节点
.pin-outline .outline-active,
.pin-outline .outline-active strong,
.pin-outline .outline-content .outline-active strong {
// .pin-outline #outline-content .outline-active strong {
    font-weight: var(--v-f-w-title);
}
.outline-item-active {
    box-shadow: 0 0 0 2px fade(@headerColor, 50%) inset;
    border-radius: var(--v-r-s);
    margin-left: 0;
    border-left-width: 0;
    margin-right: 0;
    border-right-width: 0;
    font-weight: var(--v-f-w-title);
}
// 大纲节点 hover
.outline-item:hover {
    background: var(--blockquote-bg);
    border-radius: var(--v-r-s);
    margin-left: 0;
    border-left-width: 0;
    margin-right: 0;
    border-right-width: 0;
}
// 大纲节点 active
.outline-item:active,
.outline-item:active .outline-label,
.outline-item:active .outline-label::before,
.outline-label:active,
.file-library-file-node:active,
.file-library-file-node:active span {
    color: var(--d-bc);
    background: var(--d-fc-a);
}
.outline-item:active,
.file-library-file-node:active {
    box-shadow: @tocItemActive_boxShadow;
}
// for before content, COVER, BACK COVER etc.
.outline-item:active>.outline-expander::before,
.outline-item:active::before {
    color: var(--d-bc) !important;
}

.outline-label:hover {
    text-decoration: none;
}

// 搜索、替换
#md-searchpanel svg.icon {
    fill: var(--d-fc);
}
#md-searchpanel .btn label {
    color: var(--d-fc);
}
#md-searchpanel input {
    border-radius: var(--v-r-s);
    border-color: var(--tbl-bd);
}
// 搜索选项
.searchpanel-search-option-btn {
    color: @docLibButtonForeColor;
}
.searchpanel-search-option-btn.active {
    background-color: @aHoverColor !important;
}
// 选中的搜索选项
.searchpanel-search-option-btn.active svg.icon {
    fill: @docLibButtonForeHoverColor !important;
}

// 快速打开
#typora-quick-open {
    font-family: var(--v-f-fm-tag);
    background: var(--pn-c);
    border-radius: var(--v-r-b);
    box-shadow: var(--v-fl-sd), var(--v-fl-i-sd);
    border: none;
}
// 快速打开输入框
#typora-quick-open-input {
    padding: 5px;
    font-family: var(--v-f-fm-text);
}
#typora-quick-open-input input {
    border-radius: var(--v-r-s);
    max-height: 40px;
    border-color: var(--tbl-bd);
    font-size: 1.5em;
}
.ty-quick-open-category-title {
    color: var(--h-f);
}
// 快速打开搜索结果条目
.typora-quick-open-item {
    height: 40px;
    padding-left: 20px;
}
.typora-quick-open-item.active {
    border-radius: var(--v-r-s);
    background: var(--pn-c-a);
    color: var(--d-fc);
    margin-left: 5px;
    margin-right: 5px;
    padding-left: 15px;
}
.typora-quick-open-item-path {
    font-size: .625em;
}

// Typora 编辑时 UI 相关变量
:root {
    --active-file-bder: var(--h-f);
    --primary-color: var(--h-f);
    --active-file-bg: var(--pn-c);
    --active-file-text-color: var(--d-fc);
    --text-color: var(--d-fc);
    --active-toggle-btn-color: @aHoverColor;
    --monospace: var(--v-f-fm-code);
}

// 目录/文件节点
.file-tree-node {
    font-family: var(--v-f-fm-bd);
}
// 目录节点
.file-tree-node[data-has-sub=true] {
    font-weight: var(--v-f-w-title);
}
.file-tree-node[data-has-sub=false] {
    font-weight: normal;
}
// 文件节点
.file-library-file-node {
    border-radius: var(--v-r-s);
}
.file-library-file-node:active {
    box-shadow: @tocItemActive_boxShadow;
}
// 当前节点
.file-library-file-node.active {
    box-shadow: @tocItemCurrent_boxShadow;
}
// 节点
// .file-node-content {
//     cursor: var(--cur-pointer);
//     // ;
// }
// 点击节点
.file-library-node:not(.file-node-root):focus>.file-node-content {
    outline: 0;
}
// 文件名（含扩展名）
body.os-windows .file-node-title { // for Win
    margin-top: 0;
}
// 扩展名
.file-node-title-ext-part {
    color: var(--d-fc-a);
}

// ----------------------------------------
// 源码模式
#typora-source .CodeMirror {
    font-family: var(--monospace);
}
#typora-source .CodeMirror-lines {
    margin: 0 10px;
    max-width: 100%;
}
#typora-source .CodeMirror pre {
    font-family: var(--v-f-fm-text);
}
// 闪动光标
#typora-source .CodeMirror-cursor {
    border-color: @aHoverColor;
}
// 标题
#typora-source .cm-header {
    color: var(--h-f);
    font-family: var(--v-f-fm-title);
    font-weight: var(--v-f-w-title);
}
// 链接
#typora-source .cm-link {
    color: @aHoverColor;
    font-family: var(--monospace);
    font-weight: normal;
    text-decoration: none;
}
// 图片语法内链接
#typora-source .cm-string+.cm-link,
#typora-source .cm-tag+.cm-link,
#typora-source .cm-overlay+.cm-link {
    color: var(--d-fc-a);
}
// 图片
#typora-source .cm-tag {
    color: var(--a-color);//@aColor;
    font-family: var(--monospace);
}
// 链接内容
#typora-source .cm-string {
    color: var(--d-fc-a);
    font-family: var(--monospace);
}
// 引用块
#typora-source pre.cm-atom {
    background: var(--blockquote-bg);
}
#typora-source .cm-atom,
#typora-source .cm-atom .cm-number {
    color: var(--d-fc);
}
// 注释（code）
#typora-source .cm-comment {
    font-size: .9em;
    font-family: var(--monospace);
    background: var(--code-bg);
    color: var(--code-t);
}
// 粗体
#typora-source .cm-strong {
    font-family: var(--v-f-fm-bd);
}
// 删除
#typora-source .cm-del {
    color: var(--d-fc-a);
}
// 表格行
#typora-source pre.cm-table-row {
    font-family: var(--monospace);
}
// 当前焦点行
#typora-source .CodeMirror-activeline-background {
    border-bottom: @focusStyle;
}
// 列表序号
#typora-source .cm-block-start.cm-variable-2 {
    color: var(--d-fc-a);
    font-family: var(--v-f-fm-num);
}

// 错误信息
.error-message {
    color: @aHoverColor !important;
}

.md-meta {
    color: @aHoverColor;
}

// 针对在编辑模式时无效图片的样式
.md-img-error>.md-meta {
    // background: var(--ac-rd-a);
    color: var(--ac-rd-lg) !important;
    font-style: italic;
    border: 2px dashed var(--ac-rd-lg);
    border-radius: var(--v-r-b);
    line-height: @paragraphInnerLineHeight;
    padding: 1px;
    background-image: url("data:image/png;base64,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") !important;
    background-size: cover;
    width: 200px;
    height: 100px;
    display: inline-block !important;
}
.md-img-error:is([data-src*=".png"],
[data-src*=".jpg"],
[data-src*=".jpeg"],
[data-src*=".gif"],
[data-src*=".webp"])>span>span {
    visibility: hidden;
}
// 获得焦点编辑
.md-img-error[contenteditable="true"]>.md-meta {
    background-image: none !important;
    width: initial;
    height: initial;
    display: inline !important;
}
.md-img-error[contenteditable="true"]>span>span {
    visibility: visible !important;
}

// 排除多媒体类的
@errorAudio: ~':is(.md-img-error[data-src*=".mp3"], .md-img-error[data-src*=".m4a"], .md-img-error[data-src*=".ogg"], .md-img-error[data-src*=".wav"])';
@errorVideo: ~':is(.md-img-error[data-src*=".ogv"], .md-img-error[data-src*=".mp4"], .md-img-error[data-src*=".webm"])';
// :is(.md-img-error[data-src*=".mp3"],
// .md-img-error[data-src*=".m4a"],
// .md-img-error[data-src*=".ogg"],
// .md-img-error[data-src*=".wav"],
// .md-img-error[data-src*=".ogv"],
// .md-img-error[data-src*=".mp4"],
// .md-img-error[data-src*=".webm"])>.md-meta {
@{errorAudio}>.md-meta,
@{errorVideo}>.md-meta {
    border: none;
    color: var(--h-f) !important;
    border: inherit;
    // padding: inherit;
    // border-radius: inherit;
    padding: 5px;
    border-radius: var(--v-r-b);
    background-image: none !important;
    background-color: var(--pn-c) !important;
    width: initial;
    height: initial;
    // display: inline !important;
    // height: 80px;
    display: inline-block !important;
    visibility: visible !important;
}
// :is(.md-img-error[data-src*=".mp3"],
//     .md-img-error[data-src*=".m4a"],
//     .md-img-error[data-src*=".ogg"],
//     .md-img-error[data-src*=".wav"])>.md-meta:first-of-type:before {
@{errorAudio}>.md-meta:first-of-type:before {
    content: "🔊";
}
@{errorAudio}>.md-meta:first-of-type:after {
    content: "( Export HTML to Hear Audio )";
    text-transform: uppercase;
    color: @aHoverColor;
    font-size: .625em;
    text-align: center;
    display: block;
}
// :is(.md-img-error[data-src*=".ogv"],
//     .md-img-error[data-src*=".mp4"],
//     .md-img-error[data-src*=".webm"])>.md-meta:first-of-type:before {
@{errorVideo}>.md-meta:first-of-type:before {
    content: "🎦";
}
// :is(.md-img-error[data-src*=".ogv"],
//     .md-img-error[data-src*=".mp4"],
//     .md-img-error[data-src*=".webm"])>.md-meta:first-of-type:after {
@{errorVideo}>.md-meta:first-of-type:after {
    content: "( Export HTML to Watch Video )";
    text-transform: uppercase;
    color: @aHoverColor;
    font-size: .625em;
    text-align: center;
    display: block;
}

// header 锚点占位
.md-header-anchor {
    margin: 0 !important;
    vertical-align: top !important;
}

// 重新定义 emoji 符号在编辑时的排版
.md-emoji-span::before {
    vertical-align: baseline;
}

// 脚注行序号
.md-fn-count {
    font-family: var(--v-f-fm-bd);
    font-weight: normal;
}

.md-fn-count::before {
    content: "[";
}

.md-fn-count::after {
    content: "] ";
}

// YAML 的样式
@yamlMarginTopBottom: 12px;
@yamlMarginLeftRight: 0;
@yamlBorderWidth: 2px;
#write>pre.md-meta-block:first-child {
    font-family: var(--monospace);
    font-weight: var(--v-f-w-text);
    font-size: .875em;
    line-height: @paragraphInnerLineHeight;
    border-radius: var(--v-r-b);
    padding: 24px 10px 5px 10px;
    color: var(--a-color);//@aColor;
    background: var(--code-bg);
    border: @yamlBorderWidth dashed var(--std-code-shadow);
    margin: @yamlMarginTopBottom @yamlMarginLeftRight;
}
#write pre.md-meta-block:empty:before,
#write>pre.md-meta-block::before {
    content: "--- YAML Front Matter ---";
    text-transform: uppercase;
    font: @syntaxTipsFont;
    position: absolute;
    margin-top: -16px;
    color: var(--d-fc);
    opacity: .6;
}
// YAML 内容为空时
#write>pre.md-meta-block:empty {
    padding: 5px 10px;
}
#write pre.md-meta-block:empty:before {
    content: "input your YAML Front Matter ...";
    font-style: normal;
    font-weight: normal;
    position: static;
    opacity: .2;
}
// YAML / code 获得焦点
#write>pre.md-meta-block.md-focus, // YAML 等获得焦点
#write .md-expand code, // code 获得焦点
// 预置颜色色号获得焦点
#write span:is([md-inline="code"],[md-inline="strong"],[md-inline="em"],[md-inline="highlight"],[md-inline="underline"])+sub.md-expand .md-plain,
#write :is(sup, sub)+sub.md-expand .md-plain,
// 单元格预置颜色色号获得焦点
content>#write table :is(th,td)>span>sub:first-child.md-expand .md-plain,
content>#write table :is(th,td)>span>sub:last-child.md-expand .md-plain,
// 引用块内预置颜色色号获得焦点
content>#write blockquote p>sub:only-child.md-expand .md-plain {
    opacity: 1;
    caret-color: @aHoverColor;
    box-shadow: var(--v-input-focus-inn-shadow), var(--v-input-focus-shadow);
    border: none;
}
#write>pre.md-meta-block.md-focus { // YAML 等获得焦点后
    border: none;
    // 在原来 margin 基础上，补偿因 border 取消后的空间变化
    margin: @yamlMarginTopBottom+2px @yamlMarginLeftRight+2px;
}
// #write .md-expand span[md-inline="plain"] { // code 获得焦点
//     padding-left: .25em;
//     padding-right: .25em;
// }
// 源码模式下的 YAML
#typora-source pre.cm-yaml {
    font-family: var(--monospace);
    font-weight: var(--v-f-w-text);
    font-size: .875em;
    background: var(--code-bg);
}

/**************************************
* Header Counters in TOC 目录中的标题序号样式
**************************************/

/* No link underlines in TOC */

// content>#write>h1:first-of-type::before,
// content>#write>pre.md-meta-block+h1:first-of-type::before {
//     content: "NO TOC";
// }

content .md-toc::before {
    content: "☰ Table of contents / 目录 ☰";
    text-transform: uppercase;
    font: @syntaxTipsFont;
    color: var(--d-fc);
    padding-left: 35px;
    opacity: .6;
}

// 目录操作栏
#write div.md-toc-tooltip {
    background-color: var(--d-fc);
    line-height: 1.5;
    color: var(--d-bc);
    border: none;
    margin-left: 30px;
    padding-left: 5px;
    width: 250px;
    border-radius: var(--v-r-b) var(--v-r-b) @tableBorderRadius @tableBorderRadius;
}
#write div.md-toc-tooltip>span {
    font-size: .875em;
}
#write div.md-toc-tooltip .btn {
    padding: 1px 6px;
    margin: 3px;
}
#write div.md-toc-tooltip .btn:hover {
    background-color: var(--item-hover-bg-color);
    color: var(--item-hover-text-color);
}


.md-toc:focus .md-toc-content {
    border-color: var(--border-color);
}

.md-toc-content,
.outline-content {
    counter-reset: h1;
    // margin-top: 1rem;
    margin-bottom: 1rem;
}

.md-toc-h1 {
    margin-left: 0;
    padding-left: 5px;
}
.md-toc-h1,
.outline-h1 {
    counter-reset: h2;
}

.md-toc-h2 {
    margin-left: 0;
    padding-left: 15px;
}
.md-toc-h2,
.outline-h2 {
    counter-reset: h3;
}

.md-toc-h3 {
    margin-left: 0;
    padding-left: 25px;
}
.md-toc-h3,
.outline-h3 {
    counter-reset: h4;
}

.md-toc-h4 {
    margin-left: 0;
    padding-left: 35px;
}
.md-toc-h4,
.outline-h4 {
    counter-reset: h5;
}

.md-toc-h5 {
    margin-left: 0;
    padding-left: 45px;
}
.md-toc-h5,
.outline-h5 {
    counter-reset: h6toc;
}

.md-toc-h6,
.outline-h6 {
    counter-reset: h6toc;
    content: "";
    font-size: 12px;
    // color: var(--d-fc-a);
    color: var(--toc-h-num-color);
}

// 微调大纲节点的缩进
.outline-h1>.outline-item {
	padding-left: .35em;
}
.outline-h2>.outline-item {
	padding-left: 1.35em;
}
.outline-h3>.outline-item {
	padding-left: 2.35em;
}
.outline-h4>.outline-item {
	padding-left: 3.35em;
}
.outline-h5>.outline-item {
	padding-left: 4.35em;
}
.outline-h6>.outline-item {
	padding-left: 6em;
}
.outline-h6>.outline-item>.outline-label::before {
    content: @h6BeforeContent;
    opacity: .6;
}

@coverAfterYAMLforToc: ~"content>#write>pre.md-meta-block:first-child+h6";
@coverWithoutYAMLforToc: ~"content>#write>h6:first-child";
@escBackcoverIdForToc: ~".md-toc>.md-toc-content>.md-toc-h1:last-child";
@{coverAfterYAMLforToc}+@{escBackcoverIdForToc}, // 有 YAML 的封面情况下排除文档内 TOC 的 h1(封底) 情况
@{coverWithoutYAMLforToc}+@{escBackcoverIdForToc},  // 无 YAML 的封面情况下排除文档内 TOC 的 h1(封底) 情况
// .md-toc-content>.md-toc-h6:first-child ~ .md-toc-h1.outline-item-signle:last-child, // 有封面的情况下，最后一个 h1 为封底
.md-toc-h6 {
    display: none;
    margin-left: 0;
    padding-left: 50px;
}

.outline-label {
    word-break: break-word;
    // cursor: var(--cur-pointer);
}

.outline-label::before {
    color: var(--toc-h-num-color);//var(--d-fc-a);
}

.md-toc-h1::before,
.outline-h1 .outline-label::before {
    counter-increment: h1;
    content: @h1BeforeContent;
}

.md-toc-h1>.md-toc-inner {
    margin-left: 0;
    font-weight: var(--v-f-w-title);
}

.md-toc-h2::before,
.outline-h2 .outline-label::before {
    counter-increment: h2;
    content: @h2BeforeContent;
}

.md-toc-h2>.md-toc-inner {
    margin-left: 0;
}

.md-toc-h3::before,
.outline-h3 .outline-label::before {
    counter-increment: h3;
    content: @h3BeforeContent;
}

.md-toc-h3>.md-toc-inner {
    margin-left: 0;
}

.md-toc-h4::before,
.outline-h4 .outline-label::before {
    counter-increment: h4;
    content: @h4BeforeContent;
}

.md-toc-h4>.md-toc-inner {
    margin-left: 0;
}

.md-toc-h5::before,
.outline-h5 .outline-label::before {
    counter-increment: h5;
    content: @h5BeforeContent;
}

.md-toc-h5>.md-toc-inner {
    margin-left: 0;
}

.md-toc-h6::before,
.outline-h6 .outline-label::before {
    counter-increment: h6;
    content: "";
}

// 导出 HTML 后的目录大纲内的自动编码内容
// 包括导航中心、#write 内的正文
body.typora-export :is(.md-toc-h1, .md-toc-h2, .md-toc-h3, .md-toc-h4, .md-toc-h5)::before {
    content: attr(d-header-num) !important;
}

.typora-export-show-outline .typora-export-content {
    max-width: none;
    display: inherit;
}

// 编辑时，配合分栏样式使用
content>#write hr {
    border: none;
    background: linear-gradient(90deg, transparent, var(--ac-bk-fade) 15%, var(--ac-bk-fade), var(--ac-bk-fade) 85%, transparent);
    height: 2px;//@quoteTitleBorderWidth;
    cursor: crosshair;
}
content>#write hr:hover {
    background: @aHoverColor;
    // margin-top: calc(-8px - @quoteTitleBorderWidth * 2);
    // height: @quoteTitleBorderWidth * 2;
}
content>#write .md-hr+.md-hr>hr {
    margin-top: -14px !important;
}

// 图文卡片编辑时样式
content>#write blockquote:has(.md-image[data-src*="#card"]>img) {
    padding: 0;
    background-color: @buttonBgColor;
    border-radius: var(--v-r-b) var(--v-r-b) 0 0;
}
content>#write blockquote p:has(.md-image[data-src*="#card"])+blockquote {
    color: var(--d-fc);
    background-color: var(--pn-c);
    // color: @buttonForeColor;
    // background-color: @buttonBgColor;
    border: none;
    margin: 0;
    padding: 10px;
    border-radius: 0 0 var(--v-r-b) var(--v-r-b);
}
// 文字链接
// content>#write blockquote p:has(.md-image[data-src*="#card"])+blockquote a {
// #write :is(blockquote, details) .v-post-card a {
//     color: @buttonForeColor !important;
//     opacity: .6;
// }
// kbd 按钮
// content>#write blockquote p:has(.md-image[data-src*="#card"])+blockquote a kbd,
// #write :is(blockquote, details) .v-post-card a kbd {
//     border: 1px solid fade(@buttonForeColor, 25%);
// }
// content>#write blockquote p:has(.md-image[data-src*="#card"])+blockquote a:has(kbd),
// #write :is(blockquote, details) .v-post-card a:has(kbd) {
//     opacity: 1;
// }

// ====================
// 编辑时预置颜色色号的公共样式
@colorCodeOnPgStart: ~'p>[md-inline="em"]:first-child>em>sub:only-child';
@colorCodeOnCellStart: ~'table :is(th,td)>span>[md-inline="em"]:first-child>em>sub:only-child';
@colorCodeBeforeSpanFmt: ~'span:is([md-inline="code"],[md-inline="strong"],[md-inline="em"],[md-inline="highlight"],[md-inline="underline"])+[md-inline="em"]>em>sub:only-child';
@colorCodeBeforeSupSub: ~':is(sup, sub)+[md-inline="em"]>em>sub:only-child';

content>#write blockquote p>em:only-child>sub:only-child, // 引用块着色
content>#write @{colorCodeOnPgStart}, // 文本着色（段落）
content>#write @{colorCodeOnCellStart}, // 单元格（段落）
content>#write table :is(th,td)>span>[md-inline="em"]:last-child>em>sub:only-child,
content>#write @{colorCodeBeforeSpanFmt},
content>#write @{colorCodeBeforeSupSub} { // 文本着色（指定格式）
    font: normal bold .5em var(--v-f-fm-code) !important; // [style] [weight] [size/[line-height]] [family]
    // font-family: monospace !important;
    // font-family: var(--v-f-fm-code) !important;
    // font-weight: bold;
    // font-size: .625em;
    // font-style: normal;
    border-radius: 0 4px 4px 4px;// calc(var(--v-r-tag) - 2px);
    // font-family: var(--v-f-fm-code) !important;
    // padding-right: 2px;
    bottom: 0;
    color: var(--d-fc);
    background-color: var(--d-fc-a);
    padding: 1px 3px;
    margin: 0 5px 0 1px;
    line-height: @miniLineHeight !important;
    opacity: .6;
}
// 段落微调
content>#write @{colorCodeOnPgStart}, // 文本着色（段落）
content>#write @{colorCodeOnCellStart} { // 单元格（段落）
    color: var(--d-bc);
    border-radius: 4px 4px 0 4px;
    background-color: var(--d-fc);
    margin: 0 1px 0 0;
}

// 针对 引用块着色 的微调
// @colorCodeInBlockquoteOld: ~'blockquote p>sub:first-child';
@colorCodeInBlockquote: ~'blockquote p>[md-inline="em"]:only-child>em>sub:only-child';

// content>#write @{colorCodeInBlockquoteOld} {
//     border: 1px solid var(--ac-t2);
//     border-radius: var(--v-r-si);
//     bottom: 0;
// }
content>#write @{colorCodeInBlockquote} {
    bottom: 0;
}
// 针对 引用块着色 的前缀提示样式
// content>#write @{colorCodeInBlockquoteOld}::before {
//     content: ">";
//     color: var(--ac-t2);
// }
content>#write @{colorCodeInBlockquote}::before {
    content: ">";
    color: var(--d-bc);
    padding-right: 2px;
    opacity: .6;
}
// 在引用块内的引用块时取消样式
// content>#write blockquote>blockquote p>sub:only-child {
//     border: none;
// }
// content>#write blockquote>blockquote p>sub:only-child::before {
//     content: "";
// }
// 针对 文本着色/单元格（段落） 的前缀提示样式
content>#write @{colorCodeOnPgStart}::before,
content>#write @{colorCodeOnCellStart}::before {
    content: "¶";
    color: var(--d-bc);
    padding-right: 2px;
    opacity: .6;
}
// 针对 文本着色（指定格式） 的前缀提示样式
content>#write @{colorCodeBeforeSpanFmt}::before,
content>#write @{colorCodeBeforeSupSub}::before {
    content: "";
}

// 表格列格式：右对齐
content>#write table th:not([style*=":right"])>span>span:not([md-inline="plain"]):only-child:before,
content>#write table th[style*=":right"]>span::before {
    content: "CF/列格式";
    text-transform: uppercase;
    font: @syntaxTipsFont;
    font-size: 0.5em;
    // font-weight: normal;
    position: absolute;
    margin-top: -.7em;
    opacity: .6;
}

// 有序、无序列表下的图片、非图片段落
#write li .md-p>span:not([class*=md-image]) {
    margin-top: 0;
    margin-bottom: 0;
}
#write li .md-p>span[class*=md-image] {
    margin-bottom: @paragraphPadding;
}

// 有序列表下的任务清单
#write ol>.md-task-list-item { // 1 级
    list-style-type: none !important;
}
#write ol>li>ol>.md-task-list-item { // 2 级
    list-style-type: none !important;
}
#write ol>li>ol>li>ol>.md-task-list-item { // 3 级
    list-style-type: none !important;
}
#write ol>li>ol>li>ol>li>ol>.md-task-list-item { // 4 级
    list-style-type: none !important;
}
#write ol>li>ol>li>ol>li>ol>li>ol>.md-task-list-item { // 5 级
    list-style-type: none !important;
}
#write ol>li>ol>li>ol>li>ol>li>ol>li>ol>.md-task-list-item { // 6 级
    list-style-type: none !important;
}

// 无序列表下的任务清单
#write ul>.md-task-list-item { // 1 级
    list-style-type: none !important;
}
#write ul>li>ul>.md-task-list-item { // 2 级
    list-style-type: none !important;
}
#write ul>li>ul>li>ul>.md-task-list-item { // 3 级
    list-style-type: none !important;
}
#write ul>li>ul>li>ul>li>ul>.md-task-list-item { // 4 级
    list-style-type: none !important;
}
#write ul>li>ul>li>ul>li>ul>li>ul>.md-task-list-item { // 5 级
    list-style-type: none !important;
}
#write ul>li>ul>li>ul>li>ul>li>ul>li>ul>.md-task-list-item { // 6 级
    list-style-type: none !important;
}

// 任务清单
.md-task-list-item {
    padding-left: 32px;
}
// 任务清单复选框
@taskListMarginLeft: -1.25em;
.md-task-list-item>input {
    margin-top: .5em !important;
    margin-left: @taskListMarginLeft !important;
}
.v-svg-input-checkbox {
    position: absolute;
    margin-top: .3125em !important;
    margin-left: @taskListMarginLeft !important;
    display: inline-block;
    vertical-align: middle;
}

// 任务清单文本
.md-task-list-item>p {
    margin-top: 0;
    margin-bottom: 0;
}

.md-diagram-panel-preview {
    padding-top: 0;
}
// .md-diagram-panel-preview>svg {
//     // display: block !important;
//     // margin: 0 auto !important;
//     width: auto;
// }

.md-diagram-panel {
    border-radius: var(--v-r-b);
    padding: 0;
}

// .md-diagram-panel svg {
//     width: auto;
//     margin: 0 !important;
//     display: block;
// }

// ====================
// 第 1 题注（编辑时样式）
// 注意：因格式与 @menuStepPath_OnEditing 接近，注意调整时进行多点验证
//
// 高亮内的斜体，或斜体内的高亮
// 针对题注简化语法的样式
@cap_prefix: ~'[md-inline="em"]:only-child>em>[md-inline="highlight"]>mark';
@cap1_OnEditing: ~'p>@{cap_prefix}';
@cap2_OnEditing: @cap1_OnEditing~'>[md-inline="em"]>em';
// #write p>em>mark,
content>#write @{cap1_OnEditing} {
    font: normal .875em var(--v-f-fm-bd);
    color: @captionTextColor;
    background: @captionBackground;
    box-shadow: none;
    text-shadow: none;
    padding: 2px 10px;
    border-radius: var(--v-r-b) var(--v-r-b) 0 0;
    display: inline-block;
}
content>#write p:has(@{cap_prefix}) + p {
    margin-top: 0;
}
content>#write li>@{cap1_OnEditing} {
    margin: 0; // 列表下的微调
}
content>#write @{cap1_OnEditing}::before {
    content: "Caption/题注. ";
    text-transform: uppercase;
    // font: @syntaxTipsFont;
    color: var(--h-f);//var(--ac-t1-lg);
    // opacity: .5;
}
// content>#write p:has([md-inline="em"]:only-child>em>[md-inline="highlight"]>mark) {
//     text-align: center;
// }
// --------------------
// 第 2 题注（编辑时样式）
// #write p>em>mark>em,
content>#write @{cap2_OnEditing} {
    font-style: normal;
}
content>#write @{cap2_OnEditing}::before {
    content: " │ B.Caption/底部题注. ";
    text-transform: uppercase;
    font: @syntaxTipsFont;
    color: var(--ac-t1-lg);
    // opacity: .5;
}
content>#write .md-expand mark .md-meta {
    color: @aHoverColor;//var(--a-color);
    opacity: 1 !important;
}

// ====================
// 面包屑（分步分级）样式
// 注意：因格式与 @cap1_OnEditing 接近，注意调整时进行多点验证
@stepwisePrefix_OnEditing: ~'[md-inline="em"]';
@stepwiseSuffix_OnEditing: ~'>em>[md-inline="highlight"]>mark';
// @stepwise_OnEditing: ~'[md-inline="em"]:not(:only-child)>em>[md-inline="highlight"]>mark';
// 调整该选择器时须同步调整 vlook.js 中 Stepwise 对应的选择器
// @menuStepPath_OnExported: ~'em>mark:only-child';
@triangleWidth: .625em;
@stepwiseTextColor: var(--d-fc);
content>#write p>@{stepwisePrefix_OnEditing}:not(:only-child)@{stepwiseSuffix_OnEditing},
content>#write .td-span>@{stepwisePrefix_OnEditing}@{stepwiseSuffix_OnEditing},
.v-stepwise {
    font: normal .875em var(--v-f-fm-code);
    line-height: 1;
    // font: normal .875em var(--v-f-fm-bd);
    background-color: var(--std-code-shadow);//var(--d-fc);
    color: @stepwiseTextColor;
    box-shadow: none;
    text-shadow: none;
    padding: 5px 15px 5px 10px;
    border-radius: var(--v-r-tag);
    clip-path: polygon(0 0, calc(100% - @triangleWidth) 0, 100% 50%, calc(100% - @triangleWidth) 100%, 0 100%);
    position: relative;
    display: inline-block;
}
// 分步分级内容分隔样式
.v-stepwise {
    cursor: var(--cur-copy-normal);
    // ;
}
@arrowWidth: 20%;
.v-stepwise label {
    background-color: @stepwiseTextColor;
    width: @triangleWidth;
    display: inline-block;
    clip-path: polygon(0 0, @arrowWidth 0, 100% 50%, @arrowWidth 100%, 0 100%, 100% - @arrowWidth 50%);
    margin: 0 5px;
    opacity: .2;
}
content>#write p>@{stepwisePrefix_OnEditing}:not(:only-child)@{stepwiseSuffix_OnEditing} a,
content>#write .td-span>@{stepwisePrefix_OnEditing}@{stepwiseSuffix_OnEditing} a,
.typora-export-content>#write .v-stepwise a {
    color: @stepwiseTextColor !important;
    font-weight: var(--v-f-w-bd);
}
// 内嵌的文本链接编辑时样式
content>#write p>@{stepwisePrefix_OnEditing}:not(:only-child)@{stepwiseSuffix_OnEditing} .md-link .md-url,
content>#write .td-span>@{stepwisePrefix_OnEditing}@{stepwiseSuffix_OnEditing} .md-link .md-url {
    color: var(--a-color);
}
content>#write p>@{stepwisePrefix_OnEditing}:not(:only-child)@{stepwiseSuffix_OnEditing} a::after,
content>#write .td-span>@{stepwisePrefix_OnEditing}@{stepwiseSuffix_OnEditing} a::after,
.v-stepwise a::after {
    content: "◥";//" ➤";//"↗️";//"↗︎";
    font-size: .875em;
    color: var(--a-color);
    // content: "";
    // background: url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTQzMiAxNzguMDQ4YzIwLjggMCAzNy42OTYgMTYuNjQgMzcuNjk2IDM3LjMxMmEzNy41MDQgMzcuNTA0IDAgMCAxLTM3Ljc2IDM3LjMxMkgyMzkuMzZjLTE5Ljg0IDAtMzUuODQgMTUuODcyLTM1Ljg0IDM1LjUyVjc4NS45MmMwIDE5LjU4NCAxNiAzNS41MiAzNS44NCAzNS41Mkg3NDIuNGMxOS43NzYgMCAzNS44NC0xNS45MzYgMzUuODQtMzUuNTJWNTgzLjc0NGMwLTIwLjYwOCAxNi44MzItMzcuMjQ4IDM3LjY5Ni0zNy4yNDggMjAuOCAwIDM3LjY5NiAxNi42NCAzNy42OTYgMzcuMjQ4djIwMi4yNEExMTAuNzIgMTEwLjcyIDAgMCAxIDc0Mi4yNzIgODk2SDIzOS4zNkExMTAuNzIgMTEwLjcyIDAgMCAxIDEyOCA3ODUuOTJWMjg4LjE5MmMuMDY0LTYwLjggNDkuOTItMTEwLjA4IDExMS4zNi0xMTAuMTQ0SDQzMnpNODQwLjEyOCAxMjhjMzAuNzg0IDAgNTUuNzQ0IDI0LjcwNCA1NS44MDggNTUuMTY4VjM5MC40YTM3LjUwNCAzNy41MDQgMCAwIDEtMzcuNjk2IDM3LjM3NiAzNy44ODggMzcuODg4IDAgMCAxLTI2LjYyNC0xMC44OCAzNy4xMiAzNy4xMiAwIDAgMS0xMS4wNzItMjYuNDMydi0xNDQuOTZMNTI1Ljc2IDUzNy4zNDRjLTcuMDQgNy4wNC0xNi42NCAxMC45NDQtMjYuNjg4IDEwLjg4YTM3LjY5NiAzNy42OTYgMCAwIDEtMzQuODgtMjMuMDQgMzYuOTkyIDM2Ljk5MiAwIDAgMSA4LjI1Ni00MC42NEw3NTcuMzc2IDIwMi41Nkg2MTAuOTQ0YTM3LjUwNCAzNy41MDQgMCAwIDEtMzcuNjk2LTM3LjI0OGMwLTIwLjYwOCAxNi44OTYtMzcuMzEyIDM3Ljc2LTM3LjMxMmgyMjkuMTg0eiIgZmlsbD0iIzk5OSIvPjwvc3ZnPg==");
    width: 20px;
    height: 20px;
    // vertical-align: super;
    margin-left: -4px;
    margin-top: -8px;
    position: absolute;
}
content>#write p>@{stepwisePrefix_OnEditing}:not(:only-child)@{stepwiseSuffix_OnEditing} a:hover::after,
content>#write .td-span>@{stepwisePrefix_OnEditing}@{stepwiseSuffix_OnEditing} a:hover::after,
.v-stepwise a:hover::after {
    color: @aHoverColor !important;
}

/**************************************
* 重定义Typora原生样式
**************************************/

// 强制指定使用被修改过后的 --bg-color，确保背景图片能在 Typora 编辑时正常显示
content>#write {
    background: var(--d-bc) var(--d-bi);
}

content>#write img {
    padding: 0;
    border: none;
}
// 图片带 srcset 参数的微调
content>#write :is(span[md-inline="image"][data-src*="darksrc="],
span[md-inline="image"][data-src*="srcset="])::before {
    content: "◩";
    font: @syntaxTipsFont;
    color: var(--d-bc);
    border-radius: var(--v-r-b);
    word-break: initial;
    padding: 1px 4px;
    margin: 5px 0 0 5px;
    position: absolute;
    background: var(--d-fc);
    opacity: .6;
}
content>#write span[md-inline="image"][data-src*="srcset="]::before {
    content: "@";
}
content>#write span[md-inline="image"][data-src*="srcset="][data-src*="darksrc"]::before {
    content: "@ ◩";
}
content>#write span[md-inline="image"][data-src*="#icon"]::before {
    content: "" !important;
}

#write {
    max-width: 100%;
    margin: 0 auto;
    padding: 10px 20px;
}

#write>:is(ul,ol):first-child {
    margin-top: 30px;
}

// 编辑时的 summary
@summaryOnEditing: ~"blockquote>h6:first-child";
content>#write @{summaryOnEditing} {
    border-radius: 0;
    border-bottom: @quoteTitleBorderWidth solid var(--ac-bk-fade);//var(--ac-t1-fade);
    padding: 0 0 .3125em 0;
    margin-bottom: .3125em;
    text-align: left;
    width: 100%;
}

// 编辑时的 summary 折叠展开样式
@summaryFoldHolderFontSize: .875em;
@summaryFoldHolderHeight: .875;

// 多行代码样式
.md-fences {
    color: var(--d-fc);
    font-family: @themeMonoFont, var(--v-f-fm-code);
    border-radius: var(--v-r-b);
    border: @imgBorderWidth solid var(--tbl-bd);
    margin: 0 0 8px 0;
    background-color: var(--std-code-shadow);
    // background-color: var(--d-fc);//var(--pn-c);
}
// 代码块获得焦点
content>#write .md-fences.md-focus {
    box-shadow: var(--v-input-focus-shadow) !important;
    // box-shadow: var(--v-input-focus-inn-shadow), var(--v-input-focus-shadow);
    border-color: var(--a-color);
    // border-color: @docLibButtonBgColor;
}
content>#write .md-fences.md-focus .md-diagram-panel {
    margin-top: 4px !important;
}
.md-fences.md-diagram {
    box-shadow: none;
}
pre.md-fences-advanced.md-focus .md-fences-adv-panel {
    border: none;
}

#write .md-fences-adv-panel {
    margin-top: 0;
    position: relative;
    text-align: left;
}
// 导出后对 mermaid 图表的微调
.typora-export-content>#write .md-fences-adv-panel {
    margin-top: @paragraphPadding !important;
}

// 编辑时折叠引用块标题下紧跟的内容
content>#write blockquote>h6+:is(.md-fences, figure) {
    margin-top: 1em;
}

// Typora 输入框
#file-library-search-input {
    border-color: var(--v-input-focus-border) !important;
}
.form-control:focus {
    border-color: var(--v-input-focus-border) !important;
    box-shadow: var(--v-input-focus-shadow) !important;
}

// /* 数学公式 */
// .MathJax_SVG_Display {
//     border: none;
//     overflow-x: auto;
//     border: 2px solid var(--pn-c);
//     border-radius: var(--v-r-b);
//     padding: 10px;
//     cursor: pointer;
// }
// // 公式编号标签
// .MathJax_SVG g[id^=mjx-eqn-] {
//     fill: var(--d-fc-a);
// }
// .MathJax_SVG_Display:hover {
//     border-color: @aLineColor;
// }
// .MathJax_SVG_Display:active {
//     transform: scale(1.5);
//     border: none;
// }
// .MathJax_SVG g text {
//     color: @codeTooltipText;//var(--d-fc);
// }

// // 行间（独占一行）数学公式
// content .md-math-container { // 编辑时
//     font-size: 1em !important;
// }

// // 预览：行间公式、脚注
// @codeTooltipBg: var(--d-fc);
// @codeTooltipText: var(--d-bc);
// .code-tooltip {
//     color: @codeTooltipText !important;//var(--d-fc) !important;
//     background: @codeTooltipBg;//var(--pn-c);
//     border-radius: var(--v-r-si);
//     box-shadow: none;
//     padding: 0 2px;
// }
// .code-tooltip .ty-input:focus {
//     background: @codeTooltipBg;//var(--pn-c);
//     border-radius: var(--v-r-s);
// }

// // 预览：行内公式、脚注
// .code-tooltip.md-hover-tip,
// .md-hover-tip .md-arrow:after {
//     background: @codeTooltipBg;//var(--pn-c);
// }

// // 行内数学公式
// content .md-inline-math mjx-container { // 编辑时
//     font-size: .75em !important;
// }
// .md-inline-math-container mjx-container { // 编辑时
//     zoom: 1 !important;
// }

// #math-inline-preview-content mjx-container[jax="SVG"]>svg g {
//     fill: @codeTooltipText !important;
// }

// // 公式链接
// mjx-container[jax="SVG"]>svg a {
//     fill: var(--a-color) !important;
//     stroke: var(--a-color) !important;
//     box-shadow: 0 -.3em 0 0 fade(@aLineColor, 30%) inset;
// }
// mjx-container[jax="SVG"]>svg a:hover {
//     fill: @aHoverColor !important;
//     stroke: @aHoverColor !important;
//     box-shadow: 0 -.3em 0 0 fade(@aLineColor, 30%) inset;
// }
// mjx-container[jax="SVG"]>svg a:active {
//     fill: @aHoverColor !important;
//     stroke: @aHoverColor !important;
//     box-shadow: 0 0 0 2px fade(@aHoverColor, 50%);
// }
