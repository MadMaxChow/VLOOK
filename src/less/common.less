/**************************************
 *
 * VLOOK™ CSS 多主题间的通用样式
 * (配合 base.less、主题.less 进行使用)
 *
 * V30.0
 * 2025-06-27
 * Powered by MAX°孟兆
 *
 * QQ Group: 805502564
 * Telegram Channel: t.me/vlook_markdown
 * email: maxchow@qq.com
 *
 * https://github.com/MadMaxChow/VLOOK
 * https://gitee.com/madmaxchow/VLOOK
 *
 *************************************/

// -----
// 通用变量 #Common_LESS_Var
@themeEmail: "maxchow@qq.com";

// 对应插件中配套预置选项 vlook-query，插件中的同名变量为 --vlook-query
@vlookQueryDef: "ws=auto&uico=solid&tabico=line";
@vlookQuery: @vlookQueryDef;
// 对应插件中配套预置选项 vlook-gray-mode，插件中的同名变量为 --vlook-gray-mode
@vlookGrayMode: "12-13:国家公祭日@zh";//;04-04:清明节@zh,ko";

@codeFontSize: 14px;
@tableRowNumTop: 4px; // 表格逐行自动编号的高度
@focusStyle: @aBorderWidth dashed var(--a-c); // 焦点、焦点行样式
@miniLineHeight: 1;
@defaultLineHeight: 1.5;
@paragraphPadding: .5em; // 段落空白
@paragraphInnerLineHeight: 1.5;
@figurePadding: 20px; // 插图内、间、行空白
@hoverBrightness: 90%;
@scrollFix: 8px; // 针对 Mermaid 图表，不添加会导致出现滚动条
@syntaxTipsFont: italic 12px/1 var(--v-f-fm-tag); // 语法提示字体设置

// 目录、文件 的当前节点、点击节点样式
@tocItemCurrent_boxShadow: 0 0 0 2px @aColor inset;

// 图片、插图边框宽度
@imgBorderWidth: 2px;

// --------------------
// 针对 a kbd 按钮链接的圆角风格选择
// 无圆角（方角）
.applyKbdRadius(@kbdStyle) when (@kbdStyle = none) {
    #write a kbd {
        padding: 6px 9px;
        border-radius: 0;
    }
}
// 小圆角
.applyKbdRadius(@kbdStyle) when (@kbdStyle = small) {
    #write a kbd {
        padding: 7px 10px;
        border-radius: var(--v-r-s);
    }
}
// 大圆角
.applyKbdRadius(@kbdStyle) when (@kbdStyle = big) {
    #write a kbd {
        padding: 8px 12px;
        border-radius: 40px;
    }
}
// 叶子圆角
.applyKbdRadius(@kbdStyle) when (@kbdStyle = leaf) {
    #write a kbd {
        padding: 8px 12px;
        border-radius: calc(var(--v-r-b) - 2px) calc(var(--v-r-b-xc) - 2px);
    }
}

// ==================== 主题的文档纹理背景 ==================== //

// 大方格
@docBgImgLight_Grid: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4AQMAAAADqqSRAAAABlBMVEUAAAAAAAClZ7nPAAAAAnRSTlMACHhIRQoAAAAlSURBVDjLYwABRgQxyh/l05T/HxUMuHtG+SOLP5r+RvmDKP0BALD8LjNR4HGxAAAAAElFTkSuQmCC");
@docBgImgDark_Grid: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4AQMAAAADqqSRAAAABlBMVEUAAAD///+l2Z/dAAAAAnRSTlMAD+Ys0KkAAAAlSURBVDjLYwABRgQxyh/l05T/HxUMuHtG+SOLP5r+RvmDKP0BALD8LjNR4HGxAAAAAElFTkSuQmCC");
// 小方格
@docBgImgLight_Grid2: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4AgMAAABECt5BAAAACVBMVEUAAAAAAAAAABp+ARC6AAAAA3RSTlMABQpn1NmFAAAASklEQVRIx2NgYBBgYAQRTNhYI1Y6FAbCsLEGs8tHQ22oSY+GGjnSq/CCwezy0bQ21KRHQ2001EbLtcEsPZrWRkNtNNQGszT+cg0Aff3B0vb/kO4AAAAASUVORK5CYII=");
@docBgImgDark_Grid2: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4AgMAAABECt5BAAAACVBMVEUAAAD///////9zeKVjAAAAA3RSTlMACg+QJjHFAAAASklEQVRIx2NgYBBgYAQRTNhYI1Y6FAbCsLEGs8tHQ22oSY+GGjnSq/CCwezy0bQ21KRHQ2001EbLtcEsPZrWRkNtNNQGszT+cg0Aff3B0vb/kO4AAAAASUVORK5CYII=");
// 斜纹
@docBgImgLight_Twill: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgAgMAAACf9p+rAAAACVBMVEUAgIAAFxcAJCSKq6crAAAAA3RSTlMBCweGJOKBAAAALElEQVRIx+3NwQAAAAgEwfvmEUmEIUewBO0ITBakQQpkgIeHh4eHh4fHp+MAyUI93xXtGOkAAAAASUVORK5CYII=");
@docBgImgDark_Twill: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgAgMAAACf9p+rAAAACVBMVEX///////////+OSuX+AAAAA3RSTlMBDQhAwViWAAAALElEQVRIx+3NwQAAAAgEwfvmEUmEIUewBO0ITBakQQpkgIeHh4eHh4fHp+MAyUI93xXtGOkAAAAASUVORK5CYII=");
// 反斜纹
@docBgImgLight_Twill_R: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgAgMAAACf9p+rAAAACVBMVEUAgIAAFxcAJCSKq6crAAAAA3RSTlMBCweGJOKBAAAALElEQVRIx+3NwQAAAAgEwXvFEF4qmUewBO0ITAqkQQZkgYeHh4eHh4fHp+MApP8932G+Z1sAAAAASUVORK5CYII=");
@docBgImgDark_Twill_R: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgAgMAAACf9p+rAAAACVBMVEX///////////+OSuX+AAAAA3RSTlMBDQhAwViWAAAALElEQVRIx+3NwQAAAAgEwXvFEF4qmUewBO0ITAqkQQZkgYeHh4eHh4fHp+MApP8932G+Z1sAAAAASUVORK5CYII=");
// 电路
@docBgImgLight_EC: url("data:image/png;base64,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");
@docBgImgDark_EC: url("data:image/png;base64,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");
// 波浪
@docBgImgLight_Wave: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAABaAQMAAABniyE+AAAABlBMVEUAAAAAAAClZ7nPAAAAAnRSTlMABQb5ObcAAACISURBVDjL7c+xDQIxDIXhP4p0blDuSopIrJDSHStlAjCbWWIRswElBRK0ka6+Lu793vvY3Q1WJ33gCvCDS5C/cDdIT0M7UuDlkB9OV4qQPEAIolKzZevYQscL5+SZhhVa8gXFhQ0/ocmERixsw1svMIRqhaGyKuOg9c04V2LHmcAJnMAJPBT4B1dv8/3llFzqAAAAAElFTkSuQmCC");
@docBgImgDark_Wave: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAABaAgMAAAAgK1vuAAAACVBMVEUAAAD///////9zeKVjAAAAA3RSTlMABwMsPgOjAAAAwElEQVRIx+2RwQ3EIAwEFyQeLiDXAX1QAo+AeFIKSg3J1Xv25hspV4B5sGI12ODF28qDck3bY1sm0nGfeJTWCbZBsJEMI5umeRmyHUS6EEklmG5IhuzYlvIVRLIaKqcZiFVZbVCUVf1AFRhEwiSSFhImnbzofGGX4iAsqFqFjhQ6GYRPraAaJlunReQDIvc/2DrubCmVr8pFWdN5ETnMjF3MlJGVf54GB/U8RQ74ZXlGnpFn5Bl5Rp6RZ+QZ/ZPRD8aD6RdPhRfPAAAAAElFTkSuQmCC");
// 雪花
@docBgImgLight_Snow: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADIAgMAAADQNkYNAAAACVBMVEUAAAAAAAAAAACDY+nAAAAAA3RSTlMABwnM6+q9AAAFDklEQVRo3uzWsarjQAwF0DsQ9Q68ecV+zQTsXgZdQ9xnIfmaLZ6b7aewv3KdlLYeWM2ysLltOBEzlsTgnXf+4aQSJ/pXiJ3CxgxrmkgV2gsGSPMkkiKEV12JREi+Fj11LAFy4kWzhAgyo+QsLLmrbeCOMwkhQ8cfpifRAOn4heDpIYZ0awMmIxmk8riwDBBCluNECkj2geNzJSMZ+IxcSbqyBi6LpAp5A/rD5ErLJL8bseSY6zBxTUk+keJMMXkdZhbpP44Syy+iUswluieaC4d5IC8ucaZVQOQXoUs+J+xyMWSuuQ/0yFCLt16F5IUDHZOG6YTT9qYLZCJBegR5MljGJisZFFloTpV+Mtv91wkdxydRrwdz1f3F0Eiu5OKRxLnwofvOhCikOKTVXMHHtsoHK5K5nSFUoUOQv5AINN4wKYgfU7stTiLduBcQTraScdJ9K0PuLO6nt3TnaMXfr63XYEtNC/fLJ9dcMr9ZvZXLYnlHKIVsXcL6WBYFHGKZxV8mT5K2V0Omop8uQdc/llnT9vgUJAxUjxDjWiXbhpgA4o9kajAsy0Qt+xdMYg8/a5Xqrvh0NhecVzJz9gguPskcf1fOd4/AJ2dy/Eo/Zz1MUn5w+JU4u79+wEv3UNFEMvDsuhcxkOfjZJxUJpjheJ6k9ggkjdTPaqWJPLuorC0CEaqsKkRKW3g7IxiZNUq6OBGWKGmIcBgnOU4kThq88847/1NKWKQ/7Zm/ahtBEMZnD2shqlxEItk6Te4p1mD3EvgEuSpFAtE+hXCRegmSC1dX7Jmb7ymzIyeNdg92U7iJB1SJH5o/981wn3w10gzViH4VZPkPiK+2puoRb6qRYA5XlQibww+qC+d+TpWIAaa6s2U14IvrJm1JeYVyCwBW+2s1kbPldXvtPygQyhXThuWhjSCTLkU0C2ICK5QiCk8R0cymGCGHiBBQ0bI17D6WBFj6WtiB5oxoHEn75aHwV3xEGqaIGFtGYOKIBBFmGWLwKA+kjoh0e3EsmMtRnZEh0jLTqewB+IvYvcFQNhmOnzPiAF/YgMNakmsVEIoUBrgRMsm2B9uyB8YboIen0rTIBNII5ikoQYqlD98+cA/WXK7m0J67VaMZuBtIu9qhFBmBl7T0hgriW0SCA6Rlh0K5yJ1cIuqZTCjdShFx4CgvzVQ6l+YZGESRhQ1bMGkALPL6WAJoHzNzGMG9Lb2qExkAN4yKKVoNsJoMqDTOabmHSQuyKcsMYGueg4GnddlcNCAtG4GgwVlD47IWh3EiBaDnGbms0rN6I7LHsZkR/lWXpqVk67EsmnxPv9iL4sML4mWdZZG7CyOnZZqa4Q8Cu/aJ+WIXFx7beqPOiBFEtnNSyH2HTXL4X9ZxRFrgmLHSsU0RT2c97rUQic3S8YUpKYr0cpYionBIkfFuvDQTFb2TSU6CZAaz425cZTy7HgARN+B0xwuCBFEuOOdjt59Tzazc47jLILDOBBmQ86nJBvTYJIgnp1kQMyWbYQWAbxOECAT7qRnSrbRdAKesw8jU2ivtFVLDUJCsW2m1lQRN4qXugM1tVpleZaWvHICcl9XOntUFxoi8zyC/mPPICqf+xJnEPjfB2Rnkvu/cMf3yuglmBukEOeU2U9BZRPTSb/sxhwzKzv355rpdHpnd2Qt03Xdb9SJ2h27V1b2IyYK5tlWI2m9Vdv0f5hEpJBPaVnt/iubj1r6GkWfpLd7iLf6z+A2b7usoil+0bAAAAABJRU5ErkJggg==");
@docBgImgDark_Snow: url("data:image/png;base64,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");

// 主题配套预置选项 vlook-header-autonum
// 针对 1-6 级标题前缀/自动编号内容
// 针对 counter() 支持使用有序列表的符号格式（decimal/decimal-leading-zero/lower-roman/upper-roman/lower-alpha/upper-alpha），如：counter(h1, upper-alpha)
@headerNumSeparator: " ";
@h1NumSeparator: @headerNumSeparator;
@h2NumSeparator: @headerNumSeparator;
@h3NumSeparator: @headerNumSeparator;
@h4NumSeparator: @headerNumSeparator;
@h5NumSeparator: @headerNumSeparator;
@h6NumSeparator: @headerNumSeparator;
@vHeaderAutoNum: "~`h1{{###@{headerNumSeparator}}},h2{{###@{headerNumSeparator}}},h3{{###@{headerNumSeparator}}},h4{{###@{headerNumSeparator}}},h5{{###@{headerNumSeparator}}}`";
@h1BeforeContent: counter(h1) "." @h1NumSeparator;
@h2BeforeContent: counter(h1) "." counter(h2) @h2NumSeparator;
@h3BeforeContent: counter(h1) "." counter(h2) "." counter(h3) @h3NumSeparator;
@h4BeforeContent: counter(h1) "." counter(h2) "." counter(h3) "." counter(h4) @h4NumSeparator;
@h5BeforeContent: counter(h1) "." counter(h2) "." counter(h3) "." counter(h4) "." counter(h5) @h5NumSeparator;
@h6BeforeContent: "◼︎" @h6NumSeparator;

// 针对 h1::before 的扩展样式
.genH1beforeExt() {}
// 针对 h2::before 的扩展样式
.genH2beforeExt() {}
// 针对 h2::before 的扩展样式
.genH2beforeExt() {}
// 针对 h3::before 的扩展样式
.genH3beforeExt() {}
// 针对 h4::before 的扩展样式
.genH4beforeExt() {}
// 针对 h5::before 的扩展样式
.genH5beforeExt() {}
// 针对 h6::before 的扩展样式
.genH6beforeExt() {}

// 针对 VLOOK CC 的扩展样式（在原选择器内）
.genCcTopLeftExt() {};
.genCcTopRightExt() {};
.genCcBottomLeftExt() {};
.genCcBottomRightExt() {};
// 自定义扩展样式（指定选择器）
.genCcExt() {};

// 主题色半透明
@theme1FadeDark: @theme1Fade;
@theme2FadeDark: @theme2Fade;

// 题注文字、背景色
@captionTextColor: var(--d-fc);
@captionBackground: var(--pn-fd03);//rgba(var(--pn-fd-r), var(--pn-fd-g), var(--pn-fd-b), .3);

// 题注内容主体的边框
@captionContentBorder: ~'@{imgBorderWidth} solid var(--pn-c)';

// 标题的阴影样式
@h1Shadow: none;
@h2Shadow: none;
@h3Shadow: none;
@h4Shadow: none;
@h5Shadow: none;
@h6Shadow: none;

// 标题的文字阴影样式
@h1TextShadow: none;
@h2TextShadow: none;
@h3TextShadow: none;
@h4TextShadow: none;
@h5TextShadow: none;
@h6TextShadow: none;

// 标题的文字字体大小
@h1FontSize: 1.875em;
@h2FontSize: 1.625em;
@h3FontSize: 1.5em;
@h4FontSize: 1.375em;
@h5FontSize: 1.25em;
@h6FontSize: 1.125em;
@h7FontSize: 1.125em; // 引用块小标题、折叠标题

// 针对 h4 的扩展样式
.genH4Ext() {}
// 针对 h5 的扩展样式
.genH5Ext() {}

// 标题的文字轮廓样式
@h1TextStroke: initial;
@h2TextStroke: initial;
@h3TextStroke: initial;
@h4TextStroke: initial;
@h5TextStroke: initial;
@h6TextStroke: initial;

// 标题的左边框
@h1BorderLeft: 0;
@h2BorderLeft: 0;
@h3BorderLeft: 0;
@h4BorderLeft: 0;
@h5BorderLeft: 0;
@h6BorderLeft: 0;

// 标题的右边框
@h1BorderRight: 0;
@h2BorderRight: 0;
@h3BorderRight: 0;
@h4BorderRight: 0;
@h5BorderRight: 0;
@h6BorderRight: 0;

// 标题的上边框
@h1BorderTop: 0;
@h2BorderTop: 0;
@h3BorderTop: 0;
@h4BorderTop: 0;
@h5BorderTop: 0;
@h6BorderTop: 0;

// 标题的下边框
@h1BorderBottom: 0;
@h2BorderBottom: 0;
@h3BorderBottom: 0;
@h4BorderBottom: 0;
@h5BorderBottom: 0;
@h6BorderBottom: 0;

@headerLetterSpacing: 0;

// 标题内边距
@headerPadding: 5px 0;
@h1Padding: @headerPadding;
@h2Padding: @headerPadding;
@h3Padding: @headerPadding;
@h4Padding: @headerPadding;
@h5Padding: @headerPadding;

// 标题圆角
@headerBorderRadius: var(--v-r-b);
@h1BorderRadius: @headerBorderRadius;
@h2BorderRadius: @headerBorderRadius;
@h3BorderRadius: @headerBorderRadius;
@h4BorderRadius: @headerBorderRadius;
@h5BorderRadius: @headerBorderRadius;

// 标题内文本圆角
@h1SpanBorderRadius: 0;
@h2SpanBorderRadius: 0;
@h3SpanBorderRadius: 0;
@h4SpanBorderRadius: 0;
@h5SpanBorderRadius: 0;

// 标题背景
@headerBackground: none;
@h1Bg: @headerBackground;
@h2Bg: @headerBackground;
@h3Bg: @headerBackground;
@h4Bg: @headerBackground;
@h5Bg: @headerBackground;

// 主题中强制控制，对大于指定层级的标题都不显示
// 会同时应用到章节导航时跳转的章节层级
// 对应 CSS 中的同名变量 --v-hide-outline-over
@hideOutlineOver: 99;

// 标题色
@headerColor: @theme1;
@headerColorDark: @theme1Dark;

// 标题颜色
@h1Color: var(--h-f);
@h2Color: var(--h-f);
@h3Color: var(--h-f);
@h4Color: var(--h-f);
@h5Color: var(--h-f);
@h6Color: var(--h-f);
@h7Color: var(--h-f);

// 标题前缀 before 颜色
@contentHeaderNumColor: var(--h-f);
@contentHeaderNumOpacity: .5;
@liBeforeColor: var(--h-f);

// 生成标题文字渐变色（h1）
// 若存在 emoji 符号，可以将对应符号独立设置为粗体等额外的格式
.genLinearGradientHeader(@header, @lg) when (@header = h1) {
    // #write @{escBackcoverId}>span,
    @{writeOnEditing} @{escBackcoverId}>span[md-inline=plain],
    @{writeOnHTML} @{escBackcoverId}>span,
    @{coverAfterYAML}~@{escBackcoverId}>span,
    @{coverWithoutYAML}~@{escBackcoverId}>span {
        background: @lg;
        background-clip: text;
        // -webkit-background-clip: text;
        color: transparent;
    }
}
// 生成标题文字渐变色（除 h1）
// 若存在 emoji 符号，可以将对应符号独立设置为粗体等额外的格式
.genLinearGradientHeader(@header, @lg) when not (@header = h1) {
    // #write @{header}>span {
    @{writeOnEditing} @{header}>span[md-inline=plain],
    @{coverAfterYAML} @{header}>span {
        background: @lg;
        background-clip: text;
        // -webkit-background-clip: text;
        color: transparent;
    }
}

// 有序列表分级符号
@ol1StyleType: decimal; // 阿拉伯数字
@ol2StyleType: lower-alpha; // 小写的英文字母
@ol3StyleType: lower-roman; // 小写的罗马数字
@ol4StyleType: decimal-leading-zero; // 以 0 前导的阿拉伯数字
@ol5StyleType: upper-alpha; // 大写的英文字母
@ol6StyleType: upper-roman; // 大写的罗马数字
// 无充列表分级符号
@ul1StyleType: disc; // 实心圆点
@ul2StyleType: square; // 方块
@ul3StyleType: circle; // 空心圆点
@ul4StyleType: disc;
@ul5StyleType: square;
@ul6StyleType: circle;

// 连续标题背景
@continuousHeaderBG: none;

// 标题外边距
@h1Margin: 2.5em 0 0 0;
@h2Margin: 2.5em 0 0 0;
@h3Margin: 2.5em 0 0 0;
@h4Margin: 2em 0 0 0;
@h5Margin: 2em 0 0 0;
@h6Margin: 1em 0 0 0;

// 标题对齐方式
@headerTextAlign: left;
@h1TextAlign: @headerTextAlign;
@h2TextAlign: @headerTextAlign;
@h3TextAlign: @headerTextAlign;
@h4TextAlign: @headerTextAlign;
@h5TextAlign: @headerTextAlign;
@h6TextAlign: @headerTextAlign;
@h7TextAlign: center; // 引用小标题

// 多个连续标题间的距离
@hContinuous: 0;

// 标签默认色号 --- 未合适
@tagBgDefaultColorCode: "t2";
@tagFgDefaultColorCode: ~"t2-a";
// 单级标签常规样式

// 引用块默认色样式（与主题配套使用）
@quoteBgDefault: var(--bq-bg);
@quoteBoxShadowDefault: none;
// 引用块的双栏、三栏、四栏
@columnQuoteBgInQuote: var(--d-bc);
@columnQuoteBoxShadowInQuote: none;

// 引用块边框宽度
@defQuoteBorderWidth: .375em;

// 引用块小标题、折叠标题的分隔线宽度
@quoteTitleBorderWidth: 1px;

// 引用块左边框
@quoteRadius: var(--v-r-b) var(--v-r-b-xc);

// UI 外观颜色
@uiForeColor: #FFF;
@uiBgColor: @theme1;
@uiBgColorDark: @theme1Dark;

// 按钮文字颜色
@buttonForeColor: #FFF;
@buttonForeHoverColor: #FFF;

// 按钮背景颜色
@buttonBgColor: @theme1;
@buttonBgHoverColor: @theme2;
@buttonBgColorDark: @theme1Dark;
@buttonBgHoverColorDark: @theme2Dark;

// 行内代码
@codeTextColor: @theme2;
@codeTextColorDark: @theme2Dark;
@codeBgColor: var(--d-bc-lg);
@codeBgColorDark: var(--d-bc-dk);

// 代码块背景图
@codeBlockBackground: none;
@codeBlockBackgroundDark: none;
@codeBlockBackgroundSize: auto;
@codeBlockBackgroundRepeat: inherit;
@codeBlockBackgroundPosition: inherit;

// 封面、封底标题的文字阴影样式
@coverTextShadow: none;
@backcoverTextShadow: none;

// 封面、封底标题的文字轮廓样式
@coverTextStroke: initial;
@backcoverTextStroke: initial;

@contrastBorder: 0 0 0 0 transparent;
@contrastBorderForCover: none;
@contrastBorderForBackcover: @contrastBorderForCover;

// 封面背景相关变量
@coverBgSize: auto;
@coverBgSizeForMobile: auto;
@coverBgPosition: 0 0;
@coverBgPositionForMobile: 0 0;
// 封面 before 相关
@coverBgBeforeSize: auto;
@coverBgBeforeSizeForMobile: auto;
@coverBgBeforePosition: 0 0;
@coverBgBeforePositionForMobile: 0 0;

// 封面四角补充样式
@ccLeftRightPadding: 60px;
@ccLeftRightPaddingForMobile: 20px;

// 封底背景相关变量
@backcoverBgSize: auto;
@backcoverBgSizeForMobile: auto;
@backcoverBgPosition: 0 0;
@backcoverBgPositionForMobile: 0 0;
// 封底 before 相关
@backcoverBgBeforeSize: auto;
@backcoverBgBeforeSizeForMobile: auto;
@backcoverBgBeforePosition: 0 0;
@backcoverBgBeforePositionForMobile: 0 0;

// 要与 CSS 变量 --mark-bg-h --mark-bg-h-inset 一并修改
@markBgHeight: .5em;

:root {
    // 要与 LESS 变量 @markBgHeight 一并修改
    --mark-bg-h: .75em;
    --mark-bg-h-inset: -.75em;

    // 文档扩展区域背景
    --thm-doc-ext-bg: linear-gradient(180deg, var(--d-bc), var(--ac-t1-fd));

    --pn-fd00: rgba(var(--pn-fd-r), var(--pn-fd-g), var(--pn-fd-b), 0);
    --pn-fd01: rgba(var(--pn-fd-r), var(--pn-fd-g), var(--pn-fd-b), .1);
    --pn-fd02: rgba(var(--pn-fd-r), var(--pn-fd-g), var(--pn-fd-b), .2);
    --pn-fd03: rgba(var(--pn-fd-r), var(--pn-fd-g), var(--pn-fd-b), .3);
    --pn-fd04: rgba(var(--pn-fd-r), var(--pn-fd-g), var(--pn-fd-b), .4);
    --pn-fd05: rgba(var(--pn-fd-r), var(--pn-fd-g), var(--pn-fd-b), .5);
    --pn-fd06: rgba(var(--pn-fd-r), var(--pn-fd-g), var(--pn-fd-b), .6);
    --pn-fd07: rgba(var(--pn-fd-r), var(--pn-fd-g), var(--pn-fd-b), .7);
    --pn-fd08: rgba(var(--pn-fd-r), var(--pn-fd-g), var(--pn-fd-b), .8);
    --pn-fd10: rgba(var(--pn-fd-r), var(--pn-fd-g), var(--pn-fd-b), 1);

    --fd00: rgba(var(--fd-r), var(--fd-g), var(--fd-b), 0);
    --fd01: rgba(var(--fd-r), var(--fd-g), var(--fd-b), .1);
    --fd04: rgba(var(--fd-r), var(--fd-g), var(--fd-b), .4);
    --fd05: rgba(var(--fd-r), var(--fd-g), var(--fd-b), .5);
    --fd07: rgba(var(--fd-r), var(--fd-g), var(--fd-b), .7);
    --fd08: rgba(var(--fd-r), var(--fd-g), var(--fd-b), .8);
    --fd09: rgba(var(--fd-r), var(--fd-g), var(--fd-b), .9);
    --fd10: rgba(var(--fd-r), var(--fd-g), var(--fd-b), 1);

    --thm-c-bg-size: @coverBgSize;
    --thm-c-bg-pos: @coverBgPosition;
    --thm-c-bg-bf-size: @coverBgBeforeSize;
    --thm-c-bg-bf-pos: @coverBgBeforePosition;

    --thm-cc-left-right-pd: @ccLeftRightPadding;

    --thm-bc-bg-size: @backcoverBgSize;
    --thm-bc-bg-pos: @backcoverBgPosition;
    --thm-bc-bg-bf-size: @backcoverBgBeforeSize;
    --thm-bc-bg-bf-pos: @backcoverBgBeforePosition;
}
@docExtContent: "";
@docExtBackgroundColor: var(--d-bc);
@docExtBackgroundImage: var(--thm-doc-ext-bg);
@docExtBackgroundSize: auto;
@docExtBackgroundRepeat: no-repeat;
@docExtBackgroundPosition: 0 0;
@docExtBackgroundFilter: none;

// 封面内多级标签样式
@badgeColorInCover: @buttonForeHoverColor;
@badgeBakgroundInCover: var(--a-o-c);
@badgeBorderColorInCover: var(--d-bc);
@badgeBorderWidthInCover: 0;

// 欢迎页
@welcomePageForeColor: @uiForeColor;
@welcomePageBgColor: linear-gradient(0deg, var(--d-bc), var(--ac-t1));

// ==========

@writeOnEditing: ~"content>#write";
@writeOnHTML: ~".typora-export #write";
@onHTML: ~"body.typora-export";

// ==================== 生成封面内各类样式 ==================== //

.genCoverSup() {}

// 下划线（副标题）样式
.genCoverU() {
    font: var(--v-f-w-bd) .75em var(--v-f-fm-stt); // [style] [weight] [size/[line-height]] [family]
}

// 加粗（发布人）样式
.genCoverStrong() {}
// 加粗（发布人）内分块内容的样式
.genCoverStrongSpan() {}
// 加粗（发布人）前缀样式
.genCoverStrongBefore() {
    content: "by ";
    opacity: .6;
}
// 加粗（发布人）后缀样式
.genCoverStrongAfter() {}

// 斜体（版权信息）样式
.genCoverEm() {
    font: normal var(--v-f-w-bd) .4em var(--v-f-fm-stt); // [style] [weight] [size/[line-height]] [family]
}

// ==================== 生成不同风格的表格 ==================== //

// 生成表格通用部分
.genTableCommonStyle() {
    // 表格、代码块的容器
    #write figure {
        margin: @paragraphPadding 0 0;
    }
    // 表格
    :is(#write, .v-pic-in-pic) table {
        border-collapse: collapse;
        border: 2px solid var(--d-fc);
        background: var(--d-bc);
        line-height: @defaultLineHeight;
        word-break: break-all;
        white-space: pre-wrap;
        vertical-align: text-top;
        width: auto;
    }

    // 表头
    :is(#write, .v-pic-in-pic) table th {
        font: var(--v-f-w-bd) 1em var(--v-f-fm-bd); // [style] [weight] [size/[line-height]] [family]
        margin: 0;
        padding: var(--tbl-cell-padding);
    }

    // 单元格
    :is(#write, .v-pic-in-pic) table td {
        margin: 0;
        padding: var(--tbl-cell-padding);
    }

    // 所有单元格
    :is(#write, .v-pic-in-pic) table :is(th, td) {
        border: 1px solid var(--d-fc);
    }

    // 单元格最小宽度控制
    :is(#write, .v-pic-in-pic) table tr>:is(th, td) {
        word-break: break-word;
        min-width: 120px;
    }

    // 合并了所有列（即空白行）的样式
    .v-table-colspan-all {
        padding-left: 5px;
        background: var(--pn-c);
    }

    // 空白单元格
    :is(#write, .v-pic-in-pic) table .v-empty-cell {
        padding: 1px;
        min-width: 0;
    }

    // 表头、表体的首列
    @{thead_firstColumn},
    @{tbody_firstColumn} {
        border-left-width: 0;
    }

    // 行分组
    tr[data-folder] td {
        background-color: var(--pn-c);
    }

    // 编辑时，表格当前格行
    @{writeOnEditing} table tr.md-focus-container>:is(th, td) {
        .genTableCurrentRowStyle();
    }
}
.genTableCommonStyle_hover() {
    // 针对 table 行的 hover 样式
    @{writeOnHTML} table:not([data-tbl-x=true]) tr:hover>:is(th, td) {
        .genTableCurrentRowStyle();
    }
}
// 表格当前行样式
.genTableCurrentRowStyle() {
    box-shadow: 0 -3px 0 0 var(--ac-t2-fd) inset;
    border-bottom-color: var(--ac-t2) !important;
}

@tblBdWidth: 1px;
// 表头
@thead: ~':is(#write, .v-pic-in-pic) table>thead th';
@thead_firstRow_firstCell: ~':is(#write, .v-pic-in-pic) table>thead>tr:first-child>:first-child';
@thead_firstRow_lastCell: ~':is(#write, .v-pic-in-pic) table>thead>tr:first-child>:last-child';
@thead_firstColumn: ~':is(#write, .v-pic-in-pic) table>thead>tr>:first-child';
@thead_lastColumn: ~':is(#write, .v-pic-in-pic) table>thead>tr>:last-child';
@thead_lastRow: ~':is(#write, .v-pic-in-pic) table>thead>tr:last-child>th';
// 表体
@tbody: ~':is(#write, .v-pic-in-pic) table>tbody td';
@tbody_not_lastRow: ~':is(#write, .v-pic-in-pic) table>tbody>tr:not(:last-child)>td';
@tbody_firstRow: ~':is(#write, .v-pic-in-pic) table>tbody>tr:first-child>td';
@tbody_lastRow: ~':is(#write, .v-pic-in-pic) table>tbody>tr:last-child>td';
@tbody_firstColumn: ~':is(#write, .v-pic-in-pic) table>tbody>tr>:first-child';
@tbody_lastColumn: ~':is(#write, .v-pic-in-pic) table>tbody>tr>:last-child';
@tbody_lastRow_firstCell: ~':is(#write, .v-pic-in-pic) table>tbody>tr:last-child>:first-child';
@tbody_lastRow_lastCell: ~':is(#write, .v-pic-in-pic) table>tbody>tr:last-child>:last-child';
@tbody_2nRow: ~':is(#write, .v-pic-in-pic) table>tbody>tr:nth-child(2n) td';

// 标准风格（如正式文档、国标文档等用的常规表格）
.genTableStyle(@style) when (@style = simple) {
    // 公共部分
    .genTableCommonStyle();

    // 表格
    :is(#write, .v-pic-in-pic) table {
        border-color: var(--d-fc-a);
    }

    // 所有单元格
    :is(#write, .v-pic-in-pic) table :is(th, td) {
        border: 1px solid var(--d-fc-a);
    }

    // 表头末行
    @{thead_lastRow} {
        border-bottom-width: 2px;
    }
}

// 现代风格（内置主题默认）
.genTableStyle(@style) when (@style = modern) {
    // 公共部分
    .genTableCommonStyle();

    // 表格
    :is(#write, .v-pic-in-pic) table {
        border-color: var(--d-fc-a);
    }

    // 表头单元格
    @{thead} {
        border-color: var(--d-fc-a);
        background: var(--pn-c);
    }

    // 表头、表体的首列
    @{thead_firstColumn},
    @{tbody_firstColumn} {
        border-left-width: 0;
    }

    // 表头末行
    @{thead_lastRow} {
        border-bottom: 1px solid var(--d-fc-a);
    }

    // 表体（tbody）单元格
    @{tbody} {
        border-color: var(--pn-c);
        border-right-color: var(--d-fc-a);
    }

    // 表体（tbody）偶数行，斑马线样式
    @{tbody_2nRow} {
        background: var(--pn-fd03);//rgba(var(--pn-fd-r), var(--pn-fd-g), var(--pn-fd-b), .3);
    }

    // 行分组
    tr[data-folder] td {
        background-color: unset;
    }
}

// 扁平风格
.genTableStyle(@style) when (@style = flat) {
    // 公共部分
    .genTableCommonStyle();

    // 表格
    :is(#write, .v-pic-in-pic) table {
        border: none;
    }

    // 表头
    @{thead} {
        border-color: var(--pn-c);
    }

    // 表头单元格
    @{thead} {
        background: var(--pn-c);
    }

    // 表体（tbody）单元格
    @{tbody} {
        border-color: var(--pn-c);
    }

    // 表头、表体的首列
    @{thead_firstColumn},
    @{tbody_firstColumn} {
        border-left-width: 0;
    }
    // 表头、表体的末列
    @{thead_lastColumn},
    @{tbody_lastColumn} {
        border-right-width: 0;
    }

    // 表体（tbody）偶数行，斑马线样式
    @{tbody_2nRow} {
        background: var(--pn-fd03);//rgba(var(--pn-fd-r), var(--pn-fd-g), var(--pn-fd-b), .3) !important;
    }

    // 行分组
    tr[data-folder] td {
        background-color: unset;
    }
}

// 高对比风格
.genTableStyle(@style) when (@style = vivid) {
    // 公共部分
    .genTableCommonStyle();

    // 表格
    :is(#write, .v-pic-in-pic) table {
        border: none;
        border-bottom: 3px solid var(--d-fc-a);
    }

    // 表头
    @{thead} {
        border-color: var(--d-bc);
        border-top: none;
        color: var(--d-bc);
        background: var(--d-fc-a);
    }

    @{thead_lastRow} {
        border-bottom: none;
    }

    // 表体（tbody）单元格
    @{tbody} {
        border-color: var(--d-fc-a);
    }

    // 表头、表体的首列
    @{thead_firstColumn},
    @{tbody_firstColumn} {
        border-left-width: 0;
    }
    // 表头、表体的末列
    @{thead_lastColumn},
    @{tbody_lastColumn} {
        border-right-width: 0;
    }
}

// 报告风格（如论文、报告用的三线表）
.genTableStyle(@style) when (@style = report) {
    // 公共部分
    .genTableCommonStyle();

    // 表格
    :is(#write, .v-pic-in-pic) table {
        border-left-width: 0;
        border-right-width: 0;
    }

    // 表体（tbody）单元格
    @{tbody} {
        border-top-width: 0;
        border-bottom-width: 0;
    }

    // 表头、表体的首列
    @{thead_firstColumn},
    @{tbody_firstColumn} {
        border-left-width: 0;
    }
    // 表头、表体的末列
    @{thead_lastColumn},
    @{tbody_lastColumn} {
        border-right-width: 0;
    }
}

// ==================== 生成指定有序列表样式 ==================== //

// 注意 :not(@{hr_MdHr})+ 指排除分栏时的有序列表
.genOrderList(@style, @shape) {
    #write>:not(@{hr_MdHr})+ol,
    #write @{quote_details}>:not(@{hr_MdHr})+ol {
        counter-reset: v-list-counter;
        padding-left: 1.625em;
    }
    // 对 #write :is(ul,ol) 的微调
    #write>:not(@{hr_MdHr})+ol>ol,
    #write @{quote_details}>:not(@{hr_MdHr})+ol>ol {
        padding-left: 1.5em;
    }
    #write>:not(@{hr_MdHr})+ol>li,
    #write @{quote_details}>:not(@{hr_MdHr})+ol>li {
        counter-increment: v-list-counter;
        list-style-type: none;
    }
    @{writeOnEditing}>:not(@{hr_MdHr})+ol>li>p,
    @{writeOnEditing} @{quote_details}>:not(@{hr_MdHr})+ol>li>p {
        display: list-item;
    }

    // 有序列表符号样式
    #write>:not(@{hr_MdHr})+ol>li::before,
    #write @{quote_details}>:not(@{hr_MdHr})+ol>li::before {
        content: counter(v-list-counter);
        // 生成背景
        .genOrderListBg(@style);
        // 生成形状
        .genOrderListShape(@shape);
        font: bold .875em/20px var(--v-f-fm-tag); // [style] [weight] [size/[line-height]] [family]
        text-align: center;
        margin-left: -26px;
        margin-top: .25em;
        float: left;
        width: 20px;
        height: 20px;
        aspect-ratio: 1/1;
        padding: 1px 0 0;
    }
    // 编辑时微调
    @{writeOnEditing}>:not(@{hr_MdHr})+ol>li::before,
    @{writeOnEditing} @{quote_details}>:not(@{hr_MdHr})+ol>li::before {
        line-height: 18px;
    }
    // 对 macOS 环境微调
    body.@{macos} #write>:not(@{hr_MdHr})+ol>li::before,
    body.@{macos} #write @{quote_details}>:not(@{hr_MdHr})+ol>li::before {
        padding-top: 0;
    }
    // 第 10+ 的样式
    #write>:not(@{hr_MdHr})+ol>li:nth-child(n+10)::before,
    #write @{quote_details}>:not(@{hr_MdHr})+ol>li:nth-child(n+10)::before {
        font-size: .75em;
    }

    // 生成不同风格的背景
    .genOrderListBg(@style) when (@style = block) {
        color: var(--d-bc) !important;
        background-color: var(--d-fc);
    }
    .genOrderListBg(@style) when (@style = line) {
        color: var(--d-fc) !important;
        background-color: var(--d-bc);
        box-shadow: 0 0 0 1px var(--d-fc-a) inset; // 不用 border 的原因是渲染会上移 1px
    }

    // 生成不同形状
    .genOrderListShape(@shape) when (@shape = rect) {
        border-radius: calc(var(--v-r-s) - 2px) calc(var(--v-r-s-xc) - 2px);
    }
    .genOrderListShape(@shape) when (@shape = circle) {
        border-radius: 50%;
    }
    .genOrderListShape(@shape) when (@shape = drop) {
        border-radius: 50% 0 50% 50%;
    }

    .genOrderList_hover(@style);
}
.genOrderList_hover(@style) {
    @media (hover: hover) and (pointer: fine) {
        // 编辑时，当前输入行样式
        @{writeOnHTML}>:not(@{hr_MdHr})+ol>li:hover::before,
        @{writeOnHTML} @{quote_details}>:not(@{hr_MdHr})+ol>li:hover::before,
        // 针对列表行的 hover 样式
        @{writeOnEditing}>:not(@{hr_MdHr})+ol>li.md-focus-container::before,
        @{writeOnEditing} @{quote_details}>:not(@{hr_MdHr})+ol>li.md-focus-container::before {
            .genOrderListBg(@style) when (@style = block) {
                color: @buttonForeHoverColor !important;
                background-color: var(--a-o-c);
                box-shadow: none;
            }
            .genOrderListBg(@style) when (@style = line) {
                color: var(--a-o-c) !important;
                background-color: var(--ac-t2-a);
                box-shadow: 0 0 0 1px var(--a-o-c) inset; // 不用 border 的原因是渲染会上移 1px
            }
            .genOrderListBg(@style);
        }
    }
}

// ==================== 生成页签组样式 ==================== //

@tabGroupStdBdWidth: 2px;
@tabStdPaddingTop: 10px;
@tabGroupPadding: 4px;
@tabGroupTextColor: var(--d-fc);
@tabGroupBgColor: var(--pn-c);
@tabGroupHoverBgColor: var(--d-bc);
@tabGroupModernHeight: 44px;
@tabItemPadding: 5px;
@tabItemSimpleBorderWidth: 3px;
@tabItemModernHeight: 36px;

// 页签组（for 现代样式）
.v-tab-group,
.v-tab-group > .tab-group-wrap {
    margin: 0 auto;
}

.genTabGroup(@style) {
    // 页签组（编辑时）
    .genTabGroupOnEditing(@style);

    // 页签组
    .v-tab-group {
        font-family: var(--v-f-fm-bd);
        display: flex;
        overflow-x: auto;
        scrollbar-width: thin;
        white-space: nowrap;
        // 实现页签组浮动显示
        position: sticky;
        z-index: 120;
        top: var(--v-sticky-top);

        // 标准风格样式
        .genTabGroupBase(@style) when (@style = std) {
            align-items: flex-end;
            padding: @tabStdPaddingTop (@tabItemPadding * 2) 0;
            box-shadow: 0 5px 5px 0 var(--d-bc), 0 -@tabGroupStdBdWidth 0 0 @tabGroupBgColor inset;
            background: var(--d-bc);
        }
        // 简约风格样式
        .genTabGroupBase(@style) when (@style = simple) {
            align-items: flex-end;
            padding: @tabStdPaddingTop (@tabItemPadding * 2) 0;
            box-shadow: 0 5px 5px 0 var(--d-bc), 0 -1px 0 0 @tabGroupBgColor inset;
            background: var(--d-bc);
        }
        // 简约风格样式 UP 变种
        .genTabGroupBase(@style) when (@style = simple_up) {
            align-items: flex-end;
            padding: @tabStdPaddingTop (@tabItemPadding * 2) 0;
            box-shadow: 0 5px 5px 0 var(--d-bc), 0 -1px 0 0 @tabGroupBgColor inset;
            background: linear-gradient(0deg, var(--pn-c), var(--d-bc));
        }
        // 现代风格样式
        .genTabGroupBase(@style) when (@style = modern) {
            align-items: center;
            background: var(--pn-c);
            border-radius: var(--v-r-si) var(--v-r-si-xc);
            box-shadow: 0 0 5px 5px var(--d-bc);
            width: max-content;
            max-width: 100%;
            height: @tabGroupModernHeight;
        }
        .genTabGroupBase(@style);
    }
    // 生成移动端的样式微调
    .genTabGroupForMobile(@style);

    // 毛玻璃效果
    .v-tab-group.v-backdrop-blurs.enabled {
        .genTabGroupBackdropBlurs(@style) when (@style = std), (@style = simple) {
            background: var(--fd07);
        }
        .genTabGroupBackdropBlurs(@style) when (@style = simple_up) {
            background: radial-gradient(ellipse 55% 100% at bottom, var(--pn-c), transparent 100%);
        }
        .genTabGroupBackdropBlurs(@style) when (@style = modern) {
            background: var(--pn-fd07);
        }
        // 生成移动端的样式微调
        .genTabGroupBackdropBlurs(@style);
    }

    // 左侧更多内容滚动渐变样式
    .v-tab-group.left-more::before,
    .v-tab-group.right-more::after {
        content: "";
        min-width: 30px;
        position: sticky;
        z-index: 121; // 要比 .v-tab-group 大
        top: 0;
        bottom: 0;

        // 标准风格样式
        .genTabGroupMore(@style) when (@style = std) {
            left: -10px;
            height: 36px;
            background-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNiIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDYgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTUuMzY4LjA1OWwuMDEyLjAwNGMuNDcuMTc4LjcyMi43MDguNTgxIDEuMjAyTDEuOTQxIDEwbDQuMDAzIDguNjhjLjE3LjQ5Mi0uMDU5IDEuMDMyLS41MTMgMS4yMzZsLS4wNjMuMDI1Yy0uNDY5LjE3OC0uOTg1LS4wNi0xLjE4MS0uNTMybC0uMDItLjA1My00LjA2OS04LjcxN2EyLjEyMiAyLjEyMiAwIDAgMSAwLTEuMjc4TDQuMTY2LjY0NGMuMTc4LS41MDcuNzE2LS43NyAxLjIwMi0uNTg1eiIgZmlsbD0iIzg2ODg4QSIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+"),
                linear-gradient(90deg, @tabGroupMoreContentStdLG);
            background-repeat: no-repeat, no-repeat;
            background-position: left 6px center, left center;
            background-size: auto, auto;
        }
        // 简约风格样式，简约风格样式 UP 变种
        .genTabGroupMore(@style) when (@style = simple), (@style = simple_up) {
            .genTabGroupMore(std);
        }
        // 现代风格样式
        .genTabGroupMore(@style) when (@style = modern) {
            left: 0;
            height: @tabGroupModernHeight;
            border-top-left-radius: var(--v-r-si);
            border-bottom-left-radius: var(--v-r-si-xc);
            background-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNiIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDYgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTUuMzY4LjA1OWwuMDEyLjAwNGMuNDcuMTc4LjcyMi43MDguNTgxIDEuMjAyTDEuOTQxIDEwbDQuMDAzIDguNjhjLjE3LjQ5Mi0uMDU5IDEuMDMyLS41MTMgMS4yMzZsLS4wNjMuMDI1Yy0uNDY5LjE3OC0uOTg1LS4wNi0xLjE4MS0uNTMybC0uMDItLjA1My00LjA2OS04LjcxN2EyLjEyMiAyLjEyMiAwIDAgMSAwLTEuMjc4TDQuMTY2LjY0NGMuMTc4LS41MDcuNzE2LS43NyAxLjIwMi0uNTg1eiIgZmlsbD0iIzg2ODg4QSIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+"),
                linear-gradient(90deg, @pnMoreContentLG);
            background-repeat: no-repeat, no-repeat;
            background-position: left 8px center, left center;
            background-size: auto, auto;
        }
        .genTabGroupMore(@style);
    }
    // 右侧更多内容滚动渐变样式
    .v-tab-group.right-more::after {
        content: "";
        left: unset;
        transform: rotate(180deg);

        // 标准风格样式
        .genTabGroupRightMore(@style) when (@style = std) {
            right: -10px;
        }
        // 简约风格样式，简约风格样式 UP 变种
        .genTabGroupRightMore(@style) when (@style = simple), (@style = simple_up) {
            .genTabGroupRightMore(std);
        }
        // 现代风格样式
        .genTabGroupRightMore(@style) when (@style = modern) {
            right: 0;
            border-top-right-radius: var(--v-r-si-xc);
            border-bottom-right-radius: var(--v-r-si);
        }
        .genTabGroupRightMore(@style);
    }

    // 以页签组显示的内容滚动定位样式（scroll-margin-top）
    .tab-content-target {
        // 标准风格样式
        .genTabContentTarget(@style) when (@style = std) {
            scroll-margin-top: calc(var(--v-sticky-top) + @paragraphPadding + var(--v-tab-group-h)); // + 56px);
        }
        // 简约风格样式，简约风格样式 UP 变种
        .genTabContentTarget(@style) when (@style = simple), (@style = simple_up) {
            scroll-margin-top: calc(var(--v-sticky-top) + @paragraphPadding + var(--v-tab-group-h)); // + 57px);
        }
        // 现代风格样式
        .genTabContentTarget(@style) when (@style = modern) {
            scroll-margin-top: calc(var(--v-sticky-top) + @paragraphPadding + var(--v-tab-group-h)); // + 44px);
        }
        .genTabContentTarget(@style);
    }

    .tab-group-wrap {
        display: flex;
    }

    // 页签项样式
    .tab-group-wrap > span {
        white-space: nowrap;
        display: inline-flex;
        align-items: center;
        margin: 0 (@tabGroupPadding / 2);
        cursor: var(--cur-ptr);
        color: var(--d-fc-a);
        font: var(--v-f-w-bd) 1em var(--v-f-fm-tag);

        // 标准风格样式
        .genTabItem(@style) when (@style = std) {
            border-radius: var(--v-r-s) var(--v-r-s-xc) 0 0;
            background: @tabGroupBgColor;
            padding: @tabItemPadding (@tabItemPadding * 2);
            border: 2px solid var(--pn-c);
            border-bottom: none;
        }
        // 简约风格样式
        .genTabItem(@style) when (@style = simple) {
            border-radius: var(--v-r-s) var(--v-r-s-xc) 0 0;
            padding: (@tabItemPadding * 2);
        }
        // 简约风格样式、以及 UP 变种共用部分
        .genTabItem(@style) when (@style = simple_up) {
            border-radius: var(--v-r-s) var(--v-r-s-xc) 0 0;
            padding: (@tabItemPadding * 2);
        }
        // 现代风格样式
        .genTabItem(@style) when (@style = modern) {
            height: @tabItemModernHeight;
            border-radius: calc(var(--v-r-si) - @tabGroupPadding) calc(var(--v-r-si-xc) - @tabGroupPadding);
            padding: (@tabItemPadding * 2);
        }
        .genTabItem(@style);
    }

    // 现代风格样式
    .genFirstTabItem(@style) when (@style = modern) {
        .tab-group-wrap>span:first-child {
            margin-left: @tabGroupPadding;
        }
        .tab-group-wrap>span:last-child {
            margin-right: @tabGroupPadding;
        }
    }
    .genFirstTabItem(@style);

    // 页签项内图标
    .tab-group-wrap > span > svg {
        margin-right: 5px;
    }

    // 标准风格样式、现代风格样式
    @media (hover: hover) and (pointer: fine) {
        // 非当前页签背景的 hover 样式
        .tab-group-wrap > span:not([class*=current]):hover {
            .genTabItemBgHover(@style) when (@style = std), (@style = modern)  {
                background: @tabGroupHoverBgColor;
            }
            .genTabItemBgHover(@style) when (@style = simple) {
                background: var(--pn-c);
            }
            .genTabItemBgHover(@style);
        }
        // 非当前页签（不包括 GSA）文字的 hover 样式
        .tab-group-wrap > span:not([class*=current]):not([class*=alert-]):hover {
            .genTabItemFgHover(@style) when (@style = std), (@style = modern) {
                color: var(--a-o-c);
            }
            .genTabItemFgHover(@style) when (@style = simple), (@style = simple_up) {
                color: var(--d-fc);
            }
            .genTabItemFgHover(@style);
        }
    }

    // 现代风格样式
    .genTabItem(@style) when (@style = modern) {
        .tab-group-wrap > span::before {
            content: "";
            width: 1px;
            background-color: var(--d-fc);
            opacity: .25;
            padding: 8px 0;
            margin-left: -12px;
            position: absolute;
        }

        .tab-group-wrap > span:first-child::before,
        .tab-group-wrap > .current::before,
        .tab-group-wrap > :is(.current, [class*=alert-]) + span::before,
        .tab-group-wrap > :hover::before,
        .tab-group-wrap > :hover + span::before {
            opacity: 0 !important;
        }
    }
    .genTabItem(@style);

    // 当前选中页签项
    .tab-group-wrap > .current {
        font-weight: var(--v-f-w-bd);
        color: var(--d-fc);

        // 标准风格样式
        .genTabItemCurrent(@style) when (@style = std) {
            border: @tabGroupStdBdWidth solid @tabGroupBgColor;
            color: var(--a-c);
            background: var(--d-bc) !important;
            border-bottom: none !important;
        }
        // 简约风格样式
        .genTabItemCurrent(@style) when (@style = simple) {
            border-bottom: @tabItemSimpleBorderWidth solid var(--a-c);
            padding-bottom: (@tabItemPadding * 2) - @tabItemSimpleBorderWidth;
        }
        // 简约风格样式 UP 变种
        .genTabItemCurrent(@style) when (@style = simple_up) {
            border-top: @tabItemSimpleBorderWidth solid var(--a-c);
            border-radius: 0;
            padding-top: (@tabItemPadding * 2) - @tabItemSimpleBorderWidth;
            background: var(--d-bc) !important;
            box-shadow: 1px 0 0 0 var(--pn-c) inset, -1px 0 0 0 var(--pn-c) inset;
        }
        // 现代风格样式
        .genTabItemCurrent(@style) when (@style = modern) {
            color: var(--a-c);
            background: var(--d-bc) !important;
            box-shadow: 0 0 @tabGroupPadding 0 var(--pn-c-a);
        }
        .genTabItemCurrent(@style);
    }

    // 对于标准风格中当前页签项样式
    .tab-group-wrap > .current[class*=alert-] {
        .genTabItemCurrentFor_GSA(@style) when (@style = std) {
            border: @tabGroupStdBdWidth solid @tabGroupBgColor;
            border-bottom: none !important;
        }
        .genTabItemCurrentFor_GSA(@style) when (@style = simple_up) {
            border-top: @tabItemSimpleBorderWidth solid currentColor;
        }
        .genTabItemCurrentFor_GSA(@style);
    }

    // 页签为 GSA 通用样式
    .tab-group-wrap > span[class*=alert-] {
        .genTabItemFor_GSA(@style) when (@style = simple), (@style = simple_up) {
            border-color: currentColor;
        }
        .genTabItemFor_GSA(@style);
    }
    // 页签为 GSA 的 note 内容
    .tab-group-wrap > .alert-note {
        color: var(--ac-bu);
    }
    // 页签为 GSA 的 tip 内容
    .tab-group-wrap > .alert-tip {
        color: var(--ac-gn);
    }
    // 页签为 GSA 的 important 内容
    .tab-group-wrap > .alert-important {
        color: var(--ac-pu);
    }
    // 页签为 GSA 的 warning 内容
    .tab-group-wrap > .alert-warning {
        color: var(--ac-bn);
    }
    // 页签为 GSA 的 caution 内容
    .tab-group-wrap > .alert-caution {
        color: var(--ac-rd);
    }
}

// ==================== 生成表格、插图的不同对齐方式的样式 ==================== //

// 居中对齐。非居中对齐时不调用
.genTableAndFigureAlign(@align) when (@align = center) {
    // 编辑时 h6 格式设置的题注样式
    @{writeOnEditing} h6:has(+p>.md-image), // 插图
    @{writeOnEditing} h6:has(+.md-table-fig), // 表格
    @{writeOnEditing} h6:has(+.md-fences), // 代码块、```math 语法公式
    @{writeOnEditing} h6:has(+.md-math-block), // $$ 语法公式
    // 表格居中
    :is(#write, .v-pic-in-pic) table {
        margin: 0 auto;
    }

    .md-diagram-panel>.md-diagram-panel-preview>svg { // 编辑时
        margin: auto;
    }

    // 明信片
    @{writeOnEditing} .md-image[data-src*="#card"]>img,
    @{writeOnEditing} .md-image[data-src*="#cardd"]::after,
    #write .v-post-card,
    #write img[src*="#card"],
    #write svg[data-inject-url*="#card"],
    #write :is(p, blockquote):has(img[src*="#card"]),
    // 视频嵌入代码
    @{iframeVideoOnEditing} @{biliVideo},
    @{iframeVideoOnEditing} @{douyinVideo},
    @{iframeVideoOnEditing} @{xiguaVideo},
    @{iframeVideoOnEditing} @{qqVideo},
    @{iframeVideoOnEditing} @{youtubeVideo},
    @{iframeVideo} @{biliVideo},
    @{iframeVideo} @{douyinVideo},
    @{iframeVideo} @{xiguaVideo},
    @{iframeVideo} @{qqVideo},
    @{iframeVideo} @{youtubeVideo},
    // 编辑时 Mermaid 图的预览
    .mermaid-svg, // 从 Typora 1.10.2-dev 开始启用
    .md-diagram-panel-preview>svg {
        margin-left: auto !important;
        margin-right: auto !important;
        display: block;
    }

    // 编辑时题注居中
    @{writeOnEditing} p:has([md-inline=em]:only-child>em>[md-inline=highlight]>mark),
    #write .md-fences-adv-panel, // 针对 Mermaid 图
    .tab-group-wrap > span, // 页签组条目
    .v-cap-cntr, // 导出后题注居中
    .v-caption.tbl>.v-cap-1 { // 表格题注样式
        text-align: center;
    }

    #write .v-post-card, // 明信片样式
    .v-cap-cntr.expander::before, // 折叠提示的样式居中
    @{writeOnEditing} .ty-table-edit { // 编辑时表格工具栏
        left: 50%;
        transform: translateX(-50%);
    }
    // 编辑时表格工具栏
    @{writeOnEditing} .ty-table-edit {
        margin-left: 0;
    }
}

// ==================== 标题 after 样式选择器 ==================== //

// 标题 after 样式
@headerAfter: ~"#write :is(h1,h2,h3,h4,h5)>span::after";

// 针对封底 span::after 的微调处理
@backcoverSpanAfter: ~"@{coverAfterYAML}~@{backcoverId}>span::after";
@backcoverSpanWithoutYAMLafter: ~"@{coverWithoutYAML}~@{backcoverId}>span::after";

// ==================== 多级标签样式 ==================== //

@codePaddingTop: 4px;
@codePaddingLeft: 6px;
@codePaddingRight: 8px;
@codeMarginForCap: -1px;

// 为什么是 3px？
// 因为 margin, border, padding 各 1px
@codeValueRadius: calc(var(--v-r-tag) - 3px);
@codeValueRadiusXC: calc(var(--v-r-tag-xc) - 3px);

// -----
// 标准风格
.genBadgeStyle(@style) when (@style = std) {
    // 多级标签内容（第2段）公共样式
    // 编辑时的多级标签内容（第2段）
    @{badgeOnEditingPrefix} > @{codeOnEditing}:not(:first-child) > code, // :first-child 时为 标签 tag
    @{badgeOnEditingPrefix} > @{codeOnEditing}:not(:only-child):first-child > code,  // 没有标题，只有 value 和 value2
    .v-badge-value {
        border-radius: @codeValueRadius @codeValueRadiusXC;
        background: var(--d-bc);
        padding: @codePaddingTop @codePaddingLeft;
        margin: 1px 1px 1px 4px;
    }

    // 三段式，多级标签有两个内容时微调
    @{badgeOnEditingPrefix} > @{codeOnEditing}+span:last-child,
    .v-badge-value.hastwo {
        margin: 1px 4px;
    }

    // 多级标签没有标题（第1段），只有两个内容 value 和 value2
    @{badgeOnEditingPrefix} > @{codeOnEditing}:not(:only-child):first-child > code,
    .v-badge-name > .v-badge-value:first-child {
        margin: 1px 4px 1px 1px;
    }
}

// -----
// 活力风格
@dynDeg: 104deg;
@dynOffset: 6px;
@dynPadding: 8px;
.genBadgeStyle(@style) when (@style = dyn) {
    // 多级标签内容（第2段）公共样式
    // 编辑时的多级标签内容（第2段）
    @{badgeOnEditingPrefix} > @{codeOnEditing}:not(:first-child) > code, // :first-child 时为 标签 tag
    @{badgeOnEditingPrefix} > @{codeOnEditing}:not(:only-child):first-child > code,  // 没有标题，只有 value 和 value2
    .v-badge-value {
        border-radius: 0 @codeValueRadiusXC @codeValueRadius 0;
        background: linear-gradient(@dynDeg, transparent @dynOffset, var(--d-bc) @dynOffset, var(--d-bc));
        padding: @codePaddingTop @codePaddingRight @codePaddingTop @dynPadding;
        margin: 1px 1px 1px 0;
    }

    // 三段式，多级标签有两个内容时微调
    // 第 2 个内容
    @{badgeOnEditingPrefix} > @{codeOnEditing}+span:last-child {
        margin: 1px @codePaddingLeft 1px 0;
    }
    // 第 1 个内容
    @{badgeOnEditingPrefix} > @{codeOnEditing}:not(:first-child):not(:last-child) > code,
    .v-badge-value.hastwo {
        margin-left: 0;
        margin-right: 0;
        padding-right: 10px;
        border-radius: 0;
        background: linear-gradient(@dynDeg, transparent @dynOffset, var(--d-bc) @dynOffset, var(--d-bc) calc(100% - @dynOffset), transparent calc(100% - @dynOffset));
    }

    // 多级标签没有标题（第1段），只有两个内容 value 和 value2
    @{badgeOnEditingPrefix} > @{codeOnEditing}:not(:only-child):first-child > code,
    .v-badge-name > .v-badge-value:first-child {
        margin-left: 1px;
        margin-right: 0;
        padding-left: @codePaddingLeft;
        padding-right: @dynPadding;
        border-radius: @codeValueRadius 0 0 @codeValueRadiusXC;
        background: linear-gradient(@dynDeg, var(--d-bc) 0%, var(--d-bc) calc(100% - @dynOffset), transparent calc(100% - @dynOffset));
    }
}

// -----
// 胶囊风格
.genBadgeStyle(@style, @style2: cap) when (@style = cap) {
    // 多级标签样式名称公共样式
    @{badgeOnEditing},
    @{badgeOnEditing2},
    .v-badge-name {
        padding-right: 0;
    }

    // 多级标签内容（第2段）公共样式
    // 编辑时的多级标签内容（第2段）
    @{badgeOnEditingPrefix} > @{codeOnEditing}:not(:first-child) > code, // :first-child 时为 标签 tag
    @{badgeOnEditingPrefix} > @{codeOnEditing}:not(:only-child):first-child > code,  // 没有标题，只有 value 和 value2
    .v-badge-value {
        border-radius: 0 calc(var(--v-r-tag-xc) - 1px) calc(var(--v-r-tag) - 1px) 0;
        color: var(--d-bc) !important;
        .genBadgeCapBg(@style2);
        .genBadgeDynBgValue1(@style2);
    }

    // 三段式，多级标签有两个内容时微调
    // 第 2 个内容
    @{badgeOnEditingPrefix} > @{codeOnEditing}+span:last-child {
        margin: 1px @codePaddingLeft 1px 0;
    }
    // 第 1 个内容
    @{badgeOnEditingPrefix} > @{codeOnEditing}:not(:first-child):not(:last-child) > code,
    .v-badge-value.hastwo {
        margin: @codeMarginForCap @codePaddingLeft;
        padding-left: @dynPadding !important;
        border-radius: 0;
        .genBadgeDynBgValue2(@style2);
    }

    // 多级标签没有标题（第1段），只有两个内容 value 和 value2
    @{badgeOnEditingPrefix} > @{codeOnEditing}:not(:only-child):first-child > code,
    .v-badge-name > .v-badge-value:first-child {
        margin: @codeMarginForCap 2px @codeMarginForCap @codeMarginForCap;
        border-radius: var(--v-r-tag) 0 0 var(--v-r-tag-xc);
        margin-right: @codePaddingLeft;
        .genBadgeDynBgNoName(@style2);
    }

    // ----------

    // 生成 cap 风格默认的背景
    .genBadgeCapBg(@style2) when (@style2 = cap) {
        margin: @codeMarginForCap @codeMarginForCap @codeMarginForCap @codePaddingLeft;
        padding: 5px @codePaddingLeft;
        background: var(--d-fc);
    }

    // 生成 cap + dyn 风格的背景
    .genBadgeDynBgValue1(@style2) when (@style2 = dyn) {
        margin-left: 2px;
        margin-top: -1px;
        margin-bottom: -1px;
        padding: 5px 6px 5px @dynPadding;
        background: linear-gradient(@dynDeg, transparent @dynOffset, var(--d-fc) @dynOffset, var(--d-fc));
    }
    // 生成 cap + dyn 风格的背景（有两个 value 时）
    .genBadgeDynBgValue2(@style2) when (@style2 = dyn) {
        margin-left: 2px;
        margin-right: 2px;
        padding-right: @codePaddingRight;
        background: linear-gradient(@dynDeg, transparent @dynOffset, var(--d-fc) @dynOffset, var(--d-fc) calc(100% - @dynOffset), transparent calc(100% - @dynOffset));
    }
    // 生成 cap + dyn 风格的背景（无标题时）
    .genBadgeDynBgNoName(@style2) when (@style2 = dyn) {
        margin-right: 2px;
        padding-right: @dynPadding;
        background: linear-gradient(@dynDeg, var(--d-fc), var(--d-fc) calc(100% - @dynOffset), transparent calc(100% - @dynOffset));
    }
}

// ==================== 生成段落加粗扩展样式 ==================== //

.genParaFormatBold() {
    @centerTextOnEditing: ~'@{writeOnEditing}>p>[md-inline=strong]:only-child:has(>strong)';
    @centerTextOnHTML: ~'@{writeOnHTML}>p>strong:only-child';
    @{centerTextOnEditing},
    @{centerTextOnHTML} {
        display: block;
        font-size: 1.125em;
        text-align: center;
        line-height: @defaultLineHeight;
        padding: .5em 0 .75em;
        margin-top: 1em;
    }
}

// ==================== 生成段落下划线扩展样式 ==================== //

.genParaFormatUnderline(@opacity : .4, @color1: var(--ac-t1), @color2 : var(--ac-t2)) {
    // 下划线
    @underlineOnlyChild: ~'@{writeOnEditing}>p>[md-inline=underline]:only-child';
    @underlineOnlyChild_blockquote: ~'@{writeOnEditing}>blockquote>p>[md-inline=underline]:only-child';
    @onlyUnderlineTextOnEditing: ~'@{underlineOnlyChild}:has(>u)';
    @onlyUnderlineTextOnEditing_blockquote: ~'@{underlineOnlyChild_blockquote}:has(>u)';
    @onlyUnderlineTextOnHTML: ~'@{writeOnHTML}>p>u:only-child';
    @onlyUnderlineTextOnHTML_blockquote: ~'@{writeOnHTML}>blockquote>p>u:only-child';
    @{onlyUnderlineTextOnEditing},
    @{onlyUnderlineTextOnEditing_blockquote},
    @{onlyUnderlineTextOnHTML},
    @{onlyUnderlineTextOnHTML_blockquote} {
        display: block;
        font-size: 1.125em;
        text-align: center;
        line-height: @defaultLineHeight;
        padding: .75em 0 1.5em;
        margin-top: .5em;
        border: none;
    }
    @{underlineOnlyChild}>u,
    @{underlineOnlyChild_blockquote}>u {
        border: none;
    }

    // 下划线 after
    @{onlyUnderlineTextOnEditing}:after,
    @{onlyUnderlineTextOnEditing_blockquote}:after,
    @{onlyUnderlineTextOnHTML}:after,
    @{onlyUnderlineTextOnHTML_blockquote}:after {
        content: "";
        position: absolute;
        margin-top: 2.5em;
        height: 3px;
        opacity: @opacity;
        background-image: linear-gradient(90deg, @color1, @color2);
        width: calc(100px + 10%);
        left: calc(50% - 50px - 5%);
    }
}

// ==================== 生成段落高亮扩展样式 ==================== //

// 双引号（圆）
@quoteBeforeImage_q01: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzgiIGhlaWdodD0iMjguNjMxIiB2aWV3Qm94PSIwIDAgMzggMjguNjMxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTE2LjE1NSAwbDEuMTYgMS4xNmEyMC4wNzUgMjAuMDc1IDAgMCAwLTEwLjI4OCA5LjY4OEE5IDkgMCAxIDEgMCAxOS42MzFDMCA5LjkgNi45NSAxLjc5MyAxNi4xNTUgMHpNMzYuMTU1IDBsMS4xNiAxLjE2YTIwLjA3NSAyMC4wNzUgMCAwIDAtMTAuMjg4IDkuNjg4QTkgOSAwIDEgMSAyMCAxOS42MzFDMjAgOS45IDI2Ljk1IDEuNzkzIDM2LjE1NSAweiIvPjwvZz48L3N2Zz4=");
@quoteAfterImage_q01: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzgiIGhlaWdodD0iMjguNjMxIiB2aWV3Qm94PSIwIDAgMzggMjguNjMxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTEuODQ1IDI4LjYzbC0xLjE2LTEuMTZhMjAuMDc1IDIwLjA3NSAwIDAgMCAxMC4yODgtOS42ODdBOSA5IDAgMSAxIDE4IDljMCA5LjczLTYuOTUgMTcuODM4LTE2LjE1NSAxOS42M3pNMjEuODQ1IDI4LjYzbC0xLjE2LTEuMTZhMjAuMDc1IDIwLjA3NSAwIDAgMCAxMC4yODgtOS42ODdBOSA5IDAgMSAxIDM4IDljMCA5LjczLTYuOTUgMTcuODM4LTE2LjE1NSAxOS42M3oiLz48L2c+PC9zdmc+");
// 双引号（方）
@quoteBeforeImage_q02: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iMzAiIHZpZXdCb3g9IjAgMCA0MCAzMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yIDEzaDE2djE2SDJ6TTEwIDFoN0w5IDEzSDJ6Ii8+PGc+PHBhdGggZD0iTTIxIDEzaDE2djE2SDIxek0yOSAxaDdsLTggMTJoLTd6Ii8+PC9nPjwvZz48L3N2Zz4=");
@quoteAfterImage_q02: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iMzAiIHZpZXdCb3g9IjAgMCA0MCAzMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xOSAxN0gzVjFoMTZ6TTExIDI5SDRsOC0xMmg3eiIvPjxnPjxwYXRoIGQ9Ik0zOCAxN0gyMlYxaDE2ek0zMCAyOWgtN2w4LTEyaDd6Ii8+PC9nPjwvZz48L3N2Zz4=");
// 双引号（尖）
@quoteBeforeImage_q03: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iMzAiIHZpZXdCb3g9IjAgMCA0MCAzMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xMSAxaDhsLTMgMjhIMnpNMzEgMWg4bC0zIDI4SDIyeiIvPjwvZz48L3N2Zz4=");
@quoteAfterImage_q03: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iMzAiIHZpZXdCb3g9IjAgMCA0MCAzMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik05IDI5SDFMNCAxaDE0ek0yOSAyOWgtOGwzLTI4aDE0eiIvPjwvZz48L3N2Zz4=");
// 双圆环
@quoteBeforeImage_c01: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iMzAiIHZpZXdCb3g9IjAgMCA0MCAzMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9Im5vbnplcm8iPjxwYXRoIGQ9Ik0xMCAxMGM1LjUyMyAwIDEwIDQuNDc3IDEwIDEwcy00LjQ3NyAxMC0xMCAxMFMwIDI1LjUyMyAwIDIwczQuNDc3LTEwIDEwLTEwem0wIDVhNSA1IDAgMSAwIDAgMTAgNSA1IDAgMCAwIDAtMTB6IiBvcGFjaXR5PSIuMyIvPjxwYXRoIGQ9Ik0yNyAwYzcuMTggMCAxMyA1LjgyIDEzIDEzcy01LjgyIDEzLTEzIDEzLTEzLTUuODItMTMtMTNTMTkuODIgMCAyNyAwem0wIDVhOCA4IDAgMSAwIDAgMTYgOCA4IDAgMCAwIDAtMTZ6IiBvcGFjaXR5PSIuNSIvPjwvZz48L3N2Zz4=");
@quoteAfterImage_c01: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iMzAiIHZpZXdCb3g9IjAgMCA0MCAzMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9Im5vbnplcm8iPjxwYXRoIGQ9Ik0zMCAyMGMtNS41MjMgMC0xMC00LjQ3Ny0xMC0xMFMyNC40NzcgMCAzMCAwczEwIDQuNDc3IDEwIDEwLTQuNDc3IDEwLTEwIDEwem0wLTVhNSA1IDAgMSAwIDAtMTAgNSA1IDAgMCAwIDAgMTB6IiBvcGFjaXR5PSIuMyIvPjxwYXRoIGQ9Ik0xMyAzMEM1LjgyIDMwIDAgMjQuMTggMCAxN1M1LjgyIDQgMTMgNHMxMyA1LjgyIDEzIDEzLTUuODIgMTMtMTMgMTN6bTAtNWE4IDggMCAxIDAgMC0xNiA4IDggMCAwIDAgMCAxNnoiIG9wYWNpdHk9Ii41Ii8+PC9nPjwvc3ZnPg==");
// 叶子
@quoteBeforeImage_l01: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMjgiIHZpZXdCb3g9IjAgMCAzMCAyOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xMCAwaDEydjEyYzAgNS41MjMtNC40NzcgMTAtMTAgMTBIMFYxMEMwIDQuNDc3IDQuNDc3IDAgMTAgMHoiIG9wYWNpdHk9Ii41Ii8+PHBhdGggZD0iTTE4IDZoMTJ2MTJjMCA1LjUyMy00LjQ3NyAxMC0xMCAxMEg4VjE2YzAtNS41MjMgNC40NzctMTAgMTAtMTB6IiBvcGFjaXR5PSIuMyIvPjwvZz48L3N2Zz4=");
@quoteAfterImage_l01: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMjgiIHZpZXdCb3g9IjAgMCAzMCAyOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yMCAyOEg4VjE2YzAtNS41MjMgNC40NzctMTAgMTAtMTBoMTJ2MTJjMCA1LjUyMy00LjQ3NyAxMC0xMCAxMHoiIG9wYWNpdHk9Ii41Ii8+PHBhdGggZD0iTTEyIDIySDBWMTBDMCA0LjQ3NyA0LjQ3NyAwIDEwIDBoMTJ2MTJjMCA1LjUyMy00LjQ3NyAxMC0xMCAxMHoiIG9wYWNpdHk9Ii4zIi8+PC9nPjwvc3ZnPg==");
// 半框（圆角）
@quoteBeforeImage_f01: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iMzEiIHZpZXdCb3g9IjAgMCA0MCAzMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMzAgMS4wMTFhNCA0IDAgMSAxIDAgOEgxN2EzIDMgMCAwIDAtMyAzdjEzYTQgNCAwIDEgMS04IDB2LTE0YzAtNS41MjIgNC40NzctMTAgMTAtMTB6IiBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=");
@quoteAfterImage_f01: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iMzAiIHZpZXdCb3g9IjAgMCA0MCAzMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTAgMjlhNCA0IDAgMSAxIDAtOGgxM2EzIDMgMCAwIDAgMy0zVjVhNCA0IDAgMSAxIDggMHYxNGMwIDUuNTIzLTQuNDc3IDEwLTEwIDEweiIgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+");
// 半框（方角）
@quoteBeforeImage_f02: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iMzEiIHZpZXdCb3g9IjAgMCA0MCAzMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik02IDEuMDExaDI4djhINnoiLz48cGF0aCBkPSJNNiAxLjAxMWg4djI4SDZ6Ii8+PC9nPjwvc3ZnPg==");
@quoteAfterImage_f02: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iMzAiIHZpZXdCb3g9IjAgMCA0MCAzMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0zNCAyOUg2di04aDI4eiIvPjxwYXRoIGQ9Ik0zNCAyOWgtOFYxaDh6Ii8+PC9nPjwvc3ZnPg==");

.genParaFormatMark(@beforeImage, @afterImage, @opacity : .3, @color1: var(--ac-t1), @color2 : var(--ac-t2)) {
    @marginWidth: 10px;
    @imgWidth: 40px;
    @imgHeight: 30px;

    // 高亮
    @highlightOnlyChild: ~'@{writeOnEditing}>p>[md-inline=highlight]:only-child';
    @onlyHighlightTextOnEditing: ~'@{highlightOnlyChild}:has(>mark)';
    @onlyHighlightTextOnHTML: ~'@{writeOnHTML}>p>mark:only-child';
    @{onlyHighlightTextOnEditing},
    @{onlyHighlightTextOnHTML} {
        display: block;
        font-size: 1.25em;
        text-align: center;
        line-height: @defaultLineHeight;
        padding: 1em (@imgWidth + @marginWidth) 1.5em;
        margin-top: 1em;
        box-shadow: none;
    }
    @{highlightOnlyChild}>mark {
        box-shadow: none;
    }

    // 高亮 before
    @{onlyHighlightTextOnEditing}:before,
    @{onlyHighlightTextOnHTML}:before {
        content: "";
        opacity: @opacity;
        margin: -@marginWidth 0 0 -(@imgWidth + @marginWidth);
        position: absolute;
        width: @imgWidth;
        height: @imgHeight;
        background: linear-gradient(135deg, @color1 10px, @color2);
        mask-image: @beforeImage;
        mask-repeat: no-repeat;
        mask-position: center center;
    }

    // 高亮 after
    @{onlyHighlightTextOnEditing}:after,
    @{onlyHighlightTextOnHTML}:after {
        content: "";
        opacity: @opacity;
        margin: @marginWidth 0 0 @marginWidth;
        position: absolute;
        width: @imgWidth;
        height: @imgHeight;
        background: linear-gradient(135deg, @color2, @color1 calc(100% - @marginWidth));
        mask-image: @afterImage;
        mask-repeat: no-repeat;
        mask-position: center center;
    }

    // 移动端微调
    @media screen and (max-width: @gMobileScreenWidth) {
        @{onlyHighlightTextOnHTML} {
            padding: 1em 0 2em;
        }

        @{onlyHighlightTextOnHTML}::before {
            margin: -1.75em 0 0 -.5em;
        }

        @{onlyHighlightTextOnHTML}::after {
            margin: 1.5em 0 0 -1.5em;
        }
    }
}

// ==================== 引用块居中显示 ==================== //

// 针对普通的引用块，注意内容如果过长仍会顶边
.genBlockquote(@style) when (@style = center) {
    blockquote,
    details,
    .md-alert {
        width: fit-content;
        margin-left: auto !important;
        margin-right: auto !important;
    }
}

// ==================== 生成 GitHub Style Alert 各类型相关样式 ==================== //

// 生成基础样式
.genHoverStyle(@for) when (@for = md-alert_kbdSec) {
    #write [class*=md-alert-] @{kbdSec}:hover @{svgGs} {
        fill: currentColor;
    }
}

#write [class*=md-alert-] a>img[src*="fill=text"] {
    filter: drop-shadow(@fillOffset 0 0 currentColor);
}
#write [class*=md-alert-] a kbd>img[src*="fill=text"] {
    filter: drop-shadow(@fillOffset 0 0 #FFF);
}
#write [class*=md-alert-] a>@{svgGs}, // 链接内 svg
#write [class*=md-alert-] @{kbdSec}>@{svgGs}, // 次要按钮内 svg
    #write [class*=md-alert-] .v-svg-input-checkbox>use { // 复选框控件
    fill: currentColor;
}
// 生成 GSA 不同类型的基础样式
.genGitHubStyleAlertCssBase(@type, @accColor) {
    // 引用块小标题
    #write .md-alert-@{type} @{quoteTitle},
    // 编辑时的 summary
    @{writeOnEditing} .md-alert-@{type} @{summaryOnEditing},
    // 导出后的 summary
    #write .md-alert-@{type} summary,
    // 编辑时的题注前缀
    @{writeOnEditing} .md-alert-@{type} @{cap1_OnEditing}::before,
    @{writeOnEditing} .md-alert-@{type} @{cap2_OnEditing}::before,
    // 导出后的题注前缀
    #write .md-alert-@{type} .v-caption:not(.codeblock) .v-cap-1>span,
    // 链接
    #write .md-alert-@{type} a {
        color: ~"var(--ac-@{accColor})";
    }

    // 主要按钮
    #write .md-alert-@{type} a kbd {
        color: @colorWhite;
        background: ~"var(--ac-@{accColor})";
        border-color: ~"var(--ac-@{accColor})";
    }
    #write .md-alert-@{type} a kbd>@{svgGs} {
        fill: @colorWhite;
    }
    // 次要按钮
    #write .md-alert-@{type} @{kbdSec} {
        color: ~"var(--ac-@{accColor})";
        border-color: currentColor;// ~"var(--ac-@{accColor})";
        background: var(--d-bc);
    }
    #write .md-alert-@{type} @{kbdSec}>img[src*="fill=text"] {
        filter: drop-shadow(@fillOffset 0 0 ~"var(--ac-@{accColor})") !important;
    }
    // 高亮
    #write .md-alert-@{type} mark {
        box-shadow: 0 -@markBgHeight 0 0 ~"var(--ac-@{accColor}-fd)" inset;
    }
    // 列表符号
    #write .md-alert-@{type} ::marker,
    #write .md-alert-@{type} li::before {
        color: ~"var(--ac-@{accColor})";
    }
}
.genGitHubStyleAlertCssBase_hover(@type) {
    #write .md-alert-@{type} a kbd:hover {
        color: @buttonForeHoverColor;
        background: var(--a-o-c);
        border-color: var(--a-o-c);
    }
}

// ----------
// 生成 GSA 简约风格样式
.genGitHubStyleAlertCSS(@type, @accColor, @bgColor) {
    #write .md-alert {
        padding: .25em 1em .5em 1em !important;
        border: @defQuoteBorderWidth solid var(--d-fc);
        border-top-width: 1px;
        border-right-width: 1px;
        border-bottom-width: 1px;
    }

    #write @{quote_details} .md-alert {
        border-radius: 0 var(--v-r-s) var(--v-r-s) 0;
    }

    // 背景
    #write .md-alert-@{type} {
        border-color: ~"var(--ac-@{accColor}-lg)" !important;
        .genBackground(@bgColor) when not (@bgColor = none) {
            @c: ~"var(--ac-@{bgColor}-fd)";
            background: linear-gradient(@c, @c), linear-gradient(var(--d-bc), var(--d-bc));
        }
        .genBackground(@bgColor);
    }
    // 针对 GSA 内的引用微调
    #write .md-alert-@{type} @{quote_details} {
        background: ~"var(--ac-@{accColor}-fd)" !important;
    }
    // 针对 after 提示
    #write .md-alert-text-@{type} .md-meta {
        color: ~"var(--ac-@{accColor})" !important;
        font-weight: normal !important;
        opacity: .5;
    }
    // 类型小标题
    #write .md-alert-text-@{type} {
        color: ~"var(--ac-@{accColor})" !important;
    }
    .genGitHubStyleAlertCssBase(@type, @accColor);
}

// 生成 GSA 简约风格
.genGSA(@style) when (@style = simple) {
    .genGitHubStyleAlertCSS(note, bu, none);
    .genGitHubStyleAlertCSS(tip, gn, none);
    .genGitHubStyleAlertCSS(important, pu, none);
    .genGitHubStyleAlertCSS(warning, bn, none);
    .genGitHubStyleAlertCSS(caution, rd, none);
}

// 生成 GSA 简约风格2
.genGSA(@style) when (@style = simpleEm) {
    // @bg: ~"linear-gradient(var(--ac-pu-fd),var(--ac-pu-fd)), linear-gradient(var(--d-bc),var(--d-bc))";
    .genGitHubStyleAlertCSS(note, bu, bu);
    .genGitHubStyleAlertCSS(tip, gn, gn);
    .genGitHubStyleAlertCSS(important, pu, pu);
    .genGitHubStyleAlertCSS(warning, bn, bn);
    .genGitHubStyleAlertCSS(caution, rd, rd);
}

// ----------
// 生成 GSA 扁平风格样式
.genGitHubStyleAlertCssFt(@type, @accColor) {
    @alertTypePaddingTop4Ft: .5em;
    #write .md-alert {
        border-radius: 0 0 var(--v-r-b) var(--v-r-b) !important;
        padding-top: @alertTypePaddingTop4Ft !important;
        border: none;
    }

    // 背景
    #write .md-alert-@{type} {
        background: ~"var(--ac-@{accColor}-a)";
        border-top: 2px solid ~"var(--ac-@{accColor})" !important;
    }
    // 针对 GSA 内的引用微调
    #write .md-alert-@{type} @{quote_details} {
        background: ~"var(--d-bc)" !important;
        border-radius:  0 0 var(--v-r-s) var(--v-r-s) !important;
    }
    // 引用内的 GSA 微调
    #write @{quote_details} .md-alert-@{type} {
        border-radius: 0 0 var(--v-r-s) var(--v-r-s) !important;
    }
    // 针对 after 提示
    #write .md-alert-text-@{type} .md-meta {
        font-weight: normal;
        opacity: .5;
    }
    // 类型小标题
    #write .md-alert-text-@{type} {
        color: ~"var(--ac-@{accColor}-tt)";
    }
    .genGitHubStyleAlertCssBase(@type, @accColor);
}

// 生成 GSA 扁平风格
.genGSA(@style) when (@style = flat) {
    .genGitHubStyleAlertCssFt(note, bu);
    .genGitHubStyleAlertCssFt(tip, gn);
    .genGitHubStyleAlertCssFt(important, pu);
    .genGitHubStyleAlertCssFt(warning, bn);
    .genGitHubStyleAlertCssFt(caution, rd);
}

// ----------
// 生成 GSA 强调风格样式
.genGitHubStyleAlertCssEm(@type, @accColor) {
    @alertTypePaddingTop4em: .625em;
    #write .md-alert {
        border-radius: var(--v-r-b);
        padding-top: @alertTypePaddingTop4em !important;
    }

    #write .md-alert>p:first-child {
        margin-bottom: 1em;
    }

    // 背景
    @alertTypePaddingTop4emLg: @alertTypePaddingTop4em + 2em; // 适配调整类型显示位置的高度
    #write .md-alert-@{type} {
        background: linear-gradient(180deg, ~"var(--ac-@{accColor})" @alertTypePaddingTop4emLg, ~"var(--ac-@{accColor}-a)" @alertTypePaddingTop4emLg, ~"var(--ac-@{accColor}-fd)");
        border: @imgBorderWidth solid ~"var(--ac-@{accColor}-lg)";
    }
    // 针对 GSA 内的引用微调
    #write .md-alert-@{type} @{quote_details} {
        background: ~"var(--d-bc)";
    }
    // 引用内的 GSA 微调
    #write @{quote_details} .md-alert-@{type} {
        border-radius: var(--v-r-b);
    }
    // 针对 after 提示
    #write .md-alert-text-@{type} .md-meta {
        color: ~"var(--ac-@{accColor}-a)";
        font-weight: normal;
        opacity: .5;
    }
    // 类型小标题
    #write .md-alert-text-@{type} {
        color: @colorWhite;
    }
    .genGitHubStyleAlertCssBase(@type, @accColor);
}

// 生成 GSA 强调风格
.genGSA(@style) when (@style = em) {
    .genGitHubStyleAlertCssEm(note, bu);
    .genGitHubStyleAlertCssEm(tip, gn);
    .genGitHubStyleAlertCssEm(important, pu);
    .genGitHubStyleAlertCssEm(warning, bn);
    .genGitHubStyleAlertCssEm(caution, rd);
}
