{"version":3,"names":["LOG","console","log","apply","arguments","INFO","info","WARN","warn","ERROR","error","DEBUG","V_debugMode","ALERT","m","alert","WINDOW_getHref","window","location","href","WINDOW_setHref","value","WINDOW_getHash","hash","JQ_addClass","target","className","gUndefined","addClass","JQ_removeClass","removeClass","JQ_removeAttr","attrName","removeAttr","JQ_exchangeClass","oldClassName","newClassName","JQ_remove","remove","JS_parseInt","parseInt","JS_parseFloat","parseFloat","JS_mathRound","Math","round","JS_mathCeil","ceil","JS_decodeURI","decodeURI","DOM_html","DOM_h","$","length","_failed_","DOM_body","DOM_b","VOM_doc","VOM_d","_write_","VOM_cover","VOM_c","_firstChild_","_h6_","VOM_docTitle","VOM_backcover","VOM_bc","fns","_footnotesArea_","backcover","pr","tagName","V_util_getTagName","VOM_dt","V_params_init","V_params_url","V_util_getUrlQueryParams","vp","V_util_getMetaByName","V_params_yaml","_","V_util_getDocTitle","document","a","_title_","metaName","content","_mata_","V_attrX","_name_","_content_","V_util_getParamVal","pName","v","u","h","i","si","s","qs","p","is","sp","item","l","decodeURIComponent","V_util_getUrlHash","V_util_getUrlQueryString","V_util_getUrlWithoutHash","V_util_getUrlPathWithoutQueryAndHash","queryIdx","hashIdx","V_util_getPath","qi","ti","lastIndexOf","pi","V_util_htmlTagEncode","text","r","V_util_clearHtmlQuot","V_util_ellipsisText","limit","__getChs","str","cjk","cnt","__getChsRev","count","len","___","x","t","cjkHeader","cjkTailer","V_util_redirectTo","setTimeout","V_ui_tuningScrollTop","gTrue","gFalse","V_util_gotoHash","last","V_util_getVarVal","varName","getComputedStyle","documentElement","getPropertyValue","V_util_setVarVal","style","setProperty","V_util_getTemplateTheme","rA","V_util_changeCssVarSet","varSet","flag","tmp","push","prop","_tagName_","V_util_wrapBackquote","__hasBackquote","bq1","bq2","V_formatting_thousands","V_formatting_decimal","V_ui_span","_vTblColFmtNumDecimal_","V_formatting_percent","_vTblColFmtPercent_","V_formatting_currency","gRE_CurrencyNoEscape","gRE_CurrencyNoEscape2","_vTblColFmtCurrency_","V_checkSpec","c","V_lang_id","_class_","gToc","_vMdToc_","V_init","sw","Stopwatch","st","iFontTheme","FontTheme","BgMask","_fontTheme_","_center_","init","ed","iSpotlight","Spotlight","BottomTips","_spotlight_","iLaserPointer","LaserPointer","cf","ContentFolder_enabled","_off_","_on_","ContentFolder_enabled_table","_table_","ContentFolder_enabled_figure","_figure_","ContentFolder_enabled_codeblock","_codeblock_","ContentFolder_init","ToolTips_init","iInfoTips","InfoTips","runMode","iNavCenter","NavCenter","_navCenter_","_left_","iChapterNav","ChapterNav","chpNav","iToolbar","Toolbar","add","tg","_docLib_","docLib","counter","showed","keyword","input","focus","val","_vdl_","select","show","addSpliter","_toolbarSpliter_","_paragraphNav_","inform","V_ui_strong","hide","iParagraphNav","_laserPointer_","_print_","V_print_ready","toolbar","bindButton","btns","iFigNav","FigureNav","MoreDocContent_init","iFootNote","FootNote","_bottom_","StsDocInfo_init","StsFontTheme_init","StsColorScheme_init","StsLinkTool_init","_linkChecker_","_right_","StatusBar_init","StatusBar_add","StsDocInfo_ui","StsFontTheme_ui","StsColorScheme_ui","StsLinkTool_ui","V_initKernel","iStopwatch","icoLg","_vDocLog_","_light_","_backgroundImage_","icoDk","_dark_","ap","_docIcon_","V_attr","_href_","_4space_","vTp","V_type","_mini_","pp","V_ui_div","_vkIdDocTitle_","_vDoc_","V_ui_initI18n","CaptionGenerator_autoContent","ExtAudio_init","ExtVideo_init","ExtQuote_init","ExtQuote_adjustHoverStyle","ExtFigure_init","_cost_","ExtTable_init","TableCross_init","RowGroup_adjustHoverStyle","ExtCodeBlock_init","CodeMagic_init","XscriptMagic_init","LinkTool_mdToHtml","LinkTool_checkLink","V_ui_adjustHoverStyle","ContentFolder_adjust","env","device","mobile","showHandle","adjust","StatusBar_adjust","catalog","adjustHoverStyle","ChpAutoNum_initToc","hasIndexItem","figure","table","media","codeblock","addEventListener","event","repaint","snap","uC","ck","TableCross_hide","on","currentTime","Date","getTime","scrollTop","timeInterval","docHeight","V_doc_scroll_lastUpdate","MoreDocContent_refresh","abs","V_doc_scroll_lastTop","V_doc_scroll_update","V_ui_adjustAll","focusHeader","ExtQuote_uniteColumnsHeight","onbeforeprint","V_print_mode","_VLOOK_","onafterprint","V_print_done","anchor","history","aObj","o","oT","hiddenObj","closest","_blockquote_","isHidden","fd","f","_vBlockquoteFolder_","tr","_mouseUp_","gLastHash","browser","Firefox","V_ui_adjustAllDelay","V_initRestyle","Restyler_forTaskList","Restyler_forMermaid","V_ui_show","_visibility_","_visible_","_opacity_","V_ui_hide","_hidden_","V_ui_wrap_kbd","src","V_ui_getCtrlKeyUI","unwrap","short","key","os","macOS","V_ui_getShiftKeyUI","V_ui_getAltKeyUI","V_ui_getMetaKeyUI","V_ui_copyrightInfo","_vCopyright_","V_ui_svgIcon","_icoVLOOK_","_vCopyrightSvgIco_","_2nbsp_","V_ui_a","V_ver","encodeURI","print","V_ui_isSmallScreen","oW","gSmallScreenWidth","sW","ui","_top_","_height_","y","tag","attrValue","op","icon","w","color","classValue","extAttr","V_ui_svgIcon2","V_ui_symbol","idValue","V_ui_htmlTag","V_ui_img","alt","srcset","_img_","V_ui_iframe","name","_iframe_","V_ui_input","id","type","_input_","V_ui_figcaption","V_ui_div2","V_ui_var","_strong_","_span_","V_ui_label","_label_","V_ui_audio","_audio_","V_ui_video","_video_","V_ui_holdKey_Alt","v_ui_mouseDropIn","mx","pageX","clientX","body","scrollLeft","my","pageY","clientY","padding","_paddingTop_","borderBottomWidth","_borderBottomWidth_","oL","V_ui_campColor","gradientColors","V_ui_splitColors","colorStr","gColor","charAt","toUpperCase","slice","split","filter","V_ui_hexToRGB","hex","rgb","V_ui_formatRGBA","opacity","V_ui_genGradColorCSS","fade","suffix","css","_dataTips_","prev","next","dt","current","close","_vFontPackage_","_font_","hm","buttonSeeAll","ch","V_ui_moveToCenter","_auto_","V_ui_moveToTarget","_paddingLeft_","_paddingRight_","_borderWidth_","V_ui_processingAdjust","_vBtn__BtnGroup_","uH","_vSegmentBtn_","_vAccentBtn_","_docLibToc_","_vDocLibItem_","_vStdCode_","_vTag_","_vBadgeName_","_vBadgeValue_","V_ui_bindHover","cancleParent","hover","_t","this","_hover_","_mouseEnter_","V_ui_unbindHover","unbind","_mouseLeave_","V_ui_initEffectLevel","V_ui_effect","_none_","_vBackdropBlurs_","_enabled_","V_ui_addAnimate","V_ui_initEffectLevel2","_vTransitionAll_","attrSet","V_ui_removeAnimate","V_ui_initHotkey","__showHideNavCenter","isShowed","_click_","code","keyCode","which","charCode","combKeys","ctrlKey","shiftKey","altKey","metaKey","String","fromCharCode","ContentAssistor_toggleCopyMode","disposeHotkey","WelcomePage_disposeHotkey","LinkTool_disposeHotkey","V_doc_block","activeElement","handled","preventDefault","navigator","clipboard","readText","then","catch","enabled","TableCross_ui","TableCross_disable","ContentAssistor_copyAsMarkdown","V_lang_init","language","base","V_doc_scroll_freeze","_unfreeze_","_freeze_","V_doc_scroll_unfreeze","V_doc_link_adjustExternal","e","_target_","ColorScheme","scheme","schemeBeforePrint","refresh","_vCaption_Mermaid_","_beforePrintWidth_","_width_","_100pc_","_svg_","_style_","_maxWidth_","_beforePrintMaxWidth_","_details_","_open_","_summary_","_dataContentFolded_","_true_","_mouseDown_","_vTblRowGBtn_","RowGroup_open","PicInPic_hide","rainbowCoats","_vRbCoat_","confirm","_dataRbCoatShowed_","RainbowCoat_show","V_report_submit","loadTimeCost","sd","display","DPR","Windows","iOS","Linux","Edge","browserVer","Chrome","Safari","_varColorScheme_","_vFig_","_dataContainer_","_dataImgFill_","_dataDarkSrc_","_invert_","_alter_","_div_","_id_","_vkIdFig_","_dataIdFigType_","_vCap1_","_vCap2_","mermaid","_vkIdAudio_","_vkIdVideo_","pie","flow","flowSTART","flowINIT","state","seq","classD","gantt","_vkIdTbl_","fmBold","fmEm","fmUnderline","fmMark","fmDel","fmChk","fmNum","_dataColumnFmting_","_vTblColFmt_Bold_","_vTblColFmt_Em_","_vTblColFmtMark_","_del_","_vTblColFmt_Chkbox_","_vTblColFmtNum_","_dataCellMerge_","_dataRowGroup_","_vFences_","_pre_","_vkIdCodeblock_","_code_","vlookStat","_vlookStatGitee_","_src_","RandomColor_generate","floor","random","RandomColor_dissimilarRgb","RandomColor_palette","d","idx","sqrt","T","sT","lT","reset","pre","slient","msg","stop","WelcomePage_init","mode","WelcomePage_ui","WelcomePage_uiName","WelcomePage_button","WelcomePage_tips","WelcomePage_finished","WelcomePage_mode","WelcomePage_close","WelcomePage_done","_cursor_","WelcomePage_stopAni","_animation_","WelcomePage_updateCloseButton","delay","WelcomePage_autoClose","_wait_","__timeToClose","delaySecs","clearTimeout","closeTimer","sec","ContentAssistor_init","__actionCopy","ContentAssistor_lastHover","ContentAssistor_lastContentType","ExtCodeBlock_copyContent","_fig_","_suffixImg_","ExtFigure_copySrc","ExtTable_copyContent","ContentAssistor_ui","ContentAssistor_btns_copyContent","_vBtn_Assistor_","ContentAssistor_btns_openInFigureNav","ContentAssistor_btns_tableCross","ContentAssistor_btns_tableWrap","ContentAssistor_btns_picInPic","ContentAssistor_hide","TableCross_toggle","TableWrap_toggle","PicInPic_show","ToolTips_bind","_icoCopyAsMd_","_icoCopy_","ContentAssistor_bind","contentType","asMarkdown","ContentAssistor_show","_first__enable__last_","eW","_enabled__first_","_enabled__last_","_dataTblX_","_selected_","_whiteSpace_","_preWrap_","caption","container","offset","_vCaptionContainer_","capWidth","conWidth","_borderLeftWidth_","_borderTopWidth_","PicInPic_init","PicInPic_ui_body","PicInPic_ui_content","PicInPic_ui_zoom","_vPipBtn_","PicInPic_ui_close","pipBtn","PicInPic_ratio","_icoZoomIn_","_theme_","_icoZoomOut_","PicInPic_zoom","_min_","source","__cloneForPicInPic","openAll","RowGroup_openAll","ContentFolder_expand","n","newClone","clone","_margin_","_border_","img","svg","_dataFigNum_","_vMermaidRestyler_","RowGroup_reset","RowGroup_closeAll","PicInPic_calcSize","empty","pic","PicInPic_fitContentSize","baseW","baseH","PicInPic_size_width","PicInPic_size_height","__getImgSize","width","height","sourcePadding","uiPadding","Image","complete","onload","wWithPadding","_transformOrigin_","hWithPadding","_transform_","radius","tips","zoom","normal","bigger","lastPos","toggleZoom","_vSpotlightInDark_","pointerScope","_vCursorLaser_","key1","key2","isEnabled","_background_","enable","SegmentControl","control","group","segs","segCnt","indicator","checked","status","__updateIcon","entry","_dataIcon_","__checked_","typeName","_dataResult_","change","update","checkedItem","_checked_","sts","space","spacePercent","_first_","pos","left","_marginLeft_","mask","handle","__keywordBody","TextField","lastDisplayType","_float_","snapTimer","TocIndex_segments","TocCatalog","_icoTocTabCatalog_","TocFigure","_icoTocTabFigure_","TocTable","_icoTocTabTable_","TocMedia","_icoTocTabMedia_","TocCodeblock","_icoTocTabCodeblock_","TocHistory","_icoTocTabHistory_","bindPartner","onChapterChanged","setIcon","_icoRetrieval_","_alpha_","cmdKey","placeholder","onInput","resultNav","result","hideFilterResult","scrollToCurrent","updateStatus","TocIndex_noneKeyword","TocIndex_filter","onFocus","search","_actived_","_vFocusSearch_","onBlur","pressEnter","onInteractive","adjustClickHash","gotoCover","currentItem","_vTocItemCurrent_","currentHeaderIndex","ToolTips_hide","callback","inHeader","_block_","_function_","afterToggle","_vNavCenterFloat_","_vFloatCard_","_vNavCenterBlock_","_writeMarginLeft_","_varNavCenterHiddenLeft_","setWidth","_varNavCenterWidth_","inputing","__prev","_vChapterNav_","__current","__next","__dt","adjustEffectLevel","_effect_","_dataAnchor_","_cover_","gotoHeader","_disabled_","curIdx","_display_","_inStart_","inFirstHeader","inDocTitle","headerNum","_dataHeaderNum_","MoreDocContent_ui_before","ParagraphNav","cur","_dataId_","MoreDocContent_hideAfter","key3","goto","_dataPgIdx_","ThreeClicker_tick","prevPg","step","blurFocus","nextPg","_vPgCurrentItem_","ExtQuote_autoUnfold","ThreeClicker_active","ThreeClicker_activeTime","getSelection","removeAllRanges","_vToolbar_","clickEvent","btnGroup","_dataBtnGroup_","ToolTips_show","offsetY","btnCount","btnWidth","FontThemeOption","fonts","fontCount","theme","localTheme","_vFontThemeOpt_","bookTheme","sansTheme","_normal_normal_","_normal_bold_","_normal_italic_","_normal_500_","_normal_900_","serifTheme","_italic_bold_","initWebFont","_vFontInfo_","_fontsetStatus_","_ready_","__loadNumberFont","fontName","srcName","loadFont","_normal_","_bold_","_Bold","_italic_","_Italic","__LoadDigitalSansFont","_Regular","unicodeRange","fontWeight500","_Medium","fontWeight900","_Black","__LoadDigitalSerifFont","luxiMonoSubName","__loadSansMonoFont","__loadSerifMonoFont","__loadSansCjkFont","__loadSerifCjkFont","timeOutMsg","button","fontFamily","fontStyle","fontWeight","srcFontName","srcFontSubName","isExist","woffURL","webfontHostAlt","_woff2_","fontFace","FontFace","weight","load","loadedFontFace","fontID","readyMsg","loadingMsg","splice","sansLoadedCount","sansStatus","serifLoadedCount","serifStatus","values","isHave","done","family","varList","fontVarList","_vFontnotePn_","StatusBar_ui","_vStatusBar_","StatusBar_items","StatusBar_options","_vDocInfo_","DocInfo_countWord","latin","latinCount","cjkCount","wordCount","readCountPerMin","mins","times","toFixed","_dataDefault_","toString","_dataExtend_","_nbsp_","_vStsFontTheme_","_vColorScheme_","StsColorScheme_updateIcons","_icoDarkMode_","_icoLightMode_","_vLinkChkResult_","LinkTool_panel_list","_vLinkErrorList_","LinkTool_panel_header","LinkTool_panel_body","LinkTool_enabled","LinkTool_icon_error","_icoLinkError_","LinkTool_mask","LinkTool_hide","scroll","xmd","newExt","LinkTool_addToCheck","_vTocItem_","_tabindex_","__addErrorLink","_error_","LinkTool_show","LinkTool_isShowed","af","closer","_icoMaskCloser_","partner","partnerUI","_zIndex_","_padding_","ContentFolder_limit","ContentFolder_add","ps","ContentFolder_contents","ContentFolder_buildTimers","shift","ContentFolder_rebuild","rules","gStyle","cssRules","j","ruleText","selectorText","_expander_","deleteRule","get","currentSrc","ContentFolder_checkAndProcess","rebuild","isImg","expanded","_dataContentExpanded_","folded","_dataBeforePrintFolded_","_false_","_paddingBottom_","ContentFolder_buildContentExpander","_overflowX_","_overflowY_","ContentFolder_rowNumFilter","_vTblRowNumHidden_","tW","newClass","insertRule","_dataContentType_","_overflow_","ToolTips_ui","_vToolTips_","align","follow","ToolTips_aniTimer","ToolTips_continueTimer","ToolTips_lastStyle","tipsW","iW","tipsH","iH","ww","wh","top","waitTime","ToolTips_continueShow","ToolTips_delay","_vInfoTips_","aniTimer","message","bubble","_bubble_","_borderRadius_","_varVRB_","sourceName","_vMoreDocContent_","MoreDocContent_ui_after","CaptionGenerator_actionForTextContent","captionPrefix","V_doc_counter_table","indexObj","dataForSearch","V_doc_counter_codeblock","fcSet","CaptionGenerator_getCaptions","fc","fc2","CaptionGenerator_spliter","_vCodeMirrorLine_","wrap","bf","xD","has2Captions","_dataCaptionCount_","_dataTitle_","CaptionGenerator_actionForMediaContent","_alt_","V_doc_counter_figure","V_doc_counter_audio","V_doc_counter_video","_dataFigType_","_viewBox_","__getCaptionSet","_mark_","captionTagName","hideCaptionSrc","capResult","CaptionGenerator_parseSyntax","_position_","_absolute_","reg2","reg1","html","test","lmc","lines","lineNum","lineCount","badChars","goodChars","encodeText","lang","_lang_","Copyer_action","supportMarkdown","successCallback","errorCallback","ts","Copyer_processing","Copyer_lastActionTime","targetName","_dataClipboardText_","ClipboardJS","note","clearSelection","destroy","Copyer_copyModeTimer","__genNumContent","lv","diff","ChpAutoNum_lastLevel","absDiff","ChpAutoNum_push","ChpAutoNum_pop","ChpAutoNum_counter","ChpAutoNum_toString","metaTpl","gTocContent","isEmpty","ChpAutoNum_resetTpl","ChpAutoNum_resetCounter","_mdTocItem_","ChpAutoNum_parseTocHeaderLevel","_lastChild_","prefix","ChpAutoNum_tpl_prefix","__parseTplItem","ChpAutoNum_tplSet","ChpAutoNum_tpl_syntax","ChpAutoNum_tpl_leftPad","ChpAutoNum_tpl_format","ChpAutoNum_tpl_formatOpt","CHPAUTONUM_TPL_FORMAT_OPT_MIN","CHPAUTONUM_TPL_FORMAT_OPT_SUP","CHPAUTONUM_TPL_FORMAT_OPT_NONE","ChpAutoNum_tpl_suffix","ChpAutoNum_tpl","tplSet","isNaN","__formatNum","opt","ns","upperCase","format","ChpAutoNum_leftPadForDecimal","ChpAutoNum_decimalToZh","ChpAutoNum_decimalToAlpha","ChpAutoNum_decimalToRoman","superLv","numStr","pad","gap","padStr","num","__numToZh","strArr","reverse","newNum","ChpAutoNum_zhNum","ChpAutoNum_zhUnit","__toZhUpperCase","overWan","noWan","numeral","ChpAutoNum_romanNum","ChpAutoNum_romanNumArea","__disposeDetailsFolder","quote","V_doc_counter_details","details","summary","_icoDetailsOpen_","_vSvgDetails_","_dataQuoteGroup_","open","_vRotate45_","dcQuote","ExtQuote_quoteToRainbow","RainbowQuote_defalutColor","matchedQuoteFold","_dataFolding_","parentTag","rainbowQuoteEnabled","ExtQuote_isValidColorMark","RainbowColor_syntax","ExtQuote_initColumns","ExtList_initColumns","pText","__hideHr","__groupingColumns","ExtQuote_columnsGroupCount","colCount","hr","prevUntil","nextUntil","ExtQuote_processingUCH","ExtQuote_uniteColumnsHeightForGroup","groupId","maxHeight","__openDetails","parent","__initCell","colIndex","needCheckCellMerge","needCheckColumnFormatting","needCheckThRpt","th","CellMerge_syntax_row","CellMerge_syntax_col","ColumnFormatting_init","ThRepeater_syntax_tag","_dataThRpt_","rHTML","_dataTblCol_","TableCross_bind","needCheckRowGroup","td","RowGroup_syntax_tag","CellMerge_dispose","cell","ColumnFormatting_format","RowGroup_init","_dataFolder_","_dataIdentLevel_","ThRepeater_init","__createTheadSpliter","alignSet","lastAlign","spliter","__maybeAsMarkdown","mdStr","plainStr","__transCellContent","cellHTML","cellBg","cellWholeText","__transCellContent_badge","gRE_rainbowBadge","__transCellContent_code","__transCellContent_tag","gRE_rainbowBadge2","gRE_rainbowTag","gRE_code","__transCellContent_rainbowText","gRE_boldRainbowText","gRE_italicRainbowText","gRE_highlightRainbowText","gRE_underlineRainbowText","brTmp","regExp","_dataAsMarkdown_","_value_","exp","__printXspanArr","debugMode","rowCount","sss","xspanMatrix","trSet","theadCount","columnFmting","theadRepeater","rowGroup","rowIndex","__disposeRowspan","htmlText","rowspan","cellSet","re_LabelTag","RegExp","colspan","colFmtChkbox","colFmtMark","_dataRbCellBg_","_dataRbWholeText_","yes","_dataChk_","_yes_","un","_un_","_textAlign_","_vTblRowGSub_","identerCount","_vTblRowGIdenter_","_rowspan_","_colspan_","colSpanCount","colSpanCell","lastCell","tblData","tblSpan","tblTd2ThData","needRowSpan","CellMerge_emptyBlankCell","rowSpanCount","rowSpanCell","thSpanFlag","_verticalAlign_","foundTd","tblCol","_dataColspan_","_dataTd2th_","rW","_outerHTML_","_vTblX_","TableCross_enable","_vContentExpander_","TableCross_lastTable","TableCross_lastCell","contentFolded","stopPropagation","_vTblXCell_","tblWidth","tblHeight","cellWidth","cellHeight","cornerLeftX","cornerUpY","cornerLeftWidth","cornerUpHeight","cornerRightX","cornerDownY","cornerRightWidth","cornerDownHeight","leftUp","rightUp","leftDown","rightDown","TableWrap_disable","TableWrap_enable","ColumnFormatting_syntax_checkbox_header","ColumnFormatting_getCells","cells","ColumnFormatting_getTbodyCells","tbodyCells","cellsCSS","thHTML","ColumnFormatting_removeCheckboxSyntax","ce","typeFlag","ColumnFormatting_syntax_checkbox","chkStatus","_no_","chkStyle","_icoChkbox__","isNumber","ColumnFormatting_coloringNumber","isPercent","coloring","percent","percentValue","percentBg","bg1","bg2","bgSplit","baseBg","_color_","_minWidth_","isCurrency","_vTblColFmtNumNegative_","_vTblColFmtNumPositive_","syntaxText","_vTblRowGNotFolder_","lastLevel","currentLevel","RowGroup_parentStack","RowGroup_colorStack","RowGroup_spliter","beforeChanged","RowGroup_newFolder","_varTblRowAlpha_","RowGroup_ident","pop","RowGroup_lastParent","RowGroup_lastColor","level","__echoOuterHTML","objectSet","outerHTML","folderRow","RowGroup_folderCount","_dataFolderId_","_dataRowFolded_","tdHadIdent","_last_","RowGroup_icoCloser","_vTblRowGFolder_","_vTblRowGIdenterFolder_","preClass","preObjs","cloneTd","RowGroup_toggle","RowGroup_close","_dataRowOpenMode_","_dataParentFolderId_","RowGroup_syntax_tag2Replace","_backgroundColor_","identer","identObj","subRows","folderButton","_vRotate90_","thRow","tdHTML","colID","prevThRow","_vThRepeater_","folder","hasRowGroup","pageSize","skipRowCount","lastSkipRowCount","tbody","rowSpan","__transToAudio","audioLike","autoplay","_autoplay_","loop","_loop_","preload","_preload_","audio","__play","self","controls","paused","play","ExtAudio_icon_play","_playing_","pause","_dataPause_","writeImg","__addToLinkChecker","params","_controls_","V_doc_counter_audiomini","_vkIdMiniAudio_","_vAudioMiniControl_","bind","_loading_","ExtAudio_icon_loading","dur","dur2","_dataDuration_","duration","min","minStr","ExtAudio_icon_pause","ExtAudio_icon_stop","_emptied_","ExtAudio_icon_forbidden","_marginBottom_","__transToVideo","videoLike","video","append","action","lastValue","timerValueChanged","onKeyDown","onAction","pressESC","__appendTo","__processInput","actionHover","_text_","_icoResetInput_","__checkComValueChanged","_vTextFieldFocus_","blur","clear","setAction","enter","_hoverAction_","_placeholder_","FilterResultNavigator","index","nextItem","set","eq","holder","hidden","_vTocFilterResult_","foldItems","lastHeaderFolder","lastHeaderLevel","lastDocScrollTop","_dataCatalogEmpty_","_catalog_","_vTocFolder_","_vkHeader_","_dataRef_","_dataNode_","_dataFolded_","insertBefore","_icoTocFolded_","folderParent","disposeFold","_dataPid_","__expandUpFolder","headerHeight","_vlookToc_","preDis","sTop","sBottom","showFilterResult","matched","_tocItem_","data","cloneItem","_dataKeywordMatch_","_dataForSearch_","TocIndex_updateStatus","traversal","lastItem","itemSet","nextAll","btnFolder","hd1","hd2","TocIndex_initUI","TocIndex_showTips","items","TocIndex_add","forSearch","TocIndex_hasIndexItem","TocIndex_show","TocIndex_hide","title","_vTocHistory_","hashObj","_dataHistory_","existsItem","tocItem","noneHistory","DocLib","_vDocLib_","iframe","page","identifier","paths","__addDocLibItem","includes","hasTarget","docLibToc","_icoDocLibExt_","_icoDocLib_","_dataPage_","_dataHash_","docLibValue","_vlookDocLib_","docLibList","re_TargetVDL","reload","cs","newPage","path","__disposeCaption","fig","__bindLoadChecker","cp1","__loadDefaultOnError","__isNotFigure","iconMode","logoMode","frameMode","__isPostcard","__initAlign","__initBackground","grid","_dataFigGrid_","__initFillAlter","_fill_","_suffixSvg_","SVGInject","afterInject","svgObj","ExtFigure_adjustFillAlterForSVG","onFail","__initColorScheme","_darksrc_","queryString","darksrc","_dataSrcLight_","_dataSrcDark_","_srcset_","_dataSrcsetLight_","_darksrcset_","_dataSrcsetDark_","__initHighDPI","darksrcset","__transUrlSrcSet","__initPostcard","_card_","blockquote","parentsUntil","_cssText_","_important_","_boxShadow_","altText","altTextForSearch","titleText","cardBody","card","imgH","V_doc_counter_postcard","pureSrc","fileName","rAfter","httpMode","canFillAlter","hostname","imgHost","src2FillAlter","isPostcard","V_doc_counter_img","matchRes","srcHost","needImgHost","prevFig","undefined","ExtFigure_adjustColorScheme","disposeGrid","darkMode","_vImgInvertDark_","_dataSrc_","_dataSrcset_","fill","_filter_","gridType","darkInvert","_line_","_vFigNav_","_vFigNavBtns_","_vFigContent_","figNum","nextFig","updateUI","newFig","_maxHeight_","pageNum","_checkbox_","li","chkIndex","notDone","indeterminate","zenSelector","zenuml","idPrefix","svgIconCount","svgIcon","attr","seqSelector","viewBox","paddingBottom","actor","tmpText","front","keySys","extSys","line","_rx_","_ry_","_vActorKeySys_","_vActorExtSys_","_textLength_","fragment","g","segType","bgColor","_varMmOrange_","borderColor","titleColor","_varAcOrangeLg_","_varMmRed_","_varAcRedLg_","_varMmCyan_","_varAcCyanLg_","_stroke_","fragmentTitle","label","rect","getBBox","nextText","_V_R_B_","TextPhonetic_syntax","TextPhonetic_build","colorSet","RainbowQuote_build","RainbowTextAndCell_build","_icoAlertNote_","_icoAlertTip_","_icoAlertImportant_","_icoAlertWarning_","_icoAlertCaution_","RainbowColor_genAsMarkdown","em","defaultColor","symbol","symbolCount","targetPrev","prevText","wordText","rubyHTML","raw","TextPhonetic_translation","colorCode","colorP","RainbowQuote_getColor","CodeMagic_isRainbowColorEm","__disposeText","obj","solid","RainbowColorTooLight","span","wholeRendering","_dataRbText_","__disposeUnderline","_borderColor_","_borderImage_","__disposeMark","_textShadow_","__disposeCell","RainbowBadge_getColor","tableCellBgMode","renderTarget","dcTag","dcBadge","dcCoat","RainbowTag_defalutColor","RainbowBadge_defalutColor","RainbowCoat_defalutColor","stdCount","codeText","RainbowBadge_syntax","RainbowBadge_build","RainbowTag_syntax","RainbowTag_build","RainbowCoat_syntax","RainbowCoat_build","TextPhoneticOld_syntax","TextPhoneticOld_build","ContentAssistor_lastTarget","CodeMagic_parseRainbowColor","newColors","__asMarkdown","RainbowTag_getColor","RainbowTag_count","badgeName","badgeValue","badgeValue2","varStr","RainbowBadge_count","badge","RainbowBadge_syntax_variable","_two_","nodeCnt","plainContent","contents","RainbowCoat_getColor","coatCount","_dataRbCoatData_","RainbowCoat_generateBg","RainbowCoat_toggle","charCount","start","end","_varDFC_","RainbowCoat_hide","_opened_","_varDBc_","translator","url","VLOOKui_loadWelcomePage","date","author","defalutContent","metaContent","_br_","VLOOKui_loadIconSet","_icoNavCenter_","_icoPrevFig_","_icoPrevChapter_","_icoFolded_","_icoClose_","_icoSpotlight_","_icoLaserPointer_","_icoParagraphNav_","_icoFontTheme_","_icoPrint_","_icoOpenInFigureNav_","_icoTableX_","_icoTableWrap_","_icoPicInPic_","_icoLoading_","_icoPlay_","_icoPause_","_icoStop_","_icoForbidden_","VLOOKui_loadTopbar","_vBtn_","classSvgChpNav","VLOOKui_loadNavCenter","classTocFilterResult","_media_","VLOOKui_loadCommon","classFontThemeOpt","previewPath","_notLoaded_","classBtnAssistor","classPinBtn","classTableCross","loadVLOOKui","loadVLOOKplugin","__fork","core","webkit","newRadius","_V_R_S_","_V_R_T_","_V_R_Tag_","_V_R_C_","colorScheme","redirect","gTotalTimes","gTimes","gVer","_beforePrint_","_ico_","_alert_","_icoTocTab_","_mouse_","_V_R_","_vBadge_","_vNavCenter_","_vRotate_","_vTblRow_","_vTblColFmt__","prototype","click","children","each","find","innerWidth","margin","outerWidth","innerHeight","position","parents","prepend","after","before","replaceWith","toggle","trigger","match","searchValue","replaceValue","replace","regExpString","re","replaceAll","trim","startsWith","endsWith","indexOf","toLowerCase","substring","devMode","wrapText","suff","oldValue","newValue","userAgent","trident","presto","gecko","android","iPhone","iPad","full","subset","devicePixelRatio","silent","printMermaidDPR","RepairTool_mermaidDPR_builder","RepairTool_mermaidDPR_render","hideOnError","vlookToc","tocSet","tocSetLength","hasCover","tocAutoCloseLevel","__setLightIcon","__darkIcon","head","__lightIcon","__setDarkIcon","__syncScheme","matcher","matches","__initScheme","querySelector","mediaQuery","matchMedia","ac","_alt","_fade","_title","acRed","acOrange","acYellow","acLime","acGreen","acMineral","acOlives","acWine","acAqua","acCyan","acBlue","acSea","acLavender","acVine","acPurple","acRose","acPink","acGold","acBrown","acGray","acBlack","acTheme1","acTheme2","mm","mmRed","mmOrange","mmYellow","mmGreen","mmCyan","mmBlue","mmPurple","mmPink","mmBrown","mmGray","cm","footnotesArea","RainbowColorCode","effect","wsMode","styleSheets","ready"],"sources":["../../src/vlook.js"],"sourcesContent":["/**************************************\n *\n * VLOOK JS - Typora Plugin\n *\n * V22.0\n * 2024-01-20\n * powered by MAX°孟兆\n *\n * QQ Group: 805502564\n * Telegram Channel: t.me/vlook_markdown\n * email: maxchow@qq.com\n *\n * https://github.com/MadMaxChow/VLOOK\n * https://gitee.com/madmaxchow/VLOOK\n *\n *************************************/\n\nlet gVer = \"V22.0\",\n    iStopwatch = new Stopwatch(), // 初始化计时器\n    gUndefined = undefined,\n    gTrue = true,\n    gFalse = false,\n    gTimes = 0,\n    gTotalTimes = 0,\n    gLastHash = null,\n    gSmallScreenWidth = 1279, // 修改时须同步修改 media.less 的同名参数\n    gToc = gUndefined, // 文档大纲对象\n    gTocContent = gUndefined, // 文档大纲内容\n    gStyle = gUndefined, // 文档的 style 对象\n    // 以下 _xxx_ 格式变量为字符串\n    _100pc_ = \"100%\",\n    _ = \"\",\n    ___ = \" \",\n    _4space_ = ___+___+___+___,\n    _absolute_ = \"absolute\",\n    _actived_ = \"actived\",\n    _alt_ = \"alt\",\n    _alter_ = \"alter\",\n    _alpha_ = \"alpha\",\n    _audio_ = \"audio\",\n    _animation_ = \"animation\",\n    _auto_ = \"auto\",\n    _autoplay_ = \"autoplay\",\n    _background_ = \"background\",\n    _backgroundColor_ = _background_ + \"-color\",\n    _backgroundImage_ = _background_ + \"-image\",\n    _beforePrint_ = \"before-print-\",\n    _width_ = \"width\",\n    _maxWidth_ = \"max-width\",\n    _beforePrintWidth_ = _beforePrint_ + _width_,\n    _beforePrintMaxWidth_ = _beforePrint_ + _maxWidth_,\n    _block_ = \"block\",\n    _blockquote_ = \"blockquote\",\n    _bold_ = \"bold\",\n    _border_ = \"border\",\n    _borderBottomWidth_ = _border_ + \"-bottom-width\",\n    _borderBottomRightRadius_ = _border_ + \"-bottom-right-radius\",\n    _borderColor_ = _border_ + \"-color\",\n    _borderImage_ = _border_ + \"-image\",\n    _borderRadius_ = _border_ + \"-radius\",\n    _borderWidth_ = _border_ + \"-width\",\n    _borderLeftWidth_ = _border_ + \"-left-width\",\n    _borderTopWidth_ = _border_ + \"-top-width\",\n    _bottom_ = \"bottom\",\n    _boxShadow_ = \"box-shadow\",\n    _br_ = \"<br>\",\n    _bubble_ = \"bubble\",\n    _card_ = \"card\",\n    _catalog_ = \"catalog\",\n    _center_ = \"center\",\n    _cssText_ = \"cssText\",\n    _checkbox_ = \"checkbox\",\n    _checked_ = \"checked\",\n    __checked_ = \"-\" + _checked_,\n    _class_ = \"class\",\n    _click_ = \"click\",\n    _code_ = \"code\",\n    _codeblock_ = \"codeblock\",\n    _color_ = \"color\",\n    _colspan_ = \"colspan\",\n    _content_ = \"content\",\n    _controls_ = \"controls\",\n    _cursor_ = \"cursor\",\n    _cost_ = \"    COST \",\n    _cover_ = \"cover\",\n    _dark_ = \"dark\",\n    _darksrc_ = \"darksrc\",\n    _darksrcset_ = \"darksrcset\",\n    _dataAnchor_ = \"d-anchor\",\n    _dataAsMarkdown_ = \"d-as-markdown\",\n    _dataBeforePrintFolded_ = \"d-before-print-folded\",\n    _dataBtnGroup_ = \"d-btn-group\",\n    _dataCaptionCount_ =\"d-cap-count\",\n    _dataCatalogEmpty_ = \"d-catalog-empty\",\n    _dataCellMerge_ = \"d-cell-merge\",\n    _dataChk_ = \"data-chk\",\n    _dataClipboardText_ = \"data-clipboard-text\",\n    _dataColspan_ = \"d-colspan\",\n    _dataColumnFmting_ = \"d-column-fmting\",\n    _dataContainer_ = \"d-cntr\",\n    _dataContentExpanded_ = \"d-content-expanded\",\n    _dataContentFolded_ = \"d-content-folded\",\n    _dataContentType_ = \"d-content-type\",\n    _dataDefault_ = \"d-default\",\n    _dataExtend_ = \"d-extend\",\n    _dataFigNum_ = \"d-fig-num\",\n    _dataFigType_ = \"d-fig-type\",\n    _dataFolded_ = \"d-folded\",\n    _dataFolder_ = \"d-folder\",\n    _dataFolderId_ = \"d-folder-id\",\n    _dataFolding_ = \"d-folding\",\n    _dataForSearch_ = \"data-for-search\",\n    _dataDarkSrc_ = \"d-darksrc\",\n    _dataDuration_ = \"d-duration\",\n    _dataFigGrid_ = \"d-fig-grid\",\n    _dataHeaderNum_ = \"d-header-num\",\n    _dataHash_ = \"d-hash\",\n    _dataHistory_ = \"d-history\",\n    _dataIcon_ = \"d-icon\",\n    _dataIdFigType_ = \"d-id-fig-type\",\n    _dataKeywordMatch_ = \"d-keyword-match\",\n    // _dataLmc_ = \"d-lmc\",\n    _dataNode_ = \"d-node\",\n    _dataPage_ = \"d-page\",\n    _dataParentFolderId_ = \"d-parent-folder-id\",\n    _dataPid_ = \"d-pid\",\n    _dataQuoteGroup_ = \"d-quote-group\",\n    _dataRef_ = \"data-ref\",\n    _dataRbCellBg_ = \"d-rb-cell-bg\",\n    _dataRbText_ = \"d-rb-text\",\n    _dataRbWholeText_ = \"d-rb-whole-text\",\n    _dataRowFolded_ = \"d-row-folded\",\n    _dataRowOpenMode_ = \"d-row-open-mode\",\n    _dataSrc_ = \"d-src-\",\n    _dataSrcDark_ = \"d-src-dark\",\n    _dataSrcLight_ = \"d-src-light\",\n    _dataSrcset_ = \"d-srcset-\",\n    _dataSrcsetDark_ = \"d-srcset-dark\",\n    _dataSrcsetLight_ = \"d-srcset-light\",\n    _dataTd2th_ = \"d-td2th\",\n    _dataTitle_ = \"d-title\",\n    _dataId_ = \"d-id\",\n    _dataIdentLevel_ = \"d-ident-level\",\n    _dataImgFill_ = \"d-img-fill\",\n    _dataPause_ = \"d-pause\",\n    _dataPgIdx_ = \"d-pg-idx\",\n    _dataResult_ = \"d-result\",\n    _dataRbCoatData_ = \"d-rb-coat-data\",\n    _dataRbCoatShowed_ = \"d-rb-coat-showed\",\n    _dataRowGroup_ = \"d-row-group\",\n    _dataTblCol_ = \"d-tbl-col\",\n    _dataTblX_ = \"d-tbl-x\",\n    _dataThRpt_ = \"d-th-rpt\",\n    _dataTips_ = \"d-tips\",\n    _del_ = \"del\",\n    _details_ = \"details\",\n    _disabled_ = \"disabled\",\n    _display_ = \"display\",\n    _div_ = \"div\",\n    _docLib_ = \"doc-lib\",\n    _docLibToc_ = _docLib_ + \"-toc\",\n    _docIcon_ = \"doc-icon-\",\n    _effect_ = \"effect\",\n    _enabled_ = \"enabled\",\n    _enabled__first_ = \"enabled first\",\n    _enabled__last_ = \"enabled last\",\n    _emptied_ = \"emptied\",\n    _error_ = \"error\",\n    _failed_ = \"Failed [ \",\n    _false_ = \"false\",\n    _fig_ = \"fig\",\n    // _figcaption_ = \"figcaption\",\n    // _figcaptionHTML_ = \"<\" + _figcaption_ + \"></\" + _figcaption_ + \">\",\n    _figure_ = \"figure\",\n    _fill_ = \"fill\",\n    _filter_ = \"filter\",\n    _first_ = \":first\",\n    _first__enable__last_ = \"first enabled last\",\n    _firstChild_ = _first_ + \"-child\",\n    _float_ = \"float\",\n    _font_ = \"Font\",\n    _fontTheme_ = \"font-theme\",\n    _footnotesArea_ = \"footnotes-area\",\n    _freeze_ = \"freeze\",\n    _function_ = \"function\",\n    _h6_ = \"h6\",\n    _height_ = \"height\",\n    _hidden_ = \"hidden\",\n    _hover_ = \"hover\",\n    _hoverAction_ = \"hover-action\",\n    _href_ = \"href\",\n    _ico_ = \"ico\",\n    _alert_ = \"Alert\",\n    _icoAlertNote_ = _ico_ + _alert_ + \"Note\",\n    _icoAlertTip_ = _ico_ + _alert_ + \"Tip\",\n    _icoAlertImportant_ = _ico_ + _alert_ + \"Important\",\n    _icoAlertWarning_ = _ico_ + _alert_ + \"Warning\",\n    _icoAlertCaution_ = _ico_ + _alert_ + \"Caution\",\n    _icoChkbox__ = _ico_ + \"Chkbox_\",\n    _icoClose_ = _ico_ + \"Close\",\n    _icoCopy_ = _ico_ + \"Copy\",\n    _icoCopyAsMd_ = _ico_ + \"CopyAsMd\",\n    _icoDarkMode_ = _ico_ + \"DarkMode\",\n    _icoDetailsOpen_ = _ico_ + \"DetailsOpen\",\n    _icoDocLib_ = _ico_ + \"DocLib\",\n    _icoDocLibExt_ = _ico_ + \"DocLibExt\",\n    // need removed:\n    // _icoExtend_ = _ico_ + \"Extend\",\n    _icoFolded_ = _ico_ + \"Folded\",\n    _icoFontTheme_ = _ico_ + \"FontTheme\",\n    _icoForbidden_ = _ico_ + \"Forbidden\",\n    _icoLaserPointer_ = _ico_ + \"LaserPointer\",\n    _icoLightMode_ = _ico_ + \"LightMode\",\n    _icoLinkError_ = _ico_ + \"LinkError\",\n    _icoLoading_ = _ico_ + \"Loading\",\n    _icoMaskCloser_ = _ico_ + \"MaskCloser\",\n    _icoNavCenter_ = _ico_ + \"NavCenter\",\n    _icoOpenInFigureNav_ = _ico_ + \"OpenInFigureNav\",\n    _icoParagraphNav_ = _ico_ + \"ParagraphNav\",\n    _icoPause_ = _ico_ + \"Pause\",\n    _icoPicInPic_ = _ico_ + \"PicInPic\",\n    _icoPlay_ = _ico_ + \"Play\",\n    _icoPrevFig_ = _ico_ + \"PrevFig\",\n    _icoPrevChapter_ = _ico_ + \"PrevChapter\",\n    _icoPrint_ = _ico_ + \"Print\",\n    _icoResetInput_ = _ico_ + \"ResetInput\",\n    _icoRetrieval_ = _ico_ + \"Retrieval\",\n    _icoSpotlight_ = _ico_ + \"Spotlight\",\n    _icoStop_ = _ico_ + \"Stop\",\n    _icoTableX_ = _ico_ + \"TableX\",\n    _icoTocFolded_ = _ico_ + \"TocFolded\",\n    _icoTocTab_ = _ico_ + \"TocTab\",\n    _icoTocTabCatalog_ = _icoTocTab_ + \"Catalog\",\n    _icoTocTabCodeblock_ = _icoTocTab_ + \"Codeblock\",\n    _icoTocTabFigure_ = _icoTocTab_ + \"Figure\",\n    _icoTocTabHistory_ = _icoTocTab_ + \"History\",\n    _icoTocTabMedia_ = _icoTocTab_ + \"Media\",\n    _icoTocTabTable_ = _icoTocTab_ + \"Table\",\n    _icoTableWrap_ = _ico_ + \"TableWrap\",\n    _VLOOK_ = \"VLOOK\",\n    _icoVLOOK_ = _ico_ + _VLOOK_,\n    _icoZoomIn_ = _ico_ + \"ZoomIn\",\n    _icoZoomOut_ = _ico_ + \"ZoomOut\",\n    _id_ = \"id\",\n    _fontsetStatus_ = \"fontset-status\",\n    _iframe_ = \"iframe\",\n    _img_ = \"img\",\n    _important_ = \" !important;\",\n    _input_ = \"input\",\n    _inStart_ = \"in-start\",\n    _invert_ = \"invert\",\n    _italic_ = \"italic\",\n    _italic_bold_ = \"/\" + _italic_ + \"/bold\",\n    _label_ = \"label\",\n    _lang_ = \"lang\",\n    _laserPointer_ = \"laser-pointer\",\n    _last_ = \":last\",\n    _lastChild_ = \":last-child\",\n    _left_ = \"left\",\n    _light_ = \"light\",\n    _linkChecker_ = \"link-checker\",\n    _line_ = \"line\",\n    _loading_ = \"loading\",\n    _loop_ = \"loop\",\n    _margin_ = \"margin\",\n    _marginBottom_ =_margin_ +  \"-bottom\",\n    _marginLeft_ = _margin_ + \"-left\",\n    _mark_ = \"mark\",\n    _mata_ = \"meta\",\n    _maxHeight_ = \"max-height\",\n    _media_ = \"media\",\n    _mdTocItem_ = \"md-toc-item\",\n    _min_ = \"min\",\n    _mini_ = \"mini\",\n    _minWidth_ = \"min-width\",\n    _mouse_ = \"mouse\",\n    _mouseDown_ = _mouse_ + \"down\",\n    _mouseUp_ = _mouse_ + \"up\",\n    _mouseEnter_ = _mouse_ + \"enter\",\n    _mouseLeave_ = _mouse_ + \"leave\",\n    _name_ = \"name\",\n    _navCenter_ = \"nav-center\",\n    _no_ = \"no\",\n    _none_ = \"none\",\n    _normal_ = \"normal\",\n    _normal_normal_ = \"/\" + _normal_ + \"/\" + _normal_,\n    _normal_bold_ = \"/\" + _normal_ + \"/\" + _bold_,\n    _normal_500_ = \"/\" + _normal_ + \"/500\",\n    _normal_900_ = \"/\" + _normal_ + \"/900\",\n    _normal_italic_ = \"/\" + _italic_ + \"/\" + _normal_,\n    _notLoaded_ = \"NOT LOADED\",\n    _off_ = \"off\",\n    _on_ = \"on\",\n    _opacity_ = \"opacity\",\n    _open_ = \"open\",\n    _opened_ = \"opened\",\n    _outerHTML_ = \"outerHTML\",\n    _overflow_ = \"overflow\",\n    _overflowX_ = _overflow_ + \"-x\",\n    _overflowY_ = _overflow_ + \"-y\",\n    _padding_ = \"padding\",\n    _paddingBottom_ = _padding_ + \"-bottom\",\n    _paddingLeft_ = _padding_ + \"-left\",\n    _paddingRight_ = _padding_ + \"-right\",\n    _paddingTop_ = _padding_ + \"-top\",\n    _paragraphNav_ = \"paragraph-nav\",\n    _placeholder_ = \"placeholder\",\n    _playing_ = \"playing\",\n    _position_ = \"position\",\n    _pre_ = \"pre\",\n    _preload_ = \"preload\",\n    _preWrap_ = \"pre-wrap\",\n    _print_ = \"print\",\n    _ready_ = \"Ready\",\n    _right_ = \"right\",\n    _rowspan_ = \"rowspan\",\n    _rx_ = \"rx\",\n    _ry_ = \"ry\",\n    _selected_ = \"selected\",\n    _span_ = \"span\",\n    _spotlight_ = \"spotlight\",\n    _src_ = \"src\",\n    _srcset_ = \"srcset\",\n    _stroke_ = \"stroke\",\n    _strong_ = \"strong\",\n    _style_ = \"style\",\n    _svg_ = \"svg\",\n    _suffixImg_ = \".\" + _img_,\n    _suffixSvg_ = \".\" + _svg_,\n    _summary_ = \"summary\",\n    _tabindex_ = \"tabindex\",\n    _table_ = \"table\",\n    _tagName_ = \"tagName\",\n    _target_ = \"target\",\n    _text_ = \"text\",\n    _textAlign_ = _text_ + \"-align\",\n    _textLength_ = _text_ + \"Length\",\n    _textShadow_ = _text_ + \"-shadow\",\n    _theme_ = \"theme\",\n    _title_ = \"title\",\n    _vlookToc_ = \"vlook-toc\",\n    _tocItem_ = \"#\" + _vlookToc_ + \">.\" + _mdTocItem_,\n    _toolbarSpliter_ = \"toolbar-spliter\",\n    _top_ = \"top\",\n    _transform_ = \"transform\",\n    _transformOrigin_ = _transform_ + \"-origin\",\n    _true_ = \"true\",\n    _ttf_ = \"ttf\",\n    _two_ = \"two\",\n    _un_ = \"un\",\n    _unfreeze_ = \"unfreeze\",\n    _vdl_ = \"vdl\",\n    _vkHeader_ = \"vk-header-\",\n    _vkIdDocTitle_ = \"vk-id-doc-title\",\n    _vkIdFig_ = \"vk-id-fig\",\n    _vkIdAudio_ = \"vk-id-audio\",\n    _vkIdVideo_ = \"vk-id-video\",\n    _vkIdTbl_ = \"vk-id-tbl\",\n    _vkIdCodeblock_ = \"vk-id-codeblock\",\n    _vkIdMiniAudio_ = \"vk-id-mini-audio\",\n    _vlookDocLib_ = \"vlook-doc-lib\",\n    _vlookStatGitee_ = \"vlook-stat-gitee\",\n    _varAcRedLg_ = V_ui_var(\"--ac-rd-lg\"),\n    _varAcOrangeLg_ = V_ui_var(\"--ac-og-lg\"),\n    _varAcCyanLg_ = V_ui_var(\"--ac-cy-lg\"),\n    _varColorScheme_ = \"--v-color-scheme\",\n    _varDBc_ = V_ui_var(\"--d-bc\"),\n    _varDFC_ = V_ui_var(\"--d-fc\"),\n    _varMarkBg_ = V_ui_var(\"--mark-bg\"),\n    _varMmCyan_ = V_ui_var(\"--mm-c-cy\"),\n    _varMmOrange_ = V_ui_var(\"--mm-c-og\"),\n    _varMmRed_ = V_ui_var(\"--mm-c-rd\"),\n    _varNavCenterHiddenLeft_ = \"--v-nav-center-hidden-l\",\n    _varNavCenterWidth_ = V_ui_var(\"--v-nav-center-w\"),\n    _V_R_ = \"--v-r-\",\n    _V_R_B_ = _V_R_ + \"b\",\n    _varVRB_ = V_ui_var(_V_R_B_),\n    _V_R_C_ = _V_R_ + \"c\",\n    _V_R_S_ = _V_R_ + \"s\",\n    _V_R_T_ = _V_R_ + \"t\",\n    _V_R_Tag_ = _V_R_ + \"tag\",\n    _varTblRowAlpha_ = V_ui_var(\"--tbl-row-g-alpha\"),\n    _vAccentBtn_ = \"v-accent-btn\",\n    _vActorKeySys_ = \"v-actor-key-sys\",\n    _vActorExtSys_ = \"v-actor-ext-sys\",\n    _vAudioMiniControl_ = \"v-audio-mini-control\",\n    _vBackdropBlurs_ = \"v-backdrop-blurs\",\n    _vBadge_ = \"v-badge-\",\n    _vBadgeName_ = _vBadge_ + \"name\",\n    _value_ = \"value\",\n    _vBadgeValue_ = _vBadge_ + _value_,\n    _vBlockquoteFolder_ = \"v-blockquote-folder\",\n    _vBtn_ = \"v-btn\",\n    _vBtn__BtnGroup_ = \".\" + _vBtn_ + \", .\" + _vBtn_ + \"-group\",\n    _vBtn_Assistor_ = \".\" + _vBtn_ + \".assistor\",\n    _vColorScheme_ = \"v-color-scheme\",\n    _vCap1_ = \".v-cap-1\",\n    _vCap2_ = \".v-cap-2\",\n    _vCaptionContainer_ = \"v-cap-cntr\",\n    _vCaption_Mermaid_ = \"v-caption.mermaid\",\n    _vChapterNav_ = \"v-chapter-nav\",\n    _vCodeMirrorLine_ = \"CodeMirror-line\",\n    // need removed\n    // _vContentExpander_ = \"v-content-expander\",\n    _vCopyright_ = \"v-copyright\",\n    _vCopyrightSvgIco_ = _vCopyright_ + \"-svg-ico\",\n    _vCursorLaser_ = \"v-cursor-laser\",\n    _vDoc_ = \"v-doc-\",\n    _vDocInfo_ = _vDoc_ + \"info\",\n    _vDocLib_ = _vDoc_ + \"lib\",\n    _vDocLibItem_ = _vDocLib_ + \"-item\",\n    _vDocLog_ = _vDoc_ + \"logo-\",\n    _expander_ = \"expander\",\n    _vFences_ = \"md-fences\",\n    _vFloatCard_ = \"v-float-card\",\n    _vFig_ = \"v-fig\",\n    _vFigContent_ = \"v-fig-content\",\n    _vFigNav_ = _vFig_ + \"-nav\",\n    _vFigNavBtns_ = \".\" + _vFigNav_ + \"-btns\",\n    _vFocusSearch_ = \"v-focus-serch\",\n    _vFontInfo_ = \"v-fontinfo-\",\n    _vFontnotePn_ = \"v-footnote-pn\",\n    _vFontPackage_ = \"v-font-package\",\n    _vFontThemeOpt_ = \"v-font-theme-opt\",\n    _vInfoTips_ = \"v-info-tips\",\n    _vStdCode_ = \"v-std-code\",\n    _vTag_ = \"v-tag\",\n    _vTocHistory_ = \"v-toc-history\",\n    _vToolTips_ = \"v-tool-tips\",\n    _vToolbar_ = \"v-toolbar\",\n    _vImgInvertDark_ = \"v-img-invert-dark\",\n    _vLinkChkResult_ = \"v-link-chk-result\",\n    _vLinkErrorList_ = \"v-link-error-list\",\n    _vMdToc_ = \"md-toc\",\n    _vMermaidRestyler_ = \"v-mermaid-restyler\",\n    _vMoreDocContent_ = \"v-more-doc-content-\",\n    _vNavCenter_ = \"v-nav-center-\",\n    _vNavCenterBlock_ = _vNavCenter_ + \"block\",\n    _vNavCenterFloat_ = _vNavCenter_ + \"float\",\n    _vPgCurrentItem_ = \"v-pg-current-item\",\n    _vPipBtn_ = \".v-pip-btn\",\n    _vRbCoat_ = \"v-rb-coat\",\n    _vRotate_ = \"v-rotate\",\n    _vRotate45_ = _vRotate_ + \"45\",\n    _vRotate90_ = _vRotate_ + \"90\",\n    _vSegmentBtn_ = \"v-segment-btn\",\n    _vStsFontTheme_ = \"v-sts-font-theme\",\n    _vSpotlightInDark_ = \"v-spotlight-in-dark\",\n    _vStatusBar_ = \"v-status-bar\",\n    _vSvgDetails_ = \"v-svg-details\",\n    _vTblX_ = \".v-tbl-x\",\n    _vTblXCell_ = \"v-tbl-x-cell\",\n    _vTblRow_ = \"v-tbl-row-\",\n    _vTblRowGFolder_ = _vTblRow_ + \"g-folder\",\n    _vTblRowGIdenterFolder_ = _vTblRow_ + \"g-identer-folder\",\n    _vTblRowGNotFolder_ = _vTblRow_ + \"g-not-folder\",\n    _vTblRowGBtn_ = \".\" + _vTblRow_ + \"g-btn\",\n    _vTblRowNumHidden_ = _vTblRow_ + \"num-hidden\",\n    _vTblColFmt__ = \"v-tbl-col-fmt-\",\n    _vTblColFmt_Chkbox_ = _vTblColFmt__ + \"chkbox\",\n    _vTblColFmt_Bold_ = _vTblColFmt__ + \"bold\",\n    _vTblColFmt_Em_ = _vTblColFmt__ + \"em\",\n    // _vTblColFmt_U_ = _vTblColFmt__ + \"u\",\n    _vTblColFmtMark_ = _vTblColFmt__ + _mark_,\n    // _vTblColFmtDel_ = _vTblColFmt__ + _del_,\n    _vTblColFmtNum_ = _vTblColFmt__ + \"num\",\n    _vTblColFmtNumDecimal_ = _vTblColFmt__ + \"num-decimal\",\n    _vTblColFmtNumNegative_ = _vTblColFmt__ + \"num-negative\",\n    _vTblColFmtNumPositive_ = _vTblColFmt__ + \"num-positive\",\n    _vTblColFmtPercent_ = _vTblColFmt__ + \"percent\",\n    _vTblColFmtCurrency_ = _vTblColFmt__ + \"currency\",\n    _vTblRowGSub_ = _vTblRow_ + \"g-sub\",\n    _vTblRowGIdenter_ = _vTblRow_ + \"g-identer\",\n    _vTextFieldFocus_ = \"v-textfield-focus\",\n    _vThRepeater_ = \"v-th-repeater\",\n    _vTocFolder_ = \".v-toc-folder\",\n    _vTocFilterResult_ = \"v-toc-filter-result\",\n    _vTocItem_ = \"v-toc-item\",\n    _vTocItemCurrent_ = _vTocItem_ + \"-current\",\n    _vTransitionAll_ = \"v-transition-all\",\n    _verticalAlign_ = \"vertical-align\",\n    _video_ = \"video\",\n    _viewBox_ = \"viewBox\",\n    _visible_ = \"visible\",\n    _visibility_ = \"visibility\",\n    _wait_ = \"wait\",\n    _whiteSpace_ = \"white-space\",\n    _write_ = \"#write\",\n    _woff2_ = \"woff2\",\n    _writeMarginLeft_ = \"calc(\" + _varNavCenterWidth_ + \" + 30px)\",\n    _yes_ = \"yes\",\n    _zIndex_ = \"z-index\",\n    _nbsp_ = \"&nbsp;\",\n    _2nbsp_ = _nbsp_ + _nbsp_;\niStopwatch.st();\n\n// ==================== 内置函数调用简化 ==================== //\n\n// 控制台打印日志\nfunction LOG() {\n    console.log.apply(console, arguments);\n}\n// 控制台打印通知\nfunction INFO() {\n    console.info.apply(console, arguments);\n}\n// 控制台打印警告\nfunction WARN() {\n    console.warn.apply(console, arguments);\n}\n// 控制台打印错误\nfunction ERROR() {\n    console.error.apply(console, arguments);\n}\n// 在 debug 模式下输出调试信息\nfunction DEBUG(...info) {\n    if (V_debugMode) {\n        ERROR(\"| DEBUG INFO |\");\n        WARN(...info);\n    }\n}\n// 弹窗显示信息\nfunction ALERT(m) {\n    alert(m);\n}\n\n// 获得文档 URL\nfunction WINDOW_getHref() {\n    return window.location.href;\n}\n\n// 设置文档 URL\nfunction WINDOW_setHref(value) {\n    window.location.href = value;\n}\n\n// 获得文档 URL 的 hash\nfunction WINDOW_getHash() {\n    return window.location.hash;\n}\n\n// ==================== JQuery 方法调用简化 ==================== //\n\nfunction JQ_addClass(target, className) {\n    if (target !== gUndefined)\n        target.addClass(className);\n}\n\nfunction JQ_removeClass(target, className) {\n    if (target !== gUndefined)\n        target.removeClass(className);\n}\n\nfunction JQ_removeAttr(target, attrName) {\n    if (target !== gUndefined)\n        target.removeAttr(attrName);\n}\n\nfunction JQ_exchangeClass(target, oldClassName, newClassName) {\n    if (target !== gUndefined) {\n        target.removeClass(oldClassName);\n        target.addClass(newClassName);\n    }\n}\n\nfunction JQ_remove(target) {\n    if (target !== gUndefined)\n        target.remove();\n}\n\n// attr 简化版\n$.prototype.a = function (key, value) {\n    if (value === gUndefined)\n        return this.attr(key);\n    else\n        return this.attr(key, value);\n}\n\n// css 简化版\n$.prototype.c = function (key, value) {\n    if (value === gUndefined)\n        return this.css(key);\n    else\n        return this.css(key, value);\n}\n\n// click 简化版\n$.prototype.ck = function (callback) {\n    this.click(callback);\n}\n\n// prev 简化版\n$.prototype.pr = function (value) {\n    return this.prev(value);\n}\n\n// next 简化版\n$.prototype.n = function (value) {\n    return this.next(value);\n}\n\n// children 简化版\n$.prototype.ch = function (value) {\n    return this.children(value);\n}\n\n// each 简化版\n$.prototype.e = function (callback) {\n    this.each(callback);\n}\n\n// find 简化版\n$.prototype.f = function (value) {\n    return this.find(value);\n}\n\n// html 简化版\n$.prototype.hm = function (value) {\n    if (value === gUndefined)\n        return this.html();\n    else\n        return this.html(value);\n}\n\n// width 简化版\n$.prototype.w = function () {\n    return this.width();\n}\n// innerWidth 简化版\n$.prototype.iW = function () {\n    return this.innerWidth();\n}\n// outerWidth 简化版\n$.prototype.oW = function (margin) {\n    if (margin !== gTrue)\n        return this.outerWidth();\n    else\n        return this.outerWidth(gTrue);\n}\n\n// height 简化版\n$.prototype.h = function () {\n    return this.height();\n}\n// innerHeight 简化版\n$.prototype.iH = function () {\n    return this.innerHeight();\n}\n\n// offset 简化版\n$.prototype.o = function () {\n    return this.offset();\n}\n\n// offset().left 简化版\n$.prototype.oL = function () {\n    return this.offset().left;\n}\n\n// offset().top 简化版\n$.prototype.oT = function () {\n    return this.offset().top;\n}\n\n// position 简化版\n$.prototype.pos = function () {\n    return this.position();\n}\n\n// parent 简化版\n$.prototype.p = function () {\n    return this.parent();\n}\n\n// parents 简化版\n$.prototype.ps = function (value) {\n    return this.parents(value);\n}\n\n// append 简化版\n$.prototype.ap = function (value) {\n    return this.append(value);\n}\n\n// prepend 简化版\n$.prototype.pp = function (value) {\n    return this.prepend(value);\n}\n\n// after 简化版\n$.prototype.af = function (value) {\n    return this.after(value);\n}\n\n// before 简化版\n$.prototype.bf = function (value) {\n    return this.before(value);\n}\n\n// replaceWith 简化版（outerHTML）\n$.prototype.rW = function (value) {\n    return this.replaceWith(value);\n}\n\n// text 简化版\n$.prototype.t = function (value) {\n    if (value === gUndefined)\n        return this.text();\n    else\n        return this.text(value);\n}\n\n// toggle 简化版\n$.prototype.tg = function (value) {\n    this.toggle(value);\n}\n\n// trigger 简化版\n$.prototype.tr = function (value) {\n    this.trigger(value);\n}\n\n// unbind(\"click\") 简化版\n$.prototype.uC = function () {\n    return this.unbind(_click_);\n}\n\n// unbind(\"hover\") 简化版\n$.prototype.uH = function () {\n    return this.unbind(_hover_);\n}\n\n// ==================== JavaScript 方法调用简化 ==================== //\n\n// match 简化版\nString.prototype.m = function (value) {\n    return this.match(value);\n}\n\n// replace 简化版\nString.prototype.r = function (searchValue, replaceValue) {\n    return this.replace(searchValue, replaceValue);\n}\n\n// replaceAll 简化版\nString.prototype.rA = function (regExpString, value) {\n    const re = new RegExp(regExpString, \"g\");\n    return this.replaceAll(re, value);\n}\n\n// 去掉字符串中的英文句号 .\nString.prototype.xD = function () {\n    return this.replaceAll(/\\./g, _);\n}\n\n// trim 简化版\nString.prototype.x = function () {\n    return this.trim();\n}\n\n// startsWith 简化版\nString.prototype.sW = function (value) {\n    return this.startsWith(value);\n}\n\n// endsWith 简化版\nString.prototype.eW = function (value) {\n    return this.endsWith(value);\n}\n\n// indexOf 简化版\nString.prototype.i = function (value) {\n    return this.indexOf(value);\n}\n\n// toLowerCase 简化版\nString.prototype.l = function () {\n    return this.toLowerCase();\n}\n\n// substring 简化版\nString.prototype.s = function (start, end) {\n    return this.substring(start, end);\n}\n\n// split 简化版\nString.prototype.sp = function (exp) {\n    return this.split(exp);\n}\n\n// parseInt 简化版\nfunction JS_parseInt(value) {\n    return parseInt(value);\n}\n\n// parseFloat 简化版\nfunction JS_parseFloat(value) {\n    return parseFloat(value);\n}\n\n// Math.round 简化版\nfunction JS_mathRound(value) {\n    return Math.round(value);\n}\n\n// Math.ceil 简化版\nfunction JS_mathCeil(value) {\n    return Math.ceil(value);\n}\n\n// decodeURI 简化版\nfunction JS_decodeURI(value) {\n    return decodeURI(value);\n}\n\n// ======================================== //\n\nLOG(\":::::::::::::::::::\");\n// LOG(devMode,lVer);\nLOG(\"!!! \" + (devMode ? \"- DEV -\" : \"RELEASED\" ) + \" !!!\");\nLOG(\"::: \" + gVer + \" :::\");\nLOG(\":::::::::::::::::::\");\n\nINFO(\"=== Load Document ===\");\n\n// UI 元素\nlet iToolbar = gUndefined,\n    iNavCenter = gUndefined,\n    iChapterNav = gUndefined,\n    iParagraphNav = gUndefined,\n    iSpotlight = gUndefined,\n    iLaserPointer = gUndefined,\n    iFontTheme = gUndefined,\n    iFigNav = gUndefined,\n    iInfoTips = gUndefined,\n    iFootNote = gUndefined;\n\n// ==================== 文档对象模型 ==================== //\n\n// 文档的 html 对象\nlet DOM_h = gUndefined;\nfunction DOM_html() {\n    if (DOM_h === gUndefined) {\n        DOM_h = $(\"html\");\n        if (DOM_h.length === 0) {\n            DOM_h = gUndefined;\n            ERROR(_failed_ + \"DOM.html ]\");\n        }\n    }\n    return DOM_h;\n}\n\n// 文档的 body 对象\nlet DOM_b = gUndefined;\nfunction DOM_body() {\n    if (DOM_b === gUndefined) {\n        DOM_b = $(\"body\");\n        if (DOM_b.length === 0) {\n            DOM_b = gUndefined;\n            ERROR(_failed_ + \"DOM.body ]\");\n        }\n    }\n    return DOM_b;\n}\n\n// ==================== VLOOK 对象模型 ==================== //\n\n// Markdown 导出为 HTML 的内容对象\nlet VOM_d = gUndefined;\nfunction VOM_doc() {\n    if (VOM_d === gUndefined) {\n        VOM_d = $(_write_);\n        if (VOM_d.length === 0) {\n            VOM_d = gUndefined;\n            ERROR(_failed_ + \"VOM.doc ]\");\n        }\n    }\n    return VOM_d;\n}\n\n// 封面对象\nlet VOM_c = gUndefined;\nfunction VOM_cover() {\n    if (VOM_c === gUndefined) {\n        VOM_c = $(_write_ + \">pre.md-meta-block\" + _firstChild_ + \"+\" + _h6_ + \", \" + _write_ + \">\" + _h6_ + _firstChild_);\n        if (VOM_c.length === 0) {\n            VOM_c = gUndefined;\n            if (VOM_docTitle() === gUndefined)\n                WARN(_failed_ + \"VOM.c ], maybe no cover: \" + WINDOW_getHref());\n        }\n    }\n    return VOM_c;\n}\n\n// 封底对象\nlet VOM_bc = gUndefined;\nfunction VOM_backcover() {\n    // 注意该方法调用，必须在 #vk-footer-area 的位置调整前完成\n    if (VOM_bc === gUndefined) {\n        let fns = $(\".\" + _footnotesArea_);\n        if (fns !== gUndefined) {\n            let backcover = fns.pr(),\n                tagName = V_util_getTagName(backcover);\n            if (tagName === \"h1\")\n                VOM_bc = backcover;\n        }\n        else {\n            VOM_bc = gUndefined;\n            WARN(_failed_ + \"VOM.bc ], maybe no backcover\");\n        }\n    }\n    return VOM_bc;\n}\n\n// 文档标题对象（无封面模式）\nlet VOM_dt = gUndefined;\nfunction VOM_docTitle() {\n    if (VOM_dt === gUndefined) {\n        VOM_dt = $(\"#vk-id-doc-title\");\n        if (VOM_dt.length === 0) {\n            VOM_dt = gUndefined;\n            WARN(_failed_ + \"VOM.dt ] \" + WINDOW_getHref());\n        }\n    }\n    return VOM_dt;\n}\n\n// ==================== 通用方法 ==================== //\n\n/**\n * 检查是否为空对象\n */\n$.prototype.isEmpty = function () {\n    return (typeof (this) == \"undefined\");\n}\n\n/**\n * 判断对象是否已隐藏\n */\n$.prototype.isHidden = function () {\n    let T = this;\n    return T !== gUndefined\n        && (T.c(_display_) === _none_ || T.c(_visibility_) === _hidden_ || T.c(_opacity_) === \"0\");\n}\n\n/**\n * 判断对象是否已显示\n */\n$.prototype.isShowed = function () {\n    return !this.isHidden();\n}\n\n/**\n * 在元素前后以指定的前缀和后缀文本进行包裹\n * @param pre 前缀文本\n * @param suff 后缀文本\n*/\n$.prototype.wrapText = function (pre, suff) {\n    this.hm(pre + this.hm() + suff);\n}\n\n/**\n * 替换 innerHTML 的内容\n * @param exp 用于匹配内容的正则表达式\n * @param value 将匹配的内容替换成该内容\n*/\n$.prototype.rHTML = function (exp, value) {\n    this.hm(this.hm().replace(exp, value));\n}\n\n/**\n * 从指定内容开始，替换之后的匹配的内容\n * @param str 从指定内容出现的位置开始进行替换\n * @param oldValue 被替换的内容\n * @param newValue 用于替换的新内容\n */\nString.prototype.rAfter = function (str, oldValue, newValue) {\n    let T = this,\n        i = T.i(str);\n    if (i > -1) {\n        let pre = T.s(0, i),\n            suff = T.s(i, T.length);\n        return pre + suff.r(oldValue, newValue);\n    }\n    return this;\n};\n\n/**\n * 判断是否为数值型\n */\nString.prototype.isNumber = function () {\n    return /^([-+])*\\d+(\\.\\d+)?$/.test(this);\n}\n\n/**\n * 判断是否为百分数\n */\nString.prototype.isPercent = function () {\n    return /^([-+])*\\d+(\\.\\d+)?%$/.test(this);\n}\n\n/**\n * 判断是否为货币型\n */\nString.prototype.isCurrency = function () {\n    return /^(\\D{1,3} )([-+])*\\d+(\\.\\d+)?$/.test(this);\n}\n\n/**\n * 环境信息类\n */\nconst env = {\n    /*\n    Windows 平台样例：\n        - (Chrome) Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36\n        - (Edge) Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36 Edge/18.18362\n        - (Firefox) Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:69.0) Gecko/20100101 Firefox/69.0\n\n    macOS 平台样例：\n        - (Safari) Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.2 Safari/605.1.15\n        - (Chrome) Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36\n        - (Edge) Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 Edg/113.0.1774.35\n        - (Firefox) Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:69.0) Gecko/20100101 Firefox/69.0\n\n    iPhone 平台样例：\n        - (Safari) Mozilla/5.0 (iPhone; CPU iPhone OS 15_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.2 Mobile/15E148 Safari/604.1\n        - (Chrome) Mozilla/5.0 (iPhone; CPU iPhone OS 15_02 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/97.0.04692.72 Mobile/15E148 Safari/604.1\n        - (Edge) Mozilla/5.0 (iPhone; CPU iPhone OS 13_2_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.3 Mobile/15E148 Safari/604.1 Edg/113.0.0.0\n        - (Firefox) Mozilla/5.0 (iPhone; CPU iPhone OS 15_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) FxiOS/40.2 Mobile/15E148 Safari/605.1.15\n        // 以下情况建议暂按以内核为判断标准 //\n        - (QQ) Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 QQ/8.9.75.613 V1_IPH_SQ_8.9.75_1_APP_A Pixel/1125 MiniAppEnable SimpleUISwitch/0 StudyMode/0 CurrentMode/0 CurrentFontScale/1.000000 QQTheme/1000 AppId/537172547 Core/WKWebView Device/Apple(iPhone XS) NetType/WIFI QBWebViewType/1 WKType/1\n        - (微信) Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 MicroMessenger/8.0.40(0x18002830) NetType/WIFI Language/zh_CN\n        - (钉钉) Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/20G75 AliApp(DingTalk/7.0.50) com.laiwang.DingTalk/31322509 Channel/201200 language/zh-Hans-CN UT4Aplus/0.0.6 WK\n    */\n\n    // 浏览器内核信息\n    core : function () {\n        const u = navigator.userAgent;\n        return {\n            trident: u.i(\"Trident\") > -1, // IE内核\n            presto: u.i(\"Presto\") > -1, // Opera内核\n            webkit: u.i(\"AppleWebKit\") > -1, // 苹果、谷歌内核\n            gecko: u.i(\"Gecko\") > -1 && u.i(\"KHTML\") === -1 // 火狐内核\n        };\n    }(),\n\n    // 设备信息\n    device : function () {\n        const u = navigator.userAgent;\n        return {\n            mobile: u.i(\"Mobile\") > -1, // 是否为移动终端\n            iOS: u.i(\"iPhone\") > -1, // iOS 类终端\n            android: u.i(\"Android\") > -1 || u.i(\"Linux\") > -1, // android 终端或者 UC 浏览器\n            iPhone: u.i(\"iPhone\") > -1, // 是否为 iPhone 或者 QQHD 浏览器\n            iPad: u.i(\"iPad\") > -1 // 是否 iPad\n        };\n    }(),\n\n    // 浏览器类型\n    browser : function () {\n        const u = navigator.userAgent;\n        return {\n            Chrome: (u.i(\"Chrome\") > -1 && u.i(\"Edg\") < 0) || u.i(\"CriOS\") > -1, // Chrome 浏览器\n            Firefox: u.i(\"Firefox\") > -1 || u.i(\"FxiOS\") > -1, // Firefox 浏览器\n            Safari: u.i(\"Safari\") > -1 && (u.i(\"Chrome\") < 0 || u.i(\"CriOSc\") < 0 || u.i(\"Edg\") < 0 || u.i(\"FxiOS\") < 0), // Safari 浏览器\n            Edge: u.i(\"Edg\") > -1 // Edge 浏览器\n        };\n    }(),\n\n    // 浏览器版本信息\n    browserVer : function () {\n        const u = navigator.userAgent;\n        return {\n            Chrome: u.m(/Chrome\\/[\\d.]+/gi) ? u.m(/Chrome\\/[\\d.]+/gi)[0].m(/\\d+/)[0] : \"0\", // Chrome 浏览器版本\n            Firefox: u.m(/Firefox\\/[\\d.]+/gi) ? u.m(/Firefox\\/[\\d.]+/gi)[0].m(/\\d+/)[0] : \"0\", // Firefox 浏览器版本\n            Safari: u.m(/Version\\/[\\d.]+.+Safari\\/[\\d.]+/gi) ? u.m(/Version\\/[\\d.]+.+Safari\\/[\\d.]+/gi)[0].m(/\\d+/)[0] : \"0\", // Safari 浏览器版本\n            Edge: u.m(/Edg\\/[\\d.]+/gi) ? u.m(/Edg\\/[\\d.]+/gi)[0].m(/\\d+/)[0] : \"0\" // Edge 浏览器版本\n        };\n    }(),\n\n    // 操作系统信息\n    os : function () {\n        const u = navigator.userAgent;\n        return {\n            Windows: /windows|win32|win64/i.test(u), // 是否为 Windows 平台\n            macOS: /macintosh/i.test(u), // 是否为 macOS 平台\n            iOS: /iphone os/i.test(u), // 是否为 iOS 平台\n            Linux: /linux/i.test(u) // 是否为 Linux 平台\n        };\n    }(),\n\n    // 语言信息\n    language : function () {\n        const lang = navigator.language;\n        return {\n            full: lang.l(),\n            base: lang.s(0, 2),\n            subset: lang.s(3, lang.length)\n        };\n    }(),\n\n    // 显示信息\n    display : function () {\n        return {\n            DPR : window.devicePixelRatio\n        };\n    }(),\n\n    /**\n     * 打印环境信息\n     * @param silent 是否为静默模式，静默模式只反馈环境信息值，不打印到控制台\n     * @returns string 环境信息\n     */\n    print : function (silent = gFalse) {\n        let info = \"::: Environmental :::\\n\",\n            r = info;\n        if (!silent) LOG(info);\n\n        info = \"    ├ Language   [ \"\n            + env.language.base\n            + (env.language.subset.length > 0 ? \"_\" + env.language.subset : _)\n            + \" ]\\n\";\n        r += info;\n        if (!silent) LOG(info);\n\n        info = \"    ├ Device     [ \"\n            + (env.device.mobile ? \"Mobile\" : _)\n            + (env.device.iOS ? \"/iOS\" : _)\n            + (env.device.android ? \"/Android\" : _)\n            + (env.device.iPhone ? \"/iPhone\" : _)\n            + (env.device.iPad ? \"/iPad\" : _)\n            + \"]\\n\";\n        r += info;\n        if (!silent) LOG(info);\n\n        info = \"    ├ OS         \" +\n            (env.os.macOS ? \"[ macOS ]\"\n                : (env.os.Windows ? \"[ Windows ]\"\n                    : (env.os.iOS ? \"[ iOS ]\"\n                        : (env.os.Linux ? \"[Linux]\" : \"[Others]\"))))\n            + \"\\n\";\n        r += info;\n        if (!silent) LOG(info);\n\n        info = \"    ├ Browser    [ \"\n            + (env.browser.Chrome ? \"Chrome / \" + env.browserVer.Chrome : _)\n            + (env.browser.Firefox ? \"Firefox / \" + env.browserVer.Firefox : _)\n            + (env.browser.Safari ? \"Safari / \" + env.browserVer.Safari : _)\n            + (env.browser.Edge ? \"Edge / \" + env.browserVer.Edge : _)\n            + \" ]\\n\";\n        r += info;\n        if (!silent) LOG(info);\n\n        info = \"    ├ Core       [ \"\n            + (env.core.gecko ? \"Gecko\" : _)\n            + (env.core.presto ? \"Presto\" : _)\n            + (env.core.trident ? \"Trident\" : _)\n            + (env.core.webkit ? \"WebKit\" : _)\n            + \" ]\\n\";\n        r += info;\n        if (!silent) LOG(info);\n\n        info = \"    ├ DPR        [ \"\n            + env.display.DPR\n            + \" ]\\n\"; // Device Pixel Ratio\n        r += info;\n        if (!silent) LOG(info);\n\n        info = \"    ├ Theme      [ \"\n            + V_util_getTemplateTheme()\n            + \" ]\\n\"; // 文档风格主题\n        r += info;\n        if (!silent) LOG(info);\n\n        info = \"    └ VLOOK Type [ \"\n            + V_type\n            + \" ]\\n\"; // VLOOK 插件运行类型\n        r += info;\n        if (!silent) LOG(info);\n\n        info = navigator.userAgent + \"\\n\";\n        r += info;\n        if (!silent) LOG(info);\n\n        return r;\n    },\n\n    // 打印 Mermaid 缩放信息\n    printMermaidDPR : function () {\n        let info = \"::: Mermaid DPR :::\\n\"\n            + \"    ├ DPR of builder  [ \" + RepairTool_mermaidDPR_builder + \" ]\\n\"\n            + \"    └ DPR of render   [ \" + RepairTool_mermaidDPR_render + \" ]\\n\";\n        LOG(info);\n        return info;\n    },\n\n    /**\n     * 屏幕上显示环境信息、Mermaid 信息等\n     **/\n    show : function (source) {\n        let info = env.print()\n            + env.printMermaidDPR()\n            + \"\\n----------\\nPowered by MAX°孟兆\\n\";\n        console.log(info);\n        Copyer_action(source, info, gFalse);\n        ALERT(info);\n    }\n};\n\n// ==================== VLOOK 关键信息类 ==================== //\n\nlet V_ver = gVer, // VLOOK 版本信息\n    V_debugMode = debugMode, // 是否为开发模式\n    V_type = \"max\", // 插件运行类型：max, pro, mini\n    V_params_url = [], // VLOOK 的调校参数\n    V_params_yaml = []; // VLOOK 文档的 YAML\n\n// 初始化调校参数\nfunction V_params_init() {\n    V_params_url = V_util_getUrlQueryParams(WINDOW_getHref());\n    let vp = V_util_getMetaByName(\"vlook-query\");\n    V_params_yaml = V_util_getUrlQueryParams(\"file.html\" + (vp !== gUndefined ? \"?\" + vp : _));\n}\n// ========================================\n\n// ========================================\n// VLOOK 本地数据读/写\n// 获得数据\n// function V_data_get(key) {\n//     return localStorage[_VLOOK_ + \"-\" + key];\n// }\n// 写入数据\n// function V_data_set(key, value) {\n//     localStorage[_VLOOK_ + \"-\" + key] = value;\n// }\n// ========================================\n\n// ========================================\n// VLOOK 工具包\n/**\n * 获取 HTML 文档标题\n */\nfunction V_util_getDocTitle() {\n    return $(document).a(_title_);\n}\n\n/**\n * 获取 HTML <meta> 标签的内容\n * @param metaName 指定 meta 的名称\n * @returns 指定 meta 的内容\n */\nfunction V_util_getMetaByName(metaName) {\n    let content = $(_mata_ + V_attrX(_name_, metaName)).a(_content_);\n    return ((content === gUndefined || content.length === 0 || content === \"${\" + metaName + \"}\") ? gUndefined : content);\n}\n// function V_util_getMetaByProperty(metaProperty) {\n//     let content = $(_mata_ + V_attrX(\"property\", metaProperty)).a(_content_);\n//     return ((content === gUndefined || content.length === 0) ? gUndefined : content);\n// }\n\n/**\n * 获取启动参数的值\n * @param pName 启动参数名称\n * @returns string 启动参数的值\n */\nfunction V_util_getParamVal(pName) {\n    let v = V_params_url[pName];\n    // URL 中无指定，则深度通过 YAML 中获取\n    if (v === gUndefined)\n        v = V_params_yaml[pName];\n    return v;\n}\n\n/**\n * 获取 URL 中的参数数组\n * @param u 完整的 URL 内容\n */\nfunction V_util_getUrlQueryParams(u) {\n    let h = u.i(\"#\");\n    u = h > -1 ? u.s(0, h) : u; // 只截取 URL 中 # 前的内容\n\n    let si = u.i(\"?\"),\n        qs = u.s(si > -1 ? si + 1 : u.length, u.length), // 获取url中\"?\"符后的字串\n        p = {}, // 保存参数数据的对象\n        is = (qs.length > 0) ? qs.sp(\"&\") : [], // 取得每一个参数项,\n        item = null,\n        l = is.length;\n\n    // 将所有参数拆解至数组中\n    for (let i = 0; i < l; i++) {\n        item = is[i].sp(\"=\");\n        p[decodeURIComponent(item[0])] = decodeURIComponent(item[1]);\n    }\n    return p;\n}\n\n/**\n * 获取 URL 中的锚点\n * @param u 完整的 URL 内容\n */\nfunction V_util_getUrlHash(u) {\n    let i = u.i(\"#\");\n    return i > -1 ? u.s(i, u.length) : _;\n}\n\n/**\n * 获取 URL 中的参数字符串\n * @param u 完整的 URL 内容\n */\nfunction V_util_getUrlQueryString(u) {\n    let i = u.i(\"?\");\n    return i > -1 ? u.s(i + 1, u.length) : _;\n}\n\n/**\n * 获取 URL 中的不含锚点的部分\n * @param u 完整的 URL 内容\n */\nfunction V_util_getUrlWithoutHash(u) {\n    let i = u.i(\"#\");\n    return i > -1 ? u.s(0, i) : u;\n}\n\n/**\n * 获取 URL 中的不含锚点、参数的部分\n * @param u 完整的 URL 内容\n */\nfunction V_util_getUrlPathWithoutQueryAndHash(u) {\n    let queryIdx = u.i('?');\n    if (queryIdx > -1)\n        u = u.s(0, queryIdx);\n    else {\n        let hashIdx = u.i('#');\n        if (hashIdx > -1)\n            u = u.s(0, hashIdx);\n    }\n    return u;\n}\n\n/**\n * 获得 URL 中的路径部分\n * @param u URL 地址\n */\nfunction V_util_getPath(u) {\n    let qi = u.i(\"?\"),\n        ti = u.s(0, qi).lastIndexOf(\"/\"),\n        pi = ti === -1 ? 0 : ti;\n    return u.s(0, pi + 1);\n}\n\n/**\n * 进行 HTML 特殊符号进行转义\n * @param text 原始文本\n * @return String 转义后文本\n */\n// function V_util_htmlEncode(text) {\n//     if (text.length === 0)\n//         return _;\n//     return text.r(/&/g, \"&amp;\")\n//         .r(/</g, \"&lt;\")\n//         .r(/>/g, \"&gt;\")\n//         .r(/ /g, \"&nbsp;\")\n//         .r(/'/g, \"&apos;\")\n//         .r(/\"/g, \"&quot;\")\n//         .r(/<br>/g, _);\n// }\n\n/**\n * 进行 HTML 标签符转义\n * @param text 原始文本\n * @return String 转义后文本\n */\nfunction V_util_htmlTagEncode(text) {\n    if (text.length === 0)\n        return _;\n    return text.r(/</g, \"&lt;\")\n        .r(/>/g, \"&gt;\");\n}\n\n/**\n * 进行 HTML 单、双引号转义\n * @param text 原始文本\n * @return String 转义后文本\n */\n// function V_util_htmlQuotEncode(text) {\n//     if (text.length === 0)\n//         return _;\n//     return text.r(/'/g, \"&apos;\")\n//         .r(/\"/g, \"&quot;\");\n// }\n\n/**\n * 清理 HTML 中的单、双引号\n * @param text 原始文本\n * @return String 清理后的文本\n */\nfunction V_util_clearHtmlQuot(text) {\n    if (text.length === 0)\n        return _;\n    return text.r(/'/g, _)\n        .r(/\"/g, _);\n}\n\n/**\n * 处理并返回省略后的文本\n * @param text 原始文本\n * @param limit 头、尾长度限制\n * @return String 省略后的文本\n */\nfunction V_util_ellipsisText(text, limit) {\n    // 多个空格替换为 1 个\n    text = text.r(/\\s+/g, ___);\n\n    // 不需要进行省略处理\n    if (text.length <= limit * 2)\n        return V_util_htmlTagEncode(text);\n\n    // 默认先按 1 个字占 1 个字节长度取头、尾部分\n    let h = text.s(0, limit).x(),\n        t = text.s(text.length - limit, text.length).x();\n    // 判断头、尾部分是否含中文\n    let cjkHeader = h.m(/\\p{Unified_Ideograph}/ug),\n        cjkTailer = t.m(/\\p{Unified_Ideograph}/ug);\n    if (cjkHeader != null && cjkHeader.length > 0)\n        h = __getChs(h, limit, cjkHeader);\n    if (cjkTailer != null && cjkTailer.length > 0)\n        t = __getChsRev(t, limit, cjkTailer);\n\n    /**\n     * 正序获取字符串（ 1 个 CJK 算两个字符）\n     *\n     * @param {*} str 原始字符\n     * @param {*} limit 限制长度\n     * @param {*} cjk CJK 字符数组\n     * @returns string 新的字符串\n     */\n    function __getChs(str, limit, cjk) {\n        let cnt = 0;\n        while (limit > 0) {\n            if (cjk.i(str[cnt]) > -1)\n                limit -= 2;\n            else\n                limit--;\n            cnt++;\n        }\n        return str.s(0, cnt);\n    }\n    /**\n     * 反序获取字符串（ 1 个 CJK 算两个字符）\n     *\n     * @param str 原始字符\n     * @param limit 限制长度\n     * @param cjk CJK 字符数组\n     * @returns string 新的字符串\n     */\n    function __getChsRev(str, limit, cjk) {\n        let count = 0,\n            len = str.length - 1;\n        while (limit > 0) {\n            if (cjk.i(str[len - count]) > -1)\n                limit -= 2;\n            else\n                limit--;\n            count++;\n        }\n        return str.s(len + 1 - count);\n    }\n\n    return V_util_htmlTagEncode(h + \" . . . \" + t);\n}\n\n/**\n * 重定位至锚点\n * @return boolean true：已进行重定向，false：无须进行重定向\n */\nfunction V_util_redirectTo() {\n    let hash = WINDOW_getHash();\n    // 如果 URL 带锚点\n    if (hash.length > 0 && hash !== \"#vk-id-doc-title\") {\n        LOG(\"    ↩ Redirect to h: \" + JS_decodeURI(hash));\n        WINDOW_setHref(\"#\"); // 强制先清空当前 hash\n        WINDOW_setHref(hash);\n        // 若最后访问的锚点与本次相同，则强制进行一次微调\n        setTimeout(function () {\n            V_ui_tuningScrollTop(hash);\n        }, 300);\n        return gTrue;\n    }\n    return gFalse;\n}\n\n/**\n * 跳转至页内锚点，并自动进行位置微调适配\n */\nfunction V_util_gotoHash(hash) {\n    let last = JS_decodeURI(WINDOW_getHash());\n    WINDOW_setHref(hash);\n    // 若前后锚点一样，则会导致不会触发 hashchange 事件，须强制进行一次微调\n    if (last === JS_decodeURI(hash))\n        V_ui_tuningScrollTop(hash);\n}\n\n/**\n * 获取 CSS 变量值\n * @param varName CSS 变量名\n */\nfunction V_util_getVarVal(varName) {\n    return getComputedStyle(document.documentElement).getPropertyValue(varName);\n}\n\n/**\n * 设置 CSS 变量值\n * @param varName CSS 变量名\n * @param value CSS 变量值\n */\nfunction V_util_setVarVal(varName, value) {\n    document.documentElement.style.setProperty(varName, value);\n}\n/**\n * 获取 HTML 文档使用的模板主题\n */\nfunction V_util_getTemplateTheme() {\n    return V_util_getVarVal(\"--v-theme-name\").rA('\"', _).x();\n}\n\n/**\n * 批量修改指定的 CSS 变量集\n * @param varSet 变量数组\n * @param flag 修改为指定变量集的标识\n */\nfunction V_util_changeCssVarSet(varSet, flag) {\n    // 生成目标颜色方案值列表\n    let tmp = [];\n    if (flag !== gUndefined) {\n        for (let i = 0, len = varSet.length; i < len; i++) {\n            tmp.push(V_util_getVarVal(varSet[i] + \"-\" + flag));\n        }\n    }\n    // 遍历所有变量实现 ColorScheme 切换\n    for (let i = 0, len = varSet.length; i < len; i++) {\n        if (flag !== gUndefined)\n            V_util_setVarVal(varSet[i], tmp[i]);\n        else\n            V_util_setVarVal(varSet[i], 0);\n    }\n}\n\n/**\n * 获取 HTML 标签名称\n * @param target 标签对象\n */\nfunction V_util_getTagName(target) {\n    let tagName = (target === gUndefined ? _ : target.prop(_tagName_));\n    return (tagName === gUndefined ? _ : tagName.l());\n}\n\n/**\n * 生成用反引号包裹的文本\n * @param text 文本\n */\nfunction V_util_wrapBackquote(text) {\n    let bq1 = __hasBackquote(text) ? \"`` \" : \"`\",\n        bq2 = __hasBackquote(text) ? \" ``\" : \"`\";\n    return bq1 + text + bq2;\n\n    // 是否含有反引号 `\n    function __hasBackquote(text) {\n        return (text.i(\"`\") > -1);\n    }\n}\n\n// VLOOK 工具 包\n// ========================================\n\n// ========================================\n// 通用的格式化操作\n/**\n * 添加千位符\n * @param str 需要进行格式化的目标字符串\n * @returns string 格式化后的字符串\n */\nfunction V_formatting_thousands(str) {\n    return str.r(/(\\d)(?=(\\d{3})+(\\.\\d+)*(\\D)*$)/g, \"$1,\");\n}\n\n/**\n * 对小数部分进行格式化\n * @param str 需要进行格式化的目标字符串\n * @returns string 格式化后的字符串\n */\nfunction V_formatting_decimal(str) {\n    return str.r(/\\.(\\d+)/, \".\" + V_ui_span(_vTblColFmtNumDecimal_, _, \"$1\"));\n    // return str.r(/\\.(\\d+)/, \".<span class='v-tbl-col-fmt-num-decimal'>$1</span>\");\n}\n\n/**\n * 对百分号进行格式化\n * @param str 需要进行格式化的目标字符串\n * @returns string 格式化后的字符串\n */\nfunction V_formatting_percent(str) {\n    return str.r(/%</, V_ui_span(_vTblColFmtPercent_, _, \" %\") + \"<\");\n}\n\nlet gRE_CurrencyNoEscape = new RegExp(\"<\\\\/\" + _span_ + \"><\" + _span_ + \">([$])<\\\\/\" + _span_ + \"><\" + _span_ + \">\", _),\n    gRE_CurrencyNoEscape2 = new RegExp(\">([$])<\\\\/\" + _span_ + \"><\" + _span_ + \">\", _);\n/**\n * 对货币符号进行格式化\n * @param str 需要进行格式化的目标字符串\n * @returns string 格式化后的字符串\n */\nfunction V_formatting_currency(str) {\n    // 对于存在转义符号 $ 时（与 Markdown 的数学公式格式冲突，所以一般会写成 \\$）\n    // 先将其处理成不存在转义的标准形式，如：HK$\n    str = str.r(gRE_CurrencyNoEscape, \"$1\");\n    // str = str.r(/<\\/span><span>([$])<\\/span><span>/, \"$1\");\n    str = str.r(gRE_CurrencyNoEscape2, \">$1\");\n    // str = str.r(/>([$])<\\/span><span>/, \">$1\");\n    // 因 html() 中含有 > 字符，所以替换的内容中须进行 > 的前后拼接调整\n    return str.r(/>([a-z$¥￥]{0,3})\\s/i, \">\" + V_ui_span(_vTblColFmtCurrency_, _, \"$1\"));\n}\n// ========================================\n\n// ========================================\n// 检查文档结构是否符合 VLOOK 规范程度\nfunction V_checkSpec () {\n    let v = gTrue,\n        c = [\n            \"因以下原因无法激活 VLOOK 插件：\\n\\n\",\n            \"The VLOOK plugin cannot be activated for the following reasons:\\n\\n\"\n            ][V_lang_id];\n\n    // 只支持由 Typora 导出的 HTML 文件\n    if (DOM_body().a(_class_).i(\"typora-export\") === -1) {\n        c += [\n            \"• 只支持由 Typora 导出的 HTML 文件\\n\",\n            \"• Only HTML files exported by Typora are supported\\n\"\n            ][V_lang_id];\n        v = gFalse;\n    }\n\n    // 缺少目录\n    gToc = $(\".\" + _vMdToc_);\n    if (gToc.length === 0) {\n        c += [\n            \"• 缺少 [TOC], 这是 GFM 标准的「目录」语法\\n\",\n            \"• Missing [TOC], the GFM standard \\\"Table of Content\\\"\\n\"\n            ][V_lang_id];\n    }\n\n    // 存在不符合规范的情况\n    if (!v) {\n        c += [\n            \"\\n建议参考文档模板：\",\n            \"\\nSuggestion Reference document template: \"\n        ][V_lang_id] + \"\\nreleased/demo/VLOOK-Document-Template.md\";\n\n        ALERT(c);\n        return gFalse;\n    }\n\n    // 符合规范\n    return gTrue;\n}\n// ========================================\n\n\n/**\n * 初始化关键组件实例\n */\nfunction V_init() {\n    let sw = new Stopwatch();\n    sw.st();\n    iFontTheme = new FontTheme(new BgMask(_fontTheme_, _center_), V_util_getVarVal(\"--v-f-theme\"));\n    if (iFontTheme === gFalse)\n        ALERT(_failed_ + \"iFntThm ]\");\n    else\n        iFontTheme.init(V_util_getParamVal(\"wf\")); // 初始化\n    sw.ed(\"    ├ Font Themer: \");\n\n    // ==================== UI --------------------\n\n    // 聚光灯\n    sw.st();\n    iSpotlight = new Spotlight(180, new BottomTips(_spotlight_));\n    if (iSpotlight === gFalse)\n        ALERT(_failed_ + \"iSpotlight ]\");\n    sw.ed(\"    ├ Spotlight: \");\n\n    // 激光笔\n    iLaserPointer = new LaserPointer(new BottomTips(\"laserPointe\"));\n    if (iLaserPointer === gFalse)\n        ALERT(_failed_ + \"iPter ]\");\n    sw.ed(\"    ├ LaserPointer: \");\n\n    // 长内容折叠\n    sw.st();\n    let cf = V_util_getParamVal(\"cf\");\n    ContentFolder_enabled = (cf !== _off_);\n    // 指定对象（table,figure,codeblock）启用的处理\n    if (cf !== gUndefined && cf !== _on_ && cf !== _off_) {\n        ContentFolder_enabled_table = (cf.i(_table_) > -1);\n        ContentFolder_enabled_figure = (cf.i(_figure_) > -1);\n        ContentFolder_enabled_codeblock = (cf.i(_codeblock_) > -1);\n    }\n    ContentFolder_init();\n    sw.ed(\"    ├ Content Folding: \");\n\n    // 工具提示\n    ToolTips_init();\n\n    // 弹窗信息提示\n    iInfoTips = new InfoTips(new BgMask(\"info-tips\", _center_));\n    if (iInfoTips.length === 0)\n        ALERT(_failed_ + \"iInfoTips ]\");\n\n    // 导航中心\n    sw.st();\n    let runMode = V_util_getParamVal(\"nc\");\n    iNavCenter = new NavCenter(new BgMask(_navCenter_, _left_, gTrue), runMode);\n    if (iNavCenter === gFalse)\n        ALERT(_failed_ + \"iNavCenter ]\");\n    sw.ed(\"    ├ Nav Center: \");\n\n    // 逐章导航\n    sw.st();\n    iChapterNav = new ChapterNav(iNavCenter);\n    if (iChapterNav === gFalse)\n        ALERT(_failed_ + \"iChapNav ]\");\n    else {\n        // 添加关联组件\n        iNavCenter.chpNav = iChapterNav;\n    }\n    sw.ed(\"    ├ Chapter Nav: \");\n\n    // 工具栏\n    sw.st();\n    iToolbar = new Toolbar(iNavCenter, iChapterNav);\n    if (iToolbar === gFalse)\n        ALERT(_failed_ + \"iTb ]\");\n    else {\n        // 导航中心按钮\n        iToolbar.add(_navCenter_, function () {\n            iNavCenter.tg();\n        });\n\n        // 文库\n        iToolbar.add(_docLib_, function () {\n            if (iNavCenter.docLib.counter > 1) {\n                if (!iNavCenter.showed)\n                    iNavCenter.tg();\n                iNavCenter.keyword.input.focus();\n                iNavCenter.keyword.input.val(_vdl_);\n                iNavCenter.keyword.input.select();\n            }\n            else\n                iNavCenter.docLib.show(_, _);\n        });\n\n        // 分隔条\n        iToolbar.addSpliter(_toolbarSpliter_);\n\n        // 段落导航\n        iToolbar.add(_paragraphNav_, function () {\n            iInfoTips.inform([\n                \"开启方式：<br />\" + V_ui_strong(\"三击文档中的「任意段落」\"),\n                \"Open method:<br />\" + V_ui_strong(\"three click \\\"any paragraph\\\" in the document\")\n            ][V_lang_id], 10000, gTrue);\n        });\n\n        // 聚光灯\n        iToolbar.add(_spotlight_, function () {\n            iLaserPointer.hide();\n            if (iSpotlight.tg())\n                iParagraphNav.hide();\n        });\n\n        // 激光笔\n        iToolbar.add(_laserPointer_, function () {\n            iSpotlight.hide();\n            if (iLaserPointer.tg())\n                iParagraphNav.hide();\n        });\n\n        // 打印按钮\n        iToolbar.add(_print_, function () {\n            V_print_ready();\n        });\n\n        // 添加关联组件\n        iNavCenter.toolbar = iToolbar;\n        iSpotlight.toolbar = iToolbar;\n        iLaserPointer.toolbar = iToolbar;\n\n        // 绑定选择字体风格的工具栏按钮\n        iFontTheme.bindButton(iToolbar.btns[_fontTheme_]);\n    }\n    sw.ed(\"    ├ Toolbar: \");\n\n    // 插图浏览器\n    sw.st();\n    iFigNav = new FigureNav();\n    if (iFigNav === gFalse)\n        ALERT(_failed_ + \"iFigNav ]\");\n    sw.ed(\"    ├ Figure Nav: \");\n\n    // ----------------------------------------\n    sw.st();\n\n    // 文档更多内容栏遮罩栏\n    MoreDocContent_init();\n\n    // 脚注\n    iFootNote = new FootNote(new BgMask(\"foot-note\", _bottom_, gTrue));\n    if (iFootNote === gFalse)\n        ALERT(_failed_ + \"iFootNote ]\");\n\n    // 状态栏相关\n    StsDocInfo_init();\n    // StsDocLib_init();\n    StsFontTheme_init();\n    StsColorScheme_init();\n    // StsZoomView_init();\n    StsLinkTool_init(new BgMask(_linkChecker_, _right_, gTrue));\n\n    // 状态栏\n    StatusBar_init();\n    StatusBar_add(\"doc-info\", StsDocInfo_ui);\n    StatusBar_add(_fontTheme_, StsFontTheme_ui);\n    StatusBar_add(\"color-scheme\", StsColorScheme_ui);\n    StatusBar_add(_linkChecker_, StsLinkTool_ui);\n\n    sw.ed(\"    └ Misc: \");\n}\n\n/**\n * 初始化 VLOOK 核心模块\n */\nfunction V_initKernel() {\n    // ----------------------------------------\n    // 加载本文档主题配套的 Logo 图标\n    iStopwatch.st(\"* Document Logo\");\n    let icoLg = $(\".\" + _vDocLog_ + _light_).c(_backgroundImage_),\n        icoDk = $(\".\" + _vDocLog_ + _dark_).c(_backgroundImage_);\n    $(\"head\").ap(\"<link rel='icon' id='\" + _docIcon_ + _light_ + \"' \" + V_attr(_href_ , icoLg.s(5, icoLg.length - 2)) + \" type='image/x-icon'/>\"\n        + \"<link rel='icon' id='\" + _docIcon_ + _dark_ + \"' \" + V_attr(_href_, icoDk.s(5, icoDk.length - 2)) + \" type='image/x-icon'/>\");\n    iStopwatch.ed(_4space_);\n\n    // ----------------------------------------\n    // 封面、封底处理\n    if (VOM_cover() === gUndefined) {\n        let vTp = (V_type === _mini_ ? \" mini\" : _);\n        VOM_doc().pp(V_ui_div(_vkIdDocTitle_, _vDoc_ + \"title\" + vTp, V_util_getDocTitle()));\n    }\n\n    // ----------------------------------------\n    // 初始化国际化 UI\n    iStopwatch.st(\"* UI i18n\");\n    V_ui_initI18n();\n    iStopwatch.ed(_4space_);\n\n    // ----------------------------------------\n    // 初始化题注生成器配置\n    if (V_util_getParamVal(\"capauto\") === _on_)\n        CaptionGenerator_autoContent = gTrue;\n\n    // ----------------------------------------\n    // 初始化音频数据\n    iStopwatch.st(\"* Audio: \");\n    ExtAudio_init();\n    iStopwatch.ed(_4space_);\n\n    // ----------------------------------------\n    // 初始化视频数据\n    iStopwatch.st(\"* Video: \");\n    ExtVideo_init();\n    iStopwatch.ed(_4space_);\n\n    // ========================================\n    // 初始化引用块\n    // 须在 ExtFigure 处理前，避免引用块折叠处理中，对其内含有 svg 颜色替换处理导致 DOM 冲突而失效\n    iStopwatch.st(\"* Quote: \");\n    ExtQuote_init();\n    ExtQuote_adjustHoverStyle();\n    iStopwatch.ed(_4space_);\n\n    // ----------------------------------------\n    // 初始化插图数据\n    iStopwatch.st(\"* Figure: \");\n    ExtFigure_init();\n    iStopwatch.ed(_cost_);\n\n    // ----------------------------------------\n    // 初始化表格\n    iStopwatch.st(\"* Table: \");\n    ExtTable_init();\n    iStopwatch.ed(_cost_);\n\n    TableCross_init();\n    // 设置表格阅读模式的开关状态（不指定则默认开启）\n    RowGroup_adjustHoverStyle();\n\n    // ----------------------------------------\n    // 初始化代码块\n    iStopwatch.st(\"* Code Block: \");\n    ExtCodeBlock_init();\n    iStopwatch.ed(_4space_);\n\n    // ========================================\n    // Code Magic 处理\n    // （注意：须在 ExtQuote 初始化之后执行）\n    // 包括了：彩虹标签、彩虹徽章、彩虹引用块、刮刮卡、文字注音等\n    iStopwatch.st(\"* Code & Xscript °Magic: \");\n    CodeMagic_init();\n    XscriptMagic_init();\n    iStopwatch.ed(_4space_);\n    // ========================================\n\n    // ========================================\n    // 在插图、表格、代码等内容的题注处理后，进行引用块的二次初始化\n    // ExtQuote_initAfterCap();\n    // ========================================\n\n    // ----------------------------------------\n    // 检查页内链接坏链\n    // 因涉及对 xmd 的处理，需要在文库处理之前（DocLib）进行\n    // __fork(\"Check Hash Link\", function () {\n    iStopwatch.st(\"* Check Hash Link: \");\n    LinkTool_mdToHtml();\n    LinkTool_checkLink();\n    iStopwatch.ed(_4space_);\n    // }, 250);\n\n    // ----------------------------------------\n    // 增强脚注\n    iStopwatch.st(\"* Foot Note: \");\n    FootNote.init();\n    iStopwatch.ed(_4space_);\n\n    // VLOOK UI 统一样式适配处理\n    V_ui_adjustHoverStyle();\n\n    // 主要针对小屏情况，完成表格初始化后进行适配\n    // 如果不是小屏，则由 adjustAll 触发\n    ContentFolder_adjust();\n\n    // ----------------------------------------\n    // 初始化 导航中心、章节导航 数据\n    iStopwatch.st(\"* Adjust NavCenter/ChapterNav/FigureNav/Toolbar/StatusBar\");\n    if (NavCenter.init()) {\n        if (!env.device.mobile)\n            iNavCenter.showHandle();\n\n        iNavCenter.adjust();\n        iChapterNav.adjust();\n        iToolbar.adjust();\n        StatusBar_adjust();\n\n        // 根据设备类型自适应 hover 样式\n        iNavCenter.catalog.adjustHoverStyle();\n        iChapterNav.adjustHoverStyle();\n        iFigNav.adjustHoverStyle();\n    }\n    iStopwatch.ed(_4space_);\n\n    // ----------------------------------------\n    // 自动生成可通过 DOM 引用块的目录自动编号\n    ChpAutoNum_initToc();\n\n    // ----------------------------------------\n    // 文档没有任何可索引的对象时，默认不显示导航中心\n    if (!iNavCenter.catalog.hasIndexItem()\n        && !iNavCenter.figure.hasIndexItem()\n        && !iNavCenter.table.hasIndexItem()\n        && !iNavCenter.media.hasIndexItem()\n        && !iNavCenter.codeblock.hasIndexItem()) {\n            iNavCenter.runMode = \"closed\";\n    }\n\n    // ----------------------------------------\n    iStopwatch.st(\"* Binding Event\");\n    // 绑定文档鼠标移动事件，聚光灯跟随鼠标移动\n    document.addEventListener(\"mousemove\", function (event) {\n        iSpotlight.repaint(event);\n        iNavCenter.snap(event);\n    });\n\n    // to-do\n    // mmMindmap_init();\n\n    // 绑定文档的单击事件\n    $(document).uC().ck(function () {\n        TableCross_hide();\n    });\n\n    // 绑定文档的鼠标滚轮事件\n    document.addEventListener(\"mousewheel\", function (event) {\n        // 忽略处理，提升性能\n        return false;\n    }, false);\n\n    // 绑定文档的滚动事件\n    $(document).on(\"scroll\", function () {\n        let currentTime = new Date().getTime(),\n            scrollTop = $(document).scrollTop(),\n            timeInterval = gFalse,\n            docHeight = $(document).h();\n\n        // 显示或隐藏文档更多内容遮罩栏\n        if (scrollTop < 20\n            || scrollTop > (docHeight - 20)\n            || currentTime - V_doc_scroll_lastUpdate > 500)\n                MoreDocContent_refresh(scrollTop);\n\n        // ----------------------------------------\n        // 控制执行频率，避免处理过快影响性能\n        if (scrollTop < 20\n            || scrollTop > (docHeight - 20)\n            || (timeInterval = (currentTime - V_doc_scroll_lastUpdate) > 500)\n            || (timeInterval && Math.abs(scrollTop - V_doc_scroll_lastTop) > 100)) {\n                // 更新控制执行频率相关判断数据\n                V_doc_scroll_update(currentTime, $(document).scrollTop());\n                // 根据是屏幕大小进行不同的适配控制\n                V_ui_adjustAll();\n        }\n\n        // 由于涉及到章节导航栏数据更新等不同逻辑处理，执行频率由 focusHeader 内进行控制\n        iNavCenter.catalog.focusHeader(scrollTop);\n    });\n\n    // 绑定窗口大小缩放事件\n    $(window).on(\"resize\", function () {\n        TableCross_hide();\n        iNavCenter.catalog.focusHeader();\n        V_ui_adjustAll();\n        ExtQuote_uniteColumnsHeight();\n    });\n\n    // 绑定打印前的触发事件\n    window.onbeforeprint = function () {\n        if (V_type === _mini_)\n            return;\n        // 不是通过 VLOOK 打印按钮进行打印时进行提醒\n        if (V_print_mode !== _VLOOK_)\n            ALERT([\n                \"注意！为确保打印正常，建议使用文档内工具栏左侧的【打印】按钮进行打印！\",\n                \"Notice! To ensure normal printing, it is recommended to use the [Print] button on the left side of the toolbar in the document to print!\"\n            ][V_lang_id]);\n    };\n    // 绑定打印后的触发事件\n    window.onafterprint = function () {\n        if (V_type === _mini_)\n            return;\n        V_print_done();\n    };\n\n    // 监听页内锚点链接跳转\n    // 注意：同一个锚点连续点击不会触发该事件\n    $(window).on(\"hashchange\", function(event) {\n        let h = WINDOW_getHash(),\n            anchor = h.s(1, h.length);\n        if (anchor.x().length === 0)\n            return;\n\n        iNavCenter.history.add(h);\n\n        // 锚点未显示的处理（如所在父元素被隐藏）\n        let aObj = $(\"#\" + JS_decodeURI(anchor) + \", a\" + V_attrX(_name_, anchor));\n        if (aObj !== gUndefined && aObj.o() !== gUndefined && aObj.oT() === 0) {\n            let hiddenObj = aObj.closest(_blockquote_);\n            // 若属于被折叠的引用块，则模拟点击展开，并重新定位到该引用块\n            if (hiddenObj.length > 0 && hiddenObj.isHidden()) {\n                let fd = hiddenObj.pr().f(\".\" + _vBlockquoteFolder_);\n                if (fd.length > 0) {\n                    fd.tr(_mouseUp_);\n                    WINDOW_setHref(h);\n                }\n            }\n        }\n\n        // 页内位置改变后，微调滚动条位置\n        if (gLastHash == null || gLastHash !== h) {\n            // 其中对于 Firefox 若不延时微调会存在微调无效的情况\n            setTimeout(function () {\n                V_ui_tuningScrollTop(JS_decodeURI(anchor));\n            }, env.browser.Firefox ? 300 : 0);\n        }\n        gLastHash = h;\n\n        // 若导航中心没有显示，则强制进行延时适配处理（如从封面直接到指定章节）\n        if (!iNavCenter.showed)\n            V_ui_adjustAllDelay();\n    });\n\n    iStopwatch.ed(_4space_);\n}\n\n/**\n * 初始化须在页面 body 显示后才能执行的部分\n */\nfunction V_initRestyle() {\n    let sw = new Stopwatch();\n\n    // ----------------------------------------\n    // 重置任务列表样式\n    sw.st();\n    Restyler_forTaskList();\n    sw.ed(\"    ├ TaskList: \");\n\n    // ----------------------------------------\n    // 重置脚本化图表样式，须在以上页面内容恢复显示后再处理\n    sw.st();\n    Restyler_forMermaid();\n    sw.ed(\"    └ Mermaid: \");\n}\n\n// ========================================\n// VLOOK UI 包\nlet V_ui_effect = 0, // 0: 无动效\n    V_ui_processingAdjust= gFalse;\n\n/**\n * 淡入显示\n * @param t 目标对象\n */\nfunction V_ui_show(t) {\n    if (t === gUndefined)\n        return;\n\n    t.c(_visibility_, _visible_)\n        .c(_opacity_, 1);\n}\n\n/**\n * 淡出隐藏\n * @param t 目标对象\n */\nfunction V_ui_hide(t) {\n    if (t === gUndefined)\n        return;\n\n    t.c(_visibility_, _hidden_)\n        .c(_opacity_, 0);\n}\n\nfunction V_ui_wrap_kbd(src) {\n    return \"<kbd>\" + src + \"</kbd>\"\n}\n/**\n * 获得当前 OS 环境下的 Ctrl 键 UI 元素\n */\nfunction V_ui_getCtrlKeyUI(unwrap, short) {\n    let key = short ? \"⌃\"\n        : (env.os.macOS ? \"⌃ control\" : \"⌃ Ctrl\");\n    return unwrap ? key : V_ui_wrap_kbd(key);\n}\n\n/**\n * 获得当前 OS 环境下的 Shift 键 UI 元素\n */\nfunction V_ui_getShiftKeyUI(unwrap, short) {\n    let key = short ? \"⇧\" : \"⇧ shift\";\n    return unwrap ? key : V_ui_wrap_kbd(key);\n}\n\n/**\n * 获得当前 OS 环境下的 Alt / Option 键 UI 元素\n */\nfunction V_ui_getAltKeyUI(unwrap, short) {\n    let str = env.os.macOS\n        ? (short ? \"⌥\" : \"⌥ option\") : \"Alt\";\n    return unwrap ? str : V_ui_wrap_kbd(str);\n}\n\n/**\n * 获得当前 OS 环境下的 Windows / Command 键 UI 元素\n */\nfunction V_ui_getMetaKeyUI(unwrap, short) {\n    let str = env.os.macOS\n        ? (short ? \"⌘\" : \"⌘ command\") : \"Win\";\n    return unwrap ? str : V_ui_wrap_kbd(str);\n}\n\n/**\n * 获得滚动条宽度\n */\n// function V_ui_scrollWidth() {\n//     let sc,\n//         d = document.createElement(\"DIV\");\n//     d.style.cssText = \"position: absolute; top: -9999px; width: 100px; height: 100px; overflow: hidden;\";\n//     sc = document.body.appendChild(d).clientWidth;\n//     d.style.overflowY = \"scroll\";\n//     document.body.removeChild(d);\n//     return sc - d.clientWidth;\n// }\n\n/**\n * 获得 VLOOK 与技术支持信息内容\n * @returns string VLOOK 与技术支持信息内容\n */\nfunction V_ui_copyrightInfo() {\n    return V_ui_div(_, _vCopyright_,\n                V_ui_svgIcon(_icoVLOOK_, 24, 24, _dark_, _vCopyrightSvgIco_)\n                + _2nbsp_\n                + 'Published with ' + V_ui_a(_, \"https://github.com/MadMaxChow/VLOOK\", V_ui_strong(_VLOOK_), \"_blank\")\n                + '™ (V22.0) &amp; ' + V_ui_a(_, \"https://www.typora.io\", V_ui_strong(\"Typora\"), \"_blank\") + '.' + _2nbsp_\n                + 'Support: ' + V_ui_a(_, \"https://qm.qq.com/cgi-bin/qm/qr?k=oB8wpFG_4SEMf1CL9qVy-jMw0CMfSwff&jump_from=webapi\", V_ui_strong(\"QQ Group\"))\n                + ' / ' + V_ui_a(_, 'mailto:67870144@qq.com?subject=Feedback%20about%20VLOOK%20' + V_ver + '&body=Hi,%0D%0A%0D%0A====================%0D%0A%0D%0A' + encodeURI(env.print(gTrue)), V_ui_strong(\"Email\")) + '.'\n        );\n}\n\n/**\n * 判断是否为小屏\n */\nfunction V_ui_isSmallScreen() {\n    return $(window).oW() <= gSmallScreenWidth;\n}\n\n/**\n * 微调页内跳转后的滚动条位置\n * @param anchor 锚点名称，不含 #，如含 # 会自动过滤\n */\nfunction V_ui_tuningScrollTop(anchor) {\n    if (anchor !== gUndefined && anchor.sW(\"#\"))\n        anchor = anchor.s(1, anchor.length);\n    if (anchor === gUndefined || anchor.x().length === 0)\n        return;\n\n    let t = JS_parseInt(iChapterNav.ui.c(_top_)),\n        h = JS_parseInt(iChapterNav.ui.c(_height_)),\n        y = 10,\n        aObj = $(\"#\" + JS_decodeURI(anchor) + \", a\" + V_attrX(_name_, anchor)),\n        tag = V_util_getTagName(aObj);\n\n    // h1-6\n    if (\"h1h2h3h4h5h6\".i(tag) > -1) {\n        y += (tag === _h6_)\n            ? (t + h + 16)\n            : (aObj.h() + 10 + (JS_parseInt(tag.s(1, 2)) - 1) * 6);\n        y -= JS_parseInt(V_util_getVarVal(\"--v-top-margin\"));\n    }\n    // 从底部脚注列表回到脚注位置\n    else if (anchor.sW(\"ref-footnote\"))\n        y += 70;\n    // 其他情况\n    else\n        y += t + h;\n    // 微调滚动位置\n    $(document).scrollTop($(document).scrollTop() - y);\n}\n\n/**\n * 生成 HTML 标签属性与值内容（指定关系运算符）\n * @param attrName 属性名称\n * @param attrValue 属性值\n * @param op 关系运算符，不指定时默认为 =\n */\nfunction V_attr(attrName, attrValue, op) {\n    if (op === gUndefined)\n        op = \"=\";\n    return attrName + op + '\"' + attrValue + '\"';\n}\n\n/**\n * 生成 jQuery / CSS 选择器的属性与值内容\n * @param attrName 属性名称\n * @param attrValue 属性值\n * @param op 关系运算符，不指定时默认为 =\n */\nfunction V_attrX(attrName, attrValue, op) {\n    if (op === gUndefined)\n        op = \"=\";\n    attrValue = (attrValue !== gUndefined) ? op + '\"' + attrValue + '\"': _;\n    if (attrName.length > 0 )\n        attrValue += \"]\";\n    return \"[\" + attrName + attrValue;\n}\n\n/**\n * 生成 SVG 图标\n * @param icon 图标资源集标识\n * @param w 图标宽度\n * @param h 图标高度\n * @param color 内置图标样式 v-svg-ico-xxx 标识：light / dark / alpha / ...\n * @param classValue 扩展补充的 class 样式\n * @param extAttr 扩展的自定义属性及属性值，如：data-attr1=\"123\"\n */\nfunction V_ui_svgIcon(icon, w, h, color, classValue, extAttr) {\n    // class\n    classValue = (classValue !== gUndefined && classValue.length > 0) ? ___ + classValue : _;\n    // ext attr\n    extAttr = (extAttr !== gUndefined && extAttr.length > 0) ? ' ' + extAttr : _;\n    return '<svg width=\"' + w + 'px\" height=\"' + h + 'px\" class=\"v-svg-small-ico' + classValue + '\"' + extAttr + '>'\n        + '<use class=\"v-svg-ico-' + color + '\" xlink:href=\"#' + icon + '\">'\n        + '</use></svg>';\n}\nfunction V_ui_svgIcon2(icon, w, h) {\n    return '<svg width=\"' + w + 'px\" height=\"' + h + 'px\">'\n        + '<use xlink:href=\"#' + icon + '\">'\n        + '</use></svg>';\n}\n\n/**\n * 生成 svg 的 symbol 标签（不用于嵌套）\n * @param idValue id 属性值\n * @param content 标签的内容\n */\nfunction V_ui_symbol(idValue, content) {\n    return V_ui_htmlTag(\"symbol\", idValue, _, _, content);\n}\n\n/**\n * 生成 img 标签\n * @param classValue class 属性值\n * @param alt alt 属性值\n * @param src src 属性值\n * @param srcset srcset 属性值\n */\nfunction V_ui_img(classValue, alt, src, srcset) {\n    classValue = (classValue !== gUndefined && classValue.length > 0) ? ' class=\"' + classValue + '\"' : '';\n    alt = (alt !== gUndefined && alt.length > 0) ? ' alt=\"' + alt + '\"' : '';\n    src = (src !== gUndefined && src.length > 0) ? ' src=\"' + src + '\"' : '';\n    srcset = (srcset !== gUndefined && srcset.length > 0) ? ' srcset=\"' + srcset + '\"' : '';\n    return '<' + _img_ + classValue + alt + src + srcset + '>';\n}\n\n/**\n * 生成 iframe 标签\n * @param name name 属性值\n */\nfunction V_ui_iframe(name) {\n    name = (name !== gUndefined && name.length > 0) ? ' name=\"' + name + '\"' : '';\n    return V_ui_htmlTag(_iframe_, _, _, name, _);\n    // return '<' + _iframe_ + name + \"></\" + _iframe_ + \">\";\n}\n\n/**\n * 生成 input 标签\n * @param id id 属性值\n * @param name name 属性值\n * @param type type 属性值\n * @param value value 属性值\n * @param extAttr 扩展的自定义属性及属性值，如：data-attr1=\"123\"\n */\nfunction V_ui_input(id, name, type, value, extAttr) {\n    id = (id !== gUndefined && id.length > 0) ? ' id=\"' + id + '\"' : '';\n    name = (name !== gUndefined && name.length > 0) ? ' name=\"' + name + '\"' : '';\n    type = (type !== gUndefined && type.length > 0) ? ' type=\"' + type + '\"' : '';\n    value = (value !== gUndefined && value.length > 0) ? ' value=\"' + value + '\"' : '';\n    extAttr = (extAttr !== gUndefined && extAttr.length > 0) ? ' ' + extAttr : _;\n    return '<' + _input_ + id + name + type + value + extAttr + ' />';\n}\n\n/**\n * 生成 figcaption 标签\n * @param classValue class 属性值\n * @param extAttr 扩展的自定义属性及属性值，如：data-attr1=\"123\"\n * @param content 标签的内容\n*/\nfunction V_ui_figcaption(classValue, extAttr, content) {\n    return V_ui_htmlTag(\"figcaption\", _, classValue, extAttr, content);\n}\n\n/**\n * 生成 div 标签\n * @param idValue id 属性值\n * @param classValue class 属性值\n * @param content 标签的内容\n */\nfunction V_ui_div(idValue, classValue, content) {\n    return V_ui_htmlTag(\"div\", idValue, classValue, _, content);\n}\n\n/**\n * 生成 div 标签\n * @param idValue id 属性值\n * @param classValue class 属性值\n * @param extAttr 扩展的自定义属性及属性值，如：data-attr1=\"123\"\n * @param content 标签的内容\n */\nfunction V_ui_div2(idValue, classValue, extAttr, content) {\n    return V_ui_htmlTag(\"div\", idValue, classValue, extAttr, content);\n}\n\n/**\n * 生成 CSS 变量\n * @param varName 变量名称\n */\nfunction V_ui_var(varName) {\n    return 'var(' + varName+ ')';\n}\n\n/**\n * 生成 strong 标签\n * @param content 标签的内容\n */\nfunction V_ui_strong(content) {\n    return V_ui_htmlTag(_strong_, _, _, _, content);\n}\n\n/**\n * 生成 span 标签\n * @param classValue class 属性值\n * @param extAttr 扩展的自定义属性及属性值，如：data-attr1=\"123\"\n * @param content 标签的内容\n */\nfunction V_ui_span(classValue, extAttr, content) {\n    return V_ui_htmlTag(_span_, _, classValue, extAttr, content);\n}\n\n/**\n * 生成 label 标签\n * @param classValue class 属性值\n * @param extAttr 扩展的自定义属性及属性值，如：data-attr1=\"123\"\n * @param content 标签的内容\n */\nfunction V_ui_label(classValue, extAttr, content) {\n    return V_ui_htmlTag(_label_, _, classValue, extAttr, content);\n}\n\n/**\n * 生成 a 标签\n * @param idValue id 属性值\n * @param href href 属性值\n * @param content 标签的内容\n * @param target href 属性值\n */\nfunction V_ui_a(idValue, href, content, target) {\n    href = (href !== gUndefined && href.length > 0) ? ' href=\"' + href + '\"': _;\n    target = (target !== gUndefined && target.length > 0) ? ' target=\"' + target + '\"' : _;\n    return V_ui_htmlTag(\"a\", idValue, _, href + target, content);\n}\n\n/**\n * 生成 audio 标签\n * @param extAttr 扩展的自定义属性及属性值，如：data-attr1=\"123\"\n * @param content 标签的内容\n */\nfunction V_ui_audio(extAttr, content) {\n    return V_ui_htmlTag(_audio_, _, _, extAttr, content);\n}\n\n/**\n * 生成 video 标签\n * @param extAttr 扩展的自定义属性及属性值，如：data-attr1=\"123\"\n * @param content 标签的内容\n */\nfunction V_ui_video(extAttr, content) {\n    return V_ui_htmlTag(_video_, _, _, extAttr, content);\n}\n\n/**\n * 生成 html 的标签\n * @param tag 标签名称，如：strong, div, span 等\n * @param idValue id 属性值\n * @param classValue class 属性值\n * @param extAttr 扩展的自定义属性及属性值，如：data-attr1=\"123\"\n * @param content 标签的内容\n */\nfunction V_ui_htmlTag(tag, idValue, classValue, extAttr, content) {\n    // id\n    idValue = (idValue !== gUndefined && idValue.length > 0) ? ' id=\"' + idValue + '\"' : '';\n    // class\n    classValue = (classValue !== gUndefined && classValue.length > 0) ? ' class=\"' + classValue + '\"' : '';\n    // ext attr\n    extAttr = (extAttr !== gUndefined && extAttr.length > 0) ? ' ' + extAttr : _;\n    // content\n    if (content === gUndefined)\n        content = _;\n    return '<' + tag + idValue + classValue + extAttr + '>' + content + '</' + tag + '>';\n}\n\n/**\n * 获取 Alt / Option 修饰键情况\n * @returns boolean true：按下，false：未按下\n */\nfunction V_ui_holdKey_Alt(event) {\n    return (event.altKey);\n}\n\n/**\n * 判断鼠标当前位置是否落在指定对象的区域范围内\n * @param target 指定对象\n * @param event 事件对象\n */\nfunction v_ui_mouseDropIn(target, event) {\n    let mx = event.pageX || event.clientX + document.body.scrollLeft,\n        my = event.pageY || event.clientY + document.body.scrollTop,\n        padding = JS_parseInt(target.c(_paddingTop_)) * 2,\n        borderBottomWidth = JS_parseInt(target.c(_borderBottomWidth_));\n    return !(mx <= target.oL() || mx >= (target.oL() + target.w() + padding)\n        || my <= target.oT() || my >= (target.oT() + target.h() + padding + borderBottomWidth));\n}\n\n/**\n * 将预置颜色标识转换为驼峰格式\n * @param color 预置的颜色标识\n */\nfunction V_ui_campColor(color) {\n    // 渐变色\n    if (color.length > 3) {\n        let gradientColors = V_ui_splitColors(color),\n            count = gradientColors.length,\n            colorStr = _, gColor;\n        for (let i = 0; i < count; i++) {\n            gColor = gradientColors[i];\n            colorStr += gColor.charAt(0).toUpperCase() + gColor.slice(1);\n        }\n        return colorStr;\n    }\n    // 单色\n    return color.charAt(0).toUpperCase() + color.slice(1);\n}\n\n/**\n * 拆分渐变的预置颜色标识\n * @param color 预置的颜色标识\n * @return Array[] 颜色标识数组\n */\nfunction V_ui_splitColors(color) {\n    let gradientColors = color.l().split(/(\\S{2})/i);\n    return gradientColors.filter(item => item !== _);\n}\n\n/**\n * 将 HEX 颜色格式转换为 RGB 数组\n * @param hex 十六进制格式颜色，如：#F1A2C3\n */\nfunction V_ui_hexToRGB(hex) {\n    let rgb = [];\n    rgb.push(parseInt(hex.s(1, 3), 16));\n    rgb.push(parseInt(hex.s(3, 5), 16));\n    rgb.push(parseInt(hex.s(5, 7), 16));\n\n    return rgb;\n}\n\n/**\n * 格式化颜色为 rgba 格式\n * @param rgb RGB 颜色分量数组\n * @param opacity 透明度，0:透明，1:不透明\n */\nfunction V_ui_formatRGBA(rgb, opacity) {\n    return \"rgba(\" + rgb[0] + \", \" + rgb[1] + \", \" + rgb[2] + \", \" + opacity + \")\";\n}\n\n/**\n * 生成文本渐变色 CSS 代码\n * @param gradientColors 渐变色色号内容，如：RdBuYe\n * @param fade 透明度子标识\n * @param suffix 颜色后缀子标识\n */\nfunction V_ui_genGradColorCSS(gradientColors, fade, suffix) {\n    let css = _,\n        count = gradientColors.length,\n        color = _;\n    for (let i = 0; i < count; i++) {\n        color = gradientColors[i];\n        css += V_ui_var(\"--ac-\" + color + fade\n            + (color === \"bk\" ? _ : suffix));\n        if (i < count - 1)\n            css += \",\";\n    }\n    return css;\n}\n\n/**\n * 初始 UI 国际化\n */\nfunction V_ui_initI18n() {\n    // need removed:\n    // V_util_setVarVal(\"--v-ex-all\", [\n    //     \"展开全部 ▼\",\n    //     \"Expand All ▼\"\n    // ][V_lang_id]);\n    // if (ContentFolder_ui !== gUndefined) {\n    //     ContentFolder_ui.f(_div_ + \">\" + _span_).a(_title_, [\n    //         \"查看更多\",\n    //         \"View More\"\n    //     ][V_lang_id]);\n    // }\n\n    iToolbar.btns[_navCenter_].a(_dataTips_, [\n        V_ui_strong(\"隐藏\") + \" / \" + V_ui_strong(\"显示\") + \" 导航中心\",\n        V_ui_strong(\"Hide\") + \" / \" + V_ui_strong(\"Show\") + \" Navigation Center\"\n    ][V_lang_id] + \"\\n<sub>\" + V_ui_wrap_kbd(\"O\") + \"</sub>\");\n\n    iToolbar.btns[_docLib_].a(_dataTips_, [\n        \"浏览文库\",\n        \"Document Library\"\n    ][V_lang_id] + \"\\n<sub>\" + V_ui_wrap_kbd(\"L\") + \"</sub>\");\n\n    iToolbar.btns[_paragraphNav_].a(_dataTips_, [\n        \"段落导航 模式\",\n        \"Paragraph Navigation mode\"\n    ][V_lang_id]);\n\n    iToolbar.btns[_spotlight_].a(_dataTips_, [\n        \"聚光灯\",\n        _spotlight_\n    ][V_lang_id] + \"\\n<sub>\" + V_ui_wrap_kbd(\"S\") + \"</sub>\");\n\n    iToolbar.btns[_laserPointer_].a(_dataTips_, [\n        \"激光笔\",\n        \"Laser Pointer\"\n    ][V_lang_id] + \"\\n<sub>\" + V_ui_wrap_kbd(\"P\") + \"</sub>\");\n\n    iToolbar.btns[_print_].a(_dataTips_, [\n        \"打印...\",\n        \"Print...\"\n    ][V_lang_id]);\n\n    iChapterNav.prev.ui.a(_dataTips_, [\n        \"前一章\",\n        \"Previous Chapter\"\n    ][V_lang_id] + \"\\n<sub>\" + V_ui_wrap_kbd(\"◄\") + \"</sub>\");\n\n    iChapterNav.next.ui.a(_dataTips_, [\n        \"后一章\",\n        \"Next Chapter\"\n    ][V_lang_id] + \"\\n<sub>\" + V_ui_wrap_kbd(\"►\") + \"</sub>\");\n\n    iChapterNav.dt.a(_dataTips_, [\n        \"回到封面\",\n        \"Back to cover\"\n    ][V_lang_id]);\n\n    iChapterNav.current.ui.a(_dataTips_, [\n        \"回到本章的开始\",\n        \"Go back to the beginning of this chapter\"\n    ][V_lang_id]);\n\n    iFigNav.btns.prev.a(_title_, \"[ ← ] \" + [\n        \"前一张\",\n        \"Previous\"\n    ][V_lang_id]);\n\n    iFigNav.btns.next.a(_title_, \"[ → ] \" + [\n        \"后一张\",\n        \"Next\"\n    ][V_lang_id]);\n\n    iFigNav.btns.close.a(_title_, \"[ ESC ] \" + [\n        \"关闭\",\n        \"Close\"\n    ][V_lang_id]);\n\n    iFontTheme.ui.f(\".\" + _vFontPackage_).t([\n        \"字体\",\n        _font_\n    ][V_lang_id] + ___);\n\n    iFontTheme.ui.f(\".v-font-theme-info\").hm([\n        \"若无法连接互联网加载在线版本字体，建议将字体直接下载到本地\",\n        \"If you cannot connect to the Internet to load the online version of the font, it is recommended to download the font directly to the local\"\n    ][V_lang_id] + \" (\" + V_ui_a(_, \"https://github.com/MadMaxChow/openfonts\", [\n        \"主站\",\n        \"Primary\"\n    ][V_lang_id]) + \" | \" + V_ui_a(_, \"https://gitee.com/MadMaxChow/openfonts\", [\n        \"备用\",\n        \"Standby\"\n    ][V_lang_id]) + \")\");\n\n    iFootNote.buttonSeeAll.ch(\"a\").t([\n        \"查看所有脚注\",\n        \"View all footnotes\"\n    ][V_lang_id] + \" ▶\");\n}\n\n/**\n * 移动到中间\n * @param s 源对象\n */\nfunction V_ui_moveToCenter(s) {\n    let l = ($(window).w() - s.w()) / 2,\n        r = _auto_;\n    if (env.device.mobile) { // 移动端\n        l = 10;\n        r = 10;\n    }\n\n    s.c(_left_, l)\n        .c(_right_, r)\n        .c(_top_, ($(window).h() - s.h()) / 2);\n}\n\n/**\n * 移动到中间\n * @param s 源对象\n * @param t 目标对象\n */\nfunction V_ui_moveToTarget(s, t) {\n    let l = t.oL(),\n        w = s.w() + JS_parseInt(s.c(_paddingLeft_))\n            + JS_parseInt(s.c(_paddingRight_))\n            + JS_parseInt(s.c(_borderWidth_)) * 2;\n\n    if (l + w + 10 > $(window).w())\n        l = $(window).w() - w - 10;\n\n    s.c(_left_, l)\n        .c(_top_, t.oT() - $(document).scrollTop() + t.h() + 10);\n}\n\n/**\n * 进行文档导航相关的 UI 元素的适配处理\n */\nfunction V_ui_adjustAll() {\n    if (V_ui_processingAdjust)\n        return;\n\n    V_ui_processingAdjust = gTrue;\n\n    if (iNavCenter.adjust())\n        ContentFolder_adjust();\n    iChapterNav.adjust();\n    iToolbar.adjust();\n\n    V_ui_processingAdjust = gFalse;\n}\n\n/**\n * 模拟等待页面完成跳转后，再进行导航中心布局自适应处理\n */\nfunction V_ui_adjustAllDelay() {\n    setTimeout(function () {\n        V_ui_adjustAll();\n        ExtQuote_uniteColumnsHeight();\n    }, 500);\n}\n\n/**\n * 根据设备类型自适应hover样式\n */\nfunction V_ui_adjustHoverStyle() {\n    // 移动设备时解绑样式事件\n    if (env.device.mobile) {\n        $(_vBtn__BtnGroup_).uH();\n        $(\".\" + _vSegmentBtn_).uH();\n        $(\".\" + _vAccentBtn_).uH();\n        StsFontTheme_ui.uH();\n        StsColorScheme_ui.uH();\n        $(\"#\" + _docLibToc_ + \">.\" + _vDocLibItem_).uH();\n        $(\".\" + _vStdCode_ + \", .\" + _vTag_ + \", .\" + _vBadgeName_).uH();\n        $(\".\" + _vBadgeValue_).uH();\n    }\n    // 非移动设备时绑定样式事件\n    else {\n        // 所有常规按钮 hover 事件处理\n        V_ui_bindHover($(_vBtn__BtnGroup_));\n        // 所有导航中心分段控制按钮 hover 事件处理\n        V_ui_bindHover($(\".\" + _vSegmentBtn_));\n        // 所有辅助按钮 hover 事件处理\n        V_ui_bindHover($(\".\" + _vAccentBtn_));\n        // 状态栏上的按钮\n        V_ui_bindHover(StsFontTheme_ui);\n        V_ui_bindHover(StsColorScheme_ui);\n        // 文库按钮 hover 事件处理\n        V_ui_bindHover($(\"#\" + _docLibToc_ + \">.\" + _vDocLibItem_));\n        // 代码、标签类 hover 事件处理\n        V_ui_bindHover($(\".\" + _vBadgeValue_), gTrue);\n    }\n}\n\n/**\n * 为对象绑定 hover 事件\n * @param target 目标对象\n * @param cancleParent 是否临时模拟取消父元素的 hover 处理（即 mouseenter）\n */\nfunction V_ui_bindHover(target, cancleParent) {\n    target.hover(function () {\n        let _t = $(this);\n        JQ_addClass(_t, _hover_);\n        if (cancleParent)\n            JQ_removeClass(_t.p(), _hover_);\n    }, function () {\n        let _t = $(this);\n        JQ_removeClass(_t, _hover_);\n        if (cancleParent)\n            _t.p().tr(_mouseEnter_);\n    });\n}\n\n/**\n * 为对象取消 hover 事件绑定\n * @param t 目标对象\n */\nfunction V_ui_unbindHover(t) {\n    t.unbind(_mouseEnter_).unbind(_mouseLeave_);\n}\n\n/**\n * 初始化动效处理\n */\nfunction V_ui_initEffectLevel() {\n    // 不启用动效\n    if (V_ui_effect < 1)\n        V_util_setVarVal(\"--v-trans-value\", _none_);\n    // 动效等级为 2 或更高级时才开启毛玻璃动效（如遮罩、插图浏览器背景）\n    else if (V_ui_effect >= 2)\n        JQ_addClass($(\".\" + _vBackdropBlurs_), _enabled_);\n    // 以下动效等级为 1 或更高级时才开启\n    V_ui_addAnimate($(\"a kbd, a \" + _img_));\n}\nfunction V_ui_initEffectLevel2() {\n    if (V_ui_effect >= 2)\n        JQ_addClass($(\".\" + _vBackdropBlurs_), _enabled_);\n}\n\n/**\n * 为指定对象添加过渡动画\n * @param t 目标对象\n * @param css 应用的属性，不指定时默认为 “all”\n */\nfunction V_ui_addAnimate(t, css) {\n    if (V_ui_effect >= 1) {\n        if  (css === gUndefined) {\n            JQ_addClass(t, _vTransitionAll_);\n        }\n        else {\n            let attrSet = css.sp(___);\n            for (let i = 0; i < attrSet.length; i++)\n                JQ_addClass(t, \"v-transition-\" + attrSet[i]);\n        }\n    }\n}\n\n/**\n * 为指定对象移除过渡动画\n * @param t 目标对象\n * @param css 应用的属性，不指定时默认为 “all”\n */\nfunction V_ui_removeAnimate(t, css) {\n    if  (css === gUndefined)\n        JQ_removeClass(t, _vTransitionAll_);\n    else {\n        let attrSet = css.sp(___);\n        for (let i = 0; i < attrSet.length; i++)\n            JQ_removeClass(t, \"v-transition-\" + attrSet[i]);\n    }\n}\n\n/**\n * 检查目标对象是否有指定的任意过渡动画\n * @param t 目标对象\n * @returns boolean true：有，false：无\n */\n// function V_ui_existAnimate(t) {\n//     return t.a(_class_).i(\"v-transition-\") > -1;\n// }\n\n/**\n * 初始化热键\n */\nfunction V_ui_initHotkey() {\n    // 键盘按下事件\n    $(document).on(\"keydown\", function (event) {\n        const code = event.keyCode || event.which || event.charCode;\n        let combKeys = (event.ctrlKey ? V_ui_getCtrlKeyUI(true) : _)\n            + (event.shiftKey ? V_ui_getShiftKeyUI(true) : _)\n            + (event.altKey ? V_ui_getAltKeyUI(true) : _)\n            + (event.metaKey ? V_ui_getMetaKeyUI(true) : _);\n\n        // if (V_debugMode) {\n        DEBUG(`KEY: ${combKeys} ${String.fromCharCode(code)} (${code})`);\n        DEBUG(`keyCode: ${event.keyCode}, key: ${event.key}, code: ${event.code}`);\n        // }\n\n        // 按下 alt / option 键\n        if (V_ui_holdKey_Alt(event) === gTrue) {\n            ContentAssistor_toggleCopyMode(gTrue);\n        }\n\n        // 热键操作处理\n        iSpotlight.disposeHotkey(code, combKeys, event);\n        iLaserPointer.disposeHotkey(code, combKeys, event);\n        iParagraphNav.disposeHotkey(code, combKeys, event);\n        WelcomePage_disposeHotkey(code, combKeys, event);\n        iFigNav.disposeHotkey(code, combKeys, event);\n        iNavCenter.disposeHotkey(code, combKeys, event);\n        iFontTheme.disposeHotkey(code, combKeys, event);\n        iInfoTips.disposeHotkey(code, combKeys, event);\n        iFootNote.disposeHotkey(code, combKeys, event);\n        LinkTool_disposeHotkey(code, combKeys, event);\n\n        // 文档的热键操作处理，只在文档为当前焦点且没有弹层时才有效\n        if (V_doc_block || document.activeElement.tagName.l() !== \"body\")\n            return;\n\n        // 逐章导航热键操作处理\n        iChapterNav.disposeHotkey(code, combKeys, event);\n\n        let handled = false;\n        switch (code) {\n            case 79: // O 显示/隐藏导航中心\n                __showHideNavCenter();\n                handled = true;\n                break;\n            case 191: // / 导航中心搜索\n                // 与 Firefox 的 / 快捷键会存在冲突\n                // 所以针对 Firefox，快捷键为 Ctrl + / 或 Cmd + /\n                // 阻止默认的浏览器行为\n                event.preventDefault();\n                if (!iNavCenter.showed) {\n                    __showHideNavCenter();\n                }\n                iNavCenter.keyword.input.focus();\n\n                // 自动读取并粘贴剪粘板的文本内容\n                navigator.clipboard.readText().then(function (v) {\n                        iNavCenter.keyword.input.val(v);\n                        iNavCenter.keyword.input.select();\n                    }).catch(function (v) {\n                        ERROR(\"GET CLIPBOARD FAILED：\", v);\n                    });\n                handled = true;\n                break;\n            case 76: // L\n                if (iNavCenter.docLib.enabled)\n                    iToolbar.btns[_docLib_].tr(_click_);\n                handled = true;\n                break;\n            case 68: // D\n                StsColorScheme_ui.tr(_click_);\n                handled = true;\n                break;\n            case 65: // A\n                if (iFontTheme.ui.isHidden())\n                    StsFontTheme_ui.tr(_click_);\n                else\n                    iFontTheme.hide();\n                handled = true;\n                break;\n            case 80: // P\n                iParagraphNav.hide();\n                iSpotlight.hide();\n                iLaserPointer.tg();\n                handled = true;\n                break;\n            case 83: // S\n                iParagraphNav.hide();\n                iLaserPointer.hide();\n                iSpotlight.tg();\n                handled = true;\n                break;\n            case 27: // ESC\n                // 表格为阅读模式时，则退出\n                if (!TableCross_ui.isHidden()) {\n                    TableCross_disable();\n                    handled = true;\n                }\n                break;\n        }\n\n        // 如果事件已处理，则禁止双重操作\n        if (handled)\n            event.preventDefault();\n\n        function __showHideNavCenter() {\n            if (iFigNav.ui.isShowed())\n                return;\n            iToolbar.btns[_navCenter_].tr(_click_);\n        }\n    });\n\n    // 松开任意键\n    $(document).on(\"keyup\", function (event) {\n        // 更新复制模式\n        if (ContentAssistor_copyAsMarkdown === gTrue) {\n            ContentAssistor_toggleCopyMode(gFalse);\n        }\n    });\n}\n// VLOOK UI 包\n// ========================================\n\n// ========================================\n// VLOOK 语言类\nlet V_lang_id = 1;\n\n/**\n * 初始化语言\n */\nfunction V_lang_init() {\n    switch (env.language.base) {\n        case \"zh\":\n            V_lang_id = 0; // 中（简）\n            break;\n        default:\n            V_lang_id = 1; // 默认：英语\n    }\n}\n// V.lang\n// ========================================\n\n// ========================================\n// 文档类\nlet V_doc_block = gFalse; // 当前文档是否被模态窗口阻塞\n\n// 滚动信息\nlet V_doc_scroll_lastUpdate = 0, // 最后一次根据滚动变动更新 UI 的时间\n    V_doc_scroll_lastTop = 0; // 最后一次记录的滚动位置\n/**\n * 更新页面滚动信息\n *\n * @param u 最后更新滚动信息的时间时间\n * @param t 最后更新的滚动位置\n */\nfunction V_doc_scroll_update(u, t) {\n    V_doc_scroll_lastUpdate = u;\n    V_doc_scroll_lastTop = t;\n}\n\n/**\n * 冻结文档滚动\n */\nfunction V_doc_scroll_freeze() {\n    JQ_exchangeClass(DOM_body(), _unfreeze_, _freeze_);\n}\n\n/**\n * 解冻文档滚动\n */\nfunction V_doc_scroll_unfreeze() {\n    JQ_exchangeClass(DOM_body(), _freeze_, _unfreeze_);\n}\n\n// 内容计数器\nlet V_doc_counter_img = 0, // 图片总数\n    V_doc_counter_figure = 0, // 插图总数\n    V_doc_counter_postcard = 0, // 明信片数量\n    V_doc_counter_table = 0, // 表格总数\n    V_doc_counter_codeblock = 0, // 代码块总数\n    V_doc_counter_audio = 0, // 非 mini 模式音频总数\n    V_doc_counter_audiomini = 0, // mini 模式音频总数\n    V_doc_counter_video = 0, // 视频总数\n    V_doc_counter_details = 0; // 详情总数\n\n/**\n * 初始化外部链接（如：http://、https://、ftp://、站内链接等），为其添加 target 参数\n */\nfunction V_doc_link_adjustExternal() {\n    $(\"a:not([href^='#'])\").e(function () {\n        let a = $(this);\n        a.a(_target_, a.a(_href_));\n    });\n}\n// ========================================\n\n// ========================================\n// 打印类\n// 打印模式。none：指由直接使用浏览器自带的打印，vlook：指先通过 vlook 进行预处理\nlet V_print_mode = _none_;\n\n/**\n * 打印文档前处理\n */\nfunction V_print_ready() {\n    V_print_mode = _VLOOK_;\n\n    // 若当前为 Dark Mode 则强制临时切换为 Light 模式\n    if (ColorScheme.scheme === _dark_) {\n        ColorScheme.schemeBeforePrint = ColorScheme.scheme;\n        ColorScheme.scheme = _light_;\n        ColorScheme.refresh();\n    }\n\n    // 将 Mermaid 图表题注 width 等属性临时禁用，并调整为 100%，以适应打印纸张宽度\n    $(\".\" + _vCaption_Mermaid_).e(function () {\n        let _t = $(this);\n        _t.a(_beforePrintWidth_, _t.c(_width_));\n        _t.c(_width_, _100pc_);\n    });\n\n    // 将 Mermaid 图表的 width, max-width 等属性临时禁用，并调整为 100%，以适应打印纸张宽度\n    $(\".\" + _vCaption_Mermaid_ + ___ + _svg_).e(function () {\n        let _t = $(this);\n        if (_t.a(_width_) === _100pc_) {\n            // 针对流程图\n            if (_t.a(_style_).i(_maxWidth_ + \":\") > -1) {\n                _t.a(_beforePrintMaxWidth_, _t.c(_maxWidth_));\n                _t.c(_maxWidth_, _);\n            }\n            // 针对状态机图\n            else if (_t.a(_style_).i(_width_ + \":\") > -1) {\n                _t.a(_beforePrintWidth_, _t.c(_width_));\n                _t.c(_width_, _100pc_);\n            }\n        }\n        else { // 针对顺序图\n            _t.a(_beforePrintWidth_, _t.a(_width_));\n            _t.c(_width_, _100pc_);\n        }\n    });\n\n    // 展开折叠的引用块\n    $(_details_ + \":not(\" + V_attrX(_open_) + \")\").e(function () {\n        $(this).ch(_summary_).tr(_click_);\n    });\n\n    // 展开所有折叠的长内容\n    $(V_attrX(_dataContentFolded_, _true_)).e(function () {\n        // need removed:\n        // $(this).next(\".\" + _vContentExpander_).ch(\".v-btn\").tr(_click_);\n        $(this).tr(_mouseDown_);\n    });\n\n    // 展开所有折叠的表格行\n    $(_vTblRowGBtn_).e(function () {\n        RowGroup_open($(this).p().p());\n    });\n\n    // 隐藏画中画\n    PicInPic_hide();\n\n    // 若存在「刮刮卡」内容，则先让用户确认是否显示\n    let rainbowCoats = $(\".\" + _vRbCoat_);\n    if (rainbowCoats.length > 0) {\n        if (confirm(\"文档含有「刮刮卡」内容，打印前是否显示实际内容？\")) {\n            rainbowCoats.e(function () {\n                let _t = $(this);\n                if (_t.a(_dataRbCoatShowed_).sW(\"f\"))\n                    RainbowCoat_show(_t);\n            });\n        }\n    }\n\n    // 调用浏览器的打印功能\n    // 延后是为以上相关的异步和界面完成刷新\n    setTimeout(function () {\n        window.print();\n    }, 2000);\n}\n\n/**\n * 打印文档后处理\n */\nfunction V_print_done () {\n    // 若打印前为 Dark Mode 则先恢复为 Dark Mode\n    if (ColorScheme.schemeBeforePrint === _dark_) {\n        ColorScheme.tg();\n    }\n\n    // 恢复打印前的配置，详见 V_print_ready()\n    $(\".\" + _vCaption_Mermaid_).e(function () {\n        let _t = $(this);\n        _t.c(_width_, _t.a(_beforePrintWidth_));\n        JQ_removeAttr(_t, _beforePrintWidth_);\n    });\n\n    // 恢复打印前的配置，详见 V_print_ready()\n    $(\".\" + _vCaption_Mermaid_ + ___ + _svg_).e(function () {\n        let _t = $(this);\n        if (_t.a(_width_) === _100pc_) {\n            // 针对流程图\n            if (_t.a(_style_).i(_maxWidth_ + \":\") > -1) {\n                _t.c(_maxWidth_, _t.a(_beforePrintMaxWidth_));\n                JQ_removeAttr(_t, _beforePrintMaxWidth_);\n            }\n            // 针对状态机图\n            else if (_t.a(_style_).i(_width_ + \":\") > -1) {\n                _t.c(_width_, _t.a(_beforePrintWidth_));\n                JQ_removeAttr(_t, _beforePrintWidth_);\n            }\n        } else { // 针对顺序图\n            _t.c(_width_, _t.a(_beforePrintWidth_));\n            JQ_removeAttr(_t, _beforePrintWidth_);\n        }\n    });\n\n    // 隐藏所有刮刮卡\n    // $(\".\" + s_CssRbCoat).e(function () {\n    //     let _t = $(this);\n    //     if (_t.a(s_DataRbCoatShowed).sW(\"t\"))\n    //         RainbowCoat_hide(_t);\n    // });\n\n    V_print_mode = _none_;\n}\n\n// ========================================\n// VLOOK 埋点数据统计\n// 上报事件的累计次数，用于标识不同的上报事件 iframe 的 id\nlet V_report_count =  0;\n\n/**\n * 提交统计数据\n */\nfunction V_report_submit(loadTimeCost) {\n    // VLOOK 基本信息\n    let sd = \"?p=vlook\"\n        + \"&ver=\" + V_ver\n        + \"&thm=\" + V_util_getTemplateTheme();\n\n    sd += \"&d=\" + (env.device.mobile ? \"mob\" : _) // 设备类型\n        + \"&dpr=\" + env.display.DPR; // DPR\n\n    // OS 信息\n    sd += \"&os=\";\n    if (env.os.macOS)\n        sd += \"macOS\";\n    else if (env.os.Windows)\n        sd += \"Windows\";\n    else if (env.os.iOS)\n        sd += \"iPhone\";\n    else if (env.os.Linux)\n        sd += \"iPhone\";\n    else\n        sd += \"others\";\n\n    // 浏览器及版本\n    sd += \"&b=\";\n    if (env.browser.Edge)\n        sd += \"edge&bv=\" + env.browserVer.Edge;\n    else if (env.browser.Chrome)\n        sd += \"chrome&bv=\" + env.browserVer.Chrome;\n    else if (env.browser.Firefox)\n        sd += \"firefox&bv=\" + env.browserVer.Firefox;\n    else if (env.browser.Safari)\n        sd += \"safari&bv=\" + env.browserVer.Safari;\n    else\n        sd += \"others&bv=\";\n\n    // 浏览器的颜色方案\n    sd += \"&cs=\" + V_util_getVarVal(_varColorScheme_).rA('\"', _).x();\n\n    sd += \"&lang=\" + V_lang_id // 浏览器语言\n        + \"&size=\" + VOM_doc().t().length // 文档大小\n        + \"&time=\" + loadTimeCost; // 加载文档时间\n\n    // 图片插图数据\n    sd += \"&\" + _img_ + \"=\" + $(\".\" + _vFig_).length\n        + \"&\" + _img_ + \"-fold=\" + $(\"p\" + V_attrX(_dataContainer_, _img_) + V_attrX(_dataContentFolded_, _true_)).length\n        + \"&\" + _img_ + \"-fill=\" + $(_img_ + \":not(\" + V_attrX(_dataImgFill_) + \")\").length\n        + \"&\" + _img_ + \"-invert=\" + $(_img_ + V_attrX(_dataDarkSrc_, _invert_)).length\n        + \"&\" + _img_ + \"-alter=\" + $(_img_ + V_attrX(_dataDarkSrc_, _alter_)).length\n        + \"&\" + _img_ + \"-cap1=\" + $(_div_ + V_attrX(_id_, _vkIdFig_, \"^=\") + V_attrX(_dataIdFigType_, _img_) + ___ + _vCap1_).length\n        + \"&\" + _img_ + \"-cap2=\" + $(_div_ + V_attrX(_id_, _vkIdFig_, \"^=\") + V_attrX(_dataIdFigType_, _img_) + ___ + _vCap2_).length;\n\n    // Mermaid 插图数据\n    let mermaid = $(\".md-diagram-panel\");\n    sd += \"&mm=\" + mermaid.length\n        + \"&mm-fold=\" + $(_div_ + V_attrX(_dataContainer_, _svg_) + V_attrX(_dataContentFolded_, _true_)).length\n        + \"&mm-cap1=\" + $(_div_ + V_attrX(_id_, _vkIdFig_, \"^=\") + V_attrX(_dataIdFigType_, _svg_) + ___ + _vCap1_).length\n        + \"&mm-cap2=\" + $(_div_ + V_attrX(_id_, _vkIdFig_, \"^=\") + V_attrX(_dataIdFigType_, _svg_) + ___ + _vCap2_).length;\n\n    // Mermaid 音频数据\n    sd += \"&audio=\" + $(_audio_).length\n        + \"&mm-cap1=\" + $(_div_ + V_attrX(_id_, _vkIdAudio_, \"^=\") + ___ + _vCap1_).length\n        + \"&mm-cap2=\" + $(_div_ + V_attrX(_id_, _vkIdAudio_, \"^=\") + ___ + _vCap2_).length;\n\n    // Mermaid 视频数据\n    sd += \"&video=\" + $(_video_).length\n        + \"&mm-cap1=\" + $(_div_ + V_attrX(_id_, _vkIdVideo_, \"^=\") + ___ + _vCap1_).length\n        + \"&mm-cap2=\" + $(_div_ + V_attrX(_id_, _vkIdVideo_, \"^=\") + ___ + _vCap2_).length;\n\n    // Mermaid 图的细类\n    let pie = 0,\n        flow = 0,\n        flowSTART = 0,\n        flowINIT = 0,\n        state = 0,\n        seq = 0,\n        classD = 0,\n        gantt = 0;\n    mermaid.e(function () {\n        let _t = $(this);\n        if (_t.f(\"g.legend\").length > 0)\n            pie++; // 饼图\n        else if (_t.f(\"g.output g.nodes\").length > 0) {\n            flow++; // 流程图\n            if (_t.f(\"g.output g.nodes g#START.node\").length > 0)\n                flowSTART++; // VLOOK 标准的流程图\n            else if (_t.f(\"g.output g.nodes g#INIT.node\").length > 0)\n                flowINIT++; // VLOOK 标准的状态机图\n        }\n        else if (_t.f(\"g.stateGroup\").length > 0)\n            state++; // 状态机图（原生）\n        else if (_t.f(\"g rect.actor\").length > 0)\n            seq++; // 顺序图\n        else if (_t.f(\"g.classGroup\").length > 0)\n            classD++; // 类图\n        else if (_t.f(\"g rect.section\").length > 0)\n            gantt++; // 甘特图\n    });\n    sd += \"&mm-pie=\" + pie\n        + \"&mm-flow=\" + flow\n        + \"&mm-flow-S=\" + flowSTART\n        + \"&mm-flow-I=\" + flowINIT\n        + \"&mm-state=\" + state\n        + \"&mm-seq=\" + seq\n        + \"&mm-class=\" + classD\n        + \"&mm-gantt=\" + gantt;\n\n    // 表格数据\n    sd += \"&tbl=\" + $(_table_).length\n        + \"&tbl-fold=\" + $(_figure_ + V_attrX(_dataContainer_, _table_) + V_attrX(_dataContentFolded_, _true_)).length\n        + \"&tbl-cap1=\" + $(_div_ + V_attrX(_id_, _vkIdTbl_) + ___ + _vCap1_).length\n        + \"&tbl-cap2=\" + $(_div_ + V_attrX(_id_, _vkIdTbl_) + ___ + _vCap2_).length;\n\n    // 表格列格式数据\n    let fmBold = 0,\n        fmEm = 0,\n        fmUnderline = 0,\n        fmMark = 0,\n        fmDel = 0,\n        fmChk = 0,\n        fmNum = 0;\n    $(_table_ + V_attrX(_dataColumnFmting_, _true_)).e(function () {\n        let _t = $(this);\n        if (_t.f(\"thead .\" + _vTblColFmt_Bold_).length > 0)\n            fmBold++;\n        if (_t.f(\"thead .\" + _vTblColFmt_Em_).length > 0)\n            fmEm++;\n        if (_t.f(\"thead u\").length > 0)\n            fmUnderline++;\n        if (_t.f(\"thead .\" + _vTblColFmtMark_).length > 0)\n            fmMark++;\n        if (_t.f(\"thead \" + _del_).length > 0)\n            fmDel++;\n        if (_t.f(\"thead .\" + _vTblColFmt_Chkbox_).length > 0)\n            fmChk++;\n        if (_t.f(\"thead .\" + _vTblColFmtNum_).length > 0)\n            fmNum++;\n    });\n    sd += \"&tbl-fm-b=\" + fmBold\n        + \"&tbl-fm-em=\" + fmEm\n        + \"&tbl-fm-u=\" + fmUnderline\n        + \"&tbl-fm-m=\" + fmMark\n        + \"&tbl-fm-d=\" + fmDel\n        + \"&tbl-fm-chk=\" + fmChk\n        + \"&tbl-fm-num=\" + fmNum;\n\n    // 带单元格合并的表格数\n    sd += \"&tbl-cell-merge=\" + $(_table_ + V_attrX(_dataCellMerge_, _true_)).length;\n\n    // 带行折叠的表格数\n    sd += \"&tbl-row-group=\" + $(_table_ + V_attrX(_dataRowGroup_, _true_)).length;\n\n    // 代码块数据\n    sd += \"&cb=\" + $(\".\" + _vFences_).length\n        + \"&cb-fold=\" + $(\"p\" + V_attrX(_dataContainer_, _pre_) + V_attrX(_dataContentFolded_, _true_)).length\n        + \"&cb-cap1=\" + $(_div_ + V_attrX(_id_, _vkIdCodeblock_) + ___ + _vCap1_).length\n        + \"&cb-cap2=\" + $(_div_ + V_attrX(_id_, _vkIdCodeblock_) + ___ + _vCap2_).length;\n\n    // 标签数据\n    sd += \"&tag=\" + $(_code_ + V_attrX(_class_, _vTag_)).length\n        + \"&badge=\" + $(_code_ + V_attrX(_class_, _vBadgeName_)).length;\n\n    // 折叠引用块数据\n    sd += \"&dt=\" + $(_details_).length;\n\n    // 脚注数据\n    sd += \"&fn=\" + $(\".md-footnote\").length;\n\n    // 当前文档的 URL\n    sd += \"&url=\" + WINDOW_getHref();\n\n    // 提交统计数据\n    let vlookStat = $(_iframe_ + V_attrX(_name_, _vlookStatGitee_));\n    vlookStat.a(_src_,\n        \"https://madmaxchow.gitee.io/vlook/act/\" + (V_debugMode ? \"dev-\" : _) + \"stat-gitee.html\"\n        + encodeURI(sd));\n    // if (V_debugMode)\n    DEBUG(\"STAT DATA:\", vlookStat.a(_src_));\n}\n\n/**\n * 上报事件统计数据（基于百度统计）\n * 为兼容在本地打开的 HTML 文件，所以通过 iframe 的方式进行数据上报\n * @param d 数据数组，与百度统计的 _hmt.push([\"_trackEvent\", data[0], data[1], data[2], data[3]) 的参数保持一致\n */\n// function V_report_push(d) {\n//     return false; // 暂停事件数据上报，因百度统计免费版已下线了事件服务\n//     // ---\n//     $(\"body\").ap('<iframe name=\"vk-event-' + V_report_count + '\" style=\"display: block; margin: 0; border: none; overflow: hidden; width: 100%; height: 0;\"'\n//         + ' src=\"https://madmaxchow.gitee.io/vlook/act/'\n//         + (V_debugMode ? \"dev-\" : __)\n//         + 'event-gitee.html'\n//         + \"?category=\" + (V_debugMode ? \"dev-\" : __) + d[0]\n//         + \"&action=\" + d[1]\n//         + \"&label=\" + d[2]\n//         + \"&value=\" + d[3]\n//         + \"&debug=\" + V_debugMode\n//         + '\"></iframe>');\n//\n//     // 默认在指定时间后回收 iframe 资源\n//     setTimeout(V_report_recycleResources, 10000);\n//     V_report_count++;\n// }\n\n/**\n * 转换标签名为 VLOOK 中的特定内容类型名称\n */\n// function V_report_transTagName(t) {\n//     if (t.sW(\"i\"))\n//         return _fig_ + _suffixImg_;\n//     else if (t.sW(\"s\"))\n//         return _fig_ + _suffixSvg_;\n//     else if (t.sW(\"t\"))\n//         return _table_;\n//     else if (t.sW(\"pr\"))\n//         return _codeblock_;\n//     return \"Unknown\";\n// }\n\n/**\n * 移除上报事件的资源\n */\n// function V_report_recycleResources() {\n//     $(_iframe_ + V_attrX(_name_, \"vk-event-\", \"^=\")).e(function () {\n//         JQ_remove($(this));\n//         return gFalse; // 执行一次即跳出，即每次只删除当前最早创建的\n//     });\n// }\n// V.report\n// ========================================\n\n// ==================== 随机颜色类 ==================== //\n\nlet RandomColor_palette = []; // 不相似颜色的色板\n\n/**\n * 生成随机颜色\n * @returns number[] R/G/B 颜色分量是数组\n */\nfunction RandomColor_generate() {\n    let c = [0, 0, 0];\n    c[0] = Math.floor(Math.random() * 255);\n    c[1] = Math.floor(Math.random() * 255);\n    c[2] = Math.floor(Math.random() * 255);\n    return c;\n}\n\n/**\n * 生成不相似的随机颜色\n * @returns number[] R/G/B 颜色分量是数组\n */\nfunction RandomColor_dissimilarRgb() {\n    // 色板为空时，生成随机颜色后直接返回\n    let c = [0, 0, 0];\n    if (RandomColor_palette.length === 0) {\n        c = RandomColor_generate();\n        RandomColor_palette.push(c);\n        return c;\n    }\n\n    // 色板不为空时，避免相似的颜色\n    let flag = gFalse,\n        t = 0,\n        d = [0, 0, 0];\n\n    // 随机生成不相似的颜色（最多尝试次数上限为 20）\n    while (!flag && t < 20) {\n        c = RandomColor_generate();\n        // 判断新生成的随机颜色，色板中是否已有相似的\n        let idx = 0;\n        for (let i = 0; i < RandomColor_palette.length; i++) {\n            idx = i;\n            d[0] = (RandomColor_palette[i][0] - c[0]) / 256;\n            d[1] = (RandomColor_palette[i][1] - c[1]) / 256;\n            d[2] = (RandomColor_palette[i][2] - c[2]) / 256;\n            // 比例两个颜色的 RGB 色差来作为相似性的依据（0.3 为经验值，值越大差异最大）\n            if (Math.sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]) < 0.3)\n                break;\n        }\n\n        // 色板中没有找到相似的颜色\n        if (idx === RandomColor_palette.length) {\n            RandomColor_palette.push(c);\n            flag = gTrue;\n        }\n        t++;\n    }\n    return c;\n}\n\n// ==================== 处理耗时计时器类 ==================== //\n\n/**\n * 构造函数\n */\nfunction Stopwatch() {\n    let T = this;\n    T.sT = null; // 重置后的初始时间\n    T.lT = null; // 每次中间计时的初始时间\n\n    /**\n     * 重置计时器\n     */\n    T.reset = function () {\n        T.sT = new Date().getTime();\n    }\n\n    /**\n     * 一次中间计时开始\n     */\n    T.st = function (t) {\n        if (t !== gUndefined)\n            LOG(t);\n        T.lT = new Date().getTime();\n    }\n\n    /**\n     * 一次中间计时结束\n     * @param pre 输出内容前缀\n     * @param slient 是否为静默模式，true：是\n     */\n    T.ed = function (pre, slient) {\n        let c = new Date().getTime() - T.lT;\n        // 非静默模式时，输出计时结果\n        if (!slient) {\n            let msg = pre + \"⏱ \" + c + \" ms\";\n            if (c < 300)\n                INFO(msg);\n            else if (c < 500)\n                WARN(msg);\n            else\n                ERROR(msg);\n        }\n        return c;\n    }\n\n    /**\n     * 计时器结束\n     */\n    T.stop = function () {\n        return new Date().getTime() - T.sT;\n    }\n\n    // 初始化计时器\n    T.reset();\n}\n\n// ==================== 欢迎页 ==================== //\n\nlet WelcomePage_uiName = \".v-welcome-page\",\n    WelcomePage_ui = gUndefined, // 欢迎页主界面\n    WelcomePage_button = gUndefined, // 关闭欢迎页按钮\n    WelcomePage_tips = gUndefined, // 欢迎信息\n    WelcomePage_finished = gFalse, // 是否已加载\n    WelcomePage_mode = \"auto\"; // 模式\n\n/**\n * 构造函数\n * @param mode 欢迎页显示模式\n */\nfunction WelcomePage_init(mode) {\n    WelcomePage_ui = $(WelcomePage_uiName); // 欢迎页主界面\n    WelcomePage_button = $(WelcomePage_uiName + \">.v-loading\"); // 关闭欢迎页按钮\n    WelcomePage_tips = $(WelcomePage_uiName + \">.v-tips\"); // 欢迎信息\n    WelcomePage_finished = gFalse; // 是否已加载\n    WelcomePage_mode = mode; // 模式\n\n    // 初始执行\n    if (WelcomePage_mode === _none_)\n        WelcomePage_close();\n    else\n        V_ui_show(WelcomePage_ui);\n}\n\n/**\n * 完成所有内容加载后调用\n */\nfunction WelcomePage_done() {\n    // 关闭欢迎页事件\n    WelcomePage_button.uC().ck(function () {\n        WelcomePage_close();\n    });\n\n    WelcomePage_ui.c(_cursor_, \"default\");\n    WelcomePage_stopAni();\n\n    WelcomePage_tips.c(_animation_, _none_);\n\n    WelcomePage_updateCloseButton(null);\n    JQ_addClass(WelcomePage_button, \"v-btn-done\");\n\n    WelcomePage_finished = gTrue;\n\n    // auto 模式时延时自动关闭\n    let delay = JS_parseInt(WelcomePage_mode);\n    if (delay > 60) // 控制秒数上限\n        delay = 60;\n    if (WelcomePage_mode === _auto_ || delay >= 0)\n        WelcomePage_autoClose(delay);\n    // wait 模式\n    else if (WelcomePage_mode === _wait_)\n        JQ_addClass(WelcomePage_button, _wait_);\n}\n\n/**\n * 自动延时关闭\n * @param delay VLOOK Query 调校参数指定的延时自动关闭秒数\n */\nfunction WelcomePage_autoClose(delay) {\n    let delaySecs = (delay >= 0 ? delay : JS_parseInt(V_util_getVarVal(\"--v-ws-delay\"))),\n        closeTimer = null;\n\n    __timeToClose();\n\n    // 关闭倒计时\n    function __timeToClose() {\n        WelcomePage_updateCloseButton(delaySecs);\n        delaySecs--;\n        if (delaySecs < 0) { // 倒计时结束\n            clearTimeout(closeTimer);\n            closeTimer = null;\n            WelcomePage_close();\n        }\n        else\n            closeTimer = setTimeout(__timeToClose, 1000);\n    }\n}\n\n/**\n * 更新关闭按钮\n * @param sec 显示倒计时的秒数\n */\nfunction WelcomePage_updateCloseButton(sec) {\n    WelcomePage_button.hm([\n        \"开始阅览\",\n        \"Start Reading\"\n    ][V_lang_id]\n        + (sec == null ? _ : ___ + V_ui_span(_, _, \"(\" + sec + \"s)\")));\n}\n\n/**\n * 停止加载时的呼吸动画\n */\nfunction WelcomePage_stopAni() {\n    WelcomePage_tips.c(_animation_, _none_);\n}\n\n/**\n * 关闭欢迎页\n */\nfunction WelcomePage_close() {\n    WelcomePage_ui.hide();\n    V_doc_scroll_unfreeze();\n}\n\n/**\n * 处理热键操作\n * @param code 非功能键键\n * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n * @param event 事件对象\n */\nfunction WelcomePage_disposeHotkey(code, combKeys, event) {\n    if (!WelcomePage_finished || WelcomePage_ui.isHidden())\n        return;\n\n    let handled = false;\n    switch (code) {\n        case 13: // ENTER\n            // 关闭欢迎页\n            WelcomePage_close();\n            handled = true;\n            break;\n    }\n\n    // 如果事件已处理，则禁止双重操作\n    if (handled)\n        event.preventDefault();\n}\n\n// ==================== 内容助手类 ==================== //\n\nlet ContentAssistor_ui = gUndefined,\n    ContentAssistor_btns_openInFigureNav = gUndefined, // 插图浏览器中打开\n    ContentAssistor_btns_copyContent = gUndefined, // 复制内容\n    ContentAssistor_btns_tableCross = gUndefined, // 表格阅读模式（十字光标）\n    ContentAssistor_btns_tableWrap = gUndefined, // 表格自动换行\n    ContentAssistor_btns_picInPic = gUndefined, // 「画中画」\n    ContentAssistor_copyAsMarkdown = gFalse, // 复制模式\n    // 最后显示新标签打开按钮的内容（插图/表格等\n    ContentAssistor_lastTarget = gUndefined, // 用于代码、标签、徽章\n    ContentAssistor_lastHover = gUndefined,\n    ContentAssistor_lastContentType = gUndefined;\n\nfunction ContentAssistor_init() {\n    ContentAssistor_ui = $(\".v-content-assistor\");\n    ContentAssistor_btns_copyContent = $(_vBtn_Assistor_ + \".copy\"); // 复制内容\n    ContentAssistor_btns_openInFigureNav = $(_vBtn_Assistor_ + \".open-in-figure-nav\"); // 插图浏览器中打开\n    ContentAssistor_btns_tableCross = $(_vBtn_Assistor_ + \".table-cross\"); // 表格阅读模式（十字光标）\n    ContentAssistor_btns_tableWrap = $(_vBtn_Assistor_ + \".table-wrap\"); // 表格自动换行\n    ContentAssistor_btns_picInPic = $(_vBtn_Assistor_ + \".pic-in-pic\"); // 「画中画」\n\n    ContentAssistor_btns_openInFigureNav.a(_dataTips_, [\n        \"全屏显示\",\n        \"Full screen\"\n    ][V_lang_id]);\n\n    ContentAssistor_btns_tableCross.a(_dataTips_, [\n        \"阅读模式\",\n        \"Reading mode\"\n    ][V_lang_id]);\n\n    ContentAssistor_btns_tableWrap.a(_dataTips_,  [\n        \"自动换行 / 不换行\",\n        \"Wrap / Unwrap\"\n    ][V_lang_id]);\n\n    ContentAssistor_btns_picInPic.a(_dataTips_, [\n        \"画中画\",\n        \"Picture in picture\"\n    ][V_lang_id]);\n\n    ContentAssistor_ui.on(_mouseLeave_, function (event) {\n        if (!v_ui_mouseDropIn(ContentAssistor_lastHover, event))\n            ContentAssistor_hide();\n    });\n\n    /**\n     * 初始化内容助手\n     */\n    // 在插图浏览器中打开\n    ContentAssistor_btns_openInFigureNav.uC().ck(function () {\n        ContentAssistor_hide();\n        iFigNav.show(ContentAssistor_lastHover);\n    });\n\n    //  开/关表格阅读模式（十字光标）\n    ContentAssistor_btns_tableCross.uC().ck(function () {\n        TableCross_toggle(ContentAssistor_lastHover);\n    });\n\n    //  开/关表格自动换行\n    ContentAssistor_btns_tableWrap.uC().ck(function () {\n        TableWrap_toggle(ContentAssistor_lastHover);\n    });\n\n    ContentAssistor_btns_copyContent.uC().ck(function (event) {\n        __actionCopy($(this), event);\n    });\n\n    // 画中画\n    ContentAssistor_btns_picInPic.uC().ck(function () {\n        PicInPic_show(ContentAssistor_lastHover);\n    });\n\n    ToolTips_bind(ContentAssistor_btns_copyContent);\n    ToolTips_bind(ContentAssistor_btns_openInFigureNav);\n    ToolTips_bind(ContentAssistor_btns_tableCross);\n    ToolTips_bind(ContentAssistor_btns_tableWrap);\n    ToolTips_bind(ContentAssistor_btns_picInPic);\n\n    function __actionCopy(target, event) {\n        if (ContentAssistor_lastHover === gUndefined)\n            return;\n\n        if (ContentAssistor_lastContentType === _codeblock_)\n            ExtCodeBlock_copyContent(target, event);\n        else if (ContentAssistor_lastContentType === _fig_ + _suffixImg_)\n            ExtFigure_copySrc(target, event);\n        else if (ContentAssistor_lastContentType === _table_)\n            ExtTable_copyContent(target, event);\n    }\n}\n\n/**\n * 切换「复制」模式\n * @param mode false: 普通，true: 复制为 Markdown\n */\nfunction ContentAssistor_toggleCopyMode(mode) {\n    ContentAssistor_copyAsMarkdown = mode;\n    if (ContentAssistor_copyAsMarkdown) {\n        // 切换复制光标、内容助手的复制图标\n        V_util_setVarVal(\"--cur-copy\", V_util_getVarVal(\"--cur-copy-as-md\"));\n        ContentAssistor_btns_copyContent.hm(V_ui_svgIcon(_icoCopyAsMd_, 16, 16, _light_));\n    }\n    else {\n        // 恢复复制光标、内容助手的复制图标\n        V_util_setVarVal(\"--cur-copy\", V_util_getVarVal(\"--cur-copy-normal\"));\n        ContentAssistor_btns_copyContent.hm(V_ui_svgIcon(_icoCopy_, 16, 16, _light_));\n    }\n}\n\n/**\n * 绑定对象的 hover 行为\n * @param target 目标对象\n * @param contentType 内容类型：Figure/Table/CodeBlock\n */\nfunction ContentAssistor_bind(target, contentType) {\n    // 鼠标悬停时事件处理\n    target.hover(function () {\n        V_ui_removeAnimate(ContentAssistor_ui);\n\n        // 更新复制模式\n        if (ContentAssistor_lastHover !== target)\n            ContentAssistor_toggleCopyMode(gFalse);\n\n        ContentAssistor_lastHover = target;\n        ContentAssistor_lastContentType = contentType;\n\n        let asMarkdown =  \"\\n<sub>\" + [\n            \"按住\",\n            \"Hold\"\n            ][V_lang_id]\n            + _2nbsp_+ V_ui_getAltKeyUI() + [\n                _2nbsp_ +\"- 复制为 Markdown\",\n                _2nbsp_ +\"- Copy as Markdown\"\n                ][V_lang_id] + \"</sub>\";\n        if (contentType === _codeblock_) {\n            ContentAssistor_btns_copyContent.a(_dataTips_, [\n                \"复制全部代码\",\n                \"Copy code\"\n            ][V_lang_id] + asMarkdown);\n        }\n        else if (contentType === _fig_ + _suffixImg_) {\n            ContentAssistor_btns_copyContent.a(_dataTips_, [\n                \"复制图片地址\",\n                \"Copy Image Link\"\n            ][V_lang_id] + asMarkdown);\n        }\n        else if (contentType === _table_) {\n            ContentAssistor_btns_copyContent.a(_dataTips_, [\n                \"复制表格内容\",\n                \"Copy Table Content\"\n            ][V_lang_id] + asMarkdown);\n        }\n\n        ContentAssistor_show();\n    }, function (event) {\n        if (!v_ui_mouseDropIn(ContentAssistor_lastHover, event))\n            ContentAssistor_hide();\n    });\n}\n\n/**\n * 显示指定内容的内容助手\n */\nfunction ContentAssistor_show() {\n    if (ContentAssistor_lastHover === gUndefined)\n        return;\n\n    // 圆角重置样式\n    JQ_removeClass(ContentAssistor_btns_copyContent, _first__enable__last_);\n    JQ_removeClass(ContentAssistor_btns_openInFigureNav, _first__enable__last_);\n    JQ_removeClass(ContentAssistor_btns_tableCross, _first__enable__last_);\n    JQ_removeClass(ContentAssistor_btns_tableWrap, _first__enable__last_);\n    JQ_removeClass(ContentAssistor_btns_picInPic, _first__enable__last_);\n\n    // 插图\n    if (ContentAssistor_lastContentType.sW(_fig_)) {\n        // 图片插图\n        if (ContentAssistor_lastContentType.eW(_svg_)) {\n            JQ_addClass(ContentAssistor_btns_copyContent, _enabled__first_);\n            JQ_addClass(ContentAssistor_btns_openInFigureNav, _enabled_);\n        }\n        // 非图片插图\n        else\n            JQ_addClass(ContentAssistor_btns_openInFigureNav, _enabled__first_);\n        // 画中画\n        JQ_addClass(ContentAssistor_btns_picInPic, _enabled__last_);\n    }\n    // 表格\n    else if (ContentAssistor_lastContentType === _table_) {\n        // 复制\n        JQ_addClass(ContentAssistor_btns_copyContent, _enabled__first_);\n        // 阅读模式\n        JQ_addClass(ContentAssistor_btns_tableCross, _enabled_);\n        if (ContentAssistor_lastHover.a(_dataTblX_) === _true_)\n            JQ_addClass(ContentAssistor_btns_tableCross, _selected_);\n        else\n            JQ_removeClass(ContentAssistor_btns_tableCross, _selected_);\n        // 自动换行\n        JQ_addClass(ContentAssistor_btns_tableWrap, _enabled_);\n        if (ContentAssistor_lastHover.c(_whiteSpace_) === _preWrap_)\n            JQ_addClass(ContentAssistor_btns_tableWrap, _selected_);\n        else\n            JQ_removeClass(ContentAssistor_btns_tableWrap, _selected_);\n        // 画中画\n        JQ_addClass(ContentAssistor_btns_picInPic, _enabled__last_);\n    }\n    // 代码块\n    else if (ContentAssistor_lastContentType === _codeblock_) {\n        // 复制\n        JQ_addClass(ContentAssistor_btns_copyContent, _enabled__first_);\n        // 画中画\n        JQ_addClass(ContentAssistor_btns_picInPic, _enabled__last_);\n    }\n\n    // ----------------------------------------\n    // 计算助手显示的位置\n    let caption = ContentAssistor_lastHover.p(),\n        className = caption.a(_class_),\n        container = caption.p(),\n        offset = 0;\n    // 对于存在横向滚动的情况时，须计算其偏移量用来位置调整\n    if (className !== gUndefined && className.i(\"v-caption\") > -1\n        && container !== gUndefined) {\n            className = container.a(_class_);\n            if (className !== gUndefined && className.i(_vCaptionContainer_) > -1) {\n                let capWidth = JS_parseInt(caption.w()),\n                    conWidth = JS_parseInt(container.w());\n                if (capWidth > conWidth)\n                    offset = capWidth - conWidth + 1;\n            }\n    }\n    // 显示\n    ContentAssistor_ui.c(_left_, ContentAssistor_lastHover.oL()\n            + ContentAssistor_lastHover.w()\n            + JS_parseInt(ContentAssistor_lastHover.c(_borderLeftWidth_))\n            - ContentAssistor_ui.w()\n            + JS_parseInt(ContentAssistor_lastHover.c(_paddingLeft_))\n            + JS_parseInt(ContentAssistor_lastHover.c(_paddingRight_))\n            - offset)\n        .c(_top_, ContentAssistor_lastHover.oT()\n            + JS_parseInt(ContentAssistor_lastHover.c(_borderTopWidth_)));\n\n    // 须延时后再执行显示，让以上代码先完成\n    setTimeout(function () {\n        V_ui_addAnimate(ContentAssistor_ui);\n        V_ui_show(ContentAssistor_ui);\n    }, 50);\n}\n\n/**\n * 隐藏内容辅助动作按钮\n */\nfunction ContentAssistor_hide() {\n    V_ui_hide(ContentAssistor_ui);\n}\n\n// ==================== 画中画类 ==================== //\n\nlet PicInPic_ui_body = gUndefined,\n    PicInPic_ui_content = gUndefined,\n    PicInPic_ui_zoom = gUndefined,\n    PicInPic_ui_close = gUndefined;\n\nlet PicInPic_ratio = 0.75;\n\nlet PicInPic_size_width = 0,\n    PicInPic_size_height = 0;\n\n/**\n * 初始化画中画\n */\nfunction PicInPic_init() {\n    PicInPic_ui_body = $(\".v-pic-in-pic\");\n    PicInPic_ui_content = PicInPic_ui_body.ch(\".v-content\");\n    PicInPic_ui_zoom = $(_vPipBtn_ + \".zoom\");\n    PicInPic_ui_close = $(_vPipBtn_ + \".close\");\n\n    // 缩放事件处理\n    PicInPic_ui_zoom.uC().ck(function () {\n        let _t = $(this),\n            pipBtn = $(_vPipBtn_);\n        if (PicInPic_ratio === 1) {\n            PicInPic_ratio = 0.75;\n            JQ_exchangeClass(pipBtn, \"zoom-in\", \"zoom-out\");\n            _t.hm(V_ui_svgIcon(_icoZoomIn_, 16, 16, _theme_));\n        }\n        else {\n            PicInPic_ratio = 1;\n            JQ_exchangeClass(pipBtn, \"zoom-out\", \"zoom-in\");\n            _t.hm(V_ui_svgIcon(_icoZoomOut_, 16, 16, _theme_));\n        }\n        PicInPic_zoom();\n    });\n\n    PicInPic_ui_close.uC().ck(function () {\n        PicInPic_hide();\n    });\n\n    PicInPic_ui_body.hover(function () {\n        // 高度过小时调整操作按钮位置\n        if (PicInPic_ui_body.h() < 30) {\n            JQ_addClass(PicInPic_ui_zoom, _min_);\n            JQ_addClass(PicInPic_ui_close, _min_);\n        }\n        else {\n            JQ_removeClass(PicInPic_ui_zoom, _min_);\n            JQ_removeClass(PicInPic_ui_close, _min_);\n        }\n        V_ui_show(PicInPic_ui_zoom);\n        V_ui_show(PicInPic_ui_close);\n    }, function () {\n        V_ui_hide(PicInPic_ui_zoom);\n        V_ui_hide(PicInPic_ui_close);\n    });\n}\n\n/**\n * 显示画中画\n * @param source 显示内容的来源对象\n */\nfunction PicInPic_show(source) {\n    PicInPic_calcSize();\n\n    // 清空原有内容（除关闭按钮）\n    PicInPic_ui_content.empty();\n\n    // 为画中画进行克隆处理\n    let pic = __cloneForPicInPic(source);\n\n    // 缩放并显示\n    PicInPic_zoom();\n    PicInPic_ui_body.show();\n\n    // 根据内容调整画中画的展示\n    PicInPic_fitContentSize(pic);\n    PicInPic_ui_content.scrollTop(0);\n\n    /**\n     * 为画中画进行克隆处理\n     * @param source 源对象\n     */\n    function __cloneForPicInPic (source) {\n        let openAll = gFalse,\n            tagName = V_util_getTagName(source);\n        // 针对表格的处理\n        if (tagName === _table_) {\n            // 1. 先展开所有行分组\n            openAll = RowGroup_openAll(source, _auto_);\n            // 2. 先展开长内容\n            let container = source.p().p();\n            if (container.a(_dataContentFolded_) === _true_)\n                ContentFolder_expand(container.n());\n        }\n\n        // 将来源对象的内容进行克隆\n        let newClone = source.clone();\n        newClone.c(_margin_, 0)\n            .c(_border_, 0);\n        PicInPic_ui_content.ap(newClone);\n\n        // 针对插图的处理\n        let img = (tagName === _svg_),\n            svg = tagName === _svg_;\n        if (img || svg) {\n            JQ_removeAttr(newClone, _dataFigNum_);\n            if (svg)\n                JQ_addClass(newClone, _vMermaidRestyler_);\n        }\n\n        // 对展开了所有行分组的表格进行克隆后的干净处理\n        if (openAll) {\n            RowGroup_reset(newClone); // 重置、切断\n            RowGroup_closeAll(source, _auto_); // 全部收起\n        }\n\n        return newClone;\n    }\n}\n\n/**\n * 隐藏画中画\n */\nfunction PicInPic_hide() {\n    PicInPic_ui_body.hide();\n}\n\n/**\n * 计算画中画建议的基准尺寸\n */\nfunction PicInPic_calcSize() {\n    // 计算基准大小\n    let baseW = 550,\n        baseH = 350,\n        w = $(window).w() / 2.5,\n        h = $(window).h() / 3;\n    PicInPic_size_width = w < baseW ? baseW : w;\n    PicInPic_size_height = h < baseH ? baseH : h;\n    PicInPic_ui_body.c(_width_, PicInPic_size_width)\n        .c(_height_, PicInPic_size_height);\n}\n\n/**\n * 调整画中画的基准大小，以适应内容的实际大小\n */\nfunction PicInPic_fitContentSize(source) {\n    // 宽度\n    let tagName = V_util_getTagName(source),\n        w = source.w(),\n        h = source.h(),\n        sourcePadding = JS_parseInt(source.c(_paddingTop_)) * 2,\n        uiPadding = JS_parseInt(PicInPic_ui_body.c(_paddingTop_)) * 2;\n\n    // 针对图片尺寸的兼容性处理（部分浏览器不使用该处理尺寸不正常，如：Firefox）\n    if (tagName === _svg_) {\n        let img = new Image();\n        img.src = source.a(_src_);\n        if (img.complete)\n            __getImgSize(img);\n        else\n            img.onload = function () {\n                __getImgSize(img);\n            }\n    }\n\n    // 宽度\n    let wWithPadding = w + sourcePadding;\n    if (w > 0 && wWithPadding < PicInPic_size_width) {\n        PicInPic_size_width = w;\n        PicInPic_ui_body.c(_width_, wWithPadding)\n            .c(_transformOrigin_, PicInPic_size_width + \"px \" + PicInPic_size_height + \"px\");\n    }\n\n    // 高度\n    h = source.h(); // 重新获得画中画最新高度\n    let hWithPadding = h + uiPadding + sourcePadding;\n    if (h > 0 && hWithPadding < PicInPic_size_height) {\n        // 针对会进行等比缩放的对象进行高度微调\n        if ((tagName === _svg_ || tagName === _svg_)\n            && h > source.h()) {\n                h = source.h();\n                hWithPadding = h + uiPadding + sourcePadding;\n        }\n        PicInPic_size_height = h;\n        PicInPic_ui_body.c(_height_, hWithPadding)\n            .c(_transformOrigin_, PicInPic_size_width + \"px \" + PicInPic_size_height + \"px\");\n    }\n\n    /**\n     * 获得 img 对象的实际长宽\n     * @param img img 对象\n     */\n    function __getImgSize(img) {\n        w = img.width;\n        h = img.height;\n    }\n}\n\n/**\n * 放大、缩放显示\n */\nfunction PicInPic_zoom() {\n    V_ui_removeAnimate(PicInPic_ui_zoom);\n    V_ui_removeAnimate(PicInPic_ui_close);\n\n    PicInPic_ui_body.c(_transform_, \"scale(\" + PicInPic_ratio + \")\")\n        .c(_transformOrigin_, PicInPic_size_width + \"px \" + PicInPic_size_height + \"px\");\n\n    setTimeout(function () {\n        V_ui_addAnimate(PicInPic_ui_zoom);\n        V_ui_addAnimate(PicInPic_ui_close);\n    }, 50);\n}\n\n// ==================== 聚光灯类 ==================== //\n\n/**\n * 构造函数\n * @param radius 半径大小\n * @param tips 操作提示栏对象\n */\nfunction Spotlight(radius, tips) {\n    let T = this;\n    T.ui = $(\".v-spotlight\");\n    T.radius = radius; // 聚光灯半径\n    T.tips = tips;\n    T.zoom = {\n        normal: radius, // 标准大半径\n        bigger: radius * 1.4, // 放大的半径\n    };\n    T.lastPos = {\n        x : -1,\n        y : -1\n    };\n\n    T.toolbar = gUndefined; // 联动的工具栏\n\n    /**\n     * 切换聚光灯的不同大小\n     */\n    T.toggleZoom = function () {\n        if (T.ui.isHidden())\n            return;\n\n        T.radius = T.radius < T.zoom.bigger\n            ? T.zoom.bigger\n            : T.zoom.normal;\n\n        T.repaint();\n    }\n\n    /**\n     * 使用聚光灯模式\n     */\n    T.show = function () {\n        JQ_removeClass(T.toolbar.btns[_laserPointer_], _selected_);\n        JQ_addClass(T.toolbar.btns[_spotlight_], _selected_);\n\n        // Dark Mode 时先添加微调的样式\n        if (ColorScheme.scheme === _dark_)\n            JQ_addClass(VOM_doc(), _vSpotlightInDark_);\n\n        T.mode = \"S\";\n        T.ui.show();\n        JQ_removeClass($(T.pointerScope), _vCursorLaser_);\n        T.repaint();\n\n        let key1 = V_ui_wrap_kbd(\"⇧ Shift\") + _2nbsp_,\n            key2 = _2nbsp_ + _2nbsp_ +\"-\" + _2nbsp_ + _2nbsp_ + V_ui_wrap_kbd(\"ESC\") + _2nbsp_;\n        T.tips.show([\n            key1 + \"调整聚光灯大小\" + key2 + \"退出\",\n            key1 + \"Adjust the size of the spotlight\" + key2 + \"Exit\"\n        ][V_lang_id]);\n    }\n\n    /**\n     * 刷新聚光灯的显示\n     * @param event window.event 鼠标事件对象\n     */\n    T.repaint = function (event) {\n        // 记录鼠标最新位置，避免通过快捷键显示时无法在鼠标位置正常渲染\n        if (event !== gUndefined) {\n            if (event.clientX !== gUndefined)\n                T.lastPos.x = event.clientX;\n            if (event.clientY !== gUndefined)\n                T.lastPos.y = event.clientY;\n        }\n\n        // 未启用则跳过\n        if (!T.isEnabled())\n            return;\n\n        // 聚光灯模式\n        T.ui.c(_background_, \"radial-gradient(circle at \"\n            + T.lastPos.x + \"px \" + T.lastPos.y + \"px, \"\n            + \"transparent \" + T.radius + \"px, \"\n            + \"rgba(0, 0, 0, 0.4)\" + (T.radius + 5) + \"px, rgba(0, 0, 0, 0.9) 900px)\");\n    }\n\n    /**\n     * 是否已显示\n     */\n    T.isEnabled = function () {\n        return T.ui.isShowed();\n    }\n\n    /**\n     * 切换聚光灯的开关\n     */\n    T.tg = function () {\n        // 已打开，则关闭\n        if (T.isEnabled()) {\n            T.hide();\n        }\n        // 未打开，则打开\n        else {\n            T.show();\n            return gTrue;\n        }\n        return gFalse;\n    }\n\n    /**\n     * 隐藏聚光灯\n     */\n    T.hide = function () {\n        MoreDocContent_refresh();\n        T.tips.hide();\n        JQ_removeClass(T.toolbar.btns[_spotlight_], _selected_);\n        JQ_removeClass(VOM_doc(), _vSpotlightInDark_);\n        T.ui.hide();\n    }\n\n    /**\n     * 处理热键操作\n     * @param code 非功能键键\n     * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n     * @param event 事件对象\n     */\n    T.disposeHotkey = function (code, combKeys, event) {\n        if (V_doc_block)\n            return;\n\n        let handled = false;\n        switch (code) {\n            case 16: // Shift\n                T.toggleZoom();\n                handled = true;\n                break;\n            case 27: // ESC\n                if (T.isEnabled()) {\n                    T.hide();\n                    handled = true;\n                }\n                break;\n        }\n\n        // 如果事件已处理，则禁止双重操作\n        if (handled)\n            event.preventDefault();\n    }\n}\n\n// ==================== 激光笔类 ==================== //\n\n/**\n * 构造函数\n * @param tips 操作提示栏对象\n */\n function LaserPointer(tips) {\n    let T = this;\n    T.tips = tips;\n    T.toolbar = gUndefined; // 联动的工具栏\n\n    T.enable = gFalse;\n\n    // 激光笔模式时鼠标形状影响的范围\n    T.pointerScope = \"body *\";\n\n    /**\n     * 使用激光笔\n     */\n    T.show = function () {\n        JQ_removeClass(T.toolbar.btns[_spotlight_], _selected_);\n        JQ_addClass(T.toolbar.btns[_laserPointer_], _selected_);\n\n        T.enable = gTrue;\n        JQ_addClass($(T.pointerScope), _vCursorLaser_);\n\n        T.tips.show(V_ui_wrap_kbd(\"ESC\") + _2nbsp_ + [\n            \"退出\",\n            \"Exit\"\n        ][V_lang_id]);\n    }\n\n    /**\n     * 是否已显示\n     */\n    T.isEnabled = function () {\n        return T.enable;\n    }\n\n    /**\n     * 切换激活笔开关\n     */\n    T.tg = function () {\n        // 已打开，则关闭\n        if (T.isEnabled()) {\n            T.hide();\n        }\n        // 未打开，则打开\n        else {\n            T.show();\n            return gTrue;\n        }\n        return gFalse;\n    }\n\n    /**\n     * 隐藏激活笔\n     */\n    T.hide = function () {\n        MoreDocContent_refresh();\n        T.tips.hide();\n        T.enable = gFalse;\n        JQ_removeClass(T.toolbar.btns[_laserPointer_], _selected_);\n        JQ_removeClass($(T.pointerScope), _vCursorLaser_);\n    }\n\n    /**\n     * 处理热键操作\n     * @param code 非功能键键\n     * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n     * @param event 事件对象\n     */\n    T.disposeHotkey = function (code, combKeys, event) {\n        if (V_doc_block)\n            return;\n\n        let handled = false;\n        switch (code) {\n            case 27: // ESC\n                if (T.isEnabled()) {\n                    T.hide();\n                    handled = true;\n                }\n                break;\n        }\n\n        // 如果事件已处理，则禁止双重操作\n        if (handled)\n            event.preventDefault();\n    }\n}\n\n// ==================== 分段控制器类 ==================== //\n\n/**\n * @param control 控件 UI 对象\n * @param group 分段控制器分组标识\n */\nfunction SegmentControl(control, group) {\n    let T = this;\n    T.ui = control;\n    T.group = group;\n\n    T.last = gUndefined;\n    T.segs = [];\n    T.segCnt = 0;\n\n    T.ui.ap(V_ui_span(\"v-segment-indicator\"));\n    // T.ui.ap('<span class=\"v-segment-indicator\"></span>');\n    T.indicator = T.ui.ch(\".v-segment-indicator\"); // 当前选中分段的滑块\n\n    /**\n     * 添加分段\n     * @param target 分段对应的组件\n     * @param icon 分段使用的图标标识\n     * @param checked 是否为默认选中\n     * @param status 默认状态\n     */\n    T.add = function (target, icon, checked, status) {\n        let name = target.typeName();\n        T.segCnt++;\n        T.segs[name] = target;\n\n        // 新增段的 UI\n        let id = T.group + \"-\" + name,\n            ui = V_ui_input(id, T.group, \"radio\", name, 'onfocus=\"this.blur()\"' + (status ? ' ' : ' ' + _dataResult_ + '=\"' + _none_ + '\"' + (checked ? ' checked' : '')))\n                + V_ui_label(_vSegmentBtn_ + ___ + name, V_attr(\"for\", id) + ___ + V_attr(_dataIcon_, icon),\n                    V_ui_svgIcon(icon, 16, 16, _dark_)\n                );\n\n        T.ui.ap(ui);\n        target.ui.entry = T.ui.ch(\".\" + _vSegmentBtn_ + \".\" + name);\n\n        // 指定为默认选项\n        if (checked) {\n            T.last = target;\n            __updateIcon(gTrue);\n        }\n\n        // 为新添加的段绑定事件\n        T.ui.f(_input_ + \"#\" + id).change(function () {\n            // 隐藏切换前选择的组件\n            T.last.hide();\n            __updateIcon(gFalse);\n            // 显示最新选择的组件\n            T.last = T.segs[$(this).val()];\n            __updateIcon(gTrue);\n\n            T.last.show();\n            T.update();\n        });\n\n        return T.segs[name];\n\n        /**\n         * 更新分段的图标\n         *\n         * @param checked 是否为选择状态\n         */\n        function __updateIcon(checked) {\n            T.last.ui.entry.hm(V_ui_svgIcon(T.last.ui.entry.a(_dataIcon_)\n                + (checked ? __checked_ : _) , 16, 16, _dark_));\n        }\n    }\n\n    /**\n     * 获得当前选中的分段\n     * @returns string 当前选中的分段\n     */\n    T.checkedItem = function () {\n        return T.ui.f(_input_ + V_attrX(_name_, T.group) + \":\" + _checked_).val();\n    }\n\n    /**\n     * 获得、设置指定分段的状态\n     * @returns 无 value 时，返回指定分段的状态\n     */\n    T.sts = function (target, value) {\n        let id = T.group + \"-\" + target.typeName();\n        if (value === gUndefined) {\n            return T.ui.f(_input_ + V_attrX(_id_, id)).a(_dataResult_);\n        }\n\n        if (value) {\n            JQ_removeAttr(T.ui.f(_input_ + V_attrX(_id_, id)), _dataResult_);\n        }\n        else {\n            T.ui.f(_input_ + V_attrX(_id_, id)).a(_dataResult_, _none_);\n        }\n    }\n\n    /**\n     * 更新分段控制器界面\n     */\n    T.update = function () {\n        // 更新各分段 UI 大小、间隔等\n        let space = 2,\n            spacePercent = (space * (T.segCnt - 1)) / T.ui.w() * 100,\n            width = (100 - spacePercent) / T.segCnt;\n        T.ui.ch(\".\" + _vSegmentBtn_).c(_margin_, \"0 0 0 \" + space + \"px\")\n            .c(_width_, width + \"%\");\n        // 修正第一个\n        T.ui.ch(\".\" + _vSegmentBtn_ + _first_).c(_margin_, 0);\n\n        // 更新当前选择分段相关 UI\n        if (T.last === gUndefined)\n            return;\n        let target = T.last.ui.entry;\n        T.indicator.c(_left_, target.pos().left + JS_parseInt(target.c(_marginLeft_)))\n            .c(_width_, target.w());\n    }\n}\n\n// ==================== 导航中心类 ==================== //\n\n/**\n * 构造函数\n * @param mask 遮罩对象\n * @param runMode 关闭模式\n */\nfunction NavCenter(mask, runMode = _auto_) {\n    let T = this;\n    T.ui = $(\".v-nav-center\"); // 导航中心主界面\n    T.handle = $(\".v-toc-handle\"); // 导航中心引导把手\n\n    // 关键字搜索\n    T.__keywordBody = $(\".v-serch-by-keyword\");\n    T.keyword = new TextField(T.__keywordBody, \"toc-filter-nav-center\", gTrue);\n\n    T.runMode = (runMode === gUndefined) ? _auto_ : runMode; // 导航中心运行方式\n    T.lastDisplayType = _float_; // 最后一次的显示方式（float/block）\n    T.showed = gFalse; // 是否已显示\n\n    T.width = T.ui.w(); // 导航中心宽度\n\n    T.chpNav = gUndefined; // 联动的章节导航栏\n    T.toolbar = gUndefined; // 联动的工具栏\n\n    T.snapTimer = null; // 鼠标在边缘悬停计时器\n\n    // 索引内容分类选择\n    T.segs = new SegmentControl($(\".v-segment.toc\"), \"toc-segment\");\n    TocIndex_segments = T.segs;\n\n    // 目录索引组件\n    T.catalog = T.segs.add(new TocCatalog(this, gFalse), _icoTocTabCatalog_, gTrue, gFalse);\n    // 插图索引组件\n    T.figure = T.segs.add(new TocFigure(this, gTrue), _icoTocTabFigure_, gFalse, gFalse);\n    // 表格索引组件\n    T.table = T.segs.add(new TocTable(this, gTrue), _icoTocTabTable_, gFalse, gFalse);\n    // 多媒体索引组件\n    T.media = T.segs.add(new TocMedia(this, gTrue), _icoTocTabMedia_, gFalse, gFalse);\n    // 代码块索引组件\n    T.codeblock = T.segs.add(new TocCodeblock(this, gTrue), _icoTocTabCodeblock_, gFalse, gFalse);\n    // 访问历史组件\n    T.history = T.segs.add(new TocHistory(this, gTrue), _icoTocTabHistory_, gFalse, gFalse);\n\n    // 遮罩\n    T.mask = mask;\n    T.mask.bindPartner(this, T.ui);\n\n    T.segs.update();\n\n    V_ui_addAnimate(T.handle);\n\n    /**\n     * 当前章节变化事件\n     */\n    T.catalog.onChapterChanged = function () {\n        // 更新逐章导航内容\n        if (T.chpNav !== gUndefined)\n            T.chpNav.update();\n    }\n\n    // 关键字输入组件属性设置\n    T.keyword.setIcon(V_ui_svgIcon(_icoRetrieval_, 16, 16, _alpha_));\n\n    let cmdKey = _;\n    T.keyword.placeholder([\n        \"按下 [\" + cmdKey + \"／] 进行搜索\",\n        \"Type [\" + cmdKey + \"／] to search\"\n    ][V_lang_id]);\n\n    // 绑定输入框事件处理\n    T.keyword.onInput = function (source, value) {\n        T.catalog.resultNav.reset();\n        T.figure.resultNav.reset();\n        T.table.resultNav.reset();\n        T.table.resultNav.reset();\n        T.media.resultNav.reset();\n        T.codeblock.resultNav.reset();\n\n        if (value.x().length === 0) {\n            // 目录\n            T.catalog.ui.result.empty();\n            if (T.segs.checkedItem() === T.catalog.typeName())\n               T.catalog.ui.body.show();\n            T.catalog.hideFilterResult();\n            T.catalog.scrollToCurrent();\n            T.catalog.updateStatus();\n            // 插图、表格、多媒体、代码块\n            TocIndex_noneKeyword(T.figure);\n            TocIndex_noneKeyword(T.table);\n            TocIndex_noneKeyword(T.media);\n            TocIndex_noneKeyword(T.codeblock);\n        }\n        else {\n            // 目录\n            T.catalog.filter(value.l());\n            // 插图、表格、多媒体、代码块\n            TocIndex_filter(T.figure, value.l());\n            TocIndex_filter(T.table, value.l());\n            TocIndex_filter(T.media, value.l());\n            TocIndex_filter(T.codeblock, value.l());\n        }\n    }\n\n    T.keyword.onFocus = function (source) {\n        if (T.lastDisplayType !== _float_) {\n            JQ_addClass(VOM_doc(), _actived_);\n            let search = $(\".\" + _vFocusSearch_);\n            JQ_addClass(search, _actived_);\n        }\n    }\n\n    T.keyword.onBlur = function (source) {\n        JQ_removeClass(VOM_doc(), _actived_);\n        JQ_removeClass($(\".\" + _vFocusSearch_), _actived_);\n    }\n\n    // 绑定输入框事件处理\n    T.keyword.pressEnter = function (source, value) {\n        T.keyword.input.focus();\n    }\n\n    /**\n     * 触发互动事件\n     */\n    T.onInteractive = function () {\n        T.adjustClickHash();\n    }\n\n    /**\n     * 跳转回文档封面\n     */\n    T.gotoCover = function () {\n        WINDOW_setHref(\"#\");\n        // 【有封面】模式时处理\n        if (VOM_cover() !== gUndefined) {\n            if (T.catalog.currentItem !== gUndefined) {\n                JQ_removeClass(T.catalog.currentItem, _vTocItemCurrent_);\n                T.catalog.currentHeaderIndex = -1;\n            }\n            T.adjust();\n            T.chpNav.adjust();\n            T.toolbar.adjust();\n        }\n        // 【无封面】模式时处理\n        else {\n            ToolTips_hide();\n        }\n    }\n\n    /**\n     * 适配锚点击事件\n     */\n    T.adjustClickHash = function () {\n        if (T.lastDisplayType === _float_)\n            T.hide(_auto_);\n    }\n\n    /**\n     * 显示/隐藏导航中心\n     * @param callback 显示/隐藏导航中心后执行回调函数\n     */\n    T.tg = function (callback) {\n        // 导航中心已显示\n        if (T.showed) {\n            T.hide(\"closed\");\n        }\n        // 导航中心未显示\n        else {\n            T.runMode = _auto_;\n            // 在封面，或小屏\n            if (!T.catalog.inHeader() || V_ui_isSmallScreen()) {\n                T.show(_float_);\n            }\n            // 在章节内，非小屏\n            else {\n                // 导航中心运行模式为 auto 时，自动显示导航中心\n                if (T.runMode === _auto_)\n                    T.show(_block_);\n            }\n        }\n\n        typeof(callback) === _function_ && callback();\n        T.afterToggle();\n    }\n\n    /**\n     * 显示导航中心\n     * @param lastDisplayType float: 以浮动形式显示，block: 以占位形式显示\n     * @returns boolean true: 需要处理显示，false: 已显示，无须重复处理\n     */\n    T.show = function (lastDisplayType) {\n        // 已显示，或在以动画显示过程中\n        if (V_type !== \"max\" || T.showed || T.ui.oL() > -T.width) {\n            return gFalse;\n        }\n\n        T.ui.c(_left_, 20);\n        T.handle.hide();\n\n        T.lastDisplayType = lastDisplayType;\n        // 以「占位方式」显示导航中心\n        if (T.lastDisplayType === _block_) {\n            // 占位方式的样式设置\n            JQ_removeClass(T.ui, _vNavCenterFloat_);\n            JQ_removeClass(T.ui, _vFloatCard_);\n            JQ_addClass(T.ui, _vNavCenterBlock_);\n\n            // 更新工具栏导航中心按钮图标\n            if (!env.device.mobile)\n                JQ_addClass(T.toolbar.btns[_navCenter_], _selected_);\n\n            VOM_doc().c(_marginLeft_, _writeMarginLeft_);\n\n            // 因为从切换为占位显示后，会影响文档内容布局，所以须调整随大小变化的内容\n            if (!T.showed) {\n                setTimeout(function () {\n                    // 重定位至当前锚点\n                    V_util_redirectTo();\n                    // 统一同组的分栏引用块的高度\n                    ExtQuote_uniteColumnsHeight();\n                }, 300);\n            }\n        }\n        // 以「浮动方式」显示导航中心\n        else if (T.lastDisplayType === _float_) {\n            // 浮动方式的样式设置\n            JQ_removeClass(T.ui, _vNavCenterBlock_);\n            JQ_addClass(T.ui, _vNavCenterFloat_);\n            JQ_addClass(T.ui, _vFloatCard_);\n\n            // 显示联动的遮罩\n            T.mask.show();\n\n            // 若文档可视空间比导航中心宽度要小，则进行微调\n            if ($(window).w() < T.width + 20)\n                T.ui.c(_width_, $(window).w() - 20);\n            // 若文档空间比导航中心宽度大，则直接显示原始大小\n            else\n                T.ui.c(_width_, T.width);\n        }\n\n        T.showed = gTrue;\n        return gTrue;\n    }\n\n    /**\n     * 隐藏导航中心\n     * @param runMode 导航中心的运行模式（auto/closed）\n     * @returns boolean true: 需要处理隐藏，false: 已显示，无须重复处理\n     */\n    T.hide = function (runMode = _auto_) {\n        // 已隐藏，或在以动画隐藏过程中\n        if (!T.showed || T.ui.oL() < 10)\n            return gFalse;\n\n        // 若最后一次显示以是「占位方式」显示\n        if (T.lastDisplayType === _block_) {\n            // 更新运行模式\n            T.runMode = runMode;\n\n            // 统一同组的分栏引用块的高度\n            ExtQuote_uniteColumnsHeight();\n\n            // 更新工具栏导航中心按钮图标\n            if (!env.device.mobile)\n                JQ_removeClass(T.toolbar.btns[_navCenter_], _selected_);\n        }\n\n        T.ui.c(_left_, V_util_getVarVal(_varNavCenterHiddenLeft_));\n\n        // 恢复不挤压文档正文区\n        VOM_doc().c(_marginLeft_, 0);\n\n        T.mask.hide();\n\n        // 非移动设备时显示把手\n        if (!env.device.mobile)\n            T.showHandle();\n\n        T.showed = gFalse;\n\n        return gTrue;\n    }\n\n    /**\n     * 导航中心根据规则进行布局的自适应处理\n     * @returns boolean true: 需要处理显示/隐藏，false: 已显示/隐藏，无须重复处理\n     */\n    T.adjust = function () {\n        let result = gFalse;\n\n        // 根据导航中心宽度更新相关界面组件的样式\n        if (T.showed && T.lastDisplayType === _block_)\n            VOM_doc().c(_marginLeft_, _writeMarginLeft_);\n\n        T.width = T.ui.w();\n\n        T.keyword.setWidth(T.width - 2 - JS_parseInt(T.__keywordBody.c(_marginLeft_)) * 2);\n\n        // 根据最新窗口大小调整宽度\n        T.segs.update();\n\n        // 在封面，或为小屏\n        if (!T.catalog.inHeader() || V_ui_isSmallScreen()) {\n            // 自动隐藏导航中心\n            result = T.hide(_auto_);\n\n            // 根据最新窗口大小调整收起位置\n            T.ui.c(_left_, V_ui_var(_varNavCenterHiddenLeft_));\n\n            // 更新工具栏导航中心按钮图标\n            if (!env.device.mobile)\n                JQ_removeClass(T.toolbar.btns[_navCenter_], _selected_);\n        }\n        // 不在封面\n        else {\n            // 导航中心运行模式为 auto 时，自动显示导航中心\n            if (T.runMode === _auto_) {\n                // 以占位方式显示导航中心\n                result = T.show(_block_);\n\n                // 根据最新窗口大小调整导航中心宽度\n                T.ui.c(_width_, _varNavCenterWidth_);\n\n                // 更新工具栏导航中心按钮图标\n                if (!env.device.mobile)\n                    JQ_addClass(T.toolbar.btns[_navCenter_], _selected_);\n            }\n        }\n        return result;\n    }\n\n    /**\n     * 显示导航中心引导把手\n     */\n    T.showHandle = function () {\n        if (V_type !== \"max\")\n            return;\n\n        T.handle.c(_top_, ($(window).h() - T.handle.h()) / 2);\n        T.handle.show();\n    }\n\n    /**\n     * 鼠标位置变化对导航中心处理\n     */\n    T.snap = function (event) {\n        // 已显示则跳过\n        if (T.showed || env.device.mobile)\n            return;\n\n        // 鼠标离左边缘小于指定值时\n        if (event.clientY > 200 && event.clientY < ($(window).h() - 300) && event.clientX <= 20) {\n            if (T.snapTimer != null)\n                return;\n\n            JQ_addClass(T.handle, _hover_);\n\n            // 延时（模拟悬停一定时间）以浮动方式显示导航中心\n            T.snapTimer = setTimeout(function () {\n                JQ_removeClass(T.handle, _hover_);\n                T.show(_float_);\n            }, 1000);\n        }\n        else {\n            // 未显示导航中心前离开边缘则取消显示\n            if (T.snapTimer != null) {\n                clearTimeout(T.snapTimer);\n                T.snapTimer = null;\n                JQ_removeClass(T.handle, _hover_);\n            }\n        }\n    }\n\n    /**\n     * 显示/隐藏导航中心，并进行关联处理\n     */\n     T.afterToggle = function () {\n        if (iNavCenter.lastDisplayType === _block_)\n            ContentFolder_adjust();\n    }\n\n    /**\n     * 处理热键操作\n     * @param code 非功能键键\n     * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n     * @param event 事件对象\n     */\n    T.disposeHotkey = function (code, combKeys, event) {\n        // 文档库热键操作\n        T.docLib.disposeHotkey(code, combKeys, event);\n\n        if (T.ui.isHidden())\n            return;\n\n        let handled = false;\n        switch (code) {\n            case 27: // ESC\n                if (!T.keyword.inputing && T.showed && T.lastDisplayType === _float_) {\n                    T.hide();\n                    handled = true;\n                }\n                break;\n        }\n\n        // 如果事件已处理，则禁止双重操作\n        if (handled)\n            event.preventDefault();\n    }\n}\n\n/**\n * 导航中心初始化\n */\nNavCenter.init = function () {\n    // 提取文档中由[toc]标签生成的文档目录作为浮动 outline 中的内容\n    // let toc = $(\".\" + s_MdToc);\n    // 没有生成目录\n    if (gToc.isEmpty()) {\n        NavCenter.hideOnError();\n        return gFalse;\n    }\n\n    // 有生成目录，则复制 toc 内容\n    let vlookToc = gToc.clone();\n    // 隐藏原目录\n    gToc.hide();\n    // 将复制的目录进行唯一性标识\n    vlookToc.f(\".md-toc-content\").a(_id_, _vlookToc_);\n    iNavCenter.catalog.ui.body.ap(vlookToc);\n\n    gTocContent = $(\"#\" + _vlookToc_);\n    gToc = gTocContent.p(); // 更新引用块\n    // 检查目录内容情况\n    if (gTocContent.isEmpty()) {\n        NavCenter.hideOnError();\n        return gFalse;\n    }\n\n    // 文库\n    iNavCenter.docLib = new DocLib(new BgMask(\"doc-lib\", _center_), this);\n    // 当前文档不是 mini 类型（文库类文档一般为 mini 类型）\n    if (V_type !== _mini_) {\n        // 文库\n        if (iNavCenter.docLib.length === 0)\n            ALERT(_failed_ + \"iDocLib ]\");\n        else if (V_util_getParamVal(_vdl_) !== _off_) {\n            iNavCenter.docLib.init();\n        }\n    }\n    // 根据文库配置显示入口\n    if (iNavCenter.docLib.enabled)\n        iToolbar.btns[_docLib_].c(_display_, \"flex\");\n\n    // 有 Typora 生成的原始目录节点，针对 VLOOK 的封面规则进行调整\n    let tocSet = gTocContent.ch(\".md-toc-h1, .md-toc-h2, .md-toc-h3, .md-toc-h4, .md-toc-h5, .md-toc-h6\"),\n        tocSetLength = tocSet.length,\n        hasCover = (VOM_cover() !== gUndefined);\n    tocSet.e(function (i) {\n        let _t = $(this);\n        // 只处理 h1～h5 的目录节点\n        if (_t.a(_class_).i(\"md-toc-h6\") === -1) {\n            if (hasCover) { // 文档有封面时\n                if (i < tocSetLength - 1) // 未到最后一个元素\n                    iNavCenter.catalog.add(_t);\n                else // 最后一个 h1 为封底，移除\n                    JQ_remove(_t);\n            }\n            else\n                iNavCenter.catalog.add(_t);\n        }\n        // 移除无效的目录节点（如：封面、封底、普通的 h6 节点）\n        else\n            JQ_remove(_t);\n    });\n\n    // 不指定打开，则默认收起所有含子章节的 h1 章节\n    let tocAutoCloseLevel = V_util_getParamVal(\"toc\");\n    tocAutoCloseLevel = (tocAutoCloseLevel !== gUndefined) ? JS_parseInt(tocAutoCloseLevel) : 1;\n    if (tocAutoCloseLevel >= 1 && tocAutoCloseLevel <=5) {\n        gTocContent.ch(\".md-toc-h\" + tocAutoCloseLevel + V_attrX(_dataNode_, \"1\") + V_attrX(_dataFolded_, _false_)).e(function () {\n            iNavCenter.catalog.disposeFold($(this).a(_id_), \"c\", gTrue);\n        });\n    }\n\n    return gTrue;\n}\n\n/**\n * 隐藏导航中心（异常情况使用）\n */\nNavCenter.hideOnError = function () {\n    iNavCenter.hide();\n\n    ERROR([\n        \"文档中没有找到目录信息，请用Typora最新版本导出，并应用最新VLOOK插件\",\n        \"No [TOC] information was found in the document, export it with the latest version of Typora and apply the latest VLOOK plug-in.\"\n    ][V_lang_id]);\n}\n\n// ==================== 逐章导航类 ==================== //\n\n/**\n * 构造函数\n */\nfunction ChapterNav() {\n    let T = this,\n        __prev = \".\" + _vChapterNav_ + \"-prev\",\n        __current = \".\" + _vChapterNav_ + \"-current\",\n        __next = \".\" + _vChapterNav_ + \"-next\",\n        __dt = \".\" + _vChapterNav_ + \"-doc-title\";\n    // 逐章导航面板主界面\n    T.ui = $(\".\" + _vChapterNav_ + \"\");\n\n    T.prev = {\n        ui : $(__prev), // 前一章界面\n        text: $(\".\" + _vChapterNav_ + \"-prev-text\"), // 前一章文本界面\n    };\n\n    T.current = {\n        ui : $(__current), // 当前章节界面\n    };\n\n    T.next = {\n        ui : $(__next), // 后一章界面\n        text : $(\".\" + _vChapterNav_ + \"-next-text\"), // 后一章文本界面\n    };\n\n    // 文档标题\n    T.dt = $(__dt);\n    T.dt.t(V_util_getDocTitle());\n\n    if (V_type !== \"max\")\n        T.ui.hide();\n\n    /**\n     * 初始化动效\n     */\n    T.adjustEffectLevel = function (target) {\n        // 因 CSS 的 transition 不变动渐变背景过渡效果，须通过增/减不同的预置样式实现过渡效果\n        if (V_ui_effect >= 1) {\n            JQ_addClass($(target), _effect_);\n            V_ui_addAnimate($(target + \".effect\"));\n        }\n        else {\n            JQ_exchangeClass($(target), _effect_, \"noeffect\");\n        }\n    }\n    // 初始化动效\n    T.adjustEffectLevel(__prev);\n    T.adjustEffectLevel(__current);\n    T.adjustEffectLevel(__next);\n    T.adjustEffectLevel(__dt);\n\n    /**\n     * 跳转至前一章节\n     */\n    T.prev.ui.uC().ck(function () {\n        ToolTips_hide();\n        if (T.prev.text.a(_dataAnchor_) === _cover_)\n            iNavCenter.gotoCover();\n        else\n            iNavCenter.catalog.gotoHeader(T.prev.text);\n    });\n\n    /**\n     * 回到封面\n     */\n    T.dt.uC().ck(function () {\n        ToolTips_hide();\n        if ($(this).a(_disabled_) === gUndefined)\n            iNavCenter.gotoCover();\n    });\n\n    /**\n     * 跳转至当前章节\n     */\n    T.current.ui.uC().ck(function () {\n        ToolTips_hide();\n        iNavCenter.catalog.gotoHeader(T.current.ui);\n    });\n\n    /**\n     * 跳转至后一章节\n     */\n    T.next.ui.uC().ck(function () {\n        ToolTips_hide();\n        iNavCenter.catalog.gotoHeader(T.next.text);\n    });\n\n    /**\n     * 更新逐章导航栏 UI 及数据\n     */\n    T.update = function () {\n        let curIdx = iNavCenter.catalog.currentHeaderIndex;\n\n        // ----------------------------------------\n        // 更新「上一章」导航内容\n        if (curIdx > 0) {\n            T.prev.ui.show();\n            T.prev.ui.c(_display_, _block_);\n            T.prev.text.t($(\"#\" + iNavCenter.catalog.h[curIdx - 1]).t());\n            T.prev.text.a(_dataAnchor_, iNavCenter.catalog.h[curIdx - 1]);\n\n            // 【无封面】模式时处理\n            if (VOM_cover() === gUndefined) {\n                JQ_removeClass(T.dt, _inStart_);\n                JQ_removeAttr(T.dt, _disabled_);\n                T.adjustEffectLevel(__dt);\n                ToolTips_bind(T.dt, _center_);\n                // __bindEvent(T.dt, s_Center);\n            }\n        }\n        // 当前章节为第 1 章时特殊处理，设置为「封面」\n        else if (iNavCenter.catalog.inFirstHeader()) {\n            T.prev.text.t([\n                \"封面\",\n                \"Cover\"\n            ][V_lang_id]);\n            T.prev.text.a(_dataAnchor_, _cover_);\n        }\n        // 「无封面」模式时对「文档标题」章节的特殊处理\n        else if (iNavCenter.catalog.inDocTitle()) {\n            T.prev.ui.hide();\n            T.current.ui.hide();\n            // 调整为在文档开始位置时的样式\n            JQ_removeClass(T.dt, \"noeffect effect hover\");\n            JQ_addClass(T.dt, _inStart_);\n            T.dt.a(_disabled_, _true_);\n            V_ui_unbindHover(T.dt);\n        }\n\n        // ----------------------------------------\n        // 更新「当前章节」导航内容\n        if (iNavCenter.catalog.currentItem !== gUndefined) {\n            // 【无封面】模式\n            if (iNavCenter.catalog.inDocTitle())\n                T.current.ui.hide();\n            else\n                T.current.ui.show();\n\n            let headerNum = iNavCenter.catalog.currentItem.a(_dataHeaderNum_);\n            if (headerNum === gUndefined)\n                headerNum = _;\n            T.current.ui.hm(V_ui_span(_, _, headerNum)\n                + iNavCenter.catalog.currentItem.a(_title_));\n            T.current.ui.a(_dataAnchor_, iNavCenter.catalog.h[curIdx]);\n        }\n\n        // ----------------------------------------\n        // 更新「下一章」导航内容\n        if (curIdx < iNavCenter.catalog.h.length - 1) {\n            T.next.ui.show();\n            T.next.text.t($(\"#\" + iNavCenter.catalog.h[curIdx + 1]).t());\n            T.next.text.a(_dataAnchor_, iNavCenter.catalog.h[curIdx + 1]);\n        }\n        else\n            T.next.ui.hide();\n    }\n\n    /**\n     * 显示逐章导航栏\n     */\n    T.show = function () {\n        // 若已显示则直接退出\n        if (V_type !== \"max\" || JS_parseInt(T.ui.c(_top_)) >= 0)\n            return;\n\n        JQ_addClass(T.ui, _vFloatCard_);\n        T.ui.c(_top_, 0);\n        T.ui.show();\n    }\n\n    /**\n     * 隐藏逐章导航栏\n     */\n    T.hide = function () {\n        // 若已隐藏则直接退出\n        if (JS_parseInt(T.ui.c(_top_)) < 0)\n            return;\n\n        JQ_removeClass(T.ui, _vFloatCard_);\n        T.ui.c(_top_, -50);\n        T.ui.hide();\n    }\n\n    /**\n     * 逐章导航栏自适应显示\n     */\n    T.adjust = function () {\n        // 在封面时，隐藏逐章导航栏\n        if (!iNavCenter.catalog.inHeader()) {\n            T.hide();\n            JQ_addClass(MoreDocContent_ui_before, _cover_);\n\n            // 初始化前 / 后章节数据\n            T.prev.text.a(_dataAnchor_, _cover_);\n            T.next.text.a(_dataAnchor_, iNavCenter.catalog.h[0]);\n        }\n        // 不在封面时，显示逐章导航栏\n        else {\n            JQ_removeClass(MoreDocContent_ui_before, _cover_);\n            T.show();\n            T.update();\n        }\n    }\n\n    /**\n     * 逐章导航导航按钮在不同终端的适配处理\n     */\n    T.adjustHoverStyle = function () {\n        // 移动设备时解绑样式事件\n        if (env.device.mobile) {\n            T.prev.ui.uH();\n            T.current.ui.uH();\n            T.next.ui.uH();\n        }\n        // 非移动设备时绑定样式事件\n        else {\n            // 上一章\n            ToolTips_bind(T.prev.ui, _auto_);\n            // 文档标题\n            ToolTips_bind(T.dt, _center_);\n            // 当前章节\n            ToolTips_bind(T.current.ui, _center_);\n            // 下一章\n            ToolTips_bind(T.next.ui, _right_);\n        }\n    }\n\n    /**\n     * 处理热键操作\n     * @param code 非功能键键\n     * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n     * @param event 事件对象\n     */\n    T.disposeHotkey = function (code, combKeys, event) {\n        if (V_doc_block)\n            return;\n\n        let handled = false;\n        switch (code) {\n            case 188: // ,\n            case 37: // ←\n                T.prev.ui.tr(_click_);\n                // 自适应页面内容显示\n                iNavCenter.catalog.focusHeader();\n                handled = true;\n                break;\n            case 190: // .\n            case 39: // →\n                T.next.ui.tr(_click_);\n                // 强制设置滚动间隔已超时，以强制触发 focusHeader 中的处理\n                V_doc_scroll_update(0, 0);\n                // 自适应页面内容显示\n                iNavCenter.catalog.focusHeader();\n                handled = true;\n                break;\n        }\n\n        // 如果事件已处理，则禁止双重操作\n        if (handled)\n            event.preventDefault();\n    }\n}\n\n// ==================== 段落导航类 ==================== //\n\n/**\n * 构造函数\n * @param tips 操作提示栏对象\n */\nfunction ParagraphNav(tips) {\n    let T = this;\n    T.tips = tips;\n    T.count = 0; // 段的总数量\n    T.curIdx = -1; // 当前段索引号\n    T.enabled = gFalse; // 是否段落导航激活\n\n    T.toolbar = gUndefined; // 联动的工具栏\n\n    /**\n     * 返回当前段落\n     */\n    T.cur = function () {\n        if (T.curIdx === -1)\n            return gUndefined;\n        return $(V_attrX(_dataId_, \"vk-pg-\" + T.curIdx));\n    }\n\n    /**\n     * 切换段落导航开关\n     * @returns boolean true：开启，false：关闭\n     */\n    T.tg = function (target) {\n        T.enabled = !T.enabled;\n        if (T.enabled) {\n            JQ_addClass(T.toolbar.btns[_paragraphNav_], _selected_);\n            MoreDocContent_hideAfter();\n\n            // 显示工具底栏提示信息\n            let key1 = V_ui_wrap_kbd(\"J\") + _2nbsp_ + \"↑\" + _2nbsp_,\n                key2 = _2nbsp_ +\"-\" + _2nbsp_ + V_ui_wrap_kbd(\"K\") + _2nbsp_ + \"↓\" + _2nbsp_,\n                key3 = _2nbsp_ + _2nbsp_ +\"/\" + _2nbsp_ + _2nbsp_ + V_ui_wrap_kbd(\"ESC\") + _2nbsp_;\n            T.tips.show([\n                key1 + \"上一个段落\"\n                    + key2 + \"下一个段落\"\n                    + key3 + \"退出\",\n                key1 + \"Previous paragraph\"\n                    + key2 + \"Next paragraphs\"\n                    + key3 + \"Exit\"\n            ][V_lang_id]);\n\n            T.goto(target);\n            return gTrue;\n        }\n        else {\n            T.hide();\n        }\n        return gFalse;\n    }\n\n    /**\n     * 添加段落\n     */\n    T.add = function (item) {\n        item.a(_dataId_, \"vk-pg-\" + T.count);\n        item.a(_dataPgIdx_, T.count);\n        T.count++;\n\n        // 单击内容块处理\n        item.uC().ck(function () {\n            // 未激活段落导航模式模式\n            if (!iParagraphNav.enabled) {\n                if (ThreeClicker_tick()\n                    && iParagraphNav.tg(item)) {\n                        iSpotlight.hide();\n                        iLaserPointer.hide();\n                    }\n            }\n            else {\n                T.goto(item);\n                if (ThreeClicker_tick()) {\n                    iParagraphNav.tg(item);\n                }\n            }\n        });\n    }\n\n    /**\n     * 上一个段\n     * @param step 跳转的步长\n     * @returns boolean 跳转结果，true：成功，false：失败\n     */\n    T.prevPg = function (step) {\n        if (!T.enabled)\n            return gFalse;\n\n        T.blurFocus();\n\n        // 未到首段\n        if (T.curIdx > 0) {\n            T.curIdx = T.curIdx - step;\n\n            if (T.curIdx < 0)\n                T.curIdx = 0;\n\n            // 如果目标内容块 item 跳转失败，则再尝试上一个\n            if (!T.goto(0))\n                T.prevPg(1);\n\n            return gTrue;\n        }\n        return gFalse\n    }\n\n    /**\n     * 下一个段\n     * @param step 跳转的步长\n     * @returns boolean 跳转结果，true：成功，false：失败\n     */\n    T.nextPg = function (step) {\n        if (!T.enabled)\n            return gFalse;\n\n        T.blurFocus();\n\n        // 未到末段\n        if (T.curIdx < T.count - 1) {\n            T.curIdx = T.curIdx + step;\n\n            // 跳转 step 后修正超出最大值的情况\n            if (T.curIdx > T.count - 1)\n                T.curIdx = T.count - 1;\n\n            // 如果目标内容块 item 跳转失败，则再尝试下一个\n            if (!T.goto(0))\n                T.nextPg(1);\n\n            return gTrue;\n        }\n        return gFalse;\n    }\n\n    /**\n     * 跳到指定的内容块，或最新的_blockFocusItemIndex指定的内容块\n     * @param target 跳转的目标。0: 指定跳到上/下一个位置，非0: 指定的目标位置\n     */\n    T.goto = function (target) {\n        T.blurFocus();\n\n        // 初始化目标段\n        let item = (target === 0)\n            ? T.cur()\n            : target;\n\n        // 若目标聚焦块为空（可能是对象已在其他处理过程中被删除）、不可视等情况\n        // 则返回跳转失败\n        if (item === gUndefined || item.isHidden() || item.o() === gUndefined)\n            return gFalse;\n\n        // 添加高亮样式\n        JQ_addClass(item, _vPgCurrentItem_);\n        T.curIdx = JS_parseInt(item.a(_dataPgIdx_));\n\n        // 或目标段不在当前窗口显示区域内，则跳转到对应位置\n        let height = item.h() * 3;\n        if (item.oT() !== 0\n            && ((item.oT() - height) < $(document).scrollTop()\n            || (item.oT() + height) > ($(document).scrollTop() + $(window).h()))) {\n                DOM_html().scrollTop(item.oT() - $(window).h() / 2);\n        }\n\n        return gTrue; // 返回跳转成功\n    }\n\n    /**\n     * 让当前聚焦段其失去聚焦效果\n     */\n    T.blurFocus = function () {\n        if (T.cur() !== gUndefined)\n            JQ_removeClass(T.cur(), _vPgCurrentItem_);\n    }\n\n    /**\n     * 隐藏当前段落的高亮样式\n     */\n    T.hide = function () {\n        MoreDocContent_refresh();\n        T.tips.hide();\n        JQ_removeClass(T.toolbar.btns[_paragraphNav_], _selected_);\n        T.enabled = gFalse;\n        T.blurFocus();\n    }\n\n    /**\n     * 处理热键操作\n     * @param code 非功能键键\n     * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n     * @param event 事件对象\n     */\n    T.disposeHotkey = function (code, combKeys, event) {\n        if (!T.enabled)\n            return;\n\n        let handled = false;\n        switch (code) {\n            case 74: // J\n                TableCross_hide();\n                if (T.nextPg(1)) // 步长1\n                    ExtQuote_autoUnfold(); // 自动展开引用块\n                handled = true;\n                break;\n            case 75: // K\n                TableCross_hide();\n                if (T.prevPg(1)) // 步长1\n                    ExtQuote_autoUnfold(); // 自动展开引用块\n                handled = true;\n                break;\n            case 27: // ESC\n                if (T.enabled) {\n                    T.hide();\n                    handled = true;\n                }\n                break;\n        }\n\n        // 如果事件已处理，则禁止双重操作\n        if (handled)\n            event.preventDefault();\n    }\n}\n\n/**\n * 初始化段落导航模式\n */\nParagraphNav.init = function () {\n    iParagraphNav = new ParagraphNav(new BottomTips(_paragraphNav_));\n    // 添加关联组件\n    iParagraphNav.toolbar = iToolbar;\n\n    // 先清理多余的段落标签\n    $(\"li>p:only-child\").contents().unwrap();\n\n    // 初始化\n    $(\"h1, h2, h3, h4, h5, h6, ul>li, summary, ol>li, p[class!=md-toc-content], figure, .md-diagram-panel, .MathJax_SVG_Display\").e(function () {\n        let item = $(this);\n        // 跳过不可见元素、子元素有嵌套 p 的情况，如li > p\n        if (item.is(\":\" + _visible_)\n            && (item.ch(\"p\").length === 0 || V_util_getTagName(item) === \"details\")) {\n            iParagraphNav.add(item);\n\n            // 双击内容块\n            item.on(\"dblclick\", function () {\n                // 激活三击检查\n                // 配合段落的单击事件对 ThreeClicker_tick() 的判断实现\n                ThreeClicker_active();\n            });\n        }\n    });\n}\n\n// ==================== 三击处理器 ==================== //\n\nlet ThreeClicker_activeTime = 0;\n\n/**\n * 进入激活状态（在双击事件中触发）\n */\nfunction ThreeClicker_active() {\n    ThreeClicker_activeTime = new Date().getTime();\n}\n\n/**\n * 三击触发尝试\n * @returns boolean true：成功触发三击，false：未满足触发三击\n */\nfunction ThreeClicker_tick() {\n    // 未进入激活状态\n    if (ThreeClicker_activeTime === 0)\n        return gFalse;\n\n        // 与进入激活状态时间隔小于指定时间，则满足触发三击条件\n    if (new Date().getTime() - ThreeClicker_activeTime < 300) {\n        // 取消文本选择\n        window.getSelection().removeAllRanges();\n        return gTrue;\n    }\n\n    // 超过指定时间隔音则恢复为未激活\n    ThreeClicker_activeTime = 0;\n    return gFalse;\n}\n\n// ==================== 工具栏类 ==================== //\n\n/**\n * 构造函数\n * @param chpNav 章节导航对象\n */\nfunction Toolbar(chpNav) {\n    let T = this;\n    T.ui = $(\".\" + _vToolbar_); // 工具栏主界面\n    T.btns = []; // 工具栏按钮集\n    T.chpNav = chpNav;\n\n    if (V_type !== \"max\")\n        T.ui.hide();\n\n    /**\n     * 添加按钮\n     * @param name 按钮标识\n     * @param clickEvent 按钮点击事件回调函数\n     */\n    T.add = function (name, clickEvent) {\n        T.btns[name] = $(\".v-btn.\" + name);\n\n        T.btns[name].uC().ck(function () {\n            ToolTips_hide();\n            typeof(clickEvent) === _function_ && clickEvent();\n        });\n\n        // hover 事件处理\n        T.btns[name].hover(function () {\n            let _t = $(this),\n                btnGroup = _t.a(_dataBtnGroup_);\n            if (btnGroup !== gUndefined)\n                JQ_addClass($(\".v-btn-group.\" + btnGroup), _hover_);\n            ToolTips_show(_t, _auto_);\n        }, function () {\n            let btnGroup = $(this).a(_dataBtnGroup_);\n            if (btnGroup !== gUndefined)\n                JQ_removeClass($(\".v-btn-group.\" + btnGroup), _hover_);\n            ToolTips_hide();\n        });\n    }\n\n    /**\n     * 添加分隔条\n     * @param name 分隔条标识\n     */\n    T.addSpliter = function (name) {\n        T.btns[name] = $(\".v-\" + name);\n    }\n\n    /**\n     * 自适应显示工具栏\n     */\n    T.adjust = function () {\n        if (V_type !== \"max\")\n            return;\n\n        // 移动端下隐藏不必要的功能入口\n        if (env.device.mobile) {\n            T.btns[_paragraphNav_].hide();\n            T.btns[_spotlight_].hide();\n            T.btns[_laserPointer_].hide();\n            T.btns[_print_].hide();\n            T.btns[_toolbarSpliter_].hide();\n        }\n\n        // 如果是小屏，或在封面\n        if (V_ui_isSmallScreen() || !iNavCenter.catalog.inHeader()) {\n            let offsetY = 0;\n            // 小屏\n            if (V_ui_isSmallScreen()) {\n                T.ui.c(_paddingLeft_, 0)\n                    .c(_paddingRight_, 0)\n                    .c(_top_, 50 + offsetY);\n            }\n\n            // 微调工具栏分隔宽度\n            T.btns[_toolbarSpliter_].c(_width_, 20);\n\n            // 调整工具栏样式\n            JQ_removeClass(T.ui, _vFloatCard_);\n            JQ_addClass(T.ui, _cover_);\n\n            // 为去掉工具栏背景的按钮添加浮动样式\n            JQ_addClass(T.ui.ch(_vBtn__BtnGroup_), _vFloatCard_);\n            JQ_addClass(T.ui.ch(_vBtn__BtnGroup_), _float_);\n\n            // 大屏，回到封面及最开始位置进行二次调整\n            if (!V_ui_isSmallScreen()\n                && !iNavCenter.catalog.inHeader()) {\n                if ($(document).scrollTop() <= 5) {\n                    T.ui.c(_paddingLeft_, 10)\n                        .c(_paddingRight_, 10)\n                        .c(_top_, 10);\n                }\n                else {\n                    T.ui.c(_paddingLeft_, 10)\n                        .c(_paddingRight_, 10)\n                        .c(_top_, 0);\n                }\n            }\n            else {\n                // 小屏，在非封面位置进行二次调整\n                if (V_ui_isSmallScreen() && iNavCenter.catalog.inHeader())\n                    T.ui.c(_paddingLeft_, 0)\n                        .c(_paddingRight_, 0)\n                        .c(_top_, 50 + offsetY);\n                else {\n                    // 小屏，在封面及最开始位置进行二次调整\n                    if ($(document).scrollTop() <= 5)\n                        T.ui.c(_paddingLeft_, 10)\n                            .c(_paddingRight_, 10)\n                            .c(_top_, 10);\n                    // 小屏，在封面位置进行二次调整\n                    else\n                        T.ui.c(_paddingLeft_, 10)\n                            .c(_paddingRight_, 10)\n                            .c(_top_, 0);\n                }\n            }\n        }\n        // 宽屏，且不在封面\n        else {\n            if (T.ui.oT() === 0)\n                return;\n\n            // 调整工具栏样式\n            JQ_removeClass(T.ui, _cover_);\n            JQ_addClass(T.ui, _vFloatCard_);\n\n            // 微调工具栏分隔宽度\n            let btnCount = T.ui.f(\".v-btn\").length,\n                btnWidth = JS_parseInt(V_util_getVarVal(\"--v-tb-btn-w\")),\n                space = JS_parseInt(V_util_getVarVal(\"--v-tb-btn-s\"));\n            T.btns[_toolbarSpliter_].c(_width_, \"calc((\" + _varNavCenterWidth_ + \" - \"\n                    + (btnCount * btnWidth + JS_parseInt(T.ui.c(_paddingLeft_)) * 2 + (btnCount - 4) * space) + \"px) / 2)\");\n\n            T.ui.c(_paddingLeft_, 10)\n                .c(_paddingRight_, 10)\n                .c(_top_, 0);\n            // 为增加了工具栏按钮的背景去掉浮动样式\n            JQ_removeClass(T.ui.ch(_vBtn__BtnGroup_), _vFloatCard_);\n            JQ_removeClass(T.ui.ch(_vBtn__BtnGroup_), _float_);\n        } // else\n        T.ui.show();\n    }\n}\n\n// ==================== 颜色方案类 ==================== //\n\n/**\n * 构造函数\n */\nfunction ColorScheme() {}\n\nColorScheme.scheme = _light_; // 当前颜色以方案，light/dark\nColorScheme.schemeBeforePrint = _light_; // 打印前的颜色方案\n\n/**\n * 初始化\n */\nColorScheme.init = function () {\n    const __lightIcon = document.querySelector(\"link#\" + _docIcon_ + _light_);\n    const __darkIcon = document.querySelector(\"link#\" + _docIcon_ + _dark_);\n\n    // Light Mode 时的文档图标\n    function __setLightIcon() {\n        // 浏览器中显示的文档图标\n        JQ_remove(__darkIcon);\n        document.head.append(__lightIcon);\n    }\n\n    // Dark Mode 时的文档图标\n    function __setDarkIcon() {\n        // 浏览器中显示的文档图标\n        JQ_remove(__lightIcon);\n        document.head.append(__darkIcon);\n    }\n\n    // 根据系统 Color Scheme 变化进行适配更新颜色方案\n    function __syncScheme(matcher) {\n        if (matcher.matches) {\n            __initScheme(gTrue);\n            ColorScheme.tg(_dark_);\n        }\n        else {\n            __initScheme(gFalse);\n            ColorScheme.tg(_light_);\n        }\n    }\n\n    // 根据系统 Color Scheme 变化进行适配更新图标\n    function __initScheme(flag) {\n        if (flag) {\n            __setDarkIcon();\n            ColorScheme.scheme = _dark_;\n        }\n        else {\n            __setLightIcon();\n            ColorScheme.scheme = _light_;\n        }\n        StsColorScheme_updateIcons();\n    }\n\n    // 监听系统的 Color Scheme 变化\n    const mediaQuery = window.matchMedia('(prefers-color-scheme:dark)');\n    mediaQuery.addEventListener(\"change\", __syncScheme);\n\n    // 初始执行\n    __initScheme(mediaQuery.matches);\n}\n\n/**\n * 切换颜色方案\n * @param scheme 指定方案，为空时则轮换\n */\nColorScheme.tg = function (scheme) {\n    if (scheme === gUndefined)\n        scheme = (ColorScheme.scheme === _light_) ? _dark_ : _light_;\n\n    ColorScheme.scheme = scheme;\n    INFO(\"    Switch to ... [ \" + ColorScheme.scheme + \" ]\");\n    // 应用最新颜色方案\n    ColorScheme.refresh();\n\n    if (iNavCenter.docLib.enabled)\n        iNavCenter.docLib.reload(ColorScheme.scheme);\n\n    INFO(\"    DONE!\");\n}\n\n/**\n * 根据指定的颜色方案进行文档刷新\n */\nColorScheme.refresh = function () {\n    StsColorScheme_updateIcons();\n    // iToolbar.updateIcons();\n\n    // 批量修改颜色方案相关的 CSS 变量为指定的新值\n    let ac = \"--ac-\",\n        _alt = \"-a\",\n        _fade = \"-fade\",\n        _title = \"-title\",\n        // ---\n        acRed = ac + \"rd\",\n        acOrange = ac + \"og\",\n        acYellow = ac + \"ye\",\n        acLime = ac + \"lm\",\n        acGreen = ac + \"gn\",\n        acMineral = ac + \"mn\",\n        acOlives = ac + \"ol\",\n        acWine = ac + \"wn\",\n        acAqua = ac + \"aq\",\n        acCyan = ac + \"cy\",\n        acBlue = ac + \"bu\",\n        acSea = ac + \"se\",\n        acLavender = ac + \"la\",\n        acVine = ac + \"vn\",\n        acPurple = ac + \"pu\",\n        acRose = ac + \"ro\",\n        acPink = ac + \"pk\",\n        acGold = ac + \"gd\",\n        acBrown = ac + \"bn\",\n        acGray = ac + \"gy\",\n        acBlack = ac + \"bk\",\n        acTheme1 = ac + \"t1\",\n        acTheme2 = ac + \"t2\",\n        // ---\n        mm = \"--mm-c-\",\n        // ---\n        mmRed = mm + \"rd\",\n        mmOrange = mm + \"og\",\n        mmYellow = mm + \"ye\",\n        mmGreen = mm + \"gn\",\n        mmCyan = mm + \"cy\",\n        mmBlue = mm + \"bu\",\n        mmPurple = mm + \"pu\",\n        mmPink = mm + \"pk\",\n        mmBrown = mm + \"bn\",\n        mmGray = mm + \"gy\",\n        // ---\n        cm = \"--cm-\";\n\n    V_util_changeCssVarSet([\n        \"--v-invert-dark\",\n        \"--v-brightness-dark\",\n        \"--d-bc\",\n        \"--d-bi\",\n        // \"--d-bc-tsp\",\n        \"--fade-r\",\n        \"--fade-g\",\n        \"--fade-b\",\n        \"--d-fc\",\n        \"--fig-solid-bg\",\n        \"--v-fig-grid-l\",\n        \"--v-fig-grid-b\",\n        \"--v-fig-grid-l-invert\",\n        \"--v-fig-grid-b-invert\",\n        \"--pn-c\",\n        \"--pn-c-a\",\n        // \"--pn-c-tsp\",\n        \"--pn-fade-r\",\n        \"--pn-fade-g\",\n        \"--pn-fade-b\",\n        \"--blockquote-bg\",\n        \"--a-color\",\n        \"--mark-bg\",\n        \"--tbl-bd\",\n        \"--tbl-tr-hv\",\n        \"--tbl-th-bg\",\n        \"--tbl-td-bg\",\n        \"--tbl-cell-bd\",\n        \"--tbl-row-g-alpha\",\n        \"--toc-h-num-color\",\n        \"--h-f\",\n        \"--h-box-shadow\",\n        \"--h-bg-start\",\n        \"--h-bg-end\",\n        \"--code-bg\",\n        \"--std-code-shadow\",\n        \"--rb-code-shadow\",\n        \"--c-blk-bg\",\n        \"--key-bg\",\n        \"--key-reflect\",\n        \"--key-shadow\",\n        \"--doc-shadow\",\n        acRed,\n        acRed + _alt,\n        acRed + _fade,\n        acRed + _title,\n        acOrange,\n        acOrange + _alt,\n        acOrange + _fade,\n        acOrange + _title,\n        acYellow,\n        acYellow + _alt,\n        acYellow + _fade,\n        acYellow + _title,\n        acLime,\n        acLime + _alt,\n        acLime + _fade,\n        acLime + _title,\n        acGreen,\n        acGreen + _alt,\n        acGreen + _fade,\n        acGreen + _title,\n        acMineral,\n        acMineral + _alt,\n        acMineral + _fade,\n        acMineral + _title,\n        acOlives,\n        acOlives + _alt,\n        acOlives + _fade,\n        acOlives + _title,\n        acWine,\n        acWine + _alt,\n        acWine + _fade,\n        acWine + _title,\n        acAqua,\n        acAqua + _alt,\n        acAqua + _fade,\n        acAqua + _title,\n        acCyan,\n        acCyan + _alt,\n        acCyan + _fade,\n        acCyan + _title,\n        acBlue,\n        acBlue + _alt,\n        acBlue + _fade,\n        acBlue + _title,\n        acSea,\n        acSea + _alt,\n        acSea + _fade,\n        acSea + _title,\n        acLavender,\n        acLavender + _alt,\n        acLavender + _fade,\n        acLavender + _title,\n        acVine,\n        acVine + _alt,\n        acVine + _fade,\n        acVine + _title,\n        acPurple,\n        acPurple + _alt,\n        acPurple + _fade,\n        acPurple + _title,\n        acRose,\n        acRose + _alt,\n        acRose + _fade,\n        acRose + _title,\n        acPink,\n        acPink + _alt,\n        acPink + _fade,\n        acPink + _title,\n        acGold,\n        acGold + _alt,\n        acGold + _fade,\n        acGold + _title,\n        acBrown,\n        acBrown + _alt,\n        acBrown + _fade,\n        acBrown + _title,\n        acGray,\n        acGray + _alt,\n        acGray + _fade,\n        acGray + _title,\n        acBlack,\n        acBlack + _alt,\n        acBlack + _fade,\n        acBlack + _title,\n        acTheme1,\n        acTheme1 + _alt,\n        acTheme1 + _fade,\n        acTheme1 + _title,\n        acTheme2,\n        acTheme2 + _alt,\n        acTheme2 + _fade,\n        acTheme2 + _title,\n        mmRed,\n        mmRed + _alt,\n        mmOrange,\n        mmOrange + _alt,\n        mmYellow,\n        mmYellow + _alt,\n        mmGreen,\n        mmGreen + _alt,\n        mmCyan,\n        mmCyan + _alt,\n        mmBlue,\n        mmBlue + _alt,\n        mmPurple,\n        mmPurple + _alt,\n        mmPink,\n        mmPink + _alt,\n        mmBrown,\n        mmBrown + _alt,\n        mmGray,\n        mmGray + _alt,\n        cm + \"keyword\",\n        cm + \"variable\",\n        cm + \"variable-2\",\n        cm + \"variable-3\",\n        cm + \"tag\",\n        cm + \"attribute\",\n        cm + \"CodeMirror-cursor\",\n        cm + \"string\",\n        cm + \"string-2\",\n        cm + \"comment\",\n        cm + \"header\",\n        cm + \"quote\",\n        cm + \"hr\",\n        cm + \"link\",\n        cm + \"negative\",\n        cm + \"positive\",\n        cm + _mata_,\n        cm + \"bulidin\",\n        cm + \"bracket\",\n        cm + \"atom\",\n        cm + \"number\"\n    ], (ColorScheme.scheme === _dark_) ? \"dk\" : \"lg\");\n\n    // 针对 Dark Mode 进行适配处理\n    ExtFigure_adjustColorScheme(gTrue);\n}\n\n// ==================== 字体风格选项、选择器类 ==================== //\n\n// let webfontHostAlt = \"https://madmaxchow.gitee.io/openfonts/\";\nlet webfontHostAlt = \"https://madmaxchow.github.io/openfonts/\";\n// let webfontHostAlt = \"https://cdn.jsdelivr.net/gh/MadMaxChow/openfonts@master/\";\n\n/**\n * 构造函数\n * @param ui 选项的 UI\n * @param fonts 字体集数组\n */\nfunction FontThemeOption(ui, fonts) {\n    let T = this;\n    T.ui = ui;\n    T.fonts = fonts;\n    T.fontCount = T.fonts.length;\n}\n\n/**\n * 构造函数\n * @param mask 遮罩对象\n * @param theme 默认的字体主题\n */\nfunction FontTheme(mask, theme) {\n    let T = this;\n    T.theme = theme; // 当前字体风格，sans：非衬线（小清新），serif：衬线（文艺范）\n    T.ui = $(\".v-font-theme\"); // 字体风格切换选择界面\n    // 系统默认字体风格选项\n    T.localTheme = new FontThemeOption($(\".\" + _vFontThemeOpt_ + \"-local\"), []);\n    // Book 风格选项\n    T.bookTheme = new FontThemeOption($(\".\" + _vFontThemeOpt_ + \"-book\"), []);\n    // 小清新字体风格选项\n    T.sansTheme = new FontThemeOption($(\".\" + _vFontThemeOpt_ + \"-sans\"),\n        [\n            \"VLOOK Number\" + _normal_normal_, \"VLOOK Number\" + _normal_bold_, \"VLOOK Number\" + _normal_italic_,\n            \"VLOOK Digital Sans\" + _normal_normal_, \"VLOOK Digital Sans\" + _normal_500_, \"VLOOK Digital Sans\" + _normal_bold_, \"VLOOK Digital Sans\" + _normal_900_,\n            \"VLOOK Sans Mono\" + _normal_normal_, \"VLOOK Sans Mono\" + _normal_500_, \"VLOOK Sans Mono\" + _normal_bold_, \"VLOOK Sans Mono\" + _normal_900_,\n            \"VLOOK Sans\" + _normal_normal_, \"VLOOK Sans\" + _normal_bold_, \"VLOOK Sans\" + _normal_900_\n            ]);\n    // 艺术范字体风格选项\n    T.serifTheme = new FontThemeOption($(\".\" + _vFontThemeOpt_ + \"-serif\"),\n        [\n            \"VLOOK Number\" + _normal_normal_, \"VLOOK Number\" + _normal_bold_, \"VLOOK Number\" + _normal_italic_,\n            \"VLOOK Digital Serif\" + _normal_normal_, \"VLOOK Digital Serif\" + _normal_bold_, \"VLOOK Digital Serif\" + _normal_italic_, \"VLOOK Digital Serif\" + _italic_bold_,\n            \"VLOOK Serif Mono\" + _normal_normal_, \"VLOOK Serif Mono\" + _normal_bold_, \"VLOOK Serif Mono\" + _normal_italic_, \"VLOOK Serif Mono\" + _italic_bold_,\n            \"VLOOK Serif\" + _normal_500_, \"VLOOK Serif\" + _normal_900_,\n            \"VLOOK Sans Mono\" + _normal_normal_, \"VLOOK Sans Mono\" + _normal_500_, \"VLOOK Sans Mono\" + _normal_bold_, \"VLOOK Sans Mono\" + _normal_900_,\n            \"VLOOK Sans\" + _normal_normal_, \"VLOOK Sans\" + _normal_bold_, \"VLOOK Sans\" + _normal_900_\n        ]);\n    // 遮罩\n    T.mask = mask;\n    T.mask.bindPartner(this, T.ui);\n\n    V_ui_addAnimate(T.ui);\n\n    // 绑定各字体风格选项事件\n    T.localTheme.ui.uC().ck(function () {\n        T.apply(\"local\");\n        T.hide();\n    });\n    T.bookTheme.ui.uC().ck(function () {\n        T.apply(\"book\");\n        T.hide();\n    });\n    T.sansTheme.ui.uC().ck(function () {\n        T.apply(\"sans\");\n        T.initWebFont();\n        T.hide();\n    });\n    T.serifTheme.ui.uC().ck(function () {\n        T.apply(\"serif\");\n        T.initWebFont();\n        T.hide();\n    });\n\n    /**\n     * 初始化\n     * @param theme 可选。强制指定的字体主题\n     */\n    T.init = function (theme) {\n        // 有指定强制字体主题，同时指定的字体主题合法且与文档配套的不一致，则进行处理\n        if (theme !== gUndefined\n            && theme.m(/^(local|sans|serif)$/i) != null\n            && theme !== T.theme) {\n                T.theme = theme;\n                T.apply(T.theme);\n        }\n\n        LOG(\"_____ FONT THEME (\" + T.theme + \") _____ \");\n\n        T.initWebFont();\n\n        // 对于本地字体主题的状态，直接为就绪\n        $(\":is(.\" + _vFontInfo_ + \"-local, .\" + _vFontInfo_ + \"book) > #\" + _fontsetStatus_).t(\"✅ \" + [\n            \"已就绪\",\n            _ready_\n        ][V_lang_id]);\n    }\n\n    /**\n     * 初始化 WebFont\n     */\n    T.initWebFont = function () {\n        let fontWeight500 = \"500\",\n            fontWeight900 = \"900\",\n            _Regular = \"-Regular\",\n            _Medium = \"-Medium\",\n            _Bold = \"-Bold\",\n            _Black = \"-Black\",\n            _Italic = \"-Italic\";\n        let unicodeRange = \"U+0021-002F,\" // !\"#$%&'()*+,-./（不含空格）\n            + \"U+0030-0039,\" // 0123456789\n            + \"U+003A-0040,\" // :;<=>?@\n            + \"U+005B-0060,\" // [\\]^_`\n            + \"U+007B-007E\"; // {|}~\n        let timeOutMsg = \"❌ \" + [\"超时\", \"Timeout\"][V_lang_id];\n\n        if (T.theme === \"local\") {\n            // 动态加载字体 VLOOK Number\n            __loadNumberFont();\n        }\n        else if (T.theme === \"sans\") {\n            // 动态加载字体 VLOOK Number\n            __loadNumberFont();\n            // 动态加载字体 VLOOK Digital Sans\n            __LoadDigitalSansFont();\n            // 动态加载字体 VLOOK Sans Mono\n            __loadSansMonoFont();\n            // 动态加载字体 VLOOK Noto Sans CJK SC\n            __loadSansCjkFont();\n\n            // Sans 字体主题的加载超时检测\n            setTimeout(function () {\n                if (T.sansTheme.fonts.length > 0)\n                    $(\".\" + _vFontInfo_ + \"sans > #\" + _fontsetStatus_).t(timeOutMsg);\n            }, 600000); // 10 分钟后进行超时检测\n        }\n        else if (T.theme === \"serif\") {\n            // 动态加载字体 VLOOK Number\n            __loadNumberFont();\n            // 动态加载字体 VLOOK Digital Serif\n            __LoadDigitalSerifFont();\n            // 动态加载字体 VLOOK Serif Mono\n            __loadSerifMonoFont();\n            // 动态加载字体 VLOOK Noto Serif CJK SC\n            __loadSerifCjkFont();\n\n            // 动态加载字体 VLOOK Sans Mono\n            __loadSansMonoFont();\n            // 动态加载字体 VLOOK Noto Sans CJK SC\n            __loadSansCjkFont();\n\n            // Serif 字体主题的加载超时检测\n            setTimeout(function () {\n                if (T.serifTheme.fonts.length > 0)\n                    $(\".\" + _vFontInfo_ + \"serif > #\" + _fontsetStatus_).t(timeOutMsg);\n            }, 600000); // 10 分钟后进行超时检测\n        }\n\n        // 动态加载字体 VLOOK Number\n        function __loadNumberFont() {\n            let fontName = \"VLOOK Number\",\n                srcName = \"Altinn-DIN\";\n            T.loadFont(fontName, _normal_, _normal_, srcName, srcName);\n            T.loadFont(fontName, _normal_, _bold_, srcName, srcName + _Bold);\n            T.loadFont(fontName, _italic_, _normal_, srcName, srcName + _Italic);\n        }\n\n        // 动态加载字体 VLOOK Digital Sans\n        function __LoadDigitalSansFont() {\n            let fontName = \"VLOOK Digital Sans\",\n                srcName = \"NotoSansMono\";\n            T.loadFont(fontName, _normal_, _normal_, srcName, srcName + _Regular, unicodeRange);\n            T.loadFont(fontName, _normal_, fontWeight500, srcName, srcName + _Medium, unicodeRange);\n            T.loadFont(fontName, _normal_, _bold_, srcName, srcName + _Bold, unicodeRange);\n            T.loadFont(fontName, _normal_, fontWeight900, srcName, srcName + _Black, unicodeRange);\n        }\n\n        // 动态加载字体 VLOOK Digital Serif\n        function __LoadDigitalSerifFont() {\n            let fontName = \"VLOOK Digital Serif\",\n                srcName = \"LuxiMono\";\n            let luxiMonoSubName = srcName + _Italic;\n            T.loadFont(fontName, _normal_, _normal_, srcName, srcName + _Regular, unicodeRange);\n            T.loadFont(fontName, _normal_, _bold_, srcName, srcName + _Bold, unicodeRange);\n            T.loadFont(fontName, _italic_, _normal_, srcName, luxiMonoSubName + _Regular, unicodeRange);\n            T.loadFont(fontName, _italic_, _bold_, srcName, luxiMonoSubName + _Bold, unicodeRange);\n        }\n\n        // 动态加载字体 VLOOK Sans Mono\n        function __loadSansMonoFont() {\n            let fontName = \"VLOOK Sans Mono\",\n                srcName = \"NotoSansMono\";\n            T.loadFont(fontName, _normal_, _normal_, srcName, srcName + _Regular);\n            T.loadFont(fontName, _normal_, fontWeight500, srcName, srcName +_Medium);\n            T.loadFont(fontName, _normal_, _bold_, srcName, srcName + _Bold);\n            T.loadFont(fontName, _normal_, fontWeight900, srcName, srcName + _Black);\n        }\n\n        // 动态加载字体 VLOOK Serif Mono\n        function __loadSerifMonoFont() {\n            let fontName = \"VLOOK Serif Mono\",\n                srcName = \"LuxiMono\";\n            let luxiMonoSubName = srcName + _Italic;\n            T.loadFont(fontName, _normal_, _normal_, srcName, srcName + _Regular);\n            T.loadFont(fontName, _normal_, _bold_, srcName, srcName + _Bold);\n            T.loadFont(fontName, _italic_, _normal_, srcName, luxiMonoSubName + _Regular);\n            T.loadFont(fontName, _italic_, _bold_, srcName, luxiMonoSubName + _Bold);\n        }\n\n        // 动态加载字体 VLOOK Noto Sans CJK SC\n        function __loadSansCjkFont() {\n            let fontName = \"VLOOK Sans\",\n                srcName = \"NotoSansCJKsc\";\n            T.loadFont(fontName, _normal_, _normal_, srcName, srcName + _Regular);\n            T.loadFont(fontName, _normal_, _bold_, srcName, srcName + _Bold);\n            T.loadFont(fontName, _normal_, fontWeight900, srcName, srcName + _Black);\n        }\n\n        // 动态加载字体 VLOOK Noto Serif CJK SC\n        function __loadSerifCjkFont() {\n            let fontName = \"VLOOK Serif\",\n                srcName = \"NotoSerifCJKsc\";\n            T.loadFont(fontName, _normal_, fontWeight500, srcName, srcName + _Medium);\n            T.loadFont(fontName, _normal_, fontWeight900, srcName, srcName + _Black);\n        }\n    }\n\n    /**\n     * 绑定选择字体风格操作按钮\n     * @param button 绑定的工具栏按钮\n     */\n    T.bindButton = function (button) {\n        T.button = button; // 绑定的工具栏按钮\n    }\n\n    /**\n     * 加载自定义字体\n     * @param fontFamily 自定义字体名称\n     * @param fontStyle 字体样式\n     * @param fontWeight 字重\n     * @param srcFontName 字体源名称\n     * @param srcFontSubName 字体源子名称\n     * @param unicodeRange 指定应用的字符范围\n     */\n    T.loadFont = function (fontFamily, fontStyle, fontWeight, srcFontName, srcFontSubName, unicodeRange) {\n        if (document.fonts && !T.isExist(fontFamily, fontStyle, fontWeight)) {\n            let woffURL = \"url('\" + webfontHostAlt + srcFontName + \"-\" + _woff2_ + \"/\" + srcFontSubName + \".\" + _woff2_ + \"') format('\" + _woff2_ + \"')\",\n                fontFace;\n            if (unicodeRange === gUndefined) {\n                fontFace = new FontFace(fontFamily,\n                    ((_woff2_ !== gUndefined) ? woffURL : _), {\n                        style: fontStyle,\n                        weight: fontWeight,\n                        display: \"swap\"\n                    });\n            }\n            else {\n                fontFace = new FontFace(fontFamily,\n                    ((_woff2_ !== gUndefined) ? woffURL : _), {\n                        style: fontStyle,\n                        weight: fontWeight,\n                        display: \"swap\",\n                        unicodeRange: \"U+0030-0039\"\n                    });\n            }\n\n            // 指定字体加载完成后回调函数\n            fontFace.load().then(function(loadedFontFace) {\n                document.fonts.add(loadedFontFace);\n\n                let fontID = fontFamily + \"/\" + fontStyle + \"/\" + fontWeight,\n                    readyMsg = \"✅ \" + [\"已就绪\", _ready_][V_lang_id],\n                    loadingMsg = [\"加载中\", \"Loading\"][V_lang_id];\n                LOG(\"↓↓↓ FONT LOADED ↓↓↓\");\n                LOG(fontID);\n\n                // --------------------\n                // 更新小清新风格字体包下载进度\n                // 剔除已下载的字体字形\n                for (let i = 0; i < T.sansTheme.fonts.length; i++) {\n                    if (T.sansTheme.fonts[i] === fontID) {\n                        T.sansTheme.fonts.splice(i, 1);\n                        break;\n                    }\n                }\n                // 计算进度\n                let sansLoadedCount = T.sansTheme.fontCount - T.sansTheme.fonts.length,\n                    sansStatus = $(\".\" + _vFontInfo_ + \"sans > #\" + _fontsetStatus_);\n                if (sansLoadedCount < T.sansTheme.fontCount)\n                    sansStatus.t(loadingMsg + \"... (\" + JS_mathRound(sansLoadedCount / T.sansTheme.fontCount * 100) + \"%)\");\n                else\n                    sansStatus.t(readyMsg);\n\n                // --------------------\n                // 更新艺术范风格字体包下载进度\n                // 剔除已下载的字体字形\n                for (let i = 0; i < T.serifTheme.fonts.length; i++) {\n                    if (T.serifTheme.fonts[i] === fontID) {\n                        T.serifTheme.fonts.splice(i, 1);\n                        break;\n                    }\n                }\n                // 计算进度\n                let serifLoadedCount = T.serifTheme.fontCount - T.serifTheme.fonts.length,\n                    serifStatus = $(\".\" + _vFontInfo_ + \"serif > #\" + _fontsetStatus_);\n                if (serifLoadedCount < T.serifTheme.fontCount)\n                    serifStatus.t(loadingMsg + \"... (\" + JS_mathRound(serifLoadedCount / T.serifTheme.fontCount * 100) + \"%)\");\n                else\n                    serifStatus.t(readyMsg);\n            });\n        }\n    }\n\n    /**\n     * 检测指定自定义字体是否已加载\n     * @param fontFamily 自定义字体名称\n     * @param fontStyle 字体样式\n     * @param fontWeight 字重\n     */\n    T.isExist = function (fontFamily, fontStyle, fontWeight) {\n        let values = document.fonts.values(),\n            isHave = gFalse,\n            item = values.next();\n\n        while (!item.done && !isHave) {\n            let fontFace = item.value;\n            if (fontFace.family === fontFamily\n                && fontFace.style === fontStyle\n                && fontFace.weight === fontWeight) {\n                    isHave = gTrue;\n                    LOG(\"///// FONT IS EXIST /////\");\n                    LOG(fontFamily + \"/\" + fontStyle + \"/\" + fontWeight);\n            }\n            item = values.next();\n        }\n        return isHave;\n    }\n\n    /**\n     * 显示字体风格选择器\n     */\n    T.show = function () {\n        T.mask.show();\n        V_ui_moveToCenter(T.ui);\n        T.ui.show();\n\n        LOG(\"'\" + T.theme + \"'\");\n        if (T.theme === \"local\") {\n            JQ_addClass(T.localTheme.ui, _selected_);\n            JQ_removeClass(T.bookTheme.ui, _selected_);\n            JQ_removeClass(T.sansTheme.ui, _selected_);\n            JQ_removeClass(T.serifTheme.ui, _selected_);\n        }\n        else if (T.theme === \"book\") {\n            JQ_removeClass(T.localTheme.ui, _selected_);\n            JQ_addClass(T.bookTheme.ui, _selected_);\n            JQ_removeClass(T.sansTheme.ui, _selected_);\n            JQ_removeClass(T.serifTheme.ui, _selected_);\n        }\n        else if (T.theme === \"sans\") {\n            JQ_removeClass(T.localTheme.ui, _selected_);\n            JQ_removeClass(T.bookTheme.ui, _selected_);\n            JQ_addClass(T.sansTheme.ui, _selected_);\n            JQ_removeClass(T.serifTheme.ui, _selected_);\n        }\n        else {\n            JQ_removeClass(T.localTheme.ui, _selected_);\n            JQ_removeClass(T.bookTheme.ui, _selected_);\n            JQ_addClass(T.serifTheme.ui, _selected_);\n            JQ_removeClass(T.sansTheme.ui, _selected_);\n        }\n    }\n\n    /**\n     * 是否已显示\n     * @returns boolean\n     */\n    T.isShowed = function () {\n        return T.ui.c(_display_) !== _none_;\n    }\n    /**\n     * 显示/隐藏字体风格选择器\n     */\n    T.tg = function () {\n        if (T.isShowed()) {\n            T.hide();\n        }\n        else {\n            T.show();\n        }\n    }\n\n    /**\n     * 隐藏字体风格选择器\n     */\n    T.hide = function () {\n        T.ui.hide();\n        T.mask.hide();\n    }\n\n    /**\n     * 应用指定字体风格\n     * @param theme 指定应用的字体风格（sans/serif），不指定则以为当前字体风格\n     */\n    T.apply = function (theme) {\n        // 修正无指定样式的情况\n        if (theme === gUndefined)\n            theme = T.theme;\n        T.theme = theme;\n\n        // CSS 变量名称列表\n        const varList = [\n            \"--v-f-fm-title\",\n            \"--v-f-fm-subtitle\",\n            \"--v-f-fm-h\",\n            \"--v-f-fm-text\",\n            \"--v-f-fm-bd\",\n            \"--v-f-fm-key\",\n            \"--v-f-fm-num\",\n            \"--v-f-fm-tag\",\n            \"--v-f-fm-code\",\n            \"--v-f-w-bd\",\n            \"--v-f-w-title\",\n            \"--v-f-w-text\"\n        ];\n        // 生成目标字体主题变量值列表\n        let fontVarList = [];\n        for (let i = 0, len = varList.length; i < len; i++) {\n            fontVarList.push(V_util_getVarVal(varList[i] + \"-\" + T.theme));\n        }\n        // 遍历所有变量实现字体主题的切换\n        for (let i = 0, len = varList.length; i < len; i++) {\n            V_util_setVarVal(varList[i], fontVarList[i]);\n        }\n    }\n\n    /**\n     * 处理热键操作\n     * @param code 非功能键键\n     * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n     * @param event 事件对象\n     */\n    T.disposeHotkey = function (code, combKeys, event) {\n        if (T.ui.isHidden())\n            return;\n\n        let handled = false;\n        switch (code) {\n            case 27: // ESC\n                if (T.isShowed()) {\n                    T.hide();\n                    handled = true;\n                }\n                break;\n        }\n\n        // 如果事件已处理，则禁止双重操作\n        if (handled)\n            event.preventDefault();\n    }\n}\n\n// ==================== 脚注类 ==================== //\n\n/**\n * 构造函数\n * @param mask 遮罩对象\n */\nfunction FootNote(mask) {\n    let T = this;\n    T.ui = $(\".\" + _vFontnotePn_); // 脚注主界面\n    T.content = $(\".\" + _vFontnotePn_ + \"-content\"); // 脚注内容区\n\n    T.buttonSeeAll = $(\".\" + _vFontnotePn_ + \"-footer\"); // 查看所有脚注按钮\n    T.buttonSeeAll.uC().ck(function () {\n        T.hide();\n        // 跳转至所有脚注区域\n        WINDOW_setHref(\"#vk-footer-area\");\n    });\n\n    // 遮罩\n    T.mask = mask;\n    T.mask.bindPartner(this, T.ui);\n\n    /**\n     * 是否已显示\n     * @returns boolean\n     */\n    T.isShowed = function () {\n        return T.ui.c(_display_) !== _none_;\n    }\n\n    /**\n     * 显示脚注弹层\n     */\n    T.show = function () {\n        // 显示关联的遮罩\n        T.mask.show();\n\n        if (V_ui_isSmallScreen())\n            T.ui.c(_left_, 20)\n                .c(_right_, 20);\n        else\n            T.ui.c(_left_, \"15%\")\n                .c(_right_, \"15%\");\n\n        T.ui.show();\n    }\n\n    /**\n     * 隐藏脚注弹层\n     */\n    T.hide = function () {\n        T.ui.hide();\n        T.mask.hide();\n    }\n\n    /**\n     * 处理热键操作\n     * @param code 非功能键键\n     * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n     * @param event 事件对象\n     */\n    T.disposeHotkey = function (code, combKeys, event) {\n        if (T.ui.isHidden())\n            return;\n\n        let handled = false;\n        switch (code) {\n            case 27: // ESC\n                if (T.isShowed()) {\n                    T.hide();\n                    handled = true;\n                }\n                break;\n        }\n\n        // 如果事件已处理，则禁止双重操作\n        if (handled)\n            event.preventDefault();\n    }\n}\n\n/**\n * 初始化脚注\n */\nFootNote.init = function () {\n    // 将 Typora 的脚注调整到封底前，VLOOK 规范的文档中最后一个 <h6> 是封底\n    let footnotesArea = $(\".\" + _footnotesArea_);\n    // 「有封面」模式\n    if (VOM_backcover() !== gUndefined)\n        footnotesArea.insertBefore(VOM_backcover());\n    // 「无封面」模式\n    else\n        VOM_doc().ap(footnotesArea);\n\n    // 将 VLOOK 生成的脚注区锚点调整到生成 HTML 后的实际位置\n    $(\"#vk-footer-area\").insertBefore(footnotesArea);\n\n    // 移除默认的跳转属性\n    let a = $(\"a[name^='ref-footnote-'], a[id^='ref-footnote-']\");\n    JQ_removeAttr(a, _href_);\n    // 将脚注角标的事件替换为指定的处理事件\n    a.uC().ck(function () {\n        // 获取脚注【返回】链接对应的脚注原文信息\n        let _t = $(this),\n            target = $(\"a[name='df\" + _t.a(_name_) + \"'], a[id='df\" + _t.a(_name_) + \"']\").p().clone();\n\n        // 更新脚注弹层内容区\n        LOG(target, target.t());\n        iFootNote.content.hm(target);\n        // 移除默认的返回链接\n        JQ_remove(target.f(\"a[name^='dfref-footnote'], a[id^='dfref-footnote']\"));\n\n        // 显示脚注弹层\n        iFootNote.show();\n    });\n}\n\n// ==================== 状态栏类 ==================== //\n\nlet StatusBar_ui = gUndefined,\n    StatusBar_items = [], // 状态栏条目集\n    StatusBar_options = V_util_getParamVal(\"stsbar\");\n/**\n * 构造函数\n */\nfunction StatusBar_init() {\n    StatusBar_ui = $(\".\" + _vStatusBar_);\n    if (V_type !== \"max\")\n        StatusBar_ui.hide();\n}\n\n/**\n * 添加状态栏条目\n * @param name 条目标识\n * @param item 条目对象\n */\nfunction StatusBar_add(name, item) {\n    StatusBar_items[name] = item;\n    if (StatusBar_options !== gUndefined && StatusBar_options.i(name) > -1) {\n        item.enabled = gFalse;\n        JQ_remove(item.ui);\n    }\n}\n\n/**\n * 自适应显示状态栏\n */\nfunction StatusBar_adjust() {\n    // 移动端下隐藏不必要的功能入口\n    if (env.device.mobile) {\n        JQ_remove(StatusBar_items[\"zoom-view\"]);\n    }\n}\n\n// ==================== 文档信息类 ==================== //\n\nlet StsDocInfo_ui = gUndefined,\n    DocInfo_enabled = gTrue;\n/**\n * 构造函数\n */\nfunction StsDocInfo_init() {\n    StsDocInfo_ui = $(\".\" + _vDocInfo_);\n}\n\n/**\n * 统计字数\n */\nfunction DocInfo_countWord() {\n    if (!DocInfo_enabled)\n        return;\n\n    let latin = VOM_doc().t().m(/[\\w\\-]+/g),\n        cjk = VOM_doc().t().m(/\\p{Unified_Ideograph}/ug);\n        // docInfo = $(\".v-doc-info\");\n    let latinCount = (latin == null) ? 0 : latin.length,\n        cjkCount = (cjk == null) ? 0 : cjk.length,\n        wordCount = latinCount + cjkCount,\n        readCountPerMin = 180;\n\n    // 计算阅读时长\n    let mins = wordCount < readCountPerMin ? 1 : JS_parseInt(wordCount / readCountPerMin),\n        times = mins + ___ + [\n            \"分钟\",\n            \"minutes\"\n        ][V_lang_id];\n    if (mins > 60)\n        times = (mins / 60).toFixed(1) + ___ + [\n            \"小时\",\n            \"hours\"\n        ][V_lang_id];\n    // 默认信息\n    StsDocInfo_ui.a(_dataDefault_,\n        times + \" / \" + V_formatting_thousands(wordCount.toString()) + ___\n        + [\n            \"字\",\n            \"words\"\n        ][V_lang_id]);\n    // 扩展信息\n    StsDocInfo_ui.a(_dataExtend_,\n        \"( \" + V_formatting_thousands(cjkCount.toString()) + ___ + [\n            \"中日韩，\",\n            \"CJK, \"\n        ][V_lang_id]\n        + V_formatting_thousands(latinCount.toString()) + ___ + [\n            \"非中日韩\",\n            \"Non-CJK\"\n        ][V_lang_id] + \" )\");\n    // hover 时显示扩展信息\n    StsDocInfo_ui.hover(function () {\n        StsDocInfo_ui.hm(StsDocInfo_ui.a(_dataDefault_) + _nbsp_\n            + V_ui_span(\"v-doc-ext-info\", _, StsDocInfo_ui.a(_dataExtend_)));\n    }, function () {\n        StsDocInfo_ui.hm(StsDocInfo_ui.a(_dataDefault_));\n    });\n    StsDocInfo_ui.hm(StsDocInfo_ui.a(_dataDefault_));\n}\n\n// ==================== 状态栏的字体主题类 ==================== //\n\nlet StsFontTheme_ui = gUndefined;\n/**\n * 构造函数\n */\nfunction StsFontTheme_init() {\n    StsFontTheme_ui = $(\".\" + _vStsFontTheme_);\n    StsFontTheme_ui.a(_dataTips_, [\n        \"切换 字体风格\",\n        \"Switch Font Theme\"\n    ][V_lang_id] + \"\\n<sub>\" + V_ui_wrap_kbd(\"A\") + \"</sub>\");\n\n    ToolTips_bind(StsFontTheme_ui);\n    StsFontTheme_ui.uC().ck(function () {\n        iFontTheme.tg();\n    });\n}\n\n// ==================== 状态栏的颜色模式类 ==================== //\n\nlet StsColorScheme_ui = gUndefined;\n/**\n * 构造函数\n */\nfunction StsColorScheme_init() {\n    StsColorScheme_ui = $(\".\" + _vColorScheme_);\n    StsColorScheme_ui.a(_dataTips_, [\n        \"切换 [ \" + V_ui_strong(\"黑暗\") + \" / \" + V_ui_strong(\"明亮\") + \" ] 模式\",\n        \"Switch \" + V_ui_strong(\"Dark\") + \" / \" + V_ui_strong(\"Light\") + \" Mode\"\n    ][V_lang_id] + \"\\n<sub>\" + V_ui_wrap_kbd(\"D\") + \"</sub>\");\n\n    ToolTips_bind(StsColorScheme_ui);\n    StsColorScheme_ui.uC().ck(function () {\n        ColorScheme.tg();\n    });\n}\n\n/**\n * 更新按钮图标\n */\nfunction StsColorScheme_updateIcons() {\n    // 调整模式切换按钮图标\n    StsColorScheme_ui.hm(V_ui_svgIcon(\n        (ColorScheme.scheme === _light_ ? _icoDarkMode_ : _icoLightMode_),\n        20, 20, _theme_));\n}\n\n// ==================== 链接检查器类 ==================== //\n\nlet StsLinkTool_ui = gUndefined,\n    LinkTool_panel_list = gUndefined,\n    LinkTool_panel_header = gUndefined,\n    LinkTool_panel_body = gUndefined,\n    LinkTool_enabled = gTrue,\n    LinkTool_icon_error = _,\n    // LinkTool_icon_close = __,\n    LinkTool_mask = gUndefined;\n\n/**\n * 构造函数\n */\nfunction StsLinkTool_init(mask) {\n    // let T = this;\n    StsLinkTool_ui = $(\".\" + _vLinkChkResult_); // 检查结果\n    LinkTool_panel_list = $(\".\" + _vLinkErrorList_); // 坏链主界面\n    LinkTool_panel_header = $(\".\" + _vLinkErrorList_ + \"-header\");\n    LinkTool_panel_body = $(\".\" + _vLinkErrorList_ + \"-items\"); // 坏链内容列表\n    LinkTool_enabled = gTrue;\n\n    LinkTool_icon_error = V_ui_svgIcon(_icoLinkError_, 16, 14, _light_);\n    // LinkTool_icon_close = V_ui_generateSvgIcon(_icoClose_, 16, 16, s_Light);\n\n    // 遮罩\n    LinkTool_mask = mask;\n    LinkTool_mask.bindPartner(function () {\n        LinkTool_hide()\n    }, LinkTool_panel_list);\n\n    // 滚动事件处理\n    LinkTool_panel_body.scroll(function () {\n        // 滚出了顶部则显示顶部渐变条\n        if (LinkTool_panel_header.isHidden() && LinkTool_panel_body.scrollTop() > 10)\n            LinkTool_panel_header.show()\n        // 否则隐藏\n        else if (LinkTool_panel_body.scrollTop() <= 10)\n            LinkTool_panel_header.hide()\n    });\n}\n\n/**\n * 将 .md 的链接转换为 .html 链接（或指定后缀）\n */\nfunction LinkTool_mdToHtml() {\n    let xmd = V_util_getParamVal(\"xmd\"),\n        newExt = \".html\";\n    // 全局配置，禁用转换，则停止\n    if (xmd === _off_)\n        return;\n\n    // 全局配置，指定转换的后缀\n    if (xmd !== gUndefined)\n        newExt = \".\" + xmd;\n\n    $(\"a[href*='.md']\").e(function () {\n        let _t = $(this),\n            href = _t.a(_href_),\n            xmd = V_util_getUrlQueryParams(href)[\"xmd\"];\n        // 单个链接指定禁用转换，则停止\n        if (xmd === _off_)\n            return gFalse;\n\n        // 单个链接指定转换的后缀\n        if (xmd !== gUndefined)\n            _t.a(_href_, href.r(\".md\", \".\" + xmd));\n        else // 默认的全局后缀\n            _t.a(_href_, href.r(\".md\", newExt));\n    });\n}\n\n/**\n * 添加坏链项目\n * @param id 坏链对象的标识\n * @param content 坏链项目显示的内容\n */\nfunction LinkTool_addToCheck(id, content) {\n    let item = $(V_ui_span(_vTocItem_, V_attr(_dataAnchor_, \"#\" + id), content));\n    // 添加链接异常样式及属性\n    JQ_addClass($(item.a(_dataAnchor_)).a(_tabindex_, 0), \"v-link-error-source\");\n    // 添加节点\n    LinkTool_panel_body.ap(item);\n    item.uC().ck(function () {\n        JQ_removeClass(LinkTool_panel_body.ch(\".\" + _vTocItemCurrent_), _vTocItemCurrent_);\n        JQ_addClass(item, _vTocItemCurrent_);\n\n        V_util_gotoHash(item.a(_dataAnchor_));\n        LinkTool_hide();\n    });\n}\n\n/**\n * 检查链接\n */\nfunction LinkTool_checkLink() {\n    if (!LinkTool_enabled)\n        return;\n\n    let count = 0;\n    // 检查所有页内链接对应的锚点是否都存在\n    $(_write_ + \" a\").e(function () {\n        let _t = $(this),\n            href = _t.a(_href_);\n        // 忽略无效数据\n        // 对于 href=\"#\" 的情况，在 Typora 1.6.x 开始的版本需要考虑，因为 Typora 生成的 HTML 会自动过滤无效的页内链接，直接用 # 代替\n        if (href === gUndefined) // || href.length <= 1)\n            return gTrue;\n\n        // --------------------\n        // 页内链接\n        // 以 #mjx- 开始的链接为行间公式的页内引用块，会导致 jQuery 的正则表达式解析错误，须跳过\n        if (href === \"#\")\n            __addErrorLink(_t);\n        else if (href.sW(\"#\") && !href.sW(\"#mjx-\")) {\n            // 检索是否存在与该内链对应的锚点\n            let anchor = href.s(1, href.length);\n            // 没有检索到对应的锚点\n            if ($(_write_ + \" #\" + anchor + \",\" + _write_ + \" a\" + V_attrX(_name_, anchor)).length === 0) {\n                __addErrorLink(_t);\n            }\n        }\n    });\n\n    // 无错误链接\n    if (count === 0) {\n        JQ_remove(StsLinkTool_ui);\n    }\n    else {\n        // 显示错误链接错误图标\n        JQ_addClass(StsLinkTool_ui, _error_);\n        StsLinkTool_ui.hm(LinkTool_icon_error);\n\n        // 点击图标行为\n        StsLinkTool_ui.uC().ck(function () {\n            if (LinkTool_panel_list.isHidden())\n                LinkTool_show();\n            else\n                LinkTool_hide();\n        });\n    }\n\n    // 添加一条无效的页内链接记录\n    function __addErrorLink(aObj) {\n        count++;\n\n        // 设置坏链 id 值，用于跳转定位\n        let id = \"vk-error-anchor\" + count;\n        aObj.a(_id_, id);\n\n        LinkTool_addToCheck(id, \"🔗 \"\n            + V_ui_strong([\n                \"无效页内链接\",\n                \"Invalid Inner Link\"\n            ][V_lang_id] + \": \") + aObj.t());\n    }\n}\n\n/**\n * 是否已显示\n * @returns boolean\n */\nfunction LinkTool_isShowed() {\n    return StsLinkTool_ui.c(_display_) !== _none_;\n}\n\n/**\n * 显示坏链列表\n */\nfunction LinkTool_show() {\n    LinkTool_panel_list.show()\n    LinkTool_mask.show();\n}\n\n/**\n * 隐藏坏链列表\n */\nfunction LinkTool_hide() {\n    LinkTool_panel_list.hide()\n    LinkTool_mask.hide();\n\n    StsLinkTool_ui.hm(LinkTool_icon_error);\n    V_doc_scroll_unfreeze();\n}\n\n/**\n * 处理热键操作\n * @param code 非功能键键\n * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n * @param event 事件对象\n */\nfunction LinkTool_disposeHotkey(code, combKeys, event) {\n    if (LinkTool_panel_list.isHidden())\n        return;\n\n    let handled = false;\n    switch (code) {\n        case 27: // ESC\n            ERROR(LinkTool_isShowed());\n            if (LinkTool_isShowed()) {\n                LinkTool_hide();\n                handled = true;\n            }\n            break;\n    }\n\n    // 如果事件已处理，则禁止双重操作\n    if (handled)\n        event.preventDefault();\n}\n\n// ==================== 背景遮罩类 ==================== //\n\n/**\n * 构造函数\n * @param id 标识\n * @param style 扩展样式：left / right / bottom / center\n * @param close 是否显示关闭提示器\n */\nfunction BgMask(id, style, close) {\n    let T = this;\n    T.style = style;\n\n    // DOM_body().after\n    VOM_doc().af(V_ui_div(_, \"v-mask \" + (style !== gUndefined ? style + ___ : _) + id + ___ + _vBackdropBlurs_,\n        V_ui_copyrightInfo()));\n\n    // 根据动效等级初始化遮罩样式\n    V_ui_initEffectLevel2();\n\n    T.ui = $(\".v-mask.\" + id);\n    T.closer = gUndefined;\n\n    // 生成关闭提示器\n    if (close !== gUndefined && close) {\n        T.ui.ap(V_ui_div(_, \"v-mask-close \" + T.style,\n            V_ui_svgIcon(_icoMaskCloser_, 16, 60, _light_)));\n        T.closer = T.ui.ch(\".v-mask-close\");\n    }\n\n    T.partner = gUndefined;\n    T.partnerUI = gUndefined;\n\n    /**\n     * 绑定联动对象\n     * @param partner 联动对象\n     * @param ui 联动对象的 UI\n     */\n    T.bindPartner = function (partner, ui) {\n        T.partner = partner;\n        T.partnerUI = ui;\n    }\n\n    /**\n     * 显示遮罩\n     */\n    T.show = function () {\n        // 冻结滚动\n        V_doc_scroll_freeze();\n        V_doc_block = gTrue;\n\n        // 总是在 target 下显示\n        T.ui.c(_zIndex_, T.partnerUI.c(_zIndex_) - 1);\n\n        // 对「关闭」提示器的处理\n        if (T.closer !== gUndefined) {\n            // 默认是 style = left 的位置\n            let offset = 30,\n                x = JS_parseInt(T.partnerUI.c(_left_)) + T.partnerUI.w() + offset,\n                y = JS_parseInt(T.partnerUI.c(_top_)) + (T.partnerUI.h() - T.closer.h()) / 2;\n            // left / right 的处理\n            if (T.style === _left_ || T.style === _right_) {\n                T.closer.c(_left_, T.style === _right_\n                        ? JS_parseInt(T.partnerUI.c(_left_)) - T.closer.w() - offset\n                        : x)\n                    .c(_top_, y);\n            }\n            // bottom 的处理\n            else if (T.style === _bottom_) {\n                y = JS_parseInt(T.partnerUI.c(_bottom_)) + T.partnerUI.h() + offset;\n                T.closer\n                    // .c(s_Left, s_Auto)\n                    // .c(s_Top, s_Auto)\n                    .c(_bottom_, y + 20)\n                    // .c(s_MarginLeft, \"-\" + (T.close.w() / 2) + 'px')\n                    .c(_padding_, \"0px 50%\");\n            }\n        }\n\n        // 绑定 VLOOK logo 的点击事件\n        T.ui.f(\".\" + _vCopyright_ + \" .\" + _vCopyrightSvgIco_).uC().ck(function () {\n            env.show($(this));\n        });\n\n        // 点击遮罩隐藏联动对象\n        T.ui.uC().ck(function () {\n            // 取消冻结滚动\n            V_doc_scroll_unfreeze();\n            // 隐藏联动对应\n            if (typeof(T.partner) === _function_)\n                 T.partner();\n            else\n                T.partner.hide();\n\n            T.hide();\n        });\n\n        T.ui.show();\n    }\n\n    /**\n     * 隐藏遮罩\n     */\n    T.hide = function () {\n        // 取消冻结滚动\n        V_doc_scroll_unfreeze();\n        V_doc_block = gFalse;\n\n        T.ui.hide();\n    }\n}\n\n// ==================== 长内容折叠类 ==================== //\n\nlet ContentFolder_enabled = gTrue,\n    ContentFolder_enabled_table = gTrue,\n    ContentFolder_enabled_figure = gTrue,\n    ContentFolder_enabled_codeblock = gTrue,\n    // need removed:\n    // ContentFolder_ui = gUndefined, // 展开操作区的 UI 模板\n    ContentFolder_limit = V_debugMode ? 300 : 640, // 内容须折叠的高度限值\n    ContentFolder_contents = [], // 须进行折叠判断和处理的内容集\n    ContentFolder_buildTimers = [],\n    ContentFolder_rowNumFilter = _table_ + \" tbody tr\";\n\nfunction ContentFolder_init() {\n    if (!ContentFolder_enabled)\n        return;\n    // need removed:\n    // ContentFolder_ui = $(\".\" + _vContentExpander_);\n    // 更新 CSS 对应高度限制变量\n    V_util_setVarVal(\"--v-ex-limit\", ContentFolder_limit + \"px\");\n}\n\n/**\n * 添加内容\n */\nfunction ContentFolder_add(content, type) {\n    // 跳过不启用折叠，或任意父级元素是折叠引用块的情况\n    if (!ContentFolder_enabled\n        || content.ps(_details_ + \",\" + _blockquote_).length > 0) {\n        // || (V_util_getTagName(content.p()) === _details_\n        //     || content.ps(_details_).length > 0)) {\n        return;\n    }\n\n    if (type === _table_ && ContentFolder_enabled_table === gFalse)\n        return;\n    if (type === _figure_ && ContentFolder_enabled_figure === gFalse)\n        return;\n    if (type === _codeblock_ && ContentFolder_enabled_codeblock === gFalse)\n        return;\n\n    ContentFolder_contents.push(content);\n}\n\n/**\n * 适配内容展开操作区\n */\nfunction ContentFolder_adjust() {\n    if (!ContentFolder_enabled)\n        return;\n\n    // 提前中断未完成的处理\n    if (ContentFolder_buildTimers.length > 0) {\n        for (let i = 0, len = ContentFolder_buildTimers.length; i < len; i++)\n            clearTimeout(ContentFolder_buildTimers.shift());\n    }\n    // 重新开始构建内容展开操作区\n    ContentFolder_rebuild();\n}\n\n/**\n * 重建部分内容展开操作区，主要是 img, table, .md-fences 等会因导航中心的显示/关闭\n * 导致文档宽度变化而引起的内容高度也跟随变化的情况\n * 如在不显示导航中心时因宽度较变，高度等比变高，或高度反而变短\n * 会导致应该显示展开操作区即不显示，或不应显示却显示的情况\n */\nfunction ContentFolder_rebuild() {\n    if (!ContentFolder_enabled)\n        return;\n\n    // 遍历每个规则\n    let rules = gStyle.cssRules || gStyle.rules;\n    for (var j = rules.length - 1; j >= 0; j--) {\n    // $.each(gStyle.cssRules, function(i, rule) {\n        // 检查是否是要删除的规则\n        let ruleText = rules[j].selectorText;\n        if (ruleText !== gUndefined && ruleText.i(\n                \".\" + _vCaptionContainer_ + \".\" + _expander_ + \".id-\") > -1)\n                gStyle.deleteRule(j);\n        // if (rule.selectorText !== gUndefined && rule.selectorText.indexOf(\n        //     \".\" + _vCaptionContainer_ + \".\" + _expander_ + \".id-\") > -1)\n            // gStyle.deleteRule(i);\n    // });\n    }\n\n    // 重建需要重建的部分\n    for (let i = 0, len = ContentFolder_contents.length; i < len; i++) {\n        // img 类长内容\n        if (V_util_getTagName(ContentFolder_contents[i]).sW(\"i\")) {\n            // 创建一个Image对象，实现图片的预下载\n            let img = new Image();\n            // to-do: 需要针对 Dark / Light 模式，以及普通/高分屏调整应取哪个 _src_\n            // img.src = ContentFolder_contents[i].a(_src_);\n            // 获得图片实际加载的 src（针对 img 指定 srcset, darksrc, darksrcset 的情况）\n            img.src = ContentFolder_contents[i].get(0).currentSrc;\n            // 如果图片已经存在于浏览器缓存，直接处理\n            if (img.complete)\n                ContentFolder_buildTimers.push(\n                    setTimeout(function () {\n                        ContentFolder_checkAndProcess(ContentFolder_contents[i], gTrue, i);\n                    }, 50)\n                );\n            // 等待图片下载完成后再处理\n            else\n                img.onload = function () {\n                    ContentFolder_checkAndProcess(ContentFolder_contents[i], gTrue, i);\n                }\n        }\n        // 非 img 类长内容\n        else {\n            // 设置按不同时间间隔执行，减少在处理数量过多时，会阻塞 UI\n            ContentFolder_buildTimers.push(\n                setTimeout(function () {\n                    ContentFolder_checkAndProcess(ContentFolder_contents[i], gTrue, i);\n                }, 50)\n            );\n        }\n    }\n}\n\n/**\n * 检测内容是否过长，过长则进行处理。适用于「插图、表格、代码块」等\n * @param target 折叠的目标对象\n * @param rebuild 本次折叠是否属于重建的（如在页面加载后，由于页面正文区宽度变化后调用时属于重建）\n * @param i 折叠内容序号\n */\nfunction ContentFolder_checkAndProcess(target, rebuild, i) {\n    if (!ContentFolder_enabled)\n        return;\n\n    let container = target.p(),\n        tagName = V_util_getTagName(target),\n        isImg = tagName.sW(\"i\");\n\n    // 重建时已生成题注，所以实际容器对象与初始化时第一次构建会不同\n    if (rebuild)\n        container = container.p();\n\n    // need removed:\n    // 获得上一轮构建时生成的展开操作区，没有则初始为 undefined\n    // let oldExpander = container.n(),\n    //     className = oldExpander.a(_class_);\n    // if (className === gUndefined || className.i(_vContentExpander_) === -1)\n    //     oldExpander = gUndefined;\n\n    // 已被点击展开过了，在重建时则跳过\n    let expanded = container.a(_dataContentExpanded_);\n    if (expanded !== gUndefined && expanded.sW(\"t\")) {\n        let folded = container.a(_dataBeforePrintFolded_);\n        if (folded !== gUndefined && !expanded.sW(\"t\")) {\n            ContentFolder_buildTimers.shift();\n            return;\n        }\n    }\n\n    // 针对 img 内容，进行父容器的正确性处理\n    if (isImg) {\n        // 图像若加载晚于 img 的题注生成，其父容器则题注而不是 VLOOK 标识的 img 父容器\n        if (container.a(_dataContainer_) === gUndefined)\n            container = container.p();\n    }\n\n    // 初始化折叠配置\n    container.a(_dataContentFolded_, _false_); // 未折叠\n    container.a(_dataContentExpanded_, _false_); // 已被点击扩展了\n    container.c(_height_, _auto_);\n    // 针对 Mermaid 图表，不添加会导致出现滚动条\n    if (tagName.sW(\"s\"))\n        container.c(_paddingBottom_, \"10px\");\n\n    let h = JS_parseInt(target.c(_height_));\n    // 获得图片实际高度（针对 img 指定 srcset, darksrc, darksrcset 的情况）\n    // if (isImg)\n    //     h = target.get(0).naturalHeight;\n\n    // 高度超出折叠要求高度时进行折叠\n    if (h > ContentFolder_limit) {\n        // 构建内容展开操作区\n        // ContentFolder_buildContentExpander(target, container, tagName, h, oldExpander);\n        ContentFolder_buildContentExpander(target, container, tagName, i);\n    }\n    // 高度没有超出折叠要求\n    // need removed:\n    // else {\n    //     // 若之前须折叠，目前不需要折叠，则清除对应的展开操作区\n    //     if (oldExpander !== gUndefined && className !== gUndefined\n    //         && className.i(_vContentExpander_) > -1)\n    //             JQ_remove(oldExpander);\n    // }\n\n    ContentFolder_buildTimers.shift();\n}\n\n/**\n * 构建内容展开操作区\n * @param target 为目标对象创建展开操作区（如 table）\n * @param container 指定对象所属的容器（如 table 的容器为父元素 figure）\n * @param tagName target 的 HTML 标签名\n * @param i 折叠内容序号\n */\nfunction ContentFolder_buildContentExpander(target, container, tagName, i) {\n    if (!ContentFolder_enabled)\n        return;\n\n    // 设置为已折叠\n    container.a(_dataContentFolded_, _true_);\n\n    // 表格 <table>、Mermaid <svg> 图表的特性处理\n    if (tagName.sW(\"t\") || tagName.sW(\"s\")) {\n        container.c(_height_, ContentFolder_limit)\n            .c(_overflowX_, _auto_) // 可横向滚动\n            .c(_overflowY_, _hidden_);\n    }\n    // 非表格，非 Mermaid 图表的处理\n    else {\n        container.c(_height_, ContentFolder_limit)\n            .c(_overflowY_, _hidden_);\n    }\n\n    let //expander,\n        w = JS_mathCeil(JS_parseFloat(container.c(_width_)));\n\n    // 上一轮构建时没有生成展开操作区，则生成一个新的\n    // if (oldExpander === gUndefined) {\n    //     expander = ContentFolder_ui.clone();\n    //     container.af(expander);\n    // }\n    // // 直接复用上一轮构建时生成的展开操作区\n    // else\n    //     expander = oldExpander;\n\n    // 如果处理对象为表格，先隐藏表格行号，find 过滤器的内容与对应的 css 要同步更新\n    if (container.f(_table_).length > 0)\n        JQ_addClass(container.f(ContentFolder_rowNumFilter), _vTblRowNumHidden_);\n\n    // need removed:\n    // 动态生成按钮文本内容\n    // let btn = expander.f(_div_ + \">\" + _span_);\n    // btn.hm(btn.a(_title_) + ___ + V_ui_span(_, _, JS_mathRound((1 - ContentFolder_limit / tHeight) * 100) + \"%\"));\n\n    // 重新适配展开操作区尺寸\n    let tW = JS_mathCeil(JS_parseFloat(target.c(_width_)));//JS_parseInt(target.c(s_Width));\n    if (w > tW) {\n        w = tW;// + JS_parseInt(target.c(s_BorderWidth)) * 2;\n        // 表格、mermarid 插图与比容器宽度小时，右下角不是圆角，须进行适配调整\n        // need removed:\n        // expander.c(_borderBottomRightRadius_, 0);\n    }\n    // need removed:\n    // expander.a(_dataContentType_, tagName);\n    // expander.c(_marginLeft_, container.c(_marginLeft_))\n    //     .c(_width_, w + \"px\");\n    container.a(\"data-ex-label\", [\n        \"展开全部\\n▼\",\n        \"Expand All\\n▼\"\n    ][V_lang_id]);\n    let newClass = \".\" + _vCaptionContainer_ + \".\" + _expander_\n        + \".id-\" + i + \"::before{\" + _width_ + \":\" + w + \"px;}\";\n    gStyle.insertRule(newClass, 0);\n    // JQ_addClass(container, _expander_);\n    // JQ_addClass(container, \"id-\" + i);\n    JQ_addClass(container, _expander_ + \" id-\" + i);\n\n    container.a(_dataContentType_, tagName);\n    // need removed:\n    // 设置为可视\n    // expander.c(_visibility_, _visible_);\n\n    // 展开按钮 click 事件处理\n    // need removed:\n    // container.uC().ck(function () {\n    container.on(_mouseDown_, function () {\n    // need removed:\n    // expander.ch(\".v-btn\").uC().ck(function () {\n        ContentFolder_expand($(this));\n    });\n\n    // need removed:\n    // 展开按钮 hover 事件处理\n    // V_ui_bindHover(expander.ch(\".v-btn\"));\n}\n\n/**\n * 展开被折叠的内容\n * @param container 点击的按钮所在父元素\n */\n// need removed:\n// function ContentFolder_expand(expander) {\nfunction ContentFolder_expand(container) {\n    if (!ContentFolder_enabled)\n        return;\n\n    let //container = expander.pr(),\n        // tagName = expander.a(_dataContentType_);\n        tagName = container.a(_dataContentType_);\n\n    // 移除内容展开操作区\n    JQ_removeClass(container, _expander_);\n    // need removed:\n    // JQ_remove(expander);\n\n    // 展开对应的内容\n    container.a(_dataContentFolded_, _false_);\n    container.a(_dataContentExpanded_, _true_);\n    container.c(_height_, _auto_);\n    // 针对表格 <table>、Mermaid <svg> 图表增加滚动属性\n    if (tagName.sW(\"t\") || tagName.sW(\"s\"))\n        container.c(_overflow_, _auto_);\n    // 非表格、非 Mermaid 图表的处理\n    else\n        container.c(_overflowY_, \"initial\");\n\n    // 如果处理对象为表格，恢复显示表格行号，find 过滤器的的内容与对应的 css 要同步更新\n    if (container.f(_table_).length > 0)\n        JQ_removeClass(container.f(ContentFolder_rowNumFilter), _vTblRowNumHidden_);\n}\n\n// ==================== 工具提示信息类 ==================== //\n\nlet ToolTips_ui = gUndefined,\n    ToolTips_continueShow = gFalse, // 是否激活持续显示\n    ToolTips_lastStyle = gUndefined,\n    ToolTips_aniTimer = null,\n    ToolTips_continueTimer = null,\n    ToolTips_delay = 2000;\n\n/**\n * 构造函数\n */\nfunction ToolTips_init() {\n    ToolTips_ui = $(\".\" + _vToolTips_);\n\n    V_ui_addAnimate(ToolTips_ui, _opacity_);\n}\n\n/**\n * 绑定操作相关事件\n * @param source 对象\n * @param align 对齐方式，auto/center/right\n */\nfunction ToolTips_bind(source, align = _auto_) {\n    V_ui_bindHover(source);\n    source.hover(function () {\n        ToolTips_show(source, align);\n    }, function () {\n        ToolTips_hide();\n    });\n}\n\n/**\n * 显示工具提示信息\n *\n * @param follow 提示的目标元素\n * @param align 强制指定工具提示的水平对齐方式（auto/left/center/right）\n * @param classValue 指定微调的样式\n */\nfunction ToolTips_show(follow, align, classValue) {\n    if (env.device.mobile)\n        return;\n\n    ToolTips_ui.hm(follow.a(_dataTips_));\n\n    // 强制取消最后一次延时显示的处理\n    clearTimeout(ToolTips_aniTimer);\n    ToolTips_aniTimer = null;\n    // 强制取消隐藏后指定时间内取消持续显示的处理\n    clearTimeout(ToolTips_continueTimer);\n    ToolTips_continueTimer = null;\n\n    ToolTips_lastStyle = classValue;\n\n    const space = 10,\n        tipsW = ToolTips_ui.iW(),\n        tipsH = ToolTips_ui.iH(),\n        ww = $(window).w() - space,\n        wh = $(window).h() - space;\n    let left = follow.oL(),\n        top = follow.oT() - $(document).scrollTop(),\n        width = follow.iW(),\n        height = follow.iH();\n\n    JQ_removeClass(ToolTips_ui, _top_ + ___ + _bottom_ + ___ + _center_ + ___ + _right_);\n\n    // 指定对齐方式或提示超出屏幕\n    if (align !== _auto_ || (left + tipsW) > ww) {\n        // align: right\n        JQ_addClass(ToolTips_ui, _right_);\n        left = follow.oL() - tipsW + width;\n        // 右侧顶边，则微调\n        if (left + tipsW >= ww)\n            left = left - space;\n\n        // align: center\n        if (align === _center_) {\n            JQ_removeClass(ToolTips_ui, _right_);\n            JQ_addClass(ToolTips_ui, _center_);\n            left = follow.oL() + (width - tipsW) / 2;\n        }\n    }\n    // 左侧顶边，则微调\n    if (left <= 0)\n        left = space;\n\n    if (ToolTips_lastStyle !== gUndefined)\n        JQ_addClass(ToolTips_ui, ToolTips_lastStyle);\n\n    if (top + height + tipsH + space < wh) {\n        JQ_addClass(ToolTips_ui, _top_);\n        top = top + height + space;\n    }\n    else {\n        JQ_addClass(ToolTips_ui, _bottom_);\n        top = top - tipsH - space;\n    }\n    ToolTips_ui.c(_left_, left).c(_top_, top);\n\n    // 延时，或立即显示提示\n    let waitTime = (ToolTips_continueShow) ? 0 : ToolTips_delay;\n    ToolTips_aniTimer = setTimeout(function () {\n        ToolTips_continueShow = gTrue; // 一旦显示后，激活持续显示\n        V_ui_show(ToolTips_ui);\n\n    }, waitTime);\n}\n\n/**\n * 隐藏工具提示\n */\nfunction ToolTips_hide() {\n    // 隐藏后在指定时间内取消持续显示\n    clearTimeout(ToolTips_continueTimer);\n    ToolTips_continueTimer = setTimeout(function () {\n        ToolTips_continueShow = gFalse;\n    }, ToolTips_delay);\n\n    // V_doc_scroll_unfreeze();\n    // 强制取消最后一次延时显示的处理\n    clearTimeout(ToolTips_aniTimer);\n    ToolTips_aniTimer = null;\n    V_ui_hide(ToolTips_ui);\n\n    if (ToolTips_lastStyle !== gUndefined)\n        JQ_removeClass(ToolTips_ui, ToolTips_lastStyle);\n}\n\n// ==================== 弹层提示信息类 ==================== //\n\n/**\n * 构造函数\n * @param mask 遮罩对象\n */\nfunction InfoTips(mask) {\n    let T = this;\n    T.ui = $(\".\" + _vInfoTips_);\n    T.aniTimer = null;\n\n    // 绑定点击事件\n    T.ui.uC().ck = function () {\n        T.hide();\n    }\n\n    // 遮罩\n    T.mask = mask;\n    T.mask.bindPartner(this, T.ui);\n\n    /**\n     * 显示通知信息\n     * @param message 提示内容\n     * @param delay 延时指定 ms 时间后自动关闭提示\n     * @param mask 是否显示遮罩\n     * @param target 事件源，不为空时则跟随显示\n     */\n    T.inform = function (message, delay, mask, target) {\n        T.show(message, delay, mask, \"inform\", target);\n    }\n\n    /**\n     * 显示泡泡信息\n     * @param message 提示内容\n     * @param delay 延时指定 ms 时间后自动关闭提示\n     * @param mask 是否显示遮罩\n     * @param target 事件源，不为空时则跟随显示\n     */\n    T.bubble = function (message, delay, mask, target) {\n        T.show(message, delay, mask, _bubble_, target);\n    }\n\n    /**\n     * 显示错误信息\n     * @param message 提示内容\n     * @param delay 延时指定 ms 时间后自动关闭提示\n     * @param mask 是否显示遮罩\n     * @param target 事件源，不为空时则跟随显示\n     */\n    T.error = function (message, delay, mask, target) {\n        T.show(message, delay, mask, _error_, target);\n    }\n\n    /**\n     * 是否已显示\n     * @returns boolean\n     */\n    T.isShowed = function () {\n        return T.ui.c(_display_) !== _none_;\n    }\n\n    /**\n     * 显示通知提示信息\n     * @param message 提示内容\n     * @param delay 延时指定 ms 时间后自动关闭提示\n     * @param mask 是否显示遮罩\n     * @param type 类型。info/error\n     * @param target 事件源，不为空时则跟随显示\n     */\n    T.show = function (message, delay, mask, type, target) {\n        clearTimeout(T.aniTimer);\n        T.aniTimer = null;\n\n        T.ui.hm(message);\n\n        // 先重置为默认值\n        JQ_removeClass(T.ui, _error_);\n        JQ_removeClass(T.ui, _bubble_);\n        T.ui.c(_width_, _)\n            .c(_height_, _)\n            .c(_right_, _auto_)\n            .c(_bottom_, _auto_)\n            .c(_borderRadius_, _varVRB_);\n        if (type === _error_)\n            JQ_addClass(T.ui, _error_);\n        else if (type === _bubble_)\n            JQ_addClass(T.ui, _bubble_);\n\n        // 跟随事件源显示\n        if (target !== gUndefined) {\n            V_ui_moveToTarget(T.ui, target);\n        }\n        // 居中显示\n        else\n            V_ui_moveToCenter(T.ui);\n\n        T.ui.show();\n\n        // 延时后自动关闭\n        if (delay != null) {\n            T.aniTimer = setTimeout(function () {\n                    T.hide();\n                }, delay);\n        }\n\n        // 显示遮罩\n        if (mask)\n            T.mask.show();\n    }\n\n    /**\n     * 隐藏弹窗信息\n     */\n    T.hide = function () {\n        T.ui.hide();\n        T.mask.hide();\n    }\n\n    /**\n     * 处理热键操作\n     * @param code 非功能键键\n     * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n     * @param event 事件对象\n     */\n    T.disposeHotkey = function (code, combKeys, event) {\n        if (T.ui.isHidden())\n            return;\n\n        let handled = false;\n        switch (code) {\n            case 27: // ESC\n                if (T.isShowed()) {\n                    T.hide();\n                    handled = true;\n                }\n                break;\n        }\n\n        // 如果事件已处理，则禁止双重操作\n        if (handled)\n            event.preventDefault();\n    }\n}\n\n// ==================== 底部提示信息类 ==================== //\n\n/**\n * 构造函数\n * @param sourceName 配套的源对象标识\n */\nfunction BottomTips(sourceName) {\n    let T = this;\n    VOM_doc().af(\n        V_ui_div(_, \"v-bottom-tips \" + sourceName,\n            V_ui_div(_, _)));\n\n    T.ui = $(\".v-bottom-tips.\" + sourceName);\n\n    /**\n     * 显示底部提示栏\n     * @param message 提示内容\n     */\n    T.show = function (message) {\n        T.ui.ch(\"div\").hm(message);\n        T.ui.show();\n    }\n\n    /**\n     * 隐藏底部提示栏\n     */\n    T.hide = function () {\n        T.ui.hide();\n    }\n}\n\n// ==================== 文档更多内容遮罩栏 ==================== //\n\nlet MoreDocContent_ui_before = gUndefined,\n    MoreDocContent_ui_after = gUndefined;\n/**\n * 构造函数\n */\nfunction MoreDocContent_init() {\n    MoreDocContent_ui_before = $(\".\" + _vMoreDocContent_ + \"before\");\n    MoreDocContent_ui_after = $(\".\" + _vMoreDocContent_ + \"after\")\n}\n\n/**\n * 刷新显示更多内容遮罩栏\n * @param scrollTop 文档当前滚动位置，如果为空则自动获取\n */\nfunction MoreDocContent_refresh(scrollTop) {\n    if (scrollTop === gUndefined)\n        scrollTop = $(document).scrollTop();\n\n    // before UI\n    if (scrollTop > 20) {\n        if (MoreDocContent_ui_before.c(_display_) === _none_)\n            MoreDocContent_ui_before.show();\n    }\n    else\n        MoreDocContent_ui_before.hide();\n\n    // after UI\n    if (scrollTop + $(window).h() > ($(document).h() - 20))\n        MoreDocContent_ui_after.hide();\n    else {\n        if (MoreDocContent_ui_after.c(_display_) === _none_)\n            MoreDocContent_ui_after.show();\n    }\n}\n\n/**\n * 隐藏更多内容遮罩栏\n */\nfunction MoreDocContent_hideAfter() {\n    MoreDocContent_ui_after.hide();\n}\n\n// ==================== 题注生成器类 ==================== //\n\nlet CaptionGenerator_spliter = \". \",\n    CaptionGenerator_autoContent = gFalse; // 自动根据内索引对象内容生成题注\n\n/**\n * 生成题注\n * @param target 需要添加题注的对象\n * @param tagName HTML 标签名称\n */\nfunction CaptionGenerator_actionForTextContent(target, tagName) {\n    let captionPrefix = [\n            \"表 \",\n            \"Table \"\n        ][V_lang_id] + V_doc_counter_table,\n        caption = _,\n        indexObj = gUndefined,\n        anchor = _,\n        dataForSearch = _;\n\n    // 代码块 <pre>\n    if (tagName.sW(\"pr\")) {\n        indexObj = iNavCenter.codeblock;\n        captionPrefix = [\n            \"代码块 \",\n            \"Code Block \"\n        ][V_lang_id] + V_doc_counter_codeblock;\n    }\n    // 表格 <table>\n    else if (tagName.sW(\"t\")) {\n        indexObj = iNavCenter.table;\n    }\n\n    // 尝试获得带题注语法的内容\n    let fcSet = CaptionGenerator_getCaptions(target.p().pr(), tagName);\n    let fc = fcSet[0], // 第 1 题注\n        fc2 = fcSet[1]; // 第 2 题注\n    captionPrefix = V_ui_span(_, _, captionPrefix + CaptionGenerator_spliter);\n\n    // 无指定的题注文本，同时开启了自动生成题注，则取其部分内容作为自动题注内容\n    if (fc == null || fc.x().length === 0) {\n        fc = _;\n        if (CaptionGenerator_autoContent) {\n            if (tagName.sW(\"pr\")) // 代码块\n                fc = target.f(\".\" + _vCodeMirrorLine_).t().x();\n            else if (tagName.sW(\"t\")) // 表格，并过滤掉列格式相关语法标识内容\n                fc = target.f(\"td\").t().x().r(/(==|\\[\\s]|\\.\\.|<<|\\^\\^|##\\s)/ig, _);\n            // 省略中间内容处理\n            fc = V_util_ellipsisText(fc.x(), 20);\n        }\n    }\n    caption = captionPrefix + fc;\n\n    // 代码块 <pre>\n    if (tagName.sW(\"pr\")) {\n        anchor = _vkIdCodeblock_ + V_doc_counter_codeblock;\n        target.wrap(V_ui_div(anchor, \"v-caption pr\"));\n        dataForSearch += target.f(\".\" + _vCodeMirrorLine_).t();\n    }\n    // 表格 <table>\n    else if (tagName.sW(\"t\")) {\n        anchor = _vkIdTbl_ + V_doc_counter_table;\n        target.wrap(V_ui_div(anchor, \"v-caption\"));\n        dataForSearch += target.t();\n    }\n\n    // 添加第 1 题注\n    target.bf(V_ui_figcaption(_vCap1_.xD(), _, caption));\n    // 添加第 2 题注\n    let has2Captions = (fc2 != null && fc2.length > 0);\n    if (has2Captions) {\n        target.af(V_ui_figcaption(_vCap2_.xD(), _, captionPrefix + fc2));\n        target.p().a(_dataCaptionCount_, \"2\");\n    }\n    // ----------------------------------------\n    // 添加到对应的内容索引\n    if (indexObj !== gUndefined) {\n        dataForSearch += has2Captions ? fc2 : _;\n        $(\"#\" + anchor).a(_dataTitle_, caption);\n        indexObj.add(caption, anchor, dataForSearch);\n    }\n}\n\n/**\n * 针对插图（img、mermaid）生成题注\n * @param target 需要添加题注的对象\n * @param tagName 添加题注的目标对象的 HTML 标签名称\n */\nfunction CaptionGenerator_actionForMediaContent(target, tagName) {\n    let fc = target.a(_alt_), // 默认尝试获取图片的 alt 内容作为题注内容\n        fc2 = target.a(_title_), // 默认尝试获得图片的 title 作为第二题注内容\n        indexObj = iNavCenter.figure,\n        anchor = _,\n        dataForSearch = _;\n\n    let fcSet = null;\n    // 若图片 alt 无内容，则尝试获取前面段落（如<p>、<h6>）作为第 1、2 题注的内容\n    if (fc === gUndefined || fc.x().length === 0) {\n        fcSet = CaptionGenerator_getCaptions(target.p().pr(), tagName);\n        if (fcSet[0] != null)\n            fc = fcSet[0];\n        if (fcSet[1] != null)\n            fc2 = fcSet[1];\n    }\n\n    // 插图（img、mermaid）题注前缀\n    let caption = _,\n        captionPrefix = [\n        \"图 \",\n        \"Figure \"\n    ][V_lang_id] + V_doc_counter_figure;\n    // 音频题注 audio\n    if (tagName.sW(\"a\")) {\n        indexObj = iNavCenter.media;\n        captionPrefix = [\n            \"音频 \",\n            \"Audio \"\n        ][V_lang_id] + V_doc_counter_audio;\n    }\n    // 视频频题注 video\n    else if (tagName.sW(\"v\")) {\n        indexObj = iNavCenter.media;\n        captionPrefix = [\n            \"视频 \",\n            \"Video \"\n        ][V_lang_id] + V_doc_counter_video;\n    }\n\n    // 无指定的题注文本，同时开启了自动生成题注，则取其部分内容作为自动题注内容\n    if (fc == null || fc.x().length === 0) {\n        fc = _;\n        if (CaptionGenerator_autoContent) {\n            if (tagName.sW(\"s\")) // Mermaid SVG\n                fc = target.f(\"g\").t().x();\n            // 省略中间内容处理\n            fc = V_util_ellipsisText(fc.x(), 20);\n        }\n    }\n    captionPrefix = V_ui_span(_, _, captionPrefix + CaptionGenerator_spliter);\n    caption = captionPrefix + fc;\n\n    // 为插图（mermaid）增加题注 <svg>\n    if (tagName.sW(\"s\")) {\n        anchor = _vkIdFig_ + V_doc_counter_figure;\n        // 针对 Mermaid 插图，添加额外的类，用于打印前后处理时直接定位 Mermaid 插图的题注\n        target.wrap(V_ui_div2(anchor, \"v-caption mermaid\", V_attr(_dataFigType_, tagName)));\n        dataForSearch += target.f(_div_ + \",\" + _span_ + \",tspan,text\").t();\n    }\n    // 为插图（img）增加题注 <img>\n    else if (tagName.sW(\"i\")) {\n        anchor = _vkIdFig_ + V_doc_counter_figure;\n        target.wrap(V_ui_div2(anchor, \"v-caption\", V_attr(_dataFigType_ , tagName)));\n        dataForSearch += target.a(_src_);\n    }\n    // 为音频增加题注 audio\n    else if (tagName.sW(\"a\")) {\n        anchor = _vkIdAudio_ + V_doc_counter_audio;\n        target.wrap(V_ui_div2(anchor, \"v-caption\", V_attr(_dataFigType_, tagName)));\n        dataForSearch += target.a(_src_);\n    }\n    // 为视频增加题注 video\n    else if (tagName.sW(\"v\")) {\n        anchor = \"vk-id-video\" + V_doc_counter_video;\n        target.wrap(V_ui_div2(anchor, \"v-caption\", V_attr(_dataFigType_, tagName)));\n    }\n\n    // 生成第 1 题注\n    target.bf(V_ui_figcaption(_vCap1_.xD(), _, caption));\n    // 生成第 2 题注\n    let has2Captions = (fc !== gUndefined && fc2 != null && fc2.length > 0);\n    if (has2Captions) {\n        target.af(V_ui_figcaption(_vCap2_.xD(), _, captionPrefix + fc2));\n        target.p().a(_dataCaptionCount_, \"2\");\n    }\n    // ----------------------------------------\n    // 添加到对应的内容索引\n    if (indexObj !== gUndefined) {\n        dataForSearch += has2Captions ? fc2 : _;\n        $(\"#\" + anchor).a(_dataTitle_, caption);\n        indexObj.add(caption, anchor, dataForSearch);\n    }\n\n    // ----------------------------------------\n    // 修正在 SVG 插图套上题注后的自适应尺寸 <svg>\n    if (tagName.sW(\"s\")) {\n        if (target.a(_height_) !== _none_ || target.c(_height_) !== _none_) { // 有指定高度的\n            JQ_removeAttr(target, _height_);\n            target.c(_height_, _);\n        }\n\n        // 调整SVG插图，尽量按其真实插图的大小显示，超出浏览器宽度的，则左右滚动浏览\n        let style = gUndefined;\n        if (target.c(_maxWidth_) !== _none_) // CSS 中指定了最大宽度\n            target.p().c(_width_, target.c(_maxWidth_));\n        else if ((style = target.a(_style_)) !== gUndefined && style.i(_width_) > -1) // 通过 style 指定了宽度\n            target.p().c(_width_, target.c(_width_));\n        else if (target.a(_width_) !== _100pc_) // 指定了 width 属性，且不为 100%\n            target.p().c(_width_, JS_parseInt(target.a(_width_)) + 4); // 4 为两边 border 的宽度\n        else if (target.a(_viewBox_) !== _none_) // 指定 width 为 100% 的情况\n            target.p().c(_width_, target.a(_viewBox_).sp(___)[2] + \"px\");\n        else\n            target.p().c(_width_, _100pc_);\n    }\n}\n\n/**\n * 返回插图、表格、代码块上方的题注\n * @param caption 潜在的题注内容对象\n * @param tagName 添加题注的目标对象的 HTML 标签名称\n */\nfunction CaptionGenerator_getCaptions(caption, tagName) {\n    let fcSet = [], // 题注集\n        captionTagName = V_util_getTagName(caption),\n        hideCaptionSrc = gFalse; // 是否隐藏题注源\n\n    let capResult = CaptionGenerator_parseSyntax(caption);\n    // 双题注\n    if (capResult[1] === 2) {\n        fcSet = __getCaptionSet(caption, 2, capResult[0]);\n        hideCaptionSrc = gTrue;\n    }\n    // 单题注\n    else if (capResult[1] === 1) {\n        fcSet = __getCaptionSet(caption, 1, capResult[0]);\n        fcSet[1] = null;\n        hideCaptionSrc = gTrue;\n    }\n    // 无题注语法，但由有 h1-h6 引导\n    else if (captionTagName.sW(\"h\")) {\n        fcSet[0] = caption.t().x();\n        fcSet[1] = null;\n        // 不能直接隐藏，会影响页内链接跳转至该位置\n        // 设置为不可见，并调整位置布局实现隐藏效果，同时不影响跳转\n        if (captionTagName === _h6_) { // 只针对 h6，h1-h5不隐藏\n           caption.c(_visibility_, _hidden_)\n                .c(_position_, _absolute_);\n        }\n    }\n\n    // 若成功匹配出题注，且内容不是 <img> 则隐藏原始内容\n    if (hideCaptionSrc && (!tagName.sW(\"i\") || capResult[0] === 200)) {\n        JQ_remove(caption);\n    }\n    return fcSet;\n\n\n\n    /**\n     * 返回题注数据数组\n     * @param target 题注数据的目标对象\n     * @param count 题注数量\n     * @param type 题注语法类型，100：标准，200：简化语法\n     * @returns [] [0] 为第 1 个题注，[1] 为第 2 个题注\n     */\n    function __getCaptionSet(target, count, type) {\n        let fcSet = [];\n        // 标准语法\n        if (type === 100) {\n            let text = target.t().x();\n            fcSet[0] = text.s(2, text.i(\"]\", 2));\n            if (count === 2) // \"▲ \" +\n                fcSet[1] = text.s(text.i(']\"', 2) + 2, text.length - 1);\n        }\n        // 简化语法\n        else if (type === 200) {\n            if (count === 2) // \"▲ \" +\n                fcSet[1] = target.f(_mark_ + \">em\").t().x();\n            JQ_remove(target.f(_mark_ + \">em\"));\n            fcSet[0] = target.t().x();\n        }\n        return fcSet;\n    }\n}\n\n/**\n * 解析并返回匹配的题注数量\n * @param target 题注语法内容对象\n * @returns [] [0] 语法类型, [1] 题注数量\n */\nfunction CaptionGenerator_parseSyntax(target) {\n    let reg2 = /^!\\[.+]\".+\"$/, // 有 2 个题注\n        reg1 = /^!\\[.+]$/, // 只有 1 个题注\n        html = _;\n    // 标准语法，双题注\n    if (reg2.test(target.t().x()))\n        return [100, 2]; // 100: 标准语法\n    // 标准语法，单题注\n    else if (reg1.test(target.t().x()))\n        return [100, 1]; // 100: 标准语法\n    // 简化的新语法\n    else if ((html = target.hm()) !== gUndefined) {\n        if (html.sW(\"<em><mar\") && html.eW(\"/em>\")) {\n            if (html.i(\"/em></mark>\") === -1)\n                return [200, 1]; // 200: 简化语法\n            else\n                return [200, 2]; // 200: 简化语法\n        }\n    }\n    return [0, 0]; // 无题注\n}\n// ==================== 代码块增强类 ==================== //\n\n/**\n * 初始化代码块\n */\nfunction ExtCodeBlock_init() {\n    // 获取自动生成题注并编号的行数下限，大于该行数的代码才会自动生成题注和编号\n    let lmc = V_util_getParamVal(\"lmc\");\n    lmc = (lmc === gUndefined ? 1 : JS_parseInt(lmc));\n    // 遍历所有代码块\n    $(\".\" + _vFences_).e(function () {\n        let _t = $(this);\n\n        // 绑定内容助手\n        ContentAssistor_bind(_t, _codeblock_);\n\n        // 折叠长代码块\n        ContentFolder_add(_t, _codeblock_);\n\n        // 生成代码块插图题注（行数 > 1 的才进行处理）\n        if (_t.f(\".\" + _vCodeMirrorLine_).length > lmc) {\n            V_doc_counter_codeblock++;\n            // 外套一个 <figcaption> 标签，用于内容折叠时与插图、表格的 DOM 结构一致\n            _t.wrap(V_ui_figcaption(_vCaptionContainer_, V_attr(_dataContainer_, _pre_)));\n\n            // 先根据题注语法生成题注\n            CaptionGenerator_actionForTextContent(_t, _pre_);\n        }\n        else {\n            // 若有指定题注内容，则删除\n            if (CaptionGenerator_parseSyntax(_t.pr())[0] > 0)\n                JQ_remove(_t.pr());\n        }\n    });\n}\n\n/**\n * 复制代码块内容\n * @param source 内容源对象\n * @param event 事件对象\n */\nfunction ExtCodeBlock_copyContent(source, event) {\n    let content = _,\n        lines = ContentAssistor_lastHover.ch().f(\".CodeMirror-code .\" + _vCodeMirrorLine_),\n        lineNum = 0,\n        lineCount = lines.length,\n        // 用于清除或转换特殊字符\n        badChars = [\n            \"%E2%80%8B\", // ZERO WIDTH SPACE \\u200b\n            \"%C2%A0\", // NO-BREAK SPACE \\u00A0\n            \"%0A\" // NO-BREAK SPACE \\u0A\n        ],\n        goodChars = [\n            _, // 替换 ZERO WIDTH SPACE\n            \"%20\", // for NO-BREAK SPACE\n            _ // for NO-BREAK SPACE\n        ];\n    // 逐行读取代码\n    lines.e(function () {\n        lineNum++;\n        let encodeText = encodeURI($(this).t());\n        // 清除或转换特殊字符\n        for (let i = 0; i < badChars.length; i++) {\n            if (encodeText.i(badChars[i]) > -1)\n                encodeText = encodeText.rA(badChars[i], goodChars[i]);\n        }\n        content += JS_decodeURI(encodeText) + (lineNum < lineCount ? \"\\n\" : _);\n    });\n\n    // 复制目标内容\n    if (ContentAssistor_copyAsMarkdown) {\n        let lang = _;\n        if (ContentAssistor_lastHover !== gUndefined)\n            lang = ContentAssistor_lastHover.a(_lang_);\n        content = \"```\" + (lang !== gUndefined ? lang : _) + \"\\n\" + content + \"\\n```\";\n    }\n    Copyer_action(source, content, gTrue);\n}\n\n// ==================== 复制类 ==================== //\n\nlet Copyer_lastActionTime = 0,\n    Copyer_processing = gFalse,\n    Copyer_copyModeTimer = null;\n\n/**\n * 执行复制\n * @param source 触发复制的对象\n * @param content 要复制的内容\n * @param supportMarkdown 是否支持复制为 Markdown\n * @param successCallback 复制成功后的回调函数\n * @param errorCallback 复制失败后的回调函数\n */\nfunction Copyer_action(source, content, supportMarkdown, successCallback, errorCallback) {\n    // 控制两次复制操作的时间间隔（同时也是解决嵌套情况下的复制失效问题）\n    let ts = new Date().getTime();\n    if (Copyer_processing || ts - Copyer_lastActionTime < 200)\n        return;\n    Copyer_lastActionTime = ts;\n    Copyer_processing = gTrue;\n\n    // 将要复制的内容赋予给 clipboard.js 指定的对象属性 data-clipboard-text\n    let targetName = \".\" + source.a(_class_).rA(___, \".\");\n    DEBUG(targetName);\n    $(targetName).a(_dataClipboardText_, content);\n    DEBUG($(targetName).a(_dataClipboardText_));\n\n    // 创建 clipboard.js 对象用于实现复制\n    let clipboard = new ClipboardJS(targetName);\n\n    // 复制成功事件\n    clipboard.on(\"success\", function(event) {\n        // 显示复制成功提示\n        let note = ContentAssistor_copyAsMarkdown ? \" (\" + V_ui_strong(\"as Markdown\") + \")\" : _,\n            tips = supportMarkdown ? [\n                \"<br><sub>( 再次点击可复制为 Markdown )</sub>\",\n                \"<br><sub>( Click again to Copy as Markdown )</sub>\"\n                ][V_lang_id] : _;\n        iInfoTips.bubble([\n                \"已复制\",\n                \"Copied\"\n            ][V_lang_id] + (ContentAssistor_copyAsMarkdown ? _ : tips)\n            + note, 2000, gFalse, source);\n\n        event.clearSelection();\n\n        typeof(successCallback) === _function_ && successCallback();\n\n        // 销毁处理已有对象，避免多次监听\n        clipboard.destroy();\n\n        // 同一复制源，限时内第 2 次点击的处理（复制为 Markdown）\n        if (supportMarkdown) {\n            // 切换复制模式、光标、内容助手的复制图标\n            if (Copyer_copyModeTimer != null) {\n                clearTimeout(Copyer_copyModeTimer);\n                Copyer_copyModeTimer = null;\n            }\n            ContentAssistor_toggleCopyMode(gTrue);\n            // 限时恢复为普通复制模式\n            Copyer_copyModeTimer = setTimeout(function () {\n                // 切换复制模式、光标、内容助手的复制图标\n                ContentAssistor_toggleCopyMode(gFalse);\n                Copyer_copyModeTimer = null;\n            }, 2000);\n        }\n\n        Copyer_processing = gFalse;\n    });\n    // 复制失败事件\n    clipboard.on(_error_, function () {\n        // 显示复制失败提示\n        iInfoTips.error(V_ui_strong([\n            \"非常抱歉～暂不支持在该浏览器中复制\",\n            \"I'm very sorry~ I don't support copying in this browser\"\n        ][V_lang_id]), 3000, gFalse, source);\n\n        typeof(errorCallback) === _function_ && errorCallback();\n\n        // 销毁处理已有对象，避免多次监听\n        clipboard.destroy();\n        Copyer_processing = gFalse;\n    });\n}\n\n// ==================== 章节目录自动编号增强类 ==================== //\n\nlet ChpAutoNum_counter = [],\n    ChpAutoNum_lastLevel = 1,\n    // 自定义的自动编号格式模板（可只指定任意 h1~h6）\n    ChpAutoNum_tpl = \"h1{{###. }},h2{{### }},h3{{### }},h4{{### }},h5{{### }},h6{{#none# }}\",\n    // ChpAutoNum_tpl = \"h1{{###. }},h2{{### }},h3{{### }},h4{{### }},h5{{### }},h6{{❖ ### }}\",\n    // 默认的自动编号格式模板\n    ChpAutoNum_tplSet = ChpAutoNum_tpl.sp(\",\"),\n    ChpAutoNum_tpl_syntax = /h([1-6]){{(.*)(#(0*)(#|zh|ZH|alpha|ALPHA|roman|ROMAN|none)(-min|-sup)?#)(.*)}}/,\n    ChpAutoNum_tpl_leftPad = [_, _, _, _, _, _],\n    ChpAutoNum_tpl_format = [\"#\", \"#\", \"#\", \"#\", \"#\", \"#\"], // 编号格式\n    ChpAutoNum_tpl_formatOpt = [0, 0, 0, 0, 0, 0], // 特殊格式选项\n    ChpAutoNum_tpl_prefix = [_, _, _, _, _, _], // 前缀\n    ChpAutoNum_tpl_suffix = [_, _, _, _, _, _]; // 后缀\n\n// 特殊格式选项\nconst CHPAUTONUM_TPL_FORMAT_OPT_NONE = 0, // 无\n    CHPAUTONUM_TPL_FORMAT_OPT_MIN = 1, // -min\n    CHPAUTONUM_TPL_FORMAT_OPT_SUP = 2; // -sup\n\n/**\n * 初始化章节目录自动编号\n */\nfunction ChpAutoNum_initToc() {\n    let metaTpl = V_util_getMetaByName(\"vlook-chp-autonum\");\n    // 没有目录大纲，或指定关闭自动编号（同时没有指定自动编号格式模板）则跳过\n    if (gTocContent.isEmpty()\n        || (V_util_getVarVal(\"--v-chp-auto-num\").x() === _off_ && metaTpl === gUndefined))\n        return;\n\n    // 重置自动编号格式模板\n    ChpAutoNum_resetTpl(metaTpl);\n\n    // 对目录大纲内的章节条目进行处理\n    ChpAutoNum_resetCounter();\n    gTocContent.ch(\".\" + _mdTocItem_).e(function () {\n        let item = $(this);\n        __genNumContent(item,\n            ChpAutoNum_parseTocHeaderLevel(item.a(_class_)));\n    });\n\n    // 对文档中的章节条目进行处理（不包括封底）\n    ChpAutoNum_resetCounter();\n    VOM_doc().ch(\"h1:not(\" + _lastChild_ + \"), h2, h3, h4, h5\").e(function () {\n        let item = $(this);\n        __genNumContent(item,\n            ChpAutoNum_parseTocHeaderLevel(V_util_getTagName(item)));\n    });\n\n    // 对文档中的 h6 章节条目进行处理（不包括封面）\n    ChpAutoNum_resetCounter();\n    VOM_doc().ch(_h6_ + \":not(\" + _firstChild_ + \")\").e(function () {\n        let prefix = (ChpAutoNum_tpl_prefix[5]),\n            result;\n        if ((result = prefix.m(/var\\((--.+)\\)/)) != null)\n            prefix = V_util_getVarVal(result[1]).rA('\"', \"\");\n        $(this).a(_dataHeaderNum_, prefix);\n    });\n\n    // 生成章节编号\n    function __genNumContent(item, lv) {\n        let diff = lv - ChpAutoNum_lastLevel,\n            absDiff = Math.abs(diff);\n        // 当前层级比上一层级低\n        if (diff > 0) {\n            for (let i = 0; i < absDiff; i++)\n                ChpAutoNum_push();\n        }\n        // 当前层级比上一层级高\n        else if (diff < 0) {\n            for (let i = 0; i < absDiff; i++)\n                ChpAutoNum_pop();\n        }\n        // 当前层级与上一层级一样\n        else {\n            ChpAutoNum_counter[ChpAutoNum_lastLevel - 1]++;\n        }\n\n        item.a(_dataHeaderNum_, ChpAutoNum_toString());\n    }\n}\n\n/**\n * 进入下一级的处理\n */\nfunction ChpAutoNum_push() {\n    ChpAutoNum_lastLevel++;\n    ChpAutoNum_counter[ChpAutoNum_lastLevel - 1] = 1;\n}\n\n/**\n * 返回上一级的处理\n */\nfunction ChpAutoNum_pop() {\n    ChpAutoNum_counter[ChpAutoNum_lastLevel - 1] = 0;\n    ChpAutoNum_lastLevel--;\n    ChpAutoNum_counter[ChpAutoNum_lastLevel - 1]++;\n}\n\n/**\n * 重置自动编号计数器\n */\nfunction ChpAutoNum_resetCounter() {\n    ChpAutoNum_counter = [0, 0, 0, 0, 0, 0];\n    ChpAutoNum_lastLevel = 1;\n}\n\n/**\n * 根据自动编号格式模板重新重置 h1~h6 自动编号格式\n * @param metaTpl 格式模板内容\n */\nfunction ChpAutoNum_resetTpl(metaTpl) {\n    // 判断是否有指定自定义自动编号模板\n    if (metaTpl !== gUndefined)\n        ChpAutoNum_tpl = metaTpl;\n    // 用于测试效果\n    // ChpAutoNum_tpl = \"h1{{###. }},h2{{### }},h3{{### }},h4{{### }},h5{{### }}\";\n    // ChpAutoNum_tpl = \"h1{{第#zh#章 }}\";\n    // ChpAutoNum_tpl = \"h1{{第#zh#章 }},h2{{Chapter #alpha# }},h5{{### }},h4{{### - }},h3{{§ ###}}\";\n    // ChpAutoNum_tpl = \"h1{{第#zh#章 }},h2{{步骤 #000## }}\";\n    // ChpAutoNum_tpl = \"h6{{X ### }}\";\n    // ChpAutoNum_tpl = \"h1{{###. }},h2{{### }}\";\n    // ChpAutoNum_tpl = \"h1{{#none#}},h2{{#none#}},h3{{### }},h4{{### }},h5{{#ALPHA-min# }}\";\n\n    if (ChpAutoNum_tpl.length === 0)\n        return;\n\n    // 对自动编号格式模板内容进行处理\n    let tplSet = ChpAutoNum_tpl.sp(\",\"),\n        lv;\n    for (let i = 0; i < tplSet.length; i++) {\n        lv = tplSet[i].s(1, 2);\n        if (!isNaN(lv))\n            ChpAutoNum_tplSet[lv - 1] = tplSet[i].x();\n    }\n\n    // 解析自定义编码格式模板内容\n    __parseTplItem(0); // h1\n    __parseTplItem(1); // h2\n    __parseTplItem(2); // h3\n    __parseTplItem(3); // h4\n    __parseTplItem(4); // h5\n    __parseTplItem(5); // h6\n\n    // 解析模板条目\n    function __parseTplItem(lv) {\n        let result;\n        if ((result = ChpAutoNum_tplSet[lv].m(ChpAutoNum_tpl_syntax)) != null\n            && result.length === 8) {\n                ChpAutoNum_tpl_prefix[lv] = result[2];\n                ChpAutoNum_tpl_leftPad[lv] = result[4];\n                ChpAutoNum_tpl_format[lv] = result[5];\n                ChpAutoNum_tpl_formatOpt[lv] =\n                    (result[6] === \"-min\") ? CHPAUTONUM_TPL_FORMAT_OPT_MIN\n                    : (result[6] === \"-sup\") ? CHPAUTONUM_TPL_FORMAT_OPT_SUP\n                    : CHPAUTONUM_TPL_FORMAT_OPT_NONE;\n                ChpAutoNum_tpl_suffix[lv] = result[7];\n        }\n    }\n}\n\n/**\n * 将当前层级信息转换为字符串\n */\nfunction ChpAutoNum_toString() {\n    let lv = ChpAutoNum_lastLevel - 1,\n        superLv = (lv > 0) ? lv - 1 : -1,\n        opt = ChpAutoNum_tpl_formatOpt[lv],\n        numStr = _;\n\n    // 若指定了特殊的格式选项\n    if (opt > CHPAUTONUM_TPL_FORMAT_OPT_NONE) {\n        if (opt === CHPAUTONUM_TPL_FORMAT_OPT_SUP && superLv >= 0)\n            numStr =  __formatNum(superLv, opt) + \".\";\n        numStr += __formatNum(lv, opt);\n        // 结束并返回\n        return ChpAutoNum_tpl_prefix[lv]\n            + numStr\n            + ChpAutoNum_tpl_suffix[lv];\n    }\n\n    // 没有指定特殊的格式选项\n    let str = 0;\n    for (let i = 0; i < ChpAutoNum_lastLevel; i++) {\n        str = __formatNum(i, false);\n        numStr += str;\n        if (i < lv && str.length > 0)\n            numStr += \".\";\n    }\n\n    return ChpAutoNum_tpl_prefix[lv]\n        + numStr\n        + ChpAutoNum_tpl_suffix[lv];\n\n    /**\n     * 指定层级的编号进行格式化\n     * @param i 层级\n     * @param opt 特殊格式选项\n     */\n    function __formatNum(i, opt) {\n        let ns = _,\n            counter = ChpAutoNum_counter[i],\n            upperCase = (ChpAutoNum_tpl_format[i].s(0, 1).m(/[A-Z]/) != null),\n            format = ChpAutoNum_tpl_format[i].l();\n\n        // 十进制数字\n        if (format === \"#\")\n            ns += ChpAutoNum_leftPadForDecimal(counter, i);\n        // 中文数字\n        else if (format === \"zh\") {\n            ns += (ChpAutoNum_lastLevel === 1)\n                // h1\n                ? ChpAutoNum_decimalToZh(counter, upperCase)\n                // h2~h5\n                : ChpAutoNum_leftPadForDecimal(counter, i);\n        }\n        // 英文字母\n        else if (format === _alpha_) {\n            ns += (ChpAutoNum_lastLevel === 1 || opt > CHPAUTONUM_TPL_FORMAT_OPT_NONE)\n                // h1\n                ? ChpAutoNum_decimalToAlpha(counter, upperCase)\n                // h2~h5\n                : ChpAutoNum_leftPadForDecimal(counter, i);\n        }\n        // 罗马数字\n        else if (format === \"roman\") {\n            ns += (ChpAutoNum_lastLevel === 1 || opt > CHPAUTONUM_TPL_FORMAT_OPT_NONE)\n                // h1\n                ? ChpAutoNum_decimalToRoman(counter, upperCase)\n                // h2~h5\n                : ChpAutoNum_leftPadForDecimal(counter, i);\n        }\n        else if (format === _off_)\n            ns += _;\n        return ns;\n    }\n}\n\n/**\n * 解析 Typora 生成的目录大纲节点样式名称对应的目录层级（h1~h6）\n * @param value 包含 h1~h6 的标识内容，如：md-toc-h1、h1 等\n * @returns number 目录层级：1~6\n */\nfunction ChpAutoNum_parseTocHeaderLevel(value) {\n    let lv = value.m(/(h([1-5]))/)[2];\n    return isNaN(lv) ? 0 : JS_parseInt(lv);\n}\n\n/**\n * 左侧补 0\n * @param value 当前值\n * @param lv 级别\n * @returns\n */\nfunction ChpAutoNum_leftPadForDecimal(value, lv) {\n    let pad = ChpAutoNum_tpl_leftPad[lv].length,\n        gap = pad - value.toString().length,\n        padStr = _;\n    if (gap > 0) {\n        for (let i = 0; i < gap; i++)\n            padStr += \"0\";\n    }\n    return padStr + value;\n}\n\n// 算法参考：https://blog.csdn.net/lavendersue/article/details/81066091\nlet ChpAutoNum_zhNum = [\"零\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\", \"七\", \"八\", \"九\"], // 数字\n    ChpAutoNum_zhUnit = [_, \"十\", \"百\", \"千\", \"万\"]; // 单位，最大支持 99,999,999\n/**\n * 数字格式转换：十进制 to 中文\n * @param num 十进制数字\n * @param upperCase 是否使用大写\n */\nfunction ChpAutoNum_decimalToZh(num, upperCase) {\n    let overWan = Math.floor(num / 10000),\n        noWan = num % 10000;\n    if (noWan.toString().length < 4)\n        noWan = \"0\" + noWan;\n\n    let numeral = overWan ? __numToZh(overWan) + \"万\" + __numToZh(noWan) : __numToZh(num);\n    // 对于 10－19 的特殊处理\n    if (num >= 10 && num <= 19)\n        numeral = numeral.r(\"一十\", \"十\");\n    return upperCase ? __toZhUpperCase(numeral) : numeral;\n\n    // 阿拉伯数字转换为中文数字\n    function __numToZh(value) {\n        let strArr = value.toString().sp(_).reverse();\n        let newNum = _;\n        for (let i = 0; i < strArr.length; i++) {\n          newNum = (\n            (i === 0 && strArr[i] === 0) ? _\n            : (i > 0 && strArr[i] === 0 && strArr[i - 1] === 0 ? _\n            : ChpAutoNum_zhNum[strArr[i]] + (strArr[i] === 0 ? ChpAutoNum_zhUnit[0] : ChpAutoNum_zhUnit[i])\n            ))\n            + newNum;\n        }\n        return newNum;\n    }\n\n    // 将中文数字转换为大写\n    function __toZhUpperCase(value) {\n        return value.rA(/一/g, \"壹\")\n            .rA(/二/g, \"贰\")\n            .rA(/三/g, \"叁\")\n            .rA(/四/g, \"肆\")\n            .rA(/五/g, \"伍\")\n            .rA(/六/g, \"陆\")\n            .rA(/七/g, \"柒\")\n            .rA(/八/g, \"捌\")\n            .rA(/九/g, \"玖\")\n            .rA(/十/g, \"拾\")\n            .rA(/百/g, \"佰\")\n            .rA(/千/g, \"仟\");\n    }\n}\n\n/**\n * 数字格式转换：十进制 to 英文字母\n * @param value 十进制数字\n * @param upperCase 是否使用大写\n */\nfunction ChpAutoNum_decimalToAlpha(value, upperCase) {\n    let numeral = _;\n    while (value > 0) {\n        let m = value % 26\n        if (m === 0)\n            m = 26;\n        numeral = String.fromCharCode(64 + JS_parseInt(m)) + numeral;\n        value = (value - m) / 26;\n    }\n    return upperCase ? numeral : numeral.l();\n}\n\n// 罗马数字参考：https://baike.baidu.com/item/%E7%BD%97%E9%A9%AC%E6%95%B0%E5%AD%97/772296\n// 算法参考：https://www.mianshigee.com/note/detail/180314zvm/\nlet ChpAutoNum_romanNum = [\"M\", \"CM\", \"D\", \"CD\", \"C\", \"XC\", \"L\", \"XL\", \"X\", \"IX\", \"V\", \"IV\", \"I\"], // 罗马数字\n    ChpAutoNum_romanNumArea = [1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1]; // 进位区间\n/**\n * 数字格式转换：十进制 to 罗马\n * @param value 十进制数字\n * @param upperCase 是否使用大写\n */\nfunction ChpAutoNum_decimalToRoman(value, upperCase) {\n    if (value <= 0 || value >= 4000)\n       return value;\n    let numeral = _;\n    for (let i = 0; i < ChpAutoNum_romanNum.length; i++) {\n       while (value >= ChpAutoNum_romanNumArea[i]) {\n          value -= ChpAutoNum_romanNumArea[i];\n          numeral += ChpAutoNum_romanNum[i];\n       }\n    }\n    return upperCase ? numeral : numeral.l();\n}\n\n// ==================== 引用块增强类 ==================== //\n\nlet ExtQuote_columnsGroupCount = 0,\n    ExtQuote_processingUCH = gFalse,\n    ExtQuote_quoteToRainbow = gTrue;\n\n/**\n * 初始化引用块以实现折叠支持\n */\nfunction ExtQuote_init() {\n    // 初始化彩虹引用块的默认颜色标识\n    let dcQuote = V_util_getParamVal(\"quote\");\n    if (dcQuote !== gUndefined) {\n        if (dcQuote === _off_)\n            ExtQuote_quoteToRainbow = gFalse;\n        else {\n            RainbowQuote_defalutColor = dcQuote;\n            RainbowQuote_defalutColor_withoutEm = dcQuote.s(0, 2);\n        }\n    }\n\n    // 遍历所有引用块、详情\n    $(_blockquote_).e(function () {\n    // $(_write_ + \">\" + _blockquote_\n    // + \",\" + _write_ + \">\" + _blockquote_ + \" \" + _blockquote_\n    // + \", \" + _write_ + \" .md-alert \" +_blockquote_).e(function () {\n        let _t = $(this),\n            matchedQuoteFold = gFalse;\n        // ====================\n        // 处理引用块折叠（details）\n        _t.ch(_h6_ + _firstChild_).e(function () {\n            let details = __disposeDetailsFolder($(this));\n            if (details)\n                _t = details;\n            matchedQuoteFold = true;\n        });\n\n        // 存在折叠，则标识，不参与分栏引用块的统一高度处理\n        if (matchedQuoteFold) {\n            _t.a(_dataFolding_, _true_);\n            if (V_util_getTagName(_t.p()) === _blockquote_)\n                _t.p().a(_dataFolding_, _true_);\n        }\n        // ====================\n\n        // --------------------\n        // 默认引用块，转换为彩虹引用块\n        let parentTag = V_util_getTagName(_t.p());\n\n        // 跳过列表内、引用块内的嵌套引用块\n        if (parentTag === \"li\" || parentTag === _blockquote_ || parentTag === _details_)\n            return gTrue;\n        let rainbowQuoteEnabled = gFalse;\n        // 判断引用块内是否包含了彩虹引用块语法\n        _t.f(\">p>sub\").e(function () {\n            let _t = $(this);\n            // 颜色标签独占一行的情况下才被视为是对引用块、详情的颜色标识\n            if (ExtQuote_isValidColorMark(_t)\n                && _t.t().m(RainbowColor_syntax) != null) {\n                    rainbowQuoteEnabled = gTrue;\n                    return gFalse;\n            }\n        });\n\n        // 引用块内不包含彩虹引用块语法的，则模拟指定默认的彩虹语法\n        if (ExtQuote_quoteToRainbow && !rainbowQuoteEnabled)\n            _t.ap(\"<p><sub>(\" + RainbowQuote_defalutColor + \")</sub></p>\");\n    });\n\n    // 针对分栏引用块进行初始化\n    ExtQuote_initColumns();\n\n    // 针对分栏列表进行初始化\n    ExtList_initColumns();\n\n    /**\n     * 对 details 详情折叠进行处理\n     * @param target 带约定 details 详情折叠的对象\n     * @returns object 成功匹配并处理\n     */\n    function __disposeDetailsFolder(target) {\n        let quote = target.p();\n        // 生成 details\n        quote.wrap('<' + _details_ + ' id=\"' + V_doc_counter_details + '\"></' + _details_ + '>');\n        // 取消 h6，并生成 summary\n        target.unwrap().wrap(\"<\" + _summary_ + \"></\" + _summary_ + \">\");\n        // 删除无用对象\n        target.ch().unwrap();\n\n        // 获取生成的 detail 实例\n        let details = $(_details_ + \"#\" + V_doc_counter_details),\n            summary = details.ch(_summary_);\n        summary.pp(V_ui_svgIcon(_icoDetailsOpen_, 18, 18, _dark_, _vSvgDetails_));\n\n        let icon = summary.ch(\".\" + _vSvgDetails_);\n        V_ui_addAnimate(icon);\n        // 跟踪切换事件\n        details.on(\"toggle\", function () {\n            // 自动调整高度\n            let _t = summary;\n            _t.ps(_blockquote_ + V_attrX(_dataQuoteGroup_)).p().c(_height_, _auto_);\n            _t.p().c(_height_, _auto_);\n\n            if (this.open)\n                JQ_addClass(icon, _vRotate45_);\n            else\n                JQ_removeClass(icon, _vRotate45_);\n        });\n\n        V_doc_counter_details++;\n        return details;\n    }\n}\n\n/**\n * 判断是否为有效的彩虹引用块颜色标识\n * @param target 颜色标识的对象\n */\nfunction ExtQuote_isValidColorMark(target) {\n    let pText = target.p().t().x();\n    return  pText === target.t().x();\n}\n\n/**\n * 在自动生成题注处理后，进行引用块的二次初始化处理\n */\n// function ExtQuote_initAfterCap() {\n//     // 遍历所有 RainbowQuote_defalutColor_withoutEm 的彩虹引用块\n//     $(\".v-q.\" + RainbowQuote_defalutColor_withoutEm.l()).e(function () {\n//         let _t = $(this);\n//         let preObj = _t.pr(),\n//             preObjClass = preObj.a(_class_);\n//         // 对紧跟表格、插图、代码块、媒体后的引用块样式进行微调\n//         if (preObjClass !== gUndefined &&\n//             (preObjClass.i(\"v-cap-\") > -1 || preObjClass.i(_vContentExpander_) > -1))\n//                 JQ_removeClass(_t, RainbowQuote_defalutColor_withoutEm.l() + \" em\");\n//     });\n// }\n\n/**\n * 对分栏引用块进行初始化\n */\nfunction ExtQuote_initColumns() {\n    // 针对分栏引用块进行修正\n    $(\"hr + blockquote, hr + details\").e(function () {\n        ExtQuote_columnsGroupCount++;\n        let _t = $(this),\n            hr = _t.pr(),\n            colCount = 0;\n\n        // ----------------------------------------\n        // 隐藏标识分栏的 <hr>\n        __hideHr(hr);\n        colCount = hr.prevUntil(\":not(hr)\").length + 2; // 计算分栏数量\n        // 有更多的 <hr> 则进行处理\n        if (colCount > 2) {\n            __hideHr(hr.prevUntil(\":not(hr)\"));\n        }\n        // 隐藏标识分栏的 <hr>\n        function __hideHr(target) {\n            target.c(_visibility_, _hidden_)\n                .c(_margin_, 0)\n                .c(_border_, 0);\n        }\n\n        // ----------------------------------------\n        // 对分栏按组进行初始处理\n        __groupingColumns(_t);\n        _t.nextUntil(\":not(blockquote, details)\").e(function () {\n            if (colCount > 0) {\n                __groupingColumns($(this));\n            }\n        });\n\n        // 进行分组标识\n        function __groupingColumns(quote) {\n            // 若为带折叠的引用块，则跳过\n            if (quote.a(_dataFolding_))\n                return;\n\n            quote.a(_dataQuoteGroup_, ExtQuote_columnsGroupCount);\n            colCount--;\n        }\n    });\n}\n\n/**\n * 对文档内所有分栏，按组为单位进行统一高度处理\n */\nfunction ExtQuote_uniteColumnsHeight() {\n    if (ExtQuote_processingUCH)\n        return;\n\n    ExtQuote_processingUCH = gTrue;\n    for (let i = 1; i <= ExtQuote_columnsGroupCount; i++) {\n        ExtQuote_uniteColumnsHeightForGroup(i);\n    }\n    ExtQuote_processingUCH = gFalse;\n}\n\n/**\n * 对指定组的分栏进行统一高度处理\n * @param groupId 分栏组 id\n */\nfunction ExtQuote_uniteColumnsHeightForGroup(groupId) {\n    // 找出同一组中最大的高度\n    let maxHeight = 0,\n        quote = $(_blockquote_ + V_attrX(_dataQuoteGroup_, groupId) + \",\"\n            + _details_ + V_attrX(_dataQuoteGroup_, groupId));\n    quote.e(function () {\n        let _t = $(this);\n        _t.c(_height_, _auto_);\n        // 没有被小屏强制适配为不分栏时才处理\n        if (_t.c(_display_) !== _block_) {\n            let height = JS_parseInt(_t.c(_height_));\n            if (height > maxHeight)\n                maxHeight = height;\n        }\n    });\n\n    // 没有被小屏强制适配为不分栏时才处理\n    if (quote.c(_display_) !== _block_) {\n        // 将同一组中最大的高度\n        quote.c(_height_, maxHeight);\n    }\n}\n\n/**\n * 根据设备类型自适应 hover 样式\n */\nfunction ExtQuote_adjustHoverStyle() {\n    if (env.device.mobile) // 移动设备时解绑样式事件\n        $(\".\" + _vBlockquoteFolder_).uH();\n    else // 为折叠的引用块的折叠控件绑定 hover 事件\n        V_ui_bindHover($(\".\" + _vBlockquoteFolder_));\n}\n\n/**\n * 自动展开引用块（由 blockquote 转换的 details）\n */\nfunction ExtQuote_autoUnfold() {\n    if (iParagraphNav.cur() === gUndefined)\n        return;\n\n    // 针对 details 的处理\n    __openDetails(iParagraphNav.cur());\n\n    /**\n     * 打开折叠的引用块（未打开的 details 标签）\n     * @param target 目标标签\n     */\n    function __openDetails(target) {\n        let parent = target.p();\n        // 只针对 details 标签\n        if (V_util_getTagName(parent) === _details_) {\n            // 如果是嵌套的折叠引用块，则进行递归处理\n            if (V_util_getTagName(parent.p()) === _details_)\n                __openDetails(parent.p());\n            // 未打开时才进行打开\n            if (parent.a(_open_) === gUndefined)\n                parent.ch(_summary_).tr(_click_);\n        }\n    }\n}\n\n// ==================== 列表增强类 ==================== //\n\n/**\n * 对分栏列表进行初始化\n */\nfunction ExtList_initColumns() {\n    // 针对分栏列表进行修正\n    $(\"hr + ul, hr + ol\").e(function () {\n        let _t = $(this),\n            hr = _t.pr();\n\n        // ----------------------------------------\n        // 隐藏标识分栏的 <hr>\n        hr.c(_display_, _none_);\n        let colCount = hr.prevUntil(\":not(hr)\").length + 2; // 计算分栏数量\n        if (colCount > 2) // 有更多的 <hr>\n            hr.prevUntil(\":not(hr)\").c(_display_, _none_);\n    });\n}\n\n// ==================== 表格增强类 ==================== //\n\n/**\n * 初始化表格数据\n */\nfunction ExtTable_init() {\n    let sw = new Stopwatch();\n\n    // ----------------------------------------\n    // 表格预处理\n    sw.st();\n    $(_table_).e(function () {\n        let _t = $(this),\n            container = _t.p();\n\n        V_doc_counter_table++;\n\n        // 绑定内容助手\n        ContentAssistor_bind(_t, _table_);\n\n        // 表格自定义属性数据\n        container.a(_dataContainer_, _table_);\n        JQ_addClass(container, _vCaptionContainer_);\n\n        // 表格滚动事件\n        container.scroll(function () {\n            TableCross_hide();\n        });\n\n        // 表格单元格初始化处理\n        __initCell(_t);\n\n        // 折叠长表格\n        ContentFolder_add(_t, _table_);\n        // 先根据题注语法生成题注\n        CaptionGenerator_actionForTextContent(_t, _table_);\n    }); // table\n    sw.ed(\"    ├ Prepare: \");\n\n    // ----------------------------------------\n    // 表格单元格合并\n    sw.st();\n    $(_table_ + V_attrX(_dataCellMerge_, _true_)).e(function () {\n        let _t = $(this);\n        CellMerge_dispose(_t);\n\n        // 合并后，针对列头纵向合并的情况二次执行列格式处理\n        _t.f(\"thead>tr>th\").e(function () {\n            let cell = $(this);\n            ColumnFormatting_init(_t, cell, cell.t());\n        });\n    });\n    sw.ed(\"    ├ Merge: \");\n\n    // ----------------------------------------\n    // 对表格单元格初始化处理中标识为带列格式的表格，进行列格式化处理\n    sw.st();\n    $(_table_ + V_attrX(_dataColumnFmting_, _true_)).e(function () {\n        ColumnFormatting_format($(this));\n    });\n    sw.ed(\"    ├ Column Format: \");\n\n    // ----------------------------------------\n    // 表格行折叠\n    sw.st();\n    $(_table_ + V_attrX(_dataRowGroup_, _true_)).e(function () {\n        let _t = $(this);\n        RowGroup_init(_t);\n\n        // 修正行分组的首个单元格的缩进\n        _t.f(\"tr\" + V_attrX(_dataFolder_, _true_)).e(function () {\n            let td = $(this).ch(\"td\" + _first_);\n            if (td.a(_dataIdentLevel_) !== gUndefined)\n                td.c(_paddingLeft_, \"0.5em\");\n        });\n    });\n    sw.ed(\"    ├ Row Group: \");\n\n    // ----------------------------------------\n    // 表格单元格重复表头引用块处理，group 模式重复将在行分组展开/收起时再进行处理\n    sw.st();\n    $(_table_ + V_attrX(_dataThRpt_, _true_)).e(function () {\n        ThRepeater_init( $(this));\n    });\n    sw.ed(\"    └ Th Repeater: \");\n\n    /**\n     * 表格单元格初始化\n     * @param table 表格对象\n     */\n    function __initCell(table) {\n        // 遍历表格「列头」行\n        let colIndex = 0;\n        table.f(\"thead>tr\").e(function () {\n            colIndex = 0;\n            let needCheckCellMerge = gTrue,\n                needCheckColumnFormatting = gTrue,\n                needCheckThRpt = gTrue;\n            // ----------------------------------------\n            // 遍历单元格\n            $(this).f(\"th\").e(function () {\n                let th = $(this),\n                    text = th.t();\n\n                // ---------- 表格排版增强预处理 ----------\n                // 检测是否带合并单元格语法\n                if (needCheckCellMerge\n                    && table.a(_dataCellMerge_) !== _true_\n                    && (CellMerge_syntax_row.test(text)\n                    || CellMerge_syntax_col.test(text))) {\n                        // 将表格标识为带合并单元格语法\n                        table.a(_dataCellMerge_, _true_);\n                        needCheckCellMerge = gFalse;\n                }\n                // 检测是否带列格式语法\n                if (needCheckColumnFormatting) {\n                    if (ColumnFormatting_init(table, th, text))\n                        needCheckColumnFormatting = gFalse;\n                }\n                // 检测是否带重复表头语法\n                if (needCheckThRpt\n                    && colIndex === 0 // 只检测第 1 列\n                    && ThRepeater_syntax_tag.test(text)) {\n                        // 将表格标识为带行折叠语法\n                        table.a(_dataThRpt_, _true_);\n                        th.rHTML(\"## \", _);\n                        needCheckThRpt = gFalse;\n                }\n\n                // ----------------------------------------\n                // 添加列号标识，用于列格式化时使用\n                th.a(_dataTblCol_, \"tbl-\" + V_doc_counter_table + \"-\" + colIndex);\n                colIndex++;\n\n                // ---------- 非列头的单元格阅读模式（十字光标）处理 ----------\n                // 鼠标点击单元格时显示阅读模式（十字光标）\n                TableCross_bind(table, th);\n            });\n        });\n\n        // 标记该表格列太多，用于匹配是否自动换行的自动版式\n        if (colIndex > 7)\n            table.a(\"d-col-too-more\", colIndex);\n\n        // ----------------------------------------\n        // 遍历表格「非列头」行\n        table.f(\"tbody>tr\").e(function () {\n            let colIndex = 0,\n                needCheckCellMerge = gTrue,\n                needCheckRowGroup = gTrue;\n            // ----------------------------------------\n            // 遍历单元格\n            $(this).f(\"td\").e(function () {\n                let td = $(this),\n                    text = td.t();\n                // ---------- 表格排版增强预处理 ----------\n                // 检测是否带合并单元格语法\n                if (needCheckCellMerge\n                    && table.a(_dataCellMerge_) !== _true_\n                    && (CellMerge_syntax_row.test(text)\n                    || CellMerge_syntax_col.test(text))) {\n                        // 将表格标识为带合并单元格语法\n                        table.a(_dataCellMerge_, _true_);\n                        needCheckCellMerge = gFalse;\n                }\n                // 检测是否带行折叠语法\n                if (needCheckRowGroup\n                    && colIndex === 0 // 只检测第 1 列\n                    && table.a(_dataRowGroup_) !== _true_\n                    && RowGroup_syntax_tag.test(text)) {\n                        // 将表格标识为带行折叠语法\n                        table.a(_dataRowGroup_, _true_);\n                        needCheckRowGroup = gFalse;\n                }\n                // 对于单元格的内容，都以 <mark> 标签包裹的，则转换为单元格的样式\n                // 同时转换后，在 Table.columnFormatting 的 init 处理中对应添加对应的过滤条件\n                if (/^<ma.+rk>$/.test(td.hm())) {\n                    td.ch().ch().unwrap(); // 解包 <mark>\n                    JQ_addClass(td, _vTblColFmtMark_);\n                }\n\n                // 添加列号标识，用于列格式化时使用\n                td.a(_dataTblCol_, \"tbl-\" + V_doc_counter_table + \"-\" + colIndex);\n                colIndex++;\n\n                // ---------- 列头的单元格阅读模式（十字光标）处理 ----------\n                // 鼠标点击单元格时显示阅读模式（十字光标）\n                TableCross_bind(table, td);\n            }); // find(th, td)\n        }); // find(tr)\n    }\n}\n\nlet // 单元格内（加粗）文本着色的正则表达式\n    gRE_boldRainbowText = new RegExp(\"(<\" + _strong_ + \"( \" + _dataRbText_ + '=\"([a-z!12]+)\")?>)([\\\\s\\\\S]*?)(<\\\\/' + _strong_ + \">)\", \"i\"),\n    // 有指定单元格内（斜体）文本着色的正则表达式\n    gRE_italicRainbowText = new RegExp(\"(<em( \" + _dataRbText_ + '=\"([a-z!12]+)\")?>)([\\\\s\\\\S]*?)(<\\\\/em>)', \"i\"),\n    // 有指定单元格内（高亮）文本着色的正则表达式\n    gRE_highlightRainbowText = new RegExp(\"(<\" + _mark_ + \"( \" + _dataRbText_ + '=\"([a-z!12]+)\")?>)([\\\\s\\\\S]*?)(<\\\\/' + _mark_ + \">)\", \"i\"),\n    // 有指定单元格内（下划线）文本着色的正则表达式\n    gRE_underlineRainbowText = new RegExp(\"(<u( \" + _dataRbText_ + '=\"([a-z!12]+)\")?>)([\\\\s\\\\S]*?)(<\\\\/u>)', \"i\"),\n    // 代码\n    gRE_code = new RegExp('(<code class=\"' + _vStdCode_ + '.*?(?=id-)(id-\\\\d+).*?(<\\\\/code>).*?)', \"i\"),\n    // 彩虹标签\n    gRE_rainbowTag = new RegExp('(<code class=\"v-tag.*?(?=id-)(id-\\\\d+).*?(<\\\\/code>).*?)', \"i\"),\n    // 彩虹徽章\n    gRE_rainbowBadge = new RegExp('(<code class=\"v-badge-name.*?(?=id-)(id-\\\\d+)\".*?(<\\\\/code><\\\\/code>).*?)', \"i\"),\n    gRE_rainbowBadge2 = new RegExp('(<code class=\"v-badge-name.*?(?=id-)(id-\\\\d+)\\\\s.*?(<\\\\/span><\\\\/code>).*?)', \"i\");\n/**\n * 复制表格内容\n * @param source 内容源对象\n * @param event 事件对象\n */\nfunction ExtTable_copyContent(source, event) {\n    let content = _,\n        trSet = ContentAssistor_lastHover.f(\"tr\"),\n        theadCount = ContentAssistor_lastHover.f(\"thead > tr\").length,\n        columnFmting = ContentAssistor_lastHover.a(_dataColumnFmting_),\n        theadRepeater = ContentAssistor_lastHover.a(_dataThRpt_),\n        rowGroup = ContentAssistor_lastHover.a(_dataRowGroup_),\n        rowIndex = 0,\n        rowCount = trSet.length,\n        colIndex = 0, // 表格行的当前列（包括被合并列的）\n        colCount = 0,\n        alignSet = [], // 列的对齐方式\n        xspanMatrix = []; // 单元格合并标识矩阵\n\n    // 逐行读取表格内容\n    trSet.e(function () {\n        // 复制为 Markdown 时，在表头后添加分隔格式\n        if (ContentAssistor_copyAsMarkdown && rowIndex === 1)\n            content = __createTheadSpliter(content, alignSet);\n\n        let cellSet = $(this).f(\"th, td\");\n        colIndex = 0;\n\n        // 逐个单元格处理\n        let re_LabelTag = new RegExp(\"<\" + _label_ + \" .*?><\\\\/\" + _label_ + \">\", \"i\");\n        cellSet.e(function () {\n            let htmlText = _,\n                rowspan, colspan;\n\n            // ====== 根据合并单元格预处理结果进行实际处理 =====\n            // 对单元格纵向合并的填充处理\n            htmlText = __disposeRowspan(htmlText);\n\n            // ====== 对普通单元格的处理 ======\n\n            // 读取单元格数据\n            let cell = $(this),\n                cellHTML = cell.hm(),\n                colFmtChkbox = gFalse,\n                colFmtMark = gFalse,\n                // colFmtDel = gFalse,\n                cellBg = cell.a(_dataRbCellBg_),\n                cellWholeText = cell.a(_dataRbWholeText_);\n\n            // 含有表格列格式时\n            if (columnFmting !== gUndefined && columnFmting === _true_) {\n                // 转换列格式（复选框）\n                let css = cell.a(_class_);\n                if (css !== gUndefined) {\n                    if (css.i(_vTblColFmt_Chkbox_) !== -1) {\n                        let yes = cell.ch(_svg_ + '[' + V_attr(_dataChk_, _yes_) + ']');\n                        if (yes.length > 0)\n                            cellHTML = cellHTML.r(/<svg .*?>([\\s\\S]*?)<\\/svg>/i, \"Y\");\n                        else {\n                            let un = cell.ch(_svg_ + '[' + V_attr(_dataChk_, _un_) + ']');\n                            if (un.length > 0)\n                                cellHTML = cellHTML.r(/<svg .*?>([\\s\\S]*?)<\\/svg>/i, \"?\");\n                        }\n                        // 复制为 Markdown 时，对表头列格式进行处理\n                        if (ContentAssistor_copyAsMarkdown && rowIndex < theadCount)\n                            colFmtChkbox = gTrue;\n                    }\n\n                    // ----- 复制为 Markdown 时的列格式处理 01 -----\n                    // 常规（加粗/斜体/下划线/高亮/删除线）\n                    if (ContentAssistor_copyAsMarkdown && rowIndex < theadCount) {\n                        if (css.i(_vTblColFmtMark_) !== -1) // 高亮\n                            colFmtMark = gTrue;\n                        // if (css.i(_vTblColFmtDel_) !== -1) // 删除线\n                        //     colFmtDel = gTrue;\n                    }\n                }\n\n                // 记录列的对齐方式，用于在复制为 Markdown 时生成表头分隔分隔格式\n                if (ContentAssistor_copyAsMarkdown)\n                    alignSet[colIndex] = cell.c(_textAlign_);\n            }\n\n            // 转换表格分组\n            if (rowGroup !== gUndefined && rowGroup === _true_) {\n                let css = cell.a(_class_);\n                if (css !== gUndefined && css.i(_vTblRowGSub_) !== -1) {\n                    let identerCount = cell.ch('.' + _vTblRowGIdenter_).length;\n                    for (let i = 0; i < identerCount; i++) {\n                        // cellHTML = cellHTML.r(/<label .*?><\\/label>/i,\n                        cellHTML = cellHTML.r(re_LabelTag,\n                            i === identerCount - 1 ? \"> \" : \">\");\n                    }\n                }\n            }\n\n            // 转换单元格内容\n            cellHTML = __transCellContent(cellHTML, cellBg, cellWholeText);\n\n            // ----- 复制为 Markdown 时的列格式处理 02 -----\n            if (ContentAssistor_copyAsMarkdown && rowIndex < theadCount) {\n                if (colFmtChkbox) // 复选框\n                    cellHTML = \"[] \" + cellHTML;\n                // 加粗、斜体、下划线、高亮，已通过 __transCellContent() 进行了处理\n                if (colFmtMark) // 高亮\n                    cellHTML = \"==\" + cellHTML + \"==\";\n                // if (colFmtDel) // 删除线\n                //     cellHTML = \"~~\" + cellHTML + \"~~\";\n                // 重复表头\n                if (rowIndex === 0 && colIndex === 0 && theadRepeater !== gUndefined)\n                    cellHTML = \"## \" + cellHTML;\n            }\n\n            // 生成要被复制的单元格内容\n            htmlText += __maybeAsMarkdown(\"| \", _)\n                + __maybeAsMarkdown(_, '\"') + cellHTML + __maybeAsMarkdown(_, '\"');\n\n            // ====== 对合并单元格的处理 ======\n\n            // 对单元格有纵向合并 rowspan 属性的处理\n            rowspan = cell.a(_rowspan_);\n            rowspan = (rowspan === gUndefined) ? 0 : JS_parseInt(rowspan);\n            if (rowspan > 0) {\n                for (let i = 0; i < rowspan - 1; i++) {\n                    // 对应纵向合并的矩阵行为空则进行创建\n                    if (xspanMatrix[rowIndex + i + 1] === gUndefined)\n                        xspanMatrix[rowIndex + i + 1] = [];\n                    // 在对应矩阵单元中标识被纵向合并的单元格\n                    // 预处理，在下一轮处理中继续\n                    xspanMatrix[rowIndex + i + 1][colIndex] = 1;\n                }\n            }\n\n            // 对单元格有横向合并 colspan 属性的处理\n            colspan = cell.a(_colspan_);\n            colspan = (colspan === gUndefined) ? 0 : JS_parseInt(colspan);\n            if (colspan > 0) {\n                // 横向合并填充处理\n                for (let i = 0; i < colspan - 1; i++) {\n                    htmlText += __maybeAsMarkdown(\"| == \", ___) + \"\\t\";\n                    // 对应纵向合并的矩阵行为空则进行创建\n                    if (xspanMatrix[rowIndex] === gUndefined)\n                        xspanMatrix[rowIndex] = [];\n                    // 在对应矩阵单元中标识被横向合并的单元格\n                    xspanMatrix[rowIndex][colIndex + 1] = 2;\n                    colIndex++;\n                }\n            }\n\n            colIndex++;\n            content += htmlText + __maybeAsMarkdown(___, \"\\t\");\n        }); // 逐个单元格处理结束\n\n        // 记录表格实际列数\n        if (colIndex > colCount)\n            colCount = colIndex;\n\n        // 每行最后一个非合并单元格的后续合并单元格的填充处理\n        content = __disposeRowspan(content);\n\n        rowIndex++;\n        content = content.s(0, content.length - 1)\n            + __maybeAsMarkdown(\" |\", _) + (rowIndex < rowCount ? \"\\n\" : _);\n\n        // ==========\n        // 对单元格纵向合并的处理\n        function __disposeRowspan(htmlText) {\n            // 对已处理行中带纵向合并 rowspan 标识的数据进行适配处理\n            if (xspanMatrix[rowIndex] !== gUndefined) {\n                let rowspan = xspanMatrix[rowIndex][colIndex];\n                while (rowspan !== gUndefined && rowspan === 1) {\n                    htmlText += __maybeAsMarkdown(\"| : \", ___) + \"\\t\";\n                    colIndex++;\n                    rowspan = xspanMatrix[rowIndex][colIndex];\n                }\n            }\n            else\n                xspanMatrix[rowIndex] = [];\n\n            return htmlText;\n        }\n\n\n    }); // 逐行处理\n\n    // 调试：打印标识矩阵\n    __printXspanArr();\n\n    Copyer_action(source, content, gTrue);\n\n    // ==========\n\n    function __createTheadSpliter(content, alignSet) {\n        // 复制为 Markdown 时，在表头后添加分隔格式\n        let lastAlign = _left_,\n            spliter = \"| ---- \";\n        for (let i = 0; i < colCount; i++) {\n            // 读取每列的对齐方式\n            if (alignSet[i] !== gUndefined)\n                lastAlign = alignSet[i];\n\n            if (lastAlign === _left_) // 左对齐\n                spliter = \"| ---- \";\n            else if (lastAlign === _right_) // 右对齐\n                spliter = \"| ---: \";\n            else if (lastAlign === _center_) // 中间对齐\n                spliter = \"| :--: \";\n\n            content += spliter;\n        }\n        content += \"|\\n\";\n        return content;\n    }\n\n    // 适配是否要复制为 Markdown\n    function __maybeAsMarkdown(mdStr, plainStr) {\n        return (ContentAssistor_copyAsMarkdown ? mdStr : plainStr)\n    }\n\n    // 转换单元格内容\n    function __transCellContent(cellHTML, cellBg, cellWholeText) {\n        // 转换徽章\n        cellHTML = __transCellContent_badge(cellHTML, gRE_rainbowBadge);\n        cellHTML = __transCellContent_badge(cellHTML, gRE_rainbowBadge2);\n        // 转换标签\n        cellHTML = __transCellContent_tag(cellHTML, gRE_rainbowTag);\n        // 转换代码\n        cellHTML = __transCellContent_code(cellHTML, gRE_code);\n\n        // 转换彩虹文本、单元格背景色\n        if (ContentAssistor_copyAsMarkdown) {\n            // 有指定整段（整个单元格）的文本着色\n            if (cellWholeText !== gUndefined)\n                cellHTML = \"~(\" + cellWholeText + \")~\" + cellHTML;\n\n            // 有指定单元格背景色\n            if (cellBg !== gUndefined)\n                cellHTML += \"~(\" + cellBg + \"!)~\";\n\n            // 有指定单元格内（加粗）文本着色\n            cellHTML = __transCellContent_rainbowText(cellHTML,\n                gRE_boldRainbowText);\n                // /(<strong( d-rb-text=\"([a-z!12]+)\")?>)([\\s\\S]*?)(<\\/strong>)/i);\n            // 有指定单元格内（斜体）文本着色\n            cellHTML = __transCellContent_rainbowText(cellHTML,\n                gRE_italicRainbowText);\n                // /(<em( d-rb-text=\"([a-z!12]+)\")?>)([\\s\\S]*?)(<\\/em>)/i);\n            // 有指定单元格内（高亮）文本着色\n            cellHTML = __transCellContent_rainbowText(cellHTML,\n                gRE_highlightRainbowText);\n                // /(<mark( d-rb-text=\"([a-z!12]+)\")?>)([\\s\\S]*?)(<\\/mark>)/i);\n            // 有指定单元格内（下划线）文本着色\n            cellHTML = __transCellContent_rainbowText(cellHTML,\n                gRE_underlineRainbowText);\n                // /(<u( d-rb-text=\"([a-z!12]+)\")?>)([\\s\\S]*?)(<\\/u>)/i);\n        }\n\n        // 用于清除或转换特殊字符\n        let badChars = [\n                // /<br\\s?\\/?>/i, // <br>\n                /&nbsp;/i, // 空格\n                /&lt;/, // <\n                /&gt;/, // >\n                \"'\", // 英文单引号\n                '\"', // 英文双引号\n                /(“)([^“]+)(“)/, // 连续第2个中文单引号\n                /(‘)([^‘]+)(‘)/, // 连续第2个中文双引号\n                /<.*?>/i // HTML 标签\n                // /<[^>]+>/g // HTML 标签\n            ],\n            goodChars = [\n                // \"\\n\", // for <br>\n                ___, // 空格\n                \"<\", // <\n                \">\", // >\n                \"‘\", // 中文单引号\n                \"“\", // 中文双引号\n                \"$1$2”\", // 中文反单引号\n                \"$1$2’\", // 中文反双引号\n                _ // for HTML 标签\n            ];\n\n        // 对 <br> 的处理 01\n        let brTmp = \"___br___\";\n        if (ContentAssistor_copyAsMarkdown) {\n            cellHTML = cellHTML.rA(/<br\\s?\\/?>/i, brTmp);\n            cellHTML = cellHTML.rA(/\\$/, \"\\\\$\");\n        }\n        else\n            cellHTML = cellHTML.rA(/<br\\s?\\/?>/i, \"\\n\");\n\n        // 清除或转换特殊字符，包括 HTML 标签\n        for (let i = 0; i < badChars.length; i++)\n            cellHTML = cellHTML.rA(badChars[i], goodChars[i]);\n\n        if (ContentAssistor_copyAsMarkdown) {\n            // 对 ___br___ 的处理 02\n            cellHTML = cellHTML.rA(brTmp, \"<br>\");\n            // 对 ___u___ 和 ___/u___ 的处理\n            cellHTML = cellHTML.rA(\"___u___\", \"<u>\");\n            cellHTML = cellHTML.rA(\"___/u___\", \"</u>\");\n        }\n\n        return cellHTML;\n    }\n\n    // 转换单元格内的彩虹标签\n    function __transCellContent_tag(cellHTML, regExp) {\n        let result = cellHTML.m(regExp);\n\n        // 遍历处理单元格内的所有匹配的内容\n        while (result != null) {\n            let _t = $(\".\" + _vTag_ + \".\" + result[2]);\n            cellHTML = cellHTML.r(regExp,\n                __maybeAsMarkdown(_t.a(_dataAsMarkdown_), _t.a(_value_)));\n            // 匹配下一项\n            result = cellHTML.m(regExp);\n        }\n        return cellHTML;\n    }\n\n    // 转换单元格内的彩虹徽章\n    function __transCellContent_badge(cellHTML, regExp) {\n        let result = cellHTML.m(regExp);\n\n        // 遍历处理单元格内的所有匹配的内容\n        while (result != null) {\n                let _t = $(\".\" + _vBadgeName_ + \".\" + result[2]);\n                cellHTML = cellHTML.r(regExp,\n                    __maybeAsMarkdown(_t.a(_dataAsMarkdown_), _t.a(_value_)));\n                // 匹配下一项\n                result = cellHTML.m(regExp);\n        }\n        return cellHTML;\n    }\n\n    // 转换单元格内的普通行内代码 code\n    function __transCellContent_code(cellHTML, regExp) {\n        let result = cellHTML.m(regExp);\n\n        // 遍历处理单元格内的所有匹配的内容\n        while (result != null) {\n            let _t = $(\".\" + _vStdCode_ + \".\" + result[2]);\n            cellHTML = cellHTML.r(regExp,\n                __maybeAsMarkdown(V_util_wrapBackquote(_t.t()), _t.t()));\n            // 匹配下一项\n            result = cellHTML.m(regExp);\n        }\n        return cellHTML;\n    }\n\n    // 转换单元格内的彩虹文本\n    function __transCellContent_rainbowText(cellHTML, exp) {\n        let result = cellHTML.m(exp);\n\n        // 遍历处理单元格内所有格式着色内容\n        while (result != null) {\n            let color = result[3],\n                format = result[1];\n            if (color !== gUndefined)\n                cellHTML = cellHTML.r(exp, \"$1$4$5~($3)~\");\n            if (format !== gUndefined) {\n                // strong\n                if (format.sW(\"<st\"))\n                    cellHTML = cellHTML.r(exp, \"**$4**\");\n                // em\n                else if (format.sW(\"<e\"))\n                    cellHTML = cellHTML.r(exp, \"*$4*\");\n                // mark\n                else if (format.sW(\"<m\"))\n                    cellHTML = cellHTML.r(exp, \"==$4==\");\n                // <u>\n                else if (format.sW(\"<u\"))\n                    cellHTML = cellHTML.r(exp, \"___u___$4___/u___\");\n            }\n            // 匹配下一项\n            result = cellHTML.m(exp);\n        }\n        return cellHTML;\n    }\n\n    // 调试：打印标识矩阵\n    function __printXspanArr() {\n        if (!debugMode)\n            return;\n\n        console.log(\"Table:\", rowCount + \" x \" + colCount);\n        let sss = \"   \";\n        for (let i = 0; i < colCount; i++)\n            sss += ___ + i;\n        console.log(sss);\n        sss = \"   \";\n        for (let i = 0; i < colCount; i++)\n            sss += \" -\";\n        console.log(sss);\n        for (let i = 0; i < rowCount; i++) {\n            sss = _;\n            if (xspanMatrix[i] !== gUndefined) {\n                for (let j = 0; j < colCount; j++)\n                    sss += (xspanMatrix[i][j] === gUndefined) ? \". \" : xspanMatrix[i][j] + ___;\n                console.log(i + \" | \" + sss);\n            }\n        }\n    }\n}\n\n// ==================== 表格单元格合并类 ==================== //\n\n// 单元格合并语法\nlet CellMerge_syntax_row = /^(:)$/, // 行，纵向合并\n    CellMerge_syntax_col = /^(==)$/ // 列，横向合并\n\n/**\n * 表格单元格合并\n * @param table 要进行单元格合并处理的表格对象\n */\nfunction CellMerge_dispose(table) {\n    let colSpanCount = 0,\n        colSpanCell = null,\n        colIndex = 0,\n        colCount = 0,\n        lastCell = null,\n        tblData = [],\n        tblSpan = [],\n        tblTd2ThData = [],\n        rowIndex = 0,\n        needRowSpan = gFalse;\n\n    // 遍历表格行\n    table.f(\"tr\").e(function () {\n        tblData[rowIndex] = [];\n        tblSpan[rowIndex] = [];\n        let tr = $(this);\n        tr.f(\"td, th\").e(function () {\n            let cell = $(this);\n\n            // --- 行合并：预处理（纵向） ---\n            // 克隆表格数据\n            tblData[rowIndex][colIndex] = cell;\n            tblSpan[rowIndex][colIndex] = 0;\n            if (CellMerge_syntax_row.test(cell.t())) {\n                tblSpan[rowIndex][colIndex] = 1;\n                needRowSpan = gTrue;\n            }\n            colIndex++;\n            colCount++;\n\n            // --- 列合并（横向） ---\n            // 是列合并标识\n            if (CellMerge_syntax_col.test(cell.t())) {\n                colSpanCount++;\n                JQ_remove(cell);\n                if (colSpanCount === 1)\n                    colSpanCell = lastCell;\n            }\n            // 不是列标识，则进行最近列标识数据进行处理\n            else {\n                if (colSpanCount > 0 && colSpanCell != null) {\n                    colSpanCell.a(_colspan_, colSpanCount + 1);\n                    CellMerge_emptyBlankCell(colSpanCell);\n                    colSpanCell.c(_textAlign_, _center_);\n                }\n                colSpanCount = 0;\n            }\n            lastCell = cell;\n        }); // find(td, th)\n\n        // 如果列合并了所有列，且内容为空，则取消表格行号等样式\n        if (colCount === colSpanCount + 1 && tr.t().x().length === 0) {\n            JQ_addClass(tr, \"v-table-colspan-all\");\n        }\n\n        // 列间合并：对于最后一列的补充处理\n        if (colSpanCount > 0 && colSpanCell != null) {\n            colSpanCell.a(_colspan_, colSpanCount + 1);\n            CellMerge_emptyBlankCell(colSpanCell);\n            colSpanCell.c(_textAlign_, _center_);\n        }\n        colSpanCount = 0;\n\n        rowIndex++;\n        colIndex = 0;\n        colCount = 0;\n    }); // tr\n\n    rowIndex = 0;\n\n    // --- 行间合并（纵向）---\n    if (needRowSpan) {\n        tblTd2ThData = [];\n        // 列式遍历（从左到右）\n        for (let c = 0, len = tblSpan[0].length; c < len; c++) {\n            let rowSpanCount = 0,\n                rowSpanCell = null;\n            let r = 0,\n                thSpanFlag = gFalse;\n\n            // 列式遍历（从上到下）\n            while (r < tblSpan.length) {\n                if (tblSpan[r][c] === 1) { // 要合并\n                    rowSpanCount++;\n                    if (rowSpanCell == null) {\n                        rowSpanCell = tblData[r - 1][c];\n                    }\n                    // 记录最大列头行合并深度\n                    if (r === 1)\n                        thSpanFlag = gTrue;\n                    if (thSpanFlag)\n                        tblTd2ThData[tblTd2ThData.length] = tblData[r][c].p();\n                    JQ_remove(tblData[r][c]); // 移除要被合并的单元格\n\n                    // 后接的单元格会变成第 1 列，但不需要预留表格行号显示的空间\n                    if (c + 1 < tblSpan[r].length)\n                        tblData[r][c + 1].c(_paddingLeft_, V_util_getVarVal(\"--tbl-cell-padding\"));\n                } else {\n                    thSpanFlag = gFalse;\n                    // 单元格行合并\n                    if (rowSpanCount > 0 && rowSpanCell != null) {\n                        rowSpanCell.a(_rowspan_, rowSpanCount + 1);\n                        CellMerge_emptyBlankCell(rowSpanCell);\n                        rowSpanCell.c(_verticalAlign_, \"middle\");\n                        rowSpanCount = 0;\n                        rowSpanCell = null;\n                    }\n                }\n                r++;\n            } // while\n\n            // 行合并：对于最后一行的补充处理\n            if (rowSpanCount > 0 && rowSpanCell != null) {\n                rowSpanCell.a(_rowspan_, rowSpanCount + 1);\n                CellMerge_emptyBlankCell(rowSpanCell);\n                rowSpanCell.c(_verticalAlign_, \"middle\");\n            }\n        } // for\n\n        // 处理列头的纵向合并\n        for (let i = 0, len = tblTd2ThData.length; i < len; i++) {\n            tblData[0][0].p().p().ap(tblTd2ThData[i]);\n            // 将 thead 内的 td 标签转换为 th\n            let foundTd = gFalse;\n            tblTd2ThData[i].f(\"td\").e(function () {\n                foundTd = gTrue;\n                // 暂存 td 的属性数据\n                let td = $(this),\n                    style = td.a(_style_),\n                    tblCol = td.a(_dataTblCol_),\n                    classValue = td.a(_class_),\n                    colspan = td.a(_dataColspan_);\n                // td 转换为 th 标签\n                td.a(_dataTd2th_, _true_);\n                // td.prop(_outerHTML_, td.prop(_outerHTML_).rA(\"<td \", \"<th \"));\n                td.rW(td.prop(_outerHTML_).rA(\"<td \", \"<th \"));\n                // 将暂存的 td 的属性数据，恢复到新标签中\n                td.p().a(_style_, style);\n                td.p().a(_dataTblCol_, tblCol);\n                td.p().a(_class_, classValue);\n                td.p().a(_dataColspan_, colspan);\n            });\n            // 对被从 td 转换为 th 单元格，重新绑定：鼠标点击单元格时显示阅读模式（十字光标）\n            if (foundTd) {\n                tblTd2ThData[i].f(\"th\" + V_attrX(_dataTd2th_)).e(function () {\n                    TableCross_bind(table, $(this));\n                });\n            }\n        }\n    } // if\n\n    needRowSpan = gFalse;\n}\n\n/**\n * 清空单元格内容（无内容情况下清空空格 &nbsp;）\n * @param cell 表格单元格对象\n */\nfunction CellMerge_emptyBlankCell(cell) {\n    if (cell.t().x().length === 0) {\n        cell.hm(_);\n        JQ_addClass(cell, \"v-empty-cell\");\n    }\n}\n\n// ==================== 表格阅读模式（十字光标）类 ==================== //\n\nlet //TableCross_enabled = gFalse,\n    TableCross_ui = gUndefined,\n    TableCross_lastTable = gUndefined, // 最后/当前显示阅读模式（十字光标）的表格\n    TableCross_lastCell = gUndefined; // 最后/当前显示阅读模式（十字光标）的表格单元格\n\nfunction TableCross_init() {\n    TableCross_ui = $(_vTblX_);\n    // TableCross_ui = $(\".v-table-cross\");\n    V_ui_addAnimate(TableCross_ui);\n}\n\n/**\n * 切换表格阅读模式（十字光标）开关\n */\nfunction TableCross_toggle(table) {\n    // 已打开，则关闭\n    if (table.a(_dataTblX_) === _true_)\n        TableCross_disable(table);\n    // 未打开，则打开\n    else\n        TableCross_enable(table);\n}\n\n// 打开表格阅读模式（十字光标）\nfunction TableCross_enable(table) {\n    // TableCross_enabled = gTrue;\n    table.a(_dataTblX_, _true_);\n    JQ_addClass(ContentAssistor_btns_tableCross, _selected_);\n\n    if (table !== gUndefined && table != null)\n        table.p().p().n(\".\" + _vContentExpander_).ch(\".v-btn\").tr(_click_);\n}\n\n// 关闭表格阅读模式（十字光标）\nfunction TableCross_disable(table) {\n    // TableCross_enabled = gFalse;\n    table.a(_dataTblX_, _false_);\n    JQ_removeClass(ContentAssistor_btns_tableCross, _selected_);\n    TableCross_hide();\n}\n\n/**\n * 绑定单元格，鼠标点击单元格时显示阅读模式（十字光标）\n * @param table 单元格所属表格对象\n * @param cell 单元格对象\n */\nfunction TableCross_bind(table, cell) {\n    cell.uC().ck(function (event) {\n        if (table.a(_dataTblX_) !== _true_ || Copyer_processing)\n            return;\n\n        // vvv 不同表格之间点击，先强制移除动画 vvv\n        if (TableCross_lastTable !== table)\n            V_ui_removeAnimate(TableCross_ui);\n\n        // 同一单元格不重复处理\n        if (TableCross_lastCell === cell)\n            return;\n\n        let container = table.p().p(),\n            contentFolded = container.a(_dataContentFolded_);\n        // 跳过被折叠表格\n        if (contentFolded !== gUndefined && contentFolded.sW(\"t\"))\n            return;\n\n        // 若点击同时也触发了「代码 / 标签 / 徽章」的复制\n        if (!Copyer_processing)\n            event.stopPropagation(); // 停止事件冒泡，避免与其他事件的处理冲突（如：document.click）\n\n        TableCross_hide();\n        JQ_addClass(cell, _vTblXCell_);\n\n        TableCross_lastCell = cell;\n        TableCross_lastTable = table;\n\n        let tblWidth = JS_parseInt(table.c(_width_)),\n            tblHeight = JS_parseInt(table.c(_height_));\n\n        let cellWidth = JS_parseInt(cell.c(_width_)),\n            cellHeight = JS_parseInt(cell.c(_height_)),\n            cornerLeftX = table.oL(),\n            cornerUpY = table.oT(),\n            cornerLeftWidth = cell.oL() - table.oL(),\n            cornerUpHeight = cell.oT() - table.oT(),\n            cornerRightX = cell.oL()  + cellWidth,\n            cornerDownY = cell.oT() + cellHeight,\n            cornerRightWidth = tblWidth - cornerLeftWidth - cellWidth,\n            cornerDownHeight = tblHeight - cornerUpHeight - cellHeight;\n\n        // 1. 左上角\n        let leftUp = $(_vTblX_ + \".left-up\");\n        leftUp.c(_left_, cornerLeftX)\n            .c(_top_, cornerUpY)\n            .c(_width_, cornerLeftWidth)\n            .c(_height_, cornerUpHeight)\n            .c(_zIndex_, 9);\n\n        // 2. 右上角\n        let rightUp = $(_vTblX_ + \".right-up\");\n        rightUp.c(_left_, cornerRightX)\n            .c(_top_, cornerUpY)\n            .c(_width_, cornerRightWidth)\n            .c(_height_,  cornerUpHeight)\n            .c(_zIndex_, 9);\n\n        // 3. 左下角\n        let leftDown = $(_vTblX_ + \".left-down\");\n        leftDown.c(_left_, cornerLeftX)\n            .c(_top_, cornerDownY)\n            .c(_width_, cornerLeftWidth)\n            .c(_height_, cornerDownHeight)\n            .c(_zIndex_, 9);\n\n        // 4. 右下角\n        let rightDown = $(_vTblX_ + \".right-down\");\n        rightDown.c(_left_, cornerRightX)\n            .c(_top_, cornerDownY)\n            .c(_width_, cornerRightWidth)\n            .c(_height_, cornerDownHeight)\n            .c(_zIndex_, 9);\n\n        // 须延时后再执行显示，让以上代码先完成\n        setTimeout(function () {\n            // 针对不同表格之间点击强制移除动画后的恢复\n            V_ui_addAnimate(TableCross_ui);\n            V_ui_show(leftUp);\n            V_ui_show(rightUp);\n            V_ui_show(leftDown);\n            V_ui_show(rightDown);\n        }, 50);\n    });\n}\n\n/**\n * 隐藏表格阅读模式（十字光标）\n */\nfunction TableCross_hide() {\n    if (TableCross_lastCell === gUndefined)\n        return;\n\n    V_ui_hide(TableCross_ui);\n\n    JQ_removeClass(TableCross_lastCell, _vTblXCell_);\n    TableCross_lastTable = gUndefined;\n}\n\n/**\n * 判断当前内容块是否与已显示了阅读模式（十字光标）的表格重叠\n * @param target 内容块对象\n*/\n// function TableCross_checkFallWith(target) {\n//     return (TableCross_lastTable !== gUndefined\n//         && target.ch().a(_id_) === TableCross_lastTable.a(_id_));\n// }\n\n// ==================== 表格自动换行类 ==================== //\n\n/**\n * 切换表格自动换行开关\n */\nfunction TableWrap_toggle(table) {\n    // 已打开，则关闭\n    if (table.c(_whiteSpace_) === _preWrap_)\n        TableWrap_disable(table);\n    // 未打开，则打开\n    else\n        TableWrap_enable(table);\n}\n\n// 打开表格自动换行\nfunction TableWrap_enable(table) {\n    JQ_addClass(ContentAssistor_btns_tableWrap, _selected_);\n    JQ_removeClass(table, \"v-table-unwrap\");\n    JQ_addClass(table, \"v-table-wrap\");\n    // table.c(s_CssText, s_WhiteSpace + \":\" + s_PreWrap + s_Important);\n}\n\n// 关闭表格自动换行\nfunction TableWrap_disable(table) {\n    JQ_removeClass(ContentAssistor_btns_tableWrap, _selected_);\n    JQ_removeClass(table, \"v-table-wrap\");\n    JQ_addClass(table, \"v-table-unwrap\");\n    // table.c(s_CssText, s_WhiteSpace + \":pre\" + s_Important);\n}\n\n// ==================== 表格列格式化类 ==================== //\n\nlet ColumnFormatting_syntax_checkbox_header = /\\[ ?] /; // 复选框列头格式语法\nlet ColumnFormatting_syntax_checkbox = /(^((\\[[x-]])|[Yy?？])(\\s.+)*)/; // 复选框列内单元格格式语法\n\n/**\n * 初始化\n * @param table 表格对象\n * @param cell 单元格对象\n * @param text 单元格文本内容\n */\nfunction ColumnFormatting_init(table, cell, text) {\n    if (table.a(_dataColumnFmting_) !== _true_\n        && (cell.f(_strong_ + \",em,u,\" + _mark_ + \",\" + _del_).length > 0 // 普通列格式\n        || cell.c(_textAlign_) === _right_ // 右对齐表示使用数值格式\n        || ColumnFormatting_syntax_checkbox_header.test(text))) { // 复选框列格式\n            // 将表格标识为带列格式语法\n            table.a(_dataColumnFmting_, _true_);\n            return gTrue; // 匹配到列格式\n    }\n    return gFalse; // 未匹配到列格式\n}\n\n/**\n * 返回表格内所有非合并的同列单元格对象集合\n * @param table 表格格对象\n * @param th 列头单元格对象\n * @param cells 集合变量\n */\nfunction ColumnFormatting_getCells(table, th, cells) {\n    if (cells === gUndefined)\n        cells = table.f(V_attrX(_dataColspan_, _true_, \"!=\") + V_attrX(_dataTblCol_, th.a(_dataTblCol_)));\n    return cells;\n}\n\n/**\n * 返回表格 tbody 内的同列单元格对象集合\n * @param table 表格格对象\n * @param th 列头单元格对象\n * @param tbodyCells 集合变量，为 gUndefined 则重新生成\n */\nfunction ColumnFormatting_getTbodyCells(table, th, tbodyCells) {\n    if (tbodyCells === gUndefined)\n        tbodyCells = table.f(\"td\" + V_attrX(_dataTblCol_, th.a(_dataTblCol_)));\n    return tbodyCells;\n}\n\n/**\n * 列格式化\n * @param table 表格对象\n */\nfunction ColumnFormatting_format(table) {\n    table.f(\"thead th\").e(function () {\n        let th = $(this),\n            cells = gUndefined,\n            tbodyCells = gUndefined,\n            cellsCSS = _;\n\n        // 粗体\n        if (th.f(_strong_ + _firstChild_).length > 0) {\n            cells = ColumnFormatting_getCells(table, th, cells);\n            cellsCSS += _vTblColFmt_Bold_ + ___;\n        }\n\n        // 斜体\n        if (th.f(\"em\" + _firstChild_).length > 0) {\n            cells = ColumnFormatting_getCells(table, th, cells);\n            cellsCSS += _vTblColFmt_Em_ + ___;\n        }\n\n        // 高亮\n        let thHTML = th.hm();\n        if (thHTML.sW(\"<mar\") && thHTML.eW(\"rk>\") // <mark>...</mark>\n            || th.a(_class_) !== gUndefined\n            && th.a(_class_).i(_vTblColFmtMark_) > -1) {\n                $(V_attrX(_dataTblCol_, th.a(_dataTblCol_))).f(_mark_).ch().unwrap();\n                cells = ColumnFormatting_getCells(table, th, cells);\n                cellsCSS += _vTblColFmtMark_ + ___;\n        }\n\n        // 批量添加以上列的常规样式\n        if (cells !== gUndefined && cellsCSS.length > 0)\n            JQ_addClass(cells, cellsCSS);\n\n        // 下划线\n        // if (th.f(\"u\" + _firstChild_).length > 0) {\n        //     JQ_addClass(th, _vTblColFmt_U_);\n        //     tbodyCells = ColumnFormatting_getTbodyCells(table, th, tbodyCells);\n        //     tbodyCells.contents().wrap(\"<u></u>\");\n        // }\n\n        // 删除线\n        // if (th.f(_del_ + _firstChild_).length > 0) {\n        //     JQ_addClass(th, _vTblColFmtDel_);\n        //     tbodyCells = ColumnFormatting_getTbodyCells(table, th, tbodyCells);\n        //     tbodyCells.contents().wrap(\"<\" + _del_ + \"></\" + _del_ + \">\");\n        // }\n\n        // 复选框\n        if (ColumnFormatting_syntax_checkbox_header.test(th.t())) {\n            cells = ColumnFormatting_getCells(table, th, cells);\n            JQ_addClass(cells, _vTblColFmt_Chkbox_);\n\n            // 删除列头的复选框语法\n            ColumnFormatting_removeCheckboxSyntax(th, ColumnFormatting_syntax_checkbox_header);\n\n            tbodyCells = ColumnFormatting_getTbodyCells(table, th, tbodyCells);\n\n            tbodyCells.e(function () {\n                let ce = $(this),\n                    typeFlag = ce.t().m(ColumnFormatting_syntax_checkbox),\n                    chkStatus = _no_,\n                    chkStyle = _dark_;\n\n                typeFlag = (typeFlag != null) ? typeFlag[2] : _;\n\n                // 跳过横向合并的单元格\n                if (ce.a(_colspan_) !== gUndefined)\n                    return gTrue;\n\n                // 移除单元格的复选框语法内容\n                ColumnFormatting_removeCheckboxSyntax(ce, typeFlag);\n\n                // 指定为 yes - 已选择\n                if (typeFlag === \"[x]\" || typeFlag === \"Y\") {\n                    chkStatus = _yes_;\n                    chkStyle = _theme_;\n                }\n                // 指定为 un - 不确定选择\n                else if (typeFlag === \"[-]\" || typeFlag === \"?\" || typeFlag === \"？\")\n                    chkStatus = _un_;\n                // 无指定\n                else\n                    ce.rHTML(_nbsp_, _);\n\n                // 添加复选框样式\n                ce.pp(V_ui_svgIcon(_icoChkbox__ + chkStatus, 14, 14, chkStyle, _, V_attr(_dataChk_, chkStatus)));\n            });\n        }\n\n        // 数值格式\n        if (th.c(_textAlign_).sW(\"r\")) {\n            tbodyCells = ColumnFormatting_getTbodyCells(table, th, tbodyCells);\n            // 设置为等宽字体\n            JQ_addClass(tbodyCells, _vTblColFmtNum_);\n            // 数值格式化处理\n            tbodyCells.e(function () {\n                let ce = $(this),\n                    text = ce.t();\n                // 内容为数值\n                if (text.isNumber()) {\n                    // 添加千位符\n                    ce.hm(V_formatting_decimal( // 添加千位符\n                        V_formatting_thousands(ce.hm()))); // 对小数进行格式化处理\n                    // 根据正负号进行着色处理\n                    ColumnFormatting_coloringNumber(ce, text, gTrue);\n                }\n                // 内容为百分数\n                else if (text.isPercent()) {\n                    // 对小数进行处理\n                    ce.hm(V_formatting_percent( // 对小数进行处理\n                        V_formatting_decimal(ce.hm()))); // 对百分数进行格式化处理\n                    // 根据正负号进行着色处理\n                    let coloring = ColumnFormatting_coloringNumber(ce, text, gTrue),\n                        percent = text.r(/(-|\\+|\\s)/g, _),\n                        percentValue = JS_mathRound(percent.r(\"%\", _)),\n                        percentBg = V_ui_hexToRGB(V_util_getVarVal(\"--h-f\")),\n                        bg1 = V_ui_formatRGBA(percentBg, 0.1),//\"rgba(128, 128, 128, 0.1)\",\n                        bg2 = V_ui_formatRGBA(percentBg, 0.4),//\"rgba(128, 128, 128, 0.4)\",\n                        bgSplit = V_ui_formatRGBA(percentBg, 0.8);//\"rgba(128, 128, 128, 0.8)\";\n\n                    // 对有首色的进行渐变颜色调整\n                    if (coloring) {\n                        let baseBg = ce.c(_color_).r(\"rgb\", \"rgba\");\n                        bg1 = baseBg.r(\")\", \", 0.05)\");\n                        bg2 = baseBg.r(\")\", \", 0.2)\");\n                        bgSplit = baseBg.r(\")\", \", 0.7)\");\n                    }\n                    // 根据百分比生成渐变背景色、最小宽度\n                    ce.c(_background_, \"linear-gradient(90deg, \" + bg1 + \" 0%, \" + bg2 + ___ + (percentValue > 1 ? percentValue - 1 : 0)\n                        + \"%, \" + bgSplit + ___ + percent\n                        + \", transparent \" + percent + \")\")\n                            .c(_minWidth_, \"100px\");\n                    // 对 +/- 符号进行处理\n                    ce.hm(ce.hm().r(\">+\", \">▴ \").r(\">-\", \">▾ \"));\n                }\n                // 内容为货币\n                else if (text.isCurrency()) {\n                    // 对货币符号进行格式货\n                    ce.hm(V_formatting_decimal( // 对货币符号进行格式货\n                        V_formatting_thousands( // 添加千位符\n                            V_formatting_currency(ce.hm())))); // 对小数进行格式化处理\n                    // 根据正负号进行着色处理\n                    ColumnFormatting_coloringNumber(ce, text, gFalse);\n                }\n            });\n        } // 数值格式\n\n        // 标识单元格是否为横向合并，横向合并的单元不应用列格式\n        if (th.a(_colspan_) !== gUndefined)\n            th.a(_dataColspan_, _true_);\n        else\n            th.a(_dataColspan_, _false_);\n    });\n}\n\n/**\n * 根据数值的正、负号进行着色处理\n * @param target 着色的对象\n * @param text 依据的数值文本\n * @param mode 正负号位置模式，true：在开头，false: 在任意位置\n * @returns boolean 着色结果，true：有着色，false：没有着色\n */\nfunction ColumnFormatting_coloringNumber(target, text, mode) {\n    // 正、负号在文本的开头\n    if (mode) {\n        if (text.sW(\"-\")) {\n            JQ_addClass(target, _vTblColFmtNumNegative_);\n            return gTrue;\n        }\n        else if (text.sW(\"+\")) {\n            JQ_addClass(target, _vTblColFmtNumPositive_);\n            return gTrue;\n        }\n    }\n    // 正、负号在文本的任意位置\n    else {\n        if (text.i(\"-\") > -1) {\n            JQ_addClass(target, _vTblColFmtNumNegative_);\n            return gTrue;\n        }\n        else if (text.i(\"+\") > -1) {\n            JQ_addClass(target, _vTblColFmtNumPositive_);\n            return gTrue;\n        }\n    }\n    return gFalse;\n}\n\n/**\n * 移除复选框的语法内容\n * @param target 目标单元格对象\n * @param syntaxText 要移除的语法内容\n */\nfunction ColumnFormatting_removeCheckboxSyntax(target, syntaxText) {\n    target.rHTML(syntaxText, _);\n}\n\n// ==================== 表格行分组/折叠类 ==================== //\n\nlet RowGroup_folderCount = 0, // 折叠行内行分组类型的数量\n    RowGroup_syntax_tag = /^>+(\\s)./, // 用于匹配行折叠语法\n    RowGroup_syntax_tag2Replace = /(&gt;)+(\\s)/, // 用于匹配将行折叠语法替换为指定字符\n    RowGroup_spliter = \"> \", // 行折叠语法与内容的分隔标识\n    RowGroup_parentStack = [], // 上级行的堆栈\n    RowGroup_colorStack = [], // 不同分组的背景颜色堆栈\n    // 表格折叠行图标：已收起\n    RowGroup_icoCloser = V_ui_svgIcon(_icoFolded_, 16, 16, _theme_);\n    // 表格折叠行图标：已展开\n    // RowGroup_icoOpened = V_ui_genSvgIcon(\"icoUnfold\", 16, 16, s_Theme)\n\n/**\n * 初始化\n * @param table 表格对象\n */\nfunction RowGroup_init(table) {\n    // 若不是在新标签打开的，将第 1 列的设置缩进样式\n    JQ_addClass(table.f(V_attrX(_dataTblCol_, \"-0\", \"$=\")), _vTblRowGNotFolder_);\n\n    let lastLevel = 0, // 上一个缩进等级\n        currentLevel = 0; // 当前缩进等级\n        // bgColor = new RandomColor();\n\n    // 遍历所有行的第 1 个单元格\n    table.f(\"td\" + _firstChild_).e(function () {\n        let td = $(this),\n            tr = td.p(),\n            text = td.t();\n\n        // 判断每行的首列，是否有行折叠标识\n        // 没有则进入下一个循环\n        if (!RowGroup_syntax_tag.test(text)) {\n            lastLevel = 0;\n            RowGroup_parentStack.length = 0;\n            RowGroup_colorStack.length = 0;\n            return gTrue;\n        }\n\n        // 从语法中获得当前缩进等级\n        currentLevel = text.i(RowGroup_spliter) + 1;\n        // 当前等级比上一次等级要深\n        if (currentLevel > lastLevel) {\n            let beforeChanged = lastLevel;\n            lastLevel = currentLevel;\n            // 设置为新的行分组\n            RowGroup_newFolder(tr, currentLevel, beforeChanged === 0,\n                V_ui_formatRGBA(RandomColor_dissimilarRgb(), _varTblRowAlpha_));\n            // 设置为行缩进行\n            RowGroup_ident(tr, td, currentLevel);\n        }\n        // 当前等级比上一次等级要浅\n        else {\n            // 获得等级差进行\n            let count = lastLevel - currentLevel;\n            // 获得当前行对应的上级行\n            if (count > 0) {\n                for (let i = 0; i < count; i++) {\n                    RowGroup_parentStack.pop();\n                    RowGroup_colorStack.pop();\n                }\n                // JQ_addClass(tr, \"v-rowgroup-spliter\");\n                // tr.ch(\"td\").c(_backgroundColor_, \"yellow\");\n            }\n\n            lastLevel = currentLevel;\n            // 设置为行缩进行\n            RowGroup_ident(tr, td, currentLevel);\n        }\n    });\n}\n\n/**\n * 获得最近一个分组行分组对象\n */\nfunction RowGroup_lastParent() {\n    return RowGroup_parentStack[RowGroup_parentStack.length - 1];\n}\n\n/**\n * 获得最近一个分组颜色对象\n */\nfunction RowGroup_lastColor() {\n    return RowGroup_colorStack[RowGroup_colorStack.length - 1];\n}\n\n/**\n * 设置为新的行分组\n * @param tr 对应的行对象\n * @param level 缩进层级\n * @param reset 是否重置回第一级\n * @param color 该分组背景色\n */\nfunction RowGroup_newFolder(tr, level, reset, color) {\n    let folderRow = tr.pr();\n    RowGroup_folderCount++;\n\n    // 将当前行分组的 id 入栈\n    RowGroup_parentStack.push(RowGroup_folderCount);\n    // 将当前行分组的随机背景颜色入栈\n    RowGroup_colorStack.push(color);\n\n    // 设置折叠行分组的属性\n    folderRow.a(_dataFolderId_, RowGroup_folderCount);\n    folderRow.a(_dataFolder_, _true_);\n    folderRow.a(_dataRowFolded_, _true_);\n\n    // 获得折叠行分组首个单元格\n    let td = folderRow.ch(\"td\" + _first_),\n        tdHadIdent = td.f(\".\" + _vTblRowGIdenter_ + _last_);\n        // btnRowGroup = V_ui_span(\"v-tbl-row-g-btn\", __, RowGroup_icoCloser);\n\n    // 设置折叠控件样式\n    if (tdHadIdent.length > 0)\n        tdHadIdent.af(V_ui_span(_vTblRowGBtn_.xD(), _, RowGroup_icoCloser));\n    else\n        td.pp(V_ui_label(_vTblRowGBtn_.xD(), _, RowGroup_icoCloser));\n\n    V_ui_addAnimate(td.f(_vTblRowGBtn_ + \">\" + _svg_));\n    // 调整折叠行的缩进样式\n    JQ_removeClass(td, _vTblRowGNotFolder_);\n    JQ_addClass(td, _vTblRowGFolder_);\n    JQ_addClass(tdHadIdent, _vTblRowGIdenterFolder_);\n\n    // 添加代表目录的括号及样式\n    // 重新组合生成新的单元格内容，以支持原始带格式的单元格内容\n    let preClass = \".\" + _vTblRowGIdenter_ + \", \" + _vTblRowGBtn_,\n        preObjs = td.f(preClass),\n        cloneTd = td.clone();\n    JQ_remove(cloneTd.ch(preClass));\n    // td.hm(__echoOuterHTML(preObjs) + \" <span class='folder-marker'>[</span> \" + V_ui_strong(__ + cloneTd.hm() + _s_) + \"<span class='folder-marker'>]</span>\");\n    td.hm(__echoOuterHTML(preObjs) + ___ + V_ui_strong(cloneTd.hm() + ___));\n\n    // 设置展开、收起事件\n    td.ch(_vTblRowGBtn_).ck(function (event) {\n        RowGroup_toggle(folderRow, event);\n    });\n\n    /**\n     * 遍历获得指定对象集合的所有 outerHTML 内容\n     * @param objectSet 对象集合\n     * @returns String\n     */\n    function __echoOuterHTML(objectSet) {\n        let outerHTML = _;\n        objectSet.e(function () {\n            outerHTML += $(this).prop(_outerHTML_);\n        });\n        return outerHTML;\n    }\n}\n\n/**\n * 展开、收起表格行分组下的表格行\n * @param folderRow 折叠按钮所在的表格行对象\n * @param event 事件对象\n */\nfunction RowGroup_toggle(folderRow, event) {\n    // 取消事件冒泡，用于避免显示表格的阅读模式（十字光标）\n    event.stopPropagation();\n\n    // 处理行分组的打开、关闭\n    if (folderRow.a(_dataRowFolded_).sW(\"t\"))\n        RowGroup_open(folderRow);\n    else\n        RowGroup_close(folderRow);\n\n    // 隐藏表格的阅读模式（十字光标）\n    TableCross_hide();\n}\n\n/**\n * 展开所有表格行分组\n * @param table 指定的表格对象\n * @param mode 指定打开模式。auto：系统自动打开\n * @returns boolean 处理结果。true: 已展开，false: 不符合展开条件\n */\nfunction RowGroup_openAll(table, mode) {\n    if (table.a(_dataRowGroup_) !== _true_)\n        return gFalse;\n\n    table.f(_vTblRowGBtn_).e(function () {\n        let folderRow = $(this).p().p();\n        if (folderRow.a(_dataRowFolded_) === _true_)\n            RowGroup_open(folderRow, mode);\n    });\n    return gTrue;\n}\n\n/**\n * 收起全部表格行分级\n * @param table 指定的表格对象\n * @param mode 指定处理范围。auto：关闭被自动打开的，不指定时默认全部关闭\n * @returns boolean 处理结果。true: 已展开，false: 不符合展开条件\n */\nfunction RowGroup_closeAll(table, mode) {\n    if (table.a(_dataRowGroup_) !== _true_)\n        return gFalse;\n\n    // 只对第一级的行分组进行处理，非第一级的行分级为 span.v-tbl-row-g-btn\n    table.f(_label_ + _vTblRowGBtn_).e(function () {\n        let folderRow = $(this).p().p();\n        LOG(mode, folderRow.a(_dataRowOpenMode_), folderRow.a(_dataRowFolded_));\n        if (mode === _auto_) {\n            if (folderRow.a(_dataRowOpenMode_) === _auto_ && folderRow.a(_dataRowFolded_) === _false_)\n                RowGroup_close(folderRow);\n        }\n        else {\n            if (folderRow.a(_dataRowFolded_) !== _true_)\n                RowGroup_close(folderRow);\n        }\n    });\n    return gTrue;\n}\n\n/**\n * 重置清空表格中的行分组相关信息\n * @param target 目标表格\n */\nfunction RowGroup_reset(target) {\n    JQ_removeAttr(target, _dataRowGroup_);\n    JQ_removeAttr(target.f(\"tr\" + V_attrX(_dataParentFolderId_)), _dataParentFolderId_);\n}\n\n/**\n * 设置为缩进行\n * @param tr 对应的行对象\n * @param td 对应的行的首个单元格\n * @param level 缩进层级\n */\nfunction RowGroup_ident(tr, td, level) {\n    // 统一缩进节点符号转换，尾行在完成的有处理后再进行修正\n    td.rHTML(RowGroup_syntax_tag2Replace, _);\n\n    // 设置被折叠行的属性\n    tr.a(_dataParentFolderId_, RowGroup_lastParent());\n    // 设置缩进样式\n    td.a(_dataIdentLevel_, level);\n    // 调整样式\n    JQ_removeClass(td, _vTblRowGNotFolder_);\n    JQ_addClass(td, _vTblRowGSub_);\n    // 设置被折叠行的背景色\n    tr.c(_backgroundColor_, RowGroup_lastColor());\n\n    // 生成缩进占位元素\n    for (let i = 0; i < level; i++) {\n        let identer = td.f(\".\" + _vTblRowGIdenter_ + _last_),\n            identObj = V_ui_label(_vTblRowGIdenter_, _);\n        if (identer.length > 0)\n            identer.af(identObj);\n        else\n            td.pp(identObj);\n    }\n\n    // 隐藏被折叠的行\n    tr.c(_display_, _table_ + \"-column\");\n}\n\n/**\n * 展开表格行分组\n * @param folderRow 行分组对象\n * @param mode 指定打开模式。auto：系统自动打开\n */\nfunction RowGroup_open(folderRow, mode) {\n    // 处理展开行分组\n    let id = folderRow.a(_dataFolderId_),\n        table = folderRow.p().p(),\n        subRows = table.f(\"tr\" + V_attrX(_dataParentFolderId_, id)),\n        folderButton = folderRow.ch(\"td\" + _first_).ch(_vTblRowGBtn_ + _last_);\n\n    folderRow.a(_dataRowFolded_, _false_);\n    if (mode !== gUndefined)\n        folderRow.a(_dataRowOpenMode_, mode);\n    // folderButton.prop(\"innerHTML\", RowGroup_icoOpened);\n    // folderButton.hm(RowGroup_icoOpened);\n    JQ_addClass(folderButton.ch(_svg_), _vRotate90_);\n    subRows.c(_display_, _);\n\n    // 如表格指定了重复表头则进行对应处理\n    let thRow = table.f(\"thead>tr\" + _lastChild_);\n    if (table.a(_dataThRpt_) === \"group\") {\n        // 从第 2 列开始进行处理\n        folderRow.f(\"td:not(\" + _firstChild_ + \")\").e(function () {\n            let td = $(this),\n                tdHTML = td.hm().x();\n            if (tdHTML.length === 0 || tdHTML === _nbsp_) {\n                let colID = td.a(_dataTblCol_),\n                    th = thRow.f(\"th\" + V_attrX(_dataTblCol_, colID)).hm();\n                // 如果对应的列头可能因向下合并单元格为空时，尝试找上一行对应的列头\n                if (th === gUndefined) {\n                    let prevThRow = thRow.pr();\n                    if (prevThRow !== gUndefined)\n                        th = prevThRow.f(\"th\" + V_attrX(_dataTblCol_, colID)).hm();\n                }\n                // 临时将行分组中的单元格替换为对应的列头\n                td.hm(th);\n                JQ_addClass(td, _vThRepeater_);\n            }\n        });\n    }\n}\n\n/**\n * 折叠表格行分组\n * @param folderRow 行分组对象\n */\nfunction RowGroup_close(folderRow) {\n    // 处理折叠行分组\n    let id = folderRow.a(_dataFolderId_),\n        subRows = $(\"tr\" + V_attrX(_dataParentFolderId_, id)),\n        folderButton = folderRow.ch(\"td\" + _first_).ch(_vTblRowGBtn_ + _last_);\n\n    folderRow.a(_dataRowFolded_, _true_);\n    JQ_removeAttr(folderRow, _dataRowOpenMode_);\n    // folderButton.prop(\"innerHTML\", RowGroup_icoClosed);\n    // folderButton.hm(RowGroup_icoClosed);\n    JQ_removeClass(folderButton.ch(_svg_), _vRotate90_);\n\n    // 折叠所有子行（包括行分组）\n    subRows.e(function () {\n        let tr = $(this),\n            folder = tr.a(_dataFolder_);\n        if (folder !== gUndefined && folder.sW(\"t\"))\n            RowGroup_close(tr);\n        tr.c(_display_, _table_ + \"-column\");\n    });\n\n    // 如表格指定了重复表头则进行对应处理\n    let table = folderRow.p().p();\n    if (table.a(_dataThRpt_) === \"group\") {\n        // 从第 2 列开始进行处理\n        folderRow.f(\"td:not(\" + _firstChild_ + \")\").e(function () {\n            let td = $(this);\n            // 将行分组中临时替换的列头删除\n            if (td.a(_class_).i(_vThRepeater_) > -1) {\n                td.hm(_);\n                JQ_removeClass(td, _vThRepeater_);\n            }\n        });\n    }\n}\n\n/**\n * 根据设备类型自适应hover样式\n */\nfunction RowGroup_adjustHoverStyle() {\n    if (env.device.mobile) // 移动设备时解绑样式事件\n        $(_vTblRowGBtn_).uH();\n    else // 为表格行分组的折叠控件绑定 hover 事件\n        V_ui_bindHover($(_vTblRowGBtn_));\n}\n\n// ==================== 表格列头重复生成器 ==================== //\n\nlet ThRepeater_syntax_tag = /^(##\\s).+/; // 用于匹配表格列头重复的语法\n\n/**\n * 初始化重复表头处理\n */\nfunction ThRepeater_init(table) {\n    let hasRowGroup = table.a(_dataRowGroup_) === _true_;\n\n    // 带行分组时，表头重复模式为 group，其他则为 page\n    table.a(_dataThRpt_, hasRowGroup ? \"group\" : \"page\");\n    if (hasRowGroup)\n        return;\n\n    // 处理 page 模式的表头重复\n    let rowIndex = 1,\n        pageSize = 15 + rowIndex,\n        thRow = table.f(\"thead>tr\"),\n        skipRowCount = 0,\n        lastSkipRowCount = 0,\n        tbody = table.f(\"tbody>tr\"),\n        rowCount = tbody.length;\n\n    tbody.e(function () {\n        let tr = $(this),\n            td = tr.ch(\"td[rowspan]\");\n\n        // 跳过有跨行合并的行\n        if (td.length > 0) {\n            td.e(function () {\n                let rowSpan = JS_parseInt($(this).a(_rowspan_));\n                if (rowSpan > skipRowCount) {\n                    skipRowCount = rowSpan - 1;\n                }\n                lastSkipRowCount = skipRowCount - 1;\n            });\n        }\n\n        // 每 15 行为 1 页\n        if (skipRowCount === 0 && rowIndex % (pageSize + lastSkipRowCount - 1) === 0\n            && rowIndex < rowCount) {\n                let colIndex = 0;\n                thRow.e(function () {\n                    tr.af($(this).prop(_outerHTML_).rA(\"<th \", \"<td \"));\n                    JQ_addClass(tr.n().ch(\"td\"), _vThRepeater_);\n                    if (colIndex === 0)\n                        JQ_addClass(tr.n().ch(\".\" + _vThRepeater_), \"first\");\n                    else\n                        JQ_addClass(tr.n().ch(\".\" + _vThRepeater_), \"not-first\");\n                    tr = tr.n();\n                    // 取消表格行号\n                    JQ_addClass(tr, \"v-tr-repeater\");\n\n                    colIndex++;\n                });\n        }\n        rowIndex++;\n\n        // 未完成须跳过的行\n        if (skipRowCount > 0)\n            skipRowCount--;\n        // 已完成须跳过的行\n        else\n            lastSkipRowCount = 0;\n    });\n}\n\n// ==================== 音频增强类 ==================== //\n\nlet ExtAudio_icon_loading = V_ui_svgIcon(_icoLoading_, 16, 16, _light_),\n    ExtAudio_icon_play = V_ui_svgIcon(_icoPlay_, 16, 16, _light_),\n    ExtAudio_icon_pause = V_ui_svgIcon(_icoPause_, 16, 16, _light_),\n    ExtAudio_icon_stop = V_ui_svgIcon(_icoStop_, 16, 16, _light_),\n    ExtAudio_icon_forbidden = V_ui_svgIcon(_icoForbidden_, 16, 16, _light_);\n\n/**\n * 初始化音频数据\n */\nfunction ExtAudio_init() {\n    // 支持指定类型的音频，以及支持带参数的 URL\n    let writeImg = _write_ + ___ + _img_;\n    $(writeImg + \"[src$='.mp3'],\" + writeImg + \"[src$='.m4a'],\" + writeImg + \"[src$='.ogg'],\" + writeImg + \"[src$='.wav'],\"\n    + writeImg + \"[src*='.mp3?'],\" + writeImg + \"[src*='.m4a?'],\" + writeImg + \"[src*='.ogg?'],\" + writeImg + \"[src*='.wav?']\").e(function () {\n        let audioLike = $(this),\n            audio = gUndefined,\n            src = audioLike.a(_src_),\n            container = audioLike.p(),\n            params = V_util_getUrlQueryParams(src);\n\n        // 指定为 mini 模式（扩展的自定义控件）\n        if (params[_controls_] === _mini_) {\n            V_doc_counter_audiomini++;\n\n            // 将 URL 为音频资源的 img 标签转换为 audio\n            audio = __transToAudio(audioLike, src);\n            // 设置 audio id 用于自定义 mini 控件\n            audio.a(_id_, _vkIdMiniAudio_ + V_doc_counter_audiomini);\n\n            // 添加音频播放 mini 控件\n            audio.af(V_ui_div(_vkIdMiniAudio_ + V_doc_counter_audiomini + \"-control\", _vAudioMiniControl_,\n                        V_attr(_dataTitle_, \"mini audio \" + V_doc_counter_audiomini)));\n\n            // 开始加载音频\n            audio.bind(\"loadstart\", function () {\n                let controls = $(\"#\" + $(this).a(_id_) + \"-control\");\n                JQ_addClass(controls, _vAudioMiniControl_);\n                JQ_addClass(controls, _loading_);\n                controls.hm(ExtAudio_icon_loading);\n            });\n\n            // 音频就绪可以开始播放\n            audio.bind(\"canplay\", function () {\n                let controls = $(\"#\" + $(this).a(_id_) + \"-control\");\n                JQ_removeClass(controls, _loading_);\n\n                // 绑定点击事件\n                controls.uC().ck(function () {\n                    __play(this, audio[0]);\n                });\n                controls.hm(ExtAudio_icon_play);\n                controls.a(_dataPause_, params[\"pause\"]);\n\n                // 须显示持续时长\n                let dur = params[\"duration\"];\n                if (dur !== gUndefined && dur.sW(\"t\")) {\n                    let dur2 = audio.a(_dataDuration_);\n                    if (dur2 === gUndefined || !dur2.sW(\"t\")) {\n                        // 计算音频时长\n                        let duration = audio[0].duration,\n                            min = Math.floor(duration / 60),\n                            sec = Math.floor(duration -  min * 60);\n                        let minStr = min > 0 ? min + \"′\" : _;\n                        audio.n().af(\" <sup class='v-duration-info'>\" + minStr + sec + \"″</sup>\");\n                        audio.a(_dataDuration_, _true_);\n                    }\n                }\n            });\n\n            // 正在播放\n            audio.bind(_playing_, function () {\n                let controls = $(\"#\" + $(this).a(_id_) + \"-control\"),\n                    pause = controls.a(_dataPause_);\n\n                JQ_addClass(controls, _vAudioMiniControl_)\n                JQ_addClass(controls, _playing_);\n\n                // 支持暂停播放\n                if (pause !== gUndefined && pause.sW(\"t\")) {\n                    controls.hm(ExtAudio_icon_pause);\n                }\n                // 不支持暂停播放，暂时即结束\n                else {\n                    controls.hm(ExtAudio_icon_stop);\n                    audio.currentTime = 0; // 播放都是从头开始\n                }\n            });\n\n            // 播放结束后恢复按钮状态\n            audio.bind(\"ended\", function () {\n                let controls = $(\"#\" + $(this).a(_id_) + \"-control\");\n                controls.hm(ExtAudio_icon_play);\n                JQ_removeClass(controls, _playing_);\n            });\n\n            // 故障或不可用\n            audio.bind(_emptied_, function () {\n                let id = $(this).a(_id_) + \"-control\",\n                    controls = $(\"#\" + id);\n                JQ_removeClass(controls, _loading_);\n                controls.hm(ExtAudio_icon_forbidden);\n                JQ_addClass(controls, _vAudioMiniControl_);\n                JQ_addClass(controls, _disabled_);\n                // 将无法加载的音频信息添加到链接检查器\n                __addToLinkChecker(id, controls.a(_dataTitle_));\n            });\n\n            // 加载错误\n            audio.bind(_error_, function () {\n                audio.tr(_emptied_);\n            });\n\n            // 鼠标 hover 事件\n            audio.hover(function () {\n                let _t =  $(this);\n                if (_t.a(_class_).i(_disabled_) === -1)\n                    JQ_addClass(_t, _hover_);\n            }, function () {\n                JQ_removeClass($(this), _hover_);\n            });\n        }\n        // 标准控件模式\n        else {\n            V_doc_counter_audio++;\n\n            // 确保 video 有独立的父容器，一般情况下 Typora 导出的为 <p>\n            if (V_util_getTagName(container) !== \"p\") {\n                audioLike.wrap(\"<p></p>\");\n            // if (V_util_getTagName(container) !== _figcaption_) {\n            //     audioLike.wrap(V_ui_figcaption(_, _, _));\n                container = audioLike.p();\n            }\n            // 设置容器样式数据，用于折叠内容时使用\n            container.a(_dataContainer_, _audio_);\n            JQ_addClass(container, _vCaptionContainer_);\n\n            // 先根据题注语法生成题注\n            CaptionGenerator_actionForMediaContent(audioLike, _audio_);\n\n            // 将 URL 为音频资源的 img 标签转换为 audio\n            audio = __transToAudio(audioLike, src);\n            // 设置 audio 为标准控件\n            audio.a(_controls_, _controls_);\n\n            // 若有第 2 题注，则微调样式\n            if (audio.n(_vCap2_).length > 0)\n                audio.c(_marginBottom_, \"-10px\");\n\n            // 故障或不可用\n            audio.bind(_emptied_, function () {\n                // 将无法加载的音频信息添加到链接检查器\n                __addToLinkChecker(audio.p().a(_id_), audio.p().a(_dataTitle_));\n            });\n\n            // 加载错误\n            audio.bind(_error_, function () {\n                audio.tr(_emptied_);\n            });\n        }\n\n        /**\n         * 将无效音频源的信息添加到链接检查器\n         *\n         * @param id 坏链对象的标识\n         * @param content 显示的内容\n         */\n        function __addToLinkChecker(id, content) {\n            // 将无法加载的音频信息添加到链接检查器\n            LinkTool_addToCheck(id, \"🔈 \"\n                + V_ui_strong([\n                    \"无效的音频源\",\n                    \"Invalid audio source\"\n                ][V_lang_id]) + \": \" + content);\n        }\n    });\n\n    /**\n     * 转换为 audio 标签\n     * @param audioLike 类 audio 标签（即 src 为音频的 img 标签)\n     * @param src 音频 URL\n     */\n    function __transToAudio(audioLike, src) {\n        let tips = [\n            \"您的浏览器不支持音频标签。\",\n            \"Your browser does not support the audio tag.\"\n        ][V_lang_id];\n\n        // 对 audio 标签的属性进行支持\n        let autoplay = V_util_getUrlQueryParams(src)[_autoplay_],\n            loop = V_util_getUrlQueryParams(src)[_loop_],\n            preload = V_util_getUrlQueryParams(src)[_preload_];\n\n        // 将 URL 为音频资源的 img 标签转换为 audio\n        audioLike.wrap(V_ui_audio(V_attr(_src_, src), tips));\n        let audio = audioLike.p();\n        // 移除图片 img 标签\n        JQ_remove(audioLike);\n\n        // 设置 audio 属性\n        if (autoplay !== gUndefined) audio.a(_autoplay_, _autoplay_);\n        if (loop !== gUndefined) audio.a(_loop_, _loop_);\n        if (preload !== gUndefined) audio.a(_preload_, _auto_);\n\n        return audio;\n    }\n\n    /**\n     * 播放音频\n     * @param self 自定义的播放控件对象\n     * @param audio 音频的 JavaScript 对象\n     */\n    function __play(self, audio) {\n        let controls = $(self);\n\n        // 已暂停、未播放\n        if (audio.paused) {\n            audio.play();\n        }\n        // 播放中\n        else {\n            controls.hm(ExtAudio_icon_play);\n            JQ_removeClass(controls, _playing_);\n            audio.pause();\n\n            // 不支持暂时播放时，暂时即结束\n            if (controls.a(_dataPause_) === gUndefined)\n                audio.currentTime = 0; // 播放都是从头开始\n        }\n    }\n}\n\n// ==================== 音频增强类 ==================== //\n\n/**\n * 初始化音频数据\n */\nfunction ExtVideo_init() {\n    // 支持指定类型的音频，以及支持带参数的 URL\n    let writeImg = _write_ + ___ + _img_;\n    $(writeImg + \"[src$='.ogv'],\" + writeImg + \"[src$='.mp4'],\" + writeImg + \"[src$='.webm'],\"\n    + writeImg + \"[src*='.ogv?'],\" + writeImg + \"[src*='.mp4?'],\" + writeImg + \"[src*='.webm?']\").e(function () {\n        let videoLike = $(this),\n            video = gUndefined,\n            src = videoLike.a(_src_),\n            container = videoLike.p();\n        V_doc_counter_video++;\n\n        // 确保 video 有独立的父容器，一般情况下 Typora 导出的为 <p>\n        if (V_util_getTagName(container) !== \"p\") {\n            videoLike.wrap(\"<p></p>\");\n        // if (V_util_getTagName(container) !== _figcaption_) {\n        //     videoLike.wrap(V_ui_figcaption(_, _, _));\n            container = videoLike.p();\n        }\n        // 设置容器样式数据，用于折叠内容时使用\n        container.a(_dataContainer_, \"video\");\n        JQ_addClass(container, _vCaptionContainer_);\n\n        // 先根据题注语法生成题注\n        CaptionGenerator_actionForMediaContent(videoLike, _video_);\n\n        // 将 URL 为音频资源的 img 标签转换为 video\n        video = __transToVideo(videoLike, src);\n\n        // 故障或不可用\n        video.bind(_emptied_, function () {\n            // 将无法加载的音频信息添加到链接检查器\n            __addToLinkChecker(video.p().a(_id_), video.p().a(_dataTitle_));\n        });\n\n        // 加载错误\n        video.bind(_error_, function () {\n            video.tr(_emptied_);\n        });\n    });\n\n    /**\n     * 将无效视频源的信息添加到链接检查器\n     * @param id 坏链对象的标识\n     * @param content 用于显示的内容\n     */\n    function __addToLinkChecker(id, content) {\n        // 将无法加载的音频信息添加到链接检查器\n        LinkTool_addToCheck(id, \"📺 \"\n            + V_ui_strong([\n                \"无效的视频源\",\n                \"Invalid video source\"\n            ][V_lang_id] + \": \") + content);\n    }\n\n    /**\n     * 转换为 video 标签\n     * @param videoLike 类 video 标签（即 src 为视频的 img 标签)\n     * @param src 视频 URL\n     */\n    function __transToVideo(videoLike, src) {\n        let tips = [\n            \"您的浏览器不支持视频标签。\",\n            \"Your browser does not support the video tag.\"\n        ][V_lang_id];\n\n        // 对 video 标签的属性进行支持\n        let autoplay = V_util_getUrlQueryParams(src)[_autoplay_],\n            loop = V_util_getUrlQueryParams(src)[_loop_],\n            preload = V_util_getUrlQueryParams(src)[_preload_],\n            width = V_util_getUrlQueryParams(src)[_width_],\n            height = V_util_getUrlQueryParams(src)[_height_];\n\n        // 将 URL 为音频资源的 img 标签转换为 video\n        videoLike.wrap(V_ui_video(V_attr(_src_, src), tips));\n        let video = videoLike.p();\n        // 移除图片 img 标签\n        JQ_remove(videoLike);\n\n        // 设置 video 为标准控件\n        video.a(_controls_, _controls_);\n\n        // 设置 video 属性\n        if (autoplay !== gUndefined) video.a(_autoplay_, _autoplay_);\n        if (loop !== gUndefined) video.a(_loop_, _loop_);\n        if (preload !== gUndefined) video.a(_preload_, _auto_);\n        if (width !== gUndefined) video.a(_width_, width);\n        if (height !== gUndefined) video.a(_height_, height);\n\n        return video;\n    }\n}\n\n// ==================== 文本输入框类 ==================== //\n\n/**\n * 构造函数\n * @param target 须在其后添加文本输入组件的目标对象\n * @param id 对象标识\n * @param append 添加模式。true：作为子元素添加，false：作为兄弟元素添加\n */\nfunction TextField(target, id, append) {\n    let T = this;\n    // 文本输入框属性\n    T.ui = gUndefined;\n    T.icon = gUndefined;\n    T.input = gUndefined;\n    T.reset = gUndefined;\n    T.action = gUndefined;\n\n    T.lastValue = _;\n    T.timerValueChanged = null;\n\n    T.inputing = gFalse;\n\n    // 文本输入框事件\n    T.onInput = gUndefined;\n    T.onFocus = gUndefined;\n    T.onBlur = gUndefined;\n    T.onKeyDown = gUndefined;\n    T.onAction = gUndefined;\n    T.pressEnter = gUndefined;\n    T.pressESC = gUndefined;\n\n    /**\n     * 将文本输入框实例添加到指定对象之后\n     * @param target 指定对象\n     * @param id 添加到目标对象的 id 值\n     * @param append true: 添加，false: 插入\n     */\n    T.__appendTo = function (target, id, append) {\n        // 文本输入框 UI\n        let ui = V_ui_div(_, \"v-textfield \" + id,\n                    V_ui_div(_, \"v-textfield-icon\")\n                    + V_ui_input(_, _, _text_)\n                    // + '<input type=\"text\">'\n                    + V_ui_div(_, \"v-textfield-action\")\n                    + V_ui_div(_, \"v-textfield-reset\", V_ui_svgIcon(_icoResetInput_, 16, 16, _alpha_))\n                );\n        if (append) {\n            target.ap(ui);\n            T.ui = target.ch(\".v-textfield.\" + id);\n        }\n        else {\n            target.af(ui);\n            T.ui = target.p().ch(\".v-textfield.\" + id);\n        }\n\n        // 获得实例的各关键对象\n        T.input = T.ui.ch(_input_);\n        T.reset = T.ui.ch(\".v-textfield-reset\");\n\n        /**\n         * 绑定文本输入事件\n         */\n        T.input.on(_input_, function () {\n            // 跳过中文输入法过程\n            // if ($(this).prop(\"compositionStatus\") !== \"start\")\n            //     __processInput();\n        });\n        /**\n         * 绑定开始中文输入事件\n         */\n        T.input.on(\"compositionstart\", function () {\n            $(this).prop(\"compositionStatus\", \"start\");\n        });\n        /**\n         * 绑定结束中文输入事件\n         */\n        T.input.on(\"compositionend\", function () {\n            $(this).prop(\"compositionStatus\", \"end\");\n        });\n        /**\n         * 绑定文本按键事件\n         */\n        T.input.on(\"keypress\", function (event) {\n            // __processInput();\n        });\n        /**\n         * 绑定文本获得焦点事件\n         */\n        T.input.focus(function () {\n            T.inputing = gTrue; // 标记为输入中的状态\n\n            JQ_addClass(T.ui, _vTextFieldFocus_);\n            __checkComValueChanged();\n\n            // 针对输入中文的情况，若输入了新的内容则进行查询\n            function __checkComValueChanged() {\n                if (T.input.prop(\"compositionStatus\") !== \"start\" && T.lastValue !== T.input.val()) {\n                    clearTimeout(T.timerValueChanged);\n                    T.timerValueChanged = null;\n                    T.lastValue = T.input.val();\n                    __processInput();\n                }\n                T.timerValueChanged = setTimeout(__checkComValueChanged, 500);\n            }\n            // 触发外部重定义事件\n            typeof(T.onFocus) === _function_ && T.onFocus(T.input);\n        });\n        /**\n         * 绑定文本失去焦点事件\n         */\n        T.input.blur(function () {\n            T.inputing = gFalse; // 标记为非输入中的状态\n\n            JQ_removeClass(T.ui, _vTextFieldFocus_);\n\n            clearTimeout(T.timerValueChanged);\n            T.timerValueChanged = null;\n\n            // 触发外部重定义事件\n            typeof(T.onBlur) === _function_ && T.onBlur(T.input);\n        });\n\n        /**\n         * 处理文本框输入的内容\n         */\n        function __processInput() {\n            let value = T.input.val().x();\n\n            if (value === _) {\n                T.reset.hide();\n\n                // 无内容时移除样式\n                if (T.action !== gUndefined && T.action.a(_class_).i(_enabled_) !== -1) {\n                    JQ_removeClass(T.action, _enabled_);\n                    V_ui_unbindHover(T.action);\n                }\n            }\n            else {\n                T.reset.show();\n\n                // 有内容时移除样式\n                if (T.action !== gUndefined && T.action.a(_class_).i(_enabled_) === -1) {\n                    JQ_addClass(T.action, _enabled_);\n                    T.action.hover(function () {\n                        T.actionHover(gTrue);\n                    }, function () {\n                        T.actionHover(gFalse);\n                    });\n                }\n            }\n            // 触发外部重定义事件\n            typeof(T.onInput) === _function_ && T.onInput(T.input, value);\n        }\n\n        /**\n         * 绑定键盘按下事件\n         */\n        T.input.bind(\"keydown\", function (event) {\n            let code = event.keyCode || event.which || event.charCode,\n                value = T.input.val();\n\n            let handled = false;\n            switch (code) {\n                case 13: // ENTER\n                    if (T.action !== gUndefined)\n                        T.action.tr(_click_);\n                    handled = true;\n                    typeof(T.pressEnter) === _function_ && T.pressEnter(T.input, value);\n                    break;\n                case 27: // ESC\n                    // 无内容时则取消取点，退出编辑，键盘事件则由导航中心的键盘事件进行响应\n                    if (value.length === 0)\n                        T.input.blur();\n                    // 有内容则清空内容等待重新输入\n                    else\n                        T.reset.tr(_click_);\n                    handled = true;\n                    typeof(T.pressESC) === _function_ && T.pressESC(T.input);\n                    break;\n            }\n            // 如果事件已处理，则禁止双重操作\n            if (handled)\n                event.preventDefault();\n\n            // 触发外部重定义事件\n            typeof(T.onKeyDown) === _function_ && T.onKeyDown(T.input, value, code);\n        });\n\n        /**\n         * 绑定重置输入内容按钮\n         */\n        T.reset.uC().ck(function () {\n            T.input.val(_);\n            T.input.select();\n            T.reset.hide();\n\n            if (T.action !== gUndefined && T.action.a(_class_).i(_enabled_) !== -1) {\n                JQ_removeClass(T.action, _enabled_);\n                V_ui_unbindHover(T.action);\n            }\n            // 触发外部重定义事件\n            typeof(T.onInput) === _function_ && T.onInput(T.input, _);\n        });\n    }\n\n    /**\n     * 清空输入框内容\n     */\n    T.clear = function () {\n        T.reset.tr(_click_);\n    }\n\n    /**\n     * 开启输入框前图标\n     * @param icon 图标\n     */\n    T.setIcon = function (icon) {\n        T.icon = T.ui.ch(\".v-textfield-icon\");\n        T.icon.hm(icon);\n        T.icon.show();\n    }\n\n    /**\n     * 开启动作按钮\n     * @param icon 按钮图标\n     */\n    T.setAction = function (icon) {\n        T.action = T.ui.ch(\".v-textfield-action\");\n        T.action.hm(icon);\n        T.action.show();\n\n        T.action.hover(function () {\n            T.actionHover(gTrue);\n        }, function () {\n            T.actionHover(gFalse);\n        });\n        T.action.uC().ck(function () {\n            let value = T.input.val();\n            // 输入内容不为空\n            if (value.length > 0)\n                T.input.select();\n\n            // 触发外部重定义事件\n            typeof(T.onAction) === _function_ && T.onAction(T.input, value);\n        });\n    }\n\n    /**\n     * 动作按钮鼠标 hover 处理\n     * @param enter true: 鼠标光标进入，false: 鼠标光标离开\n     */\n    T.actionHover = function (enter) {\n        if (enter) {\n            JQ_addClass(T.action, _hover_);\n            if (T.action.a(_class_).i(_enabled_) !== -1)\n                JQ_addClass(T.ui, _hoverAction_);\n        }\n        else {\n            JQ_removeClass(T.action, _hover_);\n            JQ_removeClass(T.ui, _hoverAction_);\n        }\n    }\n\n    /**\n     * 设置提示文本\n     * @param text 提示文本\n     */\n    T.placeholder = function (text) {\n        T.input.a(_placeholder_, text);\n    }\n\n    /**\n     * 显示文本输入框\n     */\n    T.show = function () {\n        T.ui.show();\n    }\n\n    /**\n     * 隐藏文本输入框\n     */\n    T.hide = function () {\n        T.ui.hide();\n    }\n\n    /**\n     * 设置文本框宽度\n     * @param width 宽度\n     */\n    T.setWidth = function (width) {\n        T.ui.c(_width_, width);\n        T.input.c(_width_, width\n            - (T.reset.w() + JS_parseInt(T.reset.c(_paddingLeft_)) * 2)\n            - (T.icon === gUndefined ? 0 : T.icon.w() + JS_parseInt(T.icon.c(_paddingLeft_)) * 2)\n            - (T.action === gUndefined ? 0 : T.action.w() + JS_parseInt(T.action.c(_paddingLeft_)) * 2));\n        if (T.icon !== gUndefined)\n            JQ_addClass(T.input, \"set-icon\");\n    }\n\n    // 生成控件\n    T.__appendTo(target, id, append);\n}\n\n// ==================== 过滤结果导航器类 ==================== //\n\nfunction FilterResultNavigator(result) {\n    let T = this;\n    T.index = 0;\n    T.result = result;\n\n    T.nextItem = function () {\n        if (T.result.isHidden())\n            return;\n\n        let set = T.result.ch(\":\" + _visible_),\n            item = set.eq(T.index);\n        T.index++;\n        if (T.index >= set.length)\n            T.index = 0;\n        return item;\n    }\n\n    T.reset = function () {\n        T.index = 0;\n    }\n}\n\n// ==================== 导航中心【目录】组件类 ==================== //\n\n/**\n * 构造函数\n * @param holder 关联的上级容器\n * @param hidden 是否默认为隐藏\n */\nfunction TocCatalog(holder, hidden) {\n    let T = this;\n    T.ui = {\n        entry : $(\".\" + _vSegmentBtn_ + \".catalog\"), // 入口\n        body : $(\".v-toc-catalog-body\"), // 目录索引内容\n        result : $(\".\" + _vTocFilterResult_ + \".catalog\") // 过滤结果面板\n    }\n\n    T.holder = holder;\n\n    T.h = []; // 目录集\n    // 针对无封面的情况\n    if (VOM_cover() === gUndefined)\n        T.h.push(_vkIdDocTitle_);\n\n    T.currentHeaderIndex = -1; // 当前章节在目录集中的索引\n    T.currentItem = gUndefined; // 当前章节对象\n\n    T.foldItems = []; // 非叶子章节集\n    T.lastHeaderFolder = gUndefined; // 上一个非叶子章节\n    T.lastHeaderLevel = 0; // 上一个章节的层级\n\n    T.lastDocScrollTop = 0; // 记录最后一次文档滚动位置\n\n    T.resultNav = new FilterResultNavigator(T.ui.result); // 过滤结果导航器\n\n    // 当前章节变化事件\n    T.onChapterChanged = gUndefined;\n\n    // 目录相关图标集\n    // T.icon = {\n    //     // 章节：已收起\n    //     folded : V_ui_genSvgIcon(_icoTocFolded_, 16, 16, s_Theme),\n    //     // 章节：已展开\n    //     // unfold : V_ui_genSvgIcon(\"icoTocUnfold\", 16, 16, s_Theme)\n    // };\n\n    // 更新无目录情况下的提示信息\n    T.ui.body.a(_dataCatalogEmpty_, [\n            \"( 无目录 )\",\n            \"( Catalog is Empty )\"\n        ][V_lang_id]);\n\n    /**\n     * 返回 Toc 组件类型名称\n     * @returns string Toc 组件类型名称\n     */\n    T.typeName = function () {\n        return _catalog_;\n    }\n\n    /**\n     * 是否有目录索引项目\n     */\n    T.hasIndexItem = function () {\n        return (T.ui.body.ch().length > 0);\n    }\n\n    /**\n     * 根据设备类型自适应hover样式\n     */\n    T.adjustHoverStyle = function () {\n        if (env.device.mobile) // 移动设备时解绑样式事件\n            $(_vTocFolder_).uH();\n        else // 非移动设备时绑定样式事件\n            V_ui_bindHover($(_vTocFolder_));\n    }\n\n    /**\n     * 添加目录节点\n     * @param item 由 Typora 生成的 [TOC] 目录节点\n     */\n    T.add = function (item) {\n        T.holder.segs.sts(this, gTrue);\n\n        // 将章节记录到目录集中\n        let a = item.ch(\"a\"),\n            href = a.a(_href_);\n        T.h.push(href.s(1, href.length));\n\n        // 自定义目录节点元数据\n        item.a(_id_, _vkHeader_ + item.a(_dataRef_)); // 添加id属性\n        item.a(_dataNode_, \"0\"); // 添加节点类型：0:叶子节点, 1:目录节点\n        item.a(_dataFolded_, _false_); // 添加节点状态：true:收起, false:展开\n        item.a(_title_, a.t().x());\n\n        // 使用完 <a> 的内容后，将章节中的链接文字提到链接外，用于实现长章节内容截断的 CSS 新式\n        a.af(a.t());\n        a.t(_);\n\n        // 点击目录节点事件\n        item.uC().ck(function () {\n            // 跳转至对应的页内锚点\n            let hash = $(\"#\" + item.a(_id_)).ch(\"a\").a(_href_);\n            V_util_gotoHash(hash);\n\n            // 触发锚点点击事件\n            typeof(T.holder.onInteractive) === _function_ && T.holder.onInteractive();\n        });\n\n        // -----------------------------------\n        // 目录非叶子章节的折叠功能实现\n        // 所有目录节点都添加 folding 空白控件备用\n        $(V_ui_div(\"fd-\" + _vkHeader_ + item.a(_dataRef_), _vTocFolder_.xD(), _nbsp_)).insertBefore(item.f(\"a\"));\n\n        // 记录所有非叶子节点的folder控件\n        let lv = ChpAutoNum_parseTocHeaderLevel(item.a(_class_));\n        if (T.lastHeaderFolder !== gUndefined) {\n            // 当前节点比上一个节点层级低，则上一节点为可折叠的节点\n            if (lv > T.lastHeaderLevel) {\n                // 将最近一个子目录节点折叠控件入栈\n                T.foldItems.push(T.lastHeaderFolder);\n\n                // 为非叶子的章节添加折叠图标\n                // let folder = T.lastHeaderFolder.hm(T.icon.unfold),\n                // let folder = T.lastHeaderFolder.hm(T.icon.folded),\n                let folder = T.lastHeaderFolder.hm(V_ui_svgIcon(_icoTocFolded_, 16, 16, _theme_, _vRotate90_)),\n                    folderParent = folder.p();\n                folderParent.a(_dataNode_, \"1\"); // 0:叶子, 1:目录\n                folderParent.a(_dataFolded_, _false_); // true:收起， false:展开\n\n                // 折叠控件事件\n                V_ui_addAnimate(folder.ch(_svg_));\n                folder.uC().ck(function (event) {\n                    event.stopPropagation(); // 停止事件冒泡\n\n                    let id = $(this).p().a(_id_);\n                    T.disposeFold(id, ($(\"#\" + id).a(_dataFolded_).sW(\"t\")) ? \"e\" : \"c\", gTrue);\n                });\n            }\n            // 右当前节点比上一个节点层级高，则视为从下级回到上级\n            // 并将最近一个子目录节点折叠控件出栈\n            else if (lv < T.lastHeaderLevel)\n                T.foldItems.pop();\n\n            // 设置当前节点的父级信息\n            if (T.foldItems.length > 0)\n                item.a(_dataPid_, T.foldItems[T.foldItems.length - 1].p().a(_id_));\n        }\n\n        // 更新最后处理的folder控件\n        T.lastHeaderFolder = $(\"#fd-\" + _vkHeader_ + item.a(_dataRef_));\n        T.lastHeaderLevel = lv;\n    }\n\n    /**\n     * 页面滚动时根据页面当前的位置，高亮对应目录中的章节\n     */\n    T.focusHeader = function (scrollTop) {\n        // ----------------------------------------\n        // 控制执行频率，避免处理过快影响性能\n        if (scrollTop === gUndefined)\n            scrollTop = $(document).scrollTop();\n        if (Math.abs(scrollTop - T.lastDocScrollTop) < 20)\n            return;\n\n        T.lastDocScrollTop = scrollTop;\n\n        // ----------------------------------------\n        // 寻找文档当前显示的章节\n        // 默认为最后一章\n        let curIdx = T.h.length - 1;\n        for (let i = 0, len = T.h.length; i < len; i++) {\n            let anchor = (!env.browser.Firefox)\n                    ? T.h[i] // 非 Firefox 浏览器\n                    : JS_decodeURI(T.h[i]), // Firefox 浏览器\n                target = $(\"#\" + JS_decodeURI(anchor));\n            let headerHeight = target.h();\n            // 将最近一个章节从文档可视空间上方滚出的章节定义为「当前章节」\n            if ((target.oT() - $(document).scrollTop()) > (headerHeight * 3)) {\n                curIdx = i - 1;\n                break;\n            }\n        }\n\n        // 章节没有变化则直接退出\n        if (T.currentHeaderIndex === curIdx)\n            return;\n\n        // 章节有变化，并记录\n        T.currentHeaderIndex = curIdx;\n\n        // 当前文档位置在实际内容章节中时\n        if (T.inHeader()) {\n            // ----------------------------------------\n            // 更新目录内当前节点的样式\n            // 先清除目录中上一次的「当前章节」的样式\n            if (T.currentItem !== gUndefined)\n                JQ_removeClass(T.currentItem, _vTocItemCurrent_);\n            // 更新「当前章节」的样式\n            T.currentItem = $(\"#\" + _vlookToc_ + \" a\" + V_attrX(_href_, \"#\" + T.h[curIdx])).p();\n            JQ_addClass(T.currentItem, _vTocItemCurrent_);\n\n            // 若当前目录节点被折叠隐藏，则向上展开父级目录节点\n            if (T.currentItem.isHidden())\n                __expandUpFolder(T.currentItem.a(_dataPid_));\n\n            // 导航中心内容自动滚动当前章节所在位置\n            T.scrollToCurrent();\n        }\n\n        // 触发当前章节变化事件\n        typeof(T.onChapterChanged) === _function_ && T.onChapterChanged();\n\n        /**\n         * 向上展开父级目录\n         * @param id 父级目录 id 值\n         */\n        function __expandUpFolder(id) {\n            // 展开\n            T.disposeFold(id, \"e\", gTrue);\n            // 若未到 h1（即第一级目录），则继续向上展开\n            let item = $(\"#\" + id),\n                tagName = item.prop(_tagName_); // 注意！无法使用 V_util_getTagName ，会导致调用溢出\n            if (tagName !== gUndefined && tagName.l() !== \"h1\")\n                __expandUpFolder(item.a(_dataPid_));\n        }\n    }\n\n    /**\n     * 导航中心内容自动滚动到当前章节所在位置\n     */\n    T.scrollToCurrent = function () {\n        if (T.currentItem === gUndefined || T.currentItem.pos() === gUndefined)\n            return;\n\n        // 根据当前节点情况，目录内的可视空间自动滚动该节点所在位置\n        const preDis = T.currentItem.h() * 3, // 用于目录节点触动滚动的大小\n            sTop = T.ui.body.scrollTop(), // 目录内当前滚动位置\n            sBottom = sTop + T.ui.body.h(); // 当前可视空间中位于目录底部的位置\n\n        // 若当前节点在可视区域的上方，则滚动到该节点的位置\n        if (T.currentItem.pos().top < sTop)\n            T.ui.body.scrollTop(T.currentItem.pos().top);\n        // 若当前节点在可视区域的下方，则滚动到该节点的位置\n        else if (T.currentItem.pos().top > (sBottom - preDis))\n            T.ui.body.scrollTop(T.currentItem.pos().top - T.ui.body.h() + preDis);\n    }\n\n    /**\n     * 文档当前位置是否在章节内\n     */\n    T.inHeader = function () {\n        return T.currentHeaderIndex > -1;\n    }\n\n    /**\n     * 当前章节为第 1 章时特殊处理（有封面模式时）\n     */\n    T.inFirstHeader = function () {\n        return (VOM_cover() !== gUndefined && T.currentHeaderIndex === 0);\n    }\n\n    /**\n     * 当前文档位置位于文档标题（无封面模式时）\n     */\n    T.inDocTitle = function () {\n        return (VOM_cover() === gUndefined && T.currentHeaderIndex === 0);\n    }\n\n    /**\n     * 按关键字过滤\n     * @param value 过滤的关键字内容\n     * @returns boolean true - 有匹配的结果，false - 无匹配的结果\n     */\n    T.filter = function (value) {\n        if (value.x() === _)\n            return gFalse;\n\n        if (T.holder.segs.checkedItem() === T.typeName())\n            T.showFilterResult();\n\n        let matched = gFalse;\n        T.ui.result.empty();\n        // 遍历目录节点进行关键字匹配\n        $(_tocItem_).e(function () {\n            let item = $(this),\n                data = item.a(_dataHeaderNum_) + item.a(_title_);\n            if (data.l().i(value) > -1) {\n                // 匹配结果后，从目录节点中复制节点并移除不必要的样式和内容\n                let cloneItem = item.clone();\n\n                JQ_addClass(cloneItem, _vTocItem_);\n                JQ_removeClass(cloneItem, _mdTocItem_ + \" md-toc-h1 md-toc-h2 md-toc-h3 md-toc-h4 md-toc-h5\");\n                JQ_remove(cloneItem.ch(_vTocFolder_));\n                cloneItem.pp(V_ui_span(_, _, cloneItem.a(_dataHeaderNum_)));\n                cloneItem.show();\n                cloneItem.a(_dataKeywordMatch_, _true_);\n\n                // 绑定同源的点击事件\n                cloneItem.uC().ck(function () {\n                    JQ_removeClass(T.ui.result.ch(\".\" + _vTocItemCurrent_), _vTocItemCurrent_);\n                    item.tr(_click_);\n                    JQ_addClass($(this), _vTocItemCurrent_);\n                });\n\n                // 将匹配的节点添加到过滤结果中\n                T.ui.result.ap(cloneItem);\n                matched = gTrue;\n            }\n        });\n        // 过滤文库节点\n        gToc.f(\".\" + _vDocLibItem_).e(function () {\n            let item = $(this),\n                data = item.a(_title_) + item.a(_dataForSearch_);\n            if (data.l().i(value) > -1) {\n                // 匹配结果后，从目录节点中复制节点并移除不必要的样式和内容\n                let cloneItem = item.clone();\n                cloneItem.show();\n                cloneItem.a(_dataKeywordMatch_, _true_);\n\n                // 绑定同源的点击事件\n                cloneItem.uC().ck(function () {\n                    item.tr(_click_);\n                });\n\n                // 将匹配的节点添加到过滤结果中\n                T.ui.result.ap(cloneItem);\n                matched = gTrue;\n            }\n        });\n\n        // 过滤结果为空\n        if (!matched) {\n            T.ui.result.empty();\n            T.ui.result.ap(V_ui_div(_, \"v-toc-filter-result-none\",\n                [\"无匹配结果!\",\n                \"No Results!\"][V_lang_id]));\n            TocIndex_updateStatus(this);\n        }\n\n        return gTrue;\n    }\n\n    /**\n     * 更新所属分段状态\n     */\n    T.updateStatus = function () {\n        if ($(_tocItem_).length > 0)\n            T.holder.segs.sts(this, gTrue);\n        else\n            T.holder.segs.sts(this, gFalse);\n    }\n\n    /**\n     * 显示目录索引组件\n     */\n    T.show = function () {\n        if (T.holder.keyword.input.val().length > 0) {\n            T.ui.body.hide();\n            T.showFilterResult();\n        }\n        else {\n            T.ui.body.show();\n            T.hideFilterResult();\n        }\n    }\n\n    /**\n     * 隐藏目录索引组件\n     */\n    T.hide = function () {\n        T.ui.body.hide();\n        T.hideFilterResult();\n    }\n    if (hidden) T.hide();\n\n    /**\n     * 显示过滤结果\n     */\n    T.showFilterResult = function () {\n        T.ui.body.hide();\n\n        T.ui.result.show();\n        JQ_removeClass(T.ui.result.ch(\".\" + _vTocItemCurrent_), _vTocItemCurrent_);\n    }\n\n    /**\n     * 隐藏过滤结果\n     */\n    T.hideFilterResult = function () {\n        T.ui.result.hide();\n    }\n\n    /**\n     * 跳转至指定章节\n     */\n    T.gotoHeader = function (target) {\n        V_util_gotoHash(\"#\" + target.a(_dataAnchor_));\n    }\n\n    /**\n     * 处理展开或收起指定章节下的子章节\n     * @param id 对象的id值\n     * @param action 执行动作（c: collect, e: expand）\n     * @param traversal 是否遍历子元素\n     */\n    T.disposeFold = function (id, action, traversal) {\n        let lastItem = null,\n            item = $(\"#\" + id),\n            itemSet = item.nextAll(),\n            btnFolder = $(\"#fd-\" + id);\n\n        // 更新折叠控件图标\n        // item.a(s_DataFolded, (action === \"e\") ? s_False : s_True);\n        // btnFolder.hm((action === \"e\") ? T.icon.unfold : T.icon.folded);\n        // btnFolder.hm((action === \"e\") ? JQ_addClass(btnFolder.ch(s_Svg), s_Rotate90) : JQ_removeClass(btnFolder.ch(s_Svg), s_Rotate90));\n        if (action === \"e\") {\n            item.a(_dataFolded_, _false_);\n            JQ_addClass(btnFolder.ch(_svg_), _vRotate90_);\n        }\n        else {\n            item.a(_dataFolded_, _true_);\n            JQ_removeClass(btnFolder.ch(_svg_), _vRotate90_);\n        }\n\n        // 将指定节点后的所有节点进行处理\n        for (let i = 0, len = itemSet.length; i < len; i++) {\n            let item = $(itemSet[i]);\n            // 对前后节点层级不一致的处理\n            if (lastItem != null) {\n                const hd1 = ChpAutoNum_parseTocHeaderLevel(item.a(_class_));\n                const hd2 = ChpAutoNum_parseTocHeaderLevel(lastItem.a(_class_));\n                if (hd1 > hd2) // 当前节点层级大于上一个节点的层级，继续\n                    continue;\n                else if (hd1 < hd2) // 当前节点层级小于上一个节点的层级，终止\n                    break;\n            }\n\n            // 如果是目录节点，同时是已展开，且执行动作为「收起」，才进行递归调用展开子节点\n            if (traversal\n                && item.a(_dataNode_) === \"1\"\n                && item.a(_dataFolded_).sW(\"f\")\n                && action === \"c\") {\n                    item.a(_dataFolded_, _true_);\n                    // 递归处理\n                    T.disposeFold(item.a(_id_), action, traversal);\n            }\n\n            // 收起 / 展开\n            item.c(_display_, (action === \"c\") ? _none_ : _block_);\n            lastItem = item;\n        }\n    }\n}\n\n// ==================== 导航中心分类索引通用类 ==================== //\n\nlet TocIndex_segments = gUndefined;\n\n/**\n * 初始化 UI\n * @param indexObj 目标对象\n */\nfunction TocIndex_initUI(indexObj) {\n    let ui = indexObj.ui;\n\n    V_ui_addAnimate(ui.entry);\n\n    // 生成提示信息 UI\n    ui.result.ap(V_ui_div(_, \"v-toc-filter-result-none\"));\n    ui.tips = ui.result.ch(\".v-toc-filter-result-none\");\n\n    TocIndex_showTips(ui);\n}\n\n/**\n * 无输入关键字的处理\n * @param indexObj 目标对象\n */\nfunction TocIndex_noneKeyword(indexObj) {\n    let ui = indexObj.ui,\n        items = ui.result.ch(\".\" + _vTocItem_);\n    items.show();\n    if (items.length === 0)\n        TocIndex_showTips(ui);\n    else {\n        ui.tips.hide();\n        items.a(_dataKeywordMatch_, _true_);\n        TocIndex_updateStatus(indexObj);\n    }\n}\n\n/**\n * 更新所属分段状态\n * @param indexObj 目标对象\n */\nfunction TocIndex_updateStatus(indexObj) {\n    TocIndex_segments.sts(indexObj,\n        indexObj.ui.result.ch(\".\" + _vTocItem_ + V_attrX(_dataKeywordMatch_)).length > 0);\n}\n\n/**\n * 显示提示信息\n */\nfunction TocIndex_showTips(ui) {\n    ui.tips.t(\"( \" + [\n        \"无此类内容\",\n        \"No such content\"\n    ][V_lang_id] + \" )\");\n    ui.tips.show();\n}\n\n/**\n * 添加索引项目\n * @param indexObj 目标对象\n * @param text 显示的文本\n * @param anchor 锚点\n * @param forSearch 用于搜索时检索的内容\n */\nfunction TocIndex_add(indexObj, text, anchor, forSearch) {\n    TocIndex_segments.sts(indexObj, gTrue);\n\n    if (indexObj.ui.tips.isShowed())\n        indexObj.ui.tips.hide();\n    let item = $(V_ui_span(_vTocItem_,\n                    V_attr(_dataForSearch_, V_util_clearHtmlQuot((forSearch === gUndefined || forSearch.x().length === 0) ? _ : forSearch)),\n                    text));\n    indexObj.ui.result.ap(item);\n    // V_ui_addAnimate(item);\n    item.uC().ck(function () {\n        JQ_removeClass(indexObj.ui.result.ch(\".\" + _vTocItemCurrent_), _vTocItemCurrent_);\n        JQ_addClass(item, _vTocItemCurrent_);\n\n        V_util_gotoHash(\"#\" + anchor);\n\n        // 触发锚点点击事件\n        typeof(indexObj.holder.onInteractive) === _function_ && indexObj.holder.onInteractive();\n    });\n}\n\n/**\n * 按关键字过滤\n * @param indexObj 目标对象\n * @param value 过滤的关键字内容\n * @returns boolean true - 有匹配的结果，false - 无匹配的结果\n */\nfunction TocIndex_filter(indexObj, value) {\n    if (value.x().length === 0) {\n        TocIndex_segments.sts(indexObj, gFalse);\n        return gFalse;\n    }\n\n    // 清空索引列表项\n    indexObj.ui.tips.hide();\n    indexObj.ui.result.ch().hide();\n    JQ_removeClass(indexObj.ui.result.ch(\".\" + _vTocItemCurrent_), _vTocItemCurrent_);\n    JQ_removeAttr(indexObj.ui.result.ch(), _dataKeywordMatch_);\n\n    // 遍历目录节点进行关键字匹配\n    let matched = gFalse;\n    indexObj.ui.result.ch(\".\" + _vTocItem_).e(function () {\n        let item = $(this),\n            dataForSearch = item.a(_dataForSearch_);\n        if (item.t().l().i(value) > -1\n            || (dataForSearch !== gUndefined && dataForSearch.l().i(value) > -1)) {\n                item.show();\n                item.a(_dataKeywordMatch_, _true_);\n                TocIndex_segments.sts(indexObj, gTrue);\n                matched = gTrue;\n        }\n    });\n\n    // 过滤结果为空\n    if (!matched) {\n        indexObj.ui.tips.t([\n            \"无匹配结果!\",\n            \"No Results!\"\n        ][V_lang_id]);\n        indexObj.ui.tips.show();\n        TocIndex_segments.sts(indexObj, gFalse);\n    }\n\n    return gTrue;\n}\n\n/**\n * 是否有对应的索引项目\n * @param indexObj 目标对象\n */\nfunction TocIndex_hasIndexItem(indexObj) {\n    return (indexObj.ui.result.ch(_span_).length > 0);\n}\n\n/**\n * 显示索引组件\n * @param indexObj 目标对象\n */\nfunction TocIndex_show(indexObj) {\n    indexObj.ui.result.show();\n    JQ_removeClass(indexObj.ui.result.ch(\".\" + _vTocItemCurrent_), _vTocItemCurrent_);\n}\n\n/**\n * 隐藏索引组件\n * @param indexObj 目标对象\n */\nfunction TocIndex_hide(indexObj) {\n    indexObj.ui.result.hide();\n}\n\n// ==================== 导航中心【插图】组件类 ==================== //\n\n/**\n * 构造函数\n * @param holder 关联的上级容器\n * @param hidden 是否默认为隐藏\n */\nfunction TocFigure(holder, hidden) {\n    let T = this;\n    T.ui = {\n        entry : $(\".\" + _vSegmentBtn_ + \".figure\"), // 入口\n        result : $(\".\" + _vTocFilterResult_ + \".figure\"), // 过滤结果面板\n        tips : gUndefined\n    };\n\n    T.holder = holder;\n\n    T.resultNav = new FilterResultNavigator(T.ui.result); // 过滤结果导航器\n\n    // 关键字输入组件属性设置\n    TocIndex_initUI(this);\n\n    /**\n     * 返回 Toc 组件类型名称\n     * @returns string Toc 组件类型名称\n     */\n    T.typeName = function () {\n        return _figure_;\n    }\n\n    /**\n     * 是否有图片索引项目\n     */\n    T.hasIndexItem = function () {\n        return TocIndex_hasIndexItem(this);\n    }\n\n    /**\n     * 初始化插图索引\n     * @param text 显示的文本\n     * @param anchor 锚点\n     * @param forSearch 用于搜索时检索的内容\n     */\n    T.add = function (text, anchor, forSearch) {\n        TocIndex_add(this, text, anchor, forSearch);\n    }\n\n    /**\n     * 更新所属分段状态\n     */\n    T.updateStatus = function () {\n        TocIndex_updateStatus(this);\n    }\n\n    /**\n     * 显示插图组件\n     */\n    T.show = function () {\n        TocIndex_show(this);\n    }\n\n    /**\n     * 隐藏插图组件\n     */\n    T.hide = function () {\n        TocIndex_hide(this);\n    }\n    if (hidden) T.hide();\n}\n\n// ==================== 导航中心【表格】组件类 ==================== //\n\n/**\n * 构造函数\n * @param holder 关联的上级容器\n * @param hidden 是否默认为隐藏\n */\nfunction TocTable(holder, hidden) {\n    let T = this;\n    T.ui = {\n        entry : $(\".\" + _vSegmentBtn_ + \".table\"), // 入口\n        result : $(\".\" + _vTocFilterResult_ + \".table\"), // 过滤结果面板\n        tips : gUndefined\n    };\n\n    T.holder = holder;\n\n    T.resultNav = new FilterResultNavigator(T.ui.result); // 过滤结果导航器\n\n    // 关键字输入组件属性设置\n    TocIndex_initUI(this);\n\n    /**\n     * 返回 Toc 组件类型名称\n     * @returns string Toc 组件类型名称\n     */\n    T.typeName = function () {\n        return _table_;\n    }\n\n    /**\n     * 是否有表格索引项目\n     */\n    T.hasIndexItem = function () {\n        return TocIndex_hasIndexItem(this);\n    }\n\n    /**\n     * 初始化表格索引\n     * @param text 显示的文本\n     * @param anchor 锚点\n     * @param forSearch 用于搜索时检索的内容\n     */\n    T.add = function (text, anchor, forSearch) {\n        TocIndex_add(this, text, anchor, forSearch);\n    }\n\n    /**\n     * 更新所属分段状态\n     */\n     T.updateStatus = function () {\n        TocIndex_updateStatus(this);\n    }\n\n    /**\n     * 显示表格组件\n     */\n    T.show = function () {\n        TocIndex_show(this);\n    }\n\n    /**\n     * 隐藏表格组件\n     */\n    T.hide = function () {\n        TocIndex_hide(this);\n    }\n    if (hidden) T.hide();\n}\n\n// ==================== 导航中心【多媒体】组件类 ==================== //\n\n/**\n * 构造函数\n * @param holder 关联的上级容器\n * @param hidden 是否默认为隐藏\n */\nfunction TocMedia(holder, hidden) {\n    let T = this;\n    T.ui = {\n        entry : $(\".\" + _vSegmentBtn_ + \".media\"), // 入口\n        result : $(\".\" + _vTocFilterResult_ + \".media\"), // 过滤结果面板\n        tips : gUndefined\n    };\n\n    T.holder = holder;\n\n    T.resultNav = new FilterResultNavigator(T.ui.result); // 过滤结果导航器\n\n    // 关键字输入组件属性设置\n    TocIndex_initUI(this);\n\n    /**\n     * 返回 Toc 组件类型名称\n     * @returns string Toc 组件类型名称\n     */\n    T.typeName = function () {\n        return \"mulitmedia\";\n    }\n\n    /**\n     * 是否有多媒体索引项目\n     */\n    T.hasIndexItem = function () {\n        return TocIndex_hasIndexItem(this);\n    }\n\n    /**\n     * 初始化多媒体索引\n     * @param text 显示的文本\n     * @param anchor 锚点\n     * @param forSearch 用于搜索时检索的内容\n     */\n    T.add = function (text, anchor, forSearch) {\n        TocIndex_add(this, text, anchor, forSearch);\n    }\n\n    /**\n     * 更新所属分段状态\n     */\n    T.updateStatus = function () {\n        TocIndex_updateStatus(this);\n    }\n\n    /**\n     * 显示多媒体组件\n     */\n    T.show = function () {\n        TocIndex_show(this);\n    }\n\n    /**\n     * 隐藏多媒体组件\n     */\n    T.hide = function () {\n        TocIndex_hide(this);\n    }\n    if (hidden) T.hide();\n}\n\n// ==================== 导航中心【代码块】组件类 ==================== //\n\n/**\n * 构造函数\n * @param holder 关联的上级容器\n * @param hidden 是否默认为隐藏\n */\nfunction TocCodeblock(holder, hidden) {\n    let T = this;\n    T.ui = {\n        entry : $(\".\" + _vSegmentBtn_ + \".codeblock\"), // 入口\n        result : $(\".\" + _vTocFilterResult_ + \".codeblock\"), // 过滤结果面板\n        tips : gUndefined\n    };\n\n    T.holder = holder;\n\n    T.resultNav = new FilterResultNavigator(T.ui.result); // 过滤结果导航器\n\n    // 关键字输入组件属性设置\n    TocIndex_initUI(this);\n\n    /**\n     * 返回 Toc 组件类型名称\n     * @returns string Toc 组件类型名称\n     */\n    T.typeName = function () {\n        return _codeblock_;\n    }\n\n    /**\n     * 是否有代码块索引项目\n     */\n    T.hasIndexItem = function () {\n        return TocIndex_hasIndexItem(this);\n    }\n\n    /**\n     * 初始化代码块索引\n     * @param text 显示的文本\n     * @param anchor 锚点\n     * @param forSearch 用于搜索时检索的内容\n     */\n    T.add = function (text, anchor, forSearch) {\n        TocIndex_add(this, text, anchor, forSearch);\n    }\n\n    /**\n     * 更新所属分段状态\n     */\n    T.updateStatus = function () {\n        TocIndex_updateStatus(this);\n    }\n\n    /**\n     * 显示代码块组件\n     */\n    T.show = function () {\n        TocIndex_show(this);\n    }\n\n    /**\n     * 隐藏代码块组件\n     */\n    T.hide = function () {\n        TocIndex_hide(this);\n    }\n    if (hidden) T.hide();\n}\n\n// ==================== 导航中心【访问历史】组件类 ==================== //\n\n/**\n * 构造函数\n * @param holder 关联的上级容器\n * @param hidden 是否默认为隐藏\n */\nfunction TocHistory(holder, hidden) {\n    let T = this;\n    T.ui = {\n        entry : $(\".\" + _vSegmentBtn_ + \".history\"), // 入口\n        title : $(\".\" + _vTocHistory_ + \"-title\"), // 历史记录标题\n        result : $(\".\" + _vTocHistory_ + \"-result\") // 历史记录面板\n    };\n\n    T.holder = holder;\n\n    /**\n     * 返回 Toc 组件类型名称\n     * @returns string Toc 组件类型名称\n     */\n    T.typeName = function () {\n        return \"history\";\n    }\n\n    /**\n     * 是否有访问历史索引项目\n     */\n    T.hasIndexItem = function () {\n        return TocIndex_hasIndexItem(this);\n    }\n\n    /**\n     * 添加访问历史记录\n     * @param hash 页内锚点链接\n     */\n    T.add = function (hash) {\n        if (hash === gUndefined || hash === \"#\" || hash.x().length === 0)\n            return;\n\n        // 清空当前条目的样式\n        JQ_removeClass(T.ui.result.ch(\".\" + _vTocItemCurrent_), _vTocItemCurrent_);\n\n        // 对由 VLOOK 生成的页内锚点，对其显示的条目文本进行处理\n        let title = gUndefined,\n            anchor = hash.s(1, hash.length);\n        if (anchor.sW(\"vk-id\")) // 插图/表格/多媒体/代码块索引\n            title = $(hash).a(_dataTitle_);\n        else if (anchor.sW(\"vk-err\")) // 错误的内链\n            title = $(hash).t();\n        // 未匹配到以上 VLOOK 专属的索引锚点，则按目录索引进行处理\n        if (title === gUndefined) {\n            let hashObj = $(_tocItem_ + \">.md-toc-inner\" + V_attrX(_href_, JS_decodeURI(hash))).p();\n            title = V_ui_span(_, _, hashObj.a(_dataHeaderNum_) + ___)\n                + JS_decodeURI(anchor);\n        }\n        let result = T.ui.result.ch(_span_ + V_attrX(_dataHistory_, hash));\n\n        // 不存在相同的历史访问记录\n        if (result.length === 0) {\n            T.ui.result.pp(V_ui_span(_vTocItem_, V_attr(_dataHistory_, hash), title));\n        }\n        // 已存在相同的历史访问记录\n        else {\n            // 将相同的记录移动到最前面\n            let existsItem = result.clone();\n            T.ui.result.pp(existsItem);\n            JQ_addClass(existsItem, _vTocItemCurrent_);\n            JQ_remove(result);\n        }\n\n        // 为新增加 / 移动后的记录添加鼠标事件\n        let item = T.ui.result.ch(_span_ + V_attrX(_dataHistory_, hash));\n        JQ_addClass(item, _vTocItemCurrent_);\n        item.a(_dataKeywordMatch_, _true_);\n        item.uC().ck(function () {\n            V_util_gotoHash(hash);\n            // 触发锚点点击事件\n            typeof(T.holder.onInteractive) === _function_ && T.holder.onInteractive();\n        });\n\n        T.updateStatus();\n    }\n\n    /**\n     * 更新所属分段状态\n     */\n    T.updateStatus = function () {\n        TocIndex_updateStatus(this);\n    }\n\n    /**\n     * 显示历史组件\n     */\n    T.show = function () {\n        T.ui.title.show();\n        T.ui.result.show();\n\n        let tocItem = _span_ + \".\" + _vTocItem_,\n            noneHistory = \"div.v-toc-history-none\";\n        // 没有历史访问记录，也没有提示信息内容\n        if (T.ui.result.ch(tocItem + \", \" + noneHistory).length === 0) {\n            // 添加提示信息\n            T.ui.result.ap(V_ui_div(_, \"v-toc-history-none\",\n                [\"暂无记录!\",\n                \"No records!\"][V_lang_id]));\n        }\n        // 有历史访问记录\n        else if (T.ui.result.ch(tocItem).length > 0) {\n            // 移除提示信息\n            JQ_remove(T.ui.result.ch(noneHistory));\n        }\n    }\n\n    /**\n     * 隐藏历史组件\n     */\n    T.hide = function () {\n        T.ui.title.hide();\n        T.ui.result.hide();\n    }\n    if (hidden) T.hide();\n}\n\n// ==================== 导航中心 DocLib 文库类 ==================== //\n\n/**\n * 构造函数\n * @param mask 遮罩对象\n * @param holder 关联的上级容器\n */\nfunction DocLib(mask, holder) {\n    let T = this;\n    T.ui = $(\".\" + _vDocLib_);\n    T.iframe = gUndefined;\n    T.enabled = gFalse;\n    T.page = gUndefined;\n    T.hash = _;\n    T.counter = 0;\n    T.identifier = _target_ + \"=\" + _vdl_;\n    T.paths = [];\n    T.holder = holder;\n\n    // 遮罩\n    T.mask = mask;\n    T.mask.bindPartner(this, T.ui);\n\n    V_ui_addAnimate(T.ui);\n\n    T.init = function () {\n        let docLibValue = V_util_getMetaByName(_vlookDocLib_),\n            result = null,\n            docLibToc = gUndefined;\n\n        T.iframe = $(_iframe_ + V_attrX(_name_, _vlookDocLib_));\n\n        gToc.ap(V_ui_div(_docLibToc_, _));\n        docLibToc = $(\"#\" + _docLibToc_);\n\n        // ------------------------------\n        // 处理 YAML 中的文库配置，支持以逗号分隔的多段内容\n        if (docLibValue !== gUndefined && (result = docLibValue.m(/^([^,]+(,\\s*)?)+$/)) != null) {\n            let docLibList = docLibValue.sp(/,\\s*/);\n            for (let i = 0; i < docLibList.length; i++) {\n                result = docLibList[i].m(/^(\\[([^\\]]+)\\]\\(([^)\\s]+)(\\s+\"([^\"]+)\")?\\))$/);\n                // 按 [text](url \"title\") 格式配置的文库\n                if (result != null) {\n                    let page = V_util_getUrlWithoutHash(result[3]),\n                        hash = V_util_getUrlHash(result[3]),\n                        text = result[2],\n                        title = (result.length > 5) ? result[5] : _;\n                    __addDocLibItem(text, page, hash, title);\n                }\n                // 按默认只有 url 方式配置的文库\n                else {\n                    let page = V_util_getUrlWithoutHash(docLibList[i]),\n                        hash = V_util_getUrlHash(docLibList[i]);\n                    __addDocLibItem([\"浏览文库\", \"Document Library\"][V_lang_id],\n                        page, hash, _);\n                }\n            }\n        }\n\n        // ------------------------------\n        // 处理文档内的文库专用链接\n        let re_TargetVDL = new RegExp(\"[?&]target=\" + _vdl_, \"i\");\n        $(\"a\" + V_attrX(_href_, T.identifier, \"*=\")).e(function () {\n            let a = $(this),\n                href = a.a(_href_),\n                page = V_util_getUrlWithoutHash(href).r(re_TargetVDL, _),\n                hash = V_util_getUrlHash(href);\n            if (V_util_getUrlPathWithoutQueryAndHash(page).length > 0 || hash.length > 0)\n                __addDocLibItem(a.t(), page, hash, a.a(_title_));\n\n            JQ_removeAttr(a, _href_); // 移除 href\n            a.a(_target_, _vdl_);\n            a.uC().ck(function () {\n                T.show(page, hash);\n            });\n        });\n\n        T.reload();\n\n        // 添加动画效果\n        V_ui_addAnimate($(\"#\" + _docLibToc_ + \">.\" + _vDocLibItem_\n            + \", #\" + _docLibToc_ + \">.\" + _vDocLibItem_ + \">svg\"));\n\n        LOG(\"    ├ DocLib: none\");\n\n        /**\n         * 添加文库项\n         * @param text 文库名称\n         * @param page 文库页面路径\n         * @param hash 文库页面锚点\n         * @param title 文库用于被检查的内容\n         */\n        function __addDocLibItem(text, page, hash, title) {\n            // 过滤重复的文库链接\n            if (T.paths.includes(page + hash))\n                return;\n            T.paths.push(page + hash);\n\n            T.enabled = gTrue;\n\n            // 初始化第一个文库项\n            T.counter++;\n            if (T.counter === 1) {\n                T.page = page;\n                T.hash = hash;\n            }\n\n            // 添加文库项\n            let target = V_util_getUrlQueryParams(page)[_target_],\n                hasTarget = (target !== gUndefined && target.length > 0);\n            docLibToc.ap(V_ui_div(_, _vDocLibItem_ + \" id-\" + T.counter,\n                (hasTarget\n                    ? V_ui_svgIcon(_icoDocLibExt_, 20, 18, _light_) // 图标：在新标签中打开\n                    : V_ui_svgIcon(_icoDocLib_, 20, 18, _light_)) // 图标：在文库窗口中打开\n                + _2nbsp_ + text\n                ));\n\n            // 初始化文库项数据\n            let item = docLibToc.f(\".\" + _vDocLibItem_ + \".id-\" + T.counter);\n            item.a(_dataPage_, page);\n            item.a(_dataHash_, hash);\n            item.a(_title_, text);\n            // 设置用于被关键字搜索的内容\n            item.a(_dataForSearch_, _vdl_ + \"文库\" + title);\n            item.uC().ck(function () {\n                if (hasTarget)\n                    window.open(page + hash, target);\n                else\n                    T.show(page, hash);\n            });\n\n            LOG(\"    ├ DocLib: \" + page + hash);\n        }\n    }\n\n    /**\n     * 重新加载文库内容\n     * @param scheme （可选）指定的颜色方案，light / dark\n     * @param page 指定的文库路径\n     * @param hash 指定的锚点\n     */\n    T.reload = function (scheme, page, hash) {\n        // 避免初始化时，与 ColorScheme.tg 重复加载\n        if (scheme === ColorScheme.scheme && page === gUndefined\n            || T.page === gUndefined)\n            return;\n\n        let cs = _;\n\n        // 指定的颜色方案不为空时\n        if (scheme !== gUndefined)\n            cs = \"&cs=\" + scheme;\n\n        // 指定的页面为空时（不包括 ?target=vdl 这种情况）\n        if (page === gUndefined)\n            page = T.page;\n        // 指定的锚点为空时\n        if (hash === gUndefined)\n            hash = _;\n\n        T.iframe.a(_src_,\n            page + ((page.i(\"?\") > -1) ? \"&\" : \"?\")\n            + \"ws=none&type=mini\"\n            + cs + hash);\n    }\n\n    /**\n     * 是否已显示\n     * @returns boolean\n     */\n    T.isShowed = function () {\n        return T.ui.c(_display_) !== _none_;\n    }\n\n    /**\n     * 显示文库\n     * @param newPage 指定的文库路径\n     * @param hash 指定的锚点\n     */\n    T.show = function (newPage, hash) {\n        typeof(T.holder.onInteractive) === _function_ && T.holder.onInteractive();\n\n        let path = V_util_getUrlPathWithoutQueryAndHash(newPage);\n        // ALERT(`${path}, ${newPage}`);\n\n        T.mask.show();\n        T.ui.show();\n\n        // 如果指定的页面为空，则使用当前页面\n        if (path.length === 0) {\n            path = T.page;\n            newPage = T.page;\n        }\n\n        // 如果指定的锚点为空，且路径与当前页面一致，则不刷新页面\n        if (hash.length === 0\n            && path === V_util_getUrlPathWithoutQueryAndHash(V_util_getUrlWithoutHash(T.iframe.a(_src_))))\n            return;\n\n        // 刷新文库页面显示\n        if (path === T.page)\n            T.reload(gUndefined, gUndefined, hash);\n        else\n            T.reload(gUndefined, newPage, hash);\n    }\n\n    /**\n     * 隐藏文库\n     */\n    T.hide = function () {\n        T.ui.hide();\n        T.mask.hide();\n    }\n\n    /**\n     * 处理热键操作\n     * @param code 非功能键键\n     * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n     * @param event 事件对象\n     */\n    T.disposeHotkey = function (code, combKeys, event) {\n        if (T.ui.isHidden())\n            return;\n\n        let handled = false;\n        switch (code) {\n            case 27: // ESC\n                if (T.isShowed()) {\n                    T.hide();\n                    handled = true;\n                }\n                break;\n        }\n\n        // 如果事件已处理，则禁止双重操作\n        if (handled)\n            event.preventDefault();\n    }\n}\n\n// ==================== 插图增强类 ==================== //\n\n/**\n * 初始化插图数据\n */\nfunction ExtFigure_init() {\n    let ignoreImgLost = gFalse,\n        sw = new Stopwatch();\n\n    // ----------------------------------------\n    // 对 svg 类插图（Mermaid）进行初始化处理\n    sw.st();\n    // 针对 Mermaid 饼图为双 SVG 结构（标准的 Mermaid 是单 SVG 结构），进行规范化调整\n    $(\".md-diagram-panel>svg>svg>g\").e(function () {\n        $(this).unwrap();\n    });\n    sw.ed(\"    ├ prepare svg: \");\n\n    // ----------------------------------------\n    // 对 img 类插图（Mermaid）进行初始化处理\n    sw.st();\n\n    // ！！！注意！！！为适配浏览器安全策略！！！\n    // 由于不同浏览器的安全策略不同，所以针对不同浏览器的图片颜色替换处理进行微调\n    // 若 SVG 文件与当前 HTML 文件不在同一域名下，浏览顺会存跨域权限问题无法完成处理\n    // 非 Firefox / Safari 以本地打开方式下无法进行处理\n    let httpMode = WINDOW_getHref().sW(\"http\"),\n        canFillAlter = (httpMode || env.browser.Firefox || env.browser.Safari),\n        hostname = window.location.hostname,\n        imgHost = V_util_getMetaByName(\"vlook-image-host\");\n    if (imgHost !== gUndefined && !imgHost.eW(\"/\"))\n        imgHost += \"/\";\n\n    $(_write_ + \" p>\" + _img_ + \",\" + _write_ + \" .md-diagram-panel>\" + _svg_ + \",\"\n    + _write_ + \" :is(\" + _img_ + \"[src*='#icon'],\" + _img_ + \"g[src*='#logo'],\" + _img_ + \"[src*='#card'],\" + _img_ + \"[src*='#frame'])\").e(function () {\n        let fig = $(this),\n            src = fig.a(_src_),\n            src2FillAlter = src,\n            container = fig.p(),\n            tagName = V_util_getTagName(fig),\n            // tagName = (src !== gUndefined ? _svg_ : _svg_),\n            params = _,\n            hash = _,\n            isPostcard = gFalse;\n\n        // ----------------------------------------\n        // img 类插图的处理\n        if (src !== gUndefined) {\n            // 对于 img 类插图的预处理\n            params = V_util_getUrlQueryParams(encodeURI(src));\n            hash = V_util_getUrlHash(src);\n\n            fig.a(_id_, \"vk-id-img\" + V_doc_counter_img);\n\n            // 当前 HTML 的打开方式可进行图片「颜色替换」的适配处理\n            if (canFillAlter === gTrue) {\n                // 获得图片路径的域名\n                let matchRes = src2FillAlter.m(/^https?:\\/\\/([^\\/?#]+)(?:[\\/?#]|$)/i);\n                let srcHost = matchRes && matchRes[1];\n\n                // 对于相对路径，或与当前 HTML 域名一致\n                if (srcHost == null || hostname === srcHost) {\n                    // 针对 Safari 且指定了默认图床域名\n                    // 进行颜色替换前，先调整原始 <img> 的 src\n                    let needImgHost = (env.browser.Safari && !httpMode && imgHost !== gUndefined);\n                    if (needImgHost) {\n                        src2FillAlter = imgHost + src2FillAlter;\n                        fig.a(_src_, src2FillAlter);\n                    }\n\n                    // 正式进行图片颜色替换处理\n                    __initFillAlter(fig, params, hash, src2FillAlter);\n\n                    // 恢复原始 <img> 的 src\n                    if (needImgHost)\n                        fig.a(_src_, src);\n                }\n            }\n\n            // 初始化图片对「颜色方案」的适配处理\n            __initColorScheme(fig, params);\n\n            // 初始化图片对「高分屏」的适配处理\n            __initHighDPI(fig, params);\n\n            // 初始化图片对「图文卡片」的适配处理\n            __initPostcard(fig, hash);\n\n            // 对图片「加载结果」进行是跟踪检查\n            __bindLoadChecker(fig);\n\n            V_doc_counter_img++;\n\n            // 跳过带指定显示版式的图片\n            if (__isNotFigure(params, hash))\n                return gTrue;\n\n            // 插图（非明信片）的处理\n            isPostcard = __isPostcard(params, hash);\n            if (!isPostcard) {\n                // 初始化图片背景的适配处理\n                __initBackground(fig, params);\n\n                // 添加插图容器\n                container = fig.p();\n                // 确保 img 有独立的父容器，一般情况下 Typora 导出的为 <p>\n                if (V_util_getTagName(container) !== \"p\") {\n                    fig.wrap(\"<p></p>\");\n                // if (V_util_getTagName(container) !== _figcaption_) {\n                //     fig.wrap(V_ui_figcaption(_, _, _));\n                    container = fig.p();\n                }\n\n                // 初始化对齐方式\n                __initAlign(container, hash, params);\n            }\n        }\n\n        // 插图（非明信片）的处理\n        if (!isPostcard) {\n            // 绑定内容助手\n            if (src !== gUndefined)\n                ContentAssistor_bind(fig, _fig_ + _suffixImg_);\n            else\n                ContentAssistor_bind(fig, _fig_ + _suffixSvg_);\n\n            V_doc_counter_figure++;\n\n            // 处理题注\n            __disposeCaption(fig, tagName);\n\n            // 设置容器数据，用于折叠内容时使用\n            container.a(_dataContainer_, tagName);\n            JQ_addClass(container, _vCaptionContainer_);\n            // 折叠长插图（一行多图的情况则跳过）\n            let prevFig = fig.p().p();\n            if (prevFig === undefined || prevFig.ch(\".v-caption,\" + _img_).length === 1)\n                ContentFolder_add(fig, _figure_);\n        }\n    }); // 结束初始化处理\n    sw.ed(\"    ├ figure set: \");\n\n    // ----------------------------------------\n    // srcset 为 auto 模式的处理\n    sw.st();\n    // 在当前环境的 DPR > 1 时，对于没有指定 srcset 的 img 类插图，自动强制将 src 直接指定 2x 图片\n    // 可通过 URL 参数 srcset=auto 来启用\n    if (env.display.DPR > 1\n        && V_util_getParamVal(_srcset_) === _auto_) {\n            $(\"p\" + V_attr(_dataContainer_, _img_) + ___ + _img_).e(function () {\n                let fig = $(this);\n                if (fig.a(_src_).i(_suffixSvg_, 1) === -1 // 跳过 svg 文件\n                    && fig.a(_srcset_) === gUndefined) {\n                        fig.a(_srcset_, fig.a(_src_) + \" 2x\");\n                }\n            });\n    }\n\n    // 进行图片对颜色方案的适配处理\n    ExtFigure_adjustColorScheme(gFalse);\n    sw.ed(\"    └ DPR & misc.: \");\n\n    /**\n     * 处理题注\n     * @param fig 插图对象\n     * @param tagName 插图所属标签 img、svg\n     */\n    function __disposeCaption(fig, tagName) {\n       // 设置插图属性数据\n       fig.a(_dataFigNum_, V_doc_counter_figure);\n       JQ_addClass(fig, _vFig_);\n\n       // 先根据题注语法生成题注\n        CaptionGenerator_actionForMediaContent(fig, tagName);\n    }\n\n    /**\n     * 绑定加载失败处理\n     * @param fig 插图对象\n     */\n    function __bindLoadChecker(fig) {\n        let src = fig.a(_src_);\n        // 图片无法加载时加载默认图片\n        fig.bind(_error_, function () {\n            if (!ignoreImgLost) {\n                // 将无法加载的图片信息添加到链接检查器\n                let cp1 = fig.p().f(_vCap1_).hm(),\n                    id = fig.p().a(_id_);\n                // 非插图（无题注），则按普通的 img 来处理\n                if (cp1 === gUndefined) {\n                    cp1 = fig.a(_alt_);\n                    id = fig.a(_id_);\n                }\n                // 添加无效链接项\n                LinkTool_addToCheck(id, \"🖼 \"\n                    + V_ui_strong([\n                        \"无效的图片源\",\n                        \"Invalid image source\"\n                    ][V_lang_id] + \": \") + cp1);\n            }\n\n            __loadDefaultOnError($(this));\n        });\n\n        // 强制重新加载一次以触发error事件\n        fig.a(_src_, src);\n    }\n\n    /**\n     * 判断是否属于插图\n     * @param params 插图路径\n     * @param hash 插图路径\n     * @returns boolean true：不属于插图，false：属于插图\n     */\n    function __isNotFigure(params, hash) {\n        let iconMode = hash.i(\"#icon\") > -1,\n            logoMode = hash.i(\"#logo\") > -1,\n            frameMode = hash.i(\"#frame\") > -1;\n        return (iconMode || logoMode || frameMode);\n    }\n\n    /**\n     * 判断是否属于明信片\n     * @param params 插图路径\n     * @param hash 插图路径\n     * @returns boolean true：不属于明信片，false：属于明信片\n     */\n    function __isPostcard(params, hash) {\n        return hash.i(\"#card\") > -1;\n    }\n\n    /**\n     * 初始化图片对齐方式的处理\n     * 注意：在 Typora 编辑模式时的对齐方式，直接通过 CSS 实现\n     * @param container img 的题注容器对象\n     * @param hash img 对象 src 值的锚点内容（如：#center#logo）\n     * @param params img 对象 src 值的 URL 参数数组\n     */\n    function __initAlign(container, hash, params) {\n        let align = gUndefined;\n        // 针对通过锚点设置对齐方式\n        if (hash.i(\"#center\") > -1)\n            align = _center_;\n        else if (align === gUndefined && hash.i(\"#right\") > -1)\n            align = _right_;\n        else if (align === gUndefined && hash.i(\"#left\") > -1)\n            align = _left_;\n        // 针对通过 URL 参数设置对齐方式\n        else if (align === gUndefined && params[\"align\"] !== gUndefined)\n            align = params[\"align\"];\n        else\n            return;\n        // 设置父级对象的对齐方式\n        container.c(_textAlign_, align);\n    }\n\n    /**\n     * 初始化图片对网格背景的的适配处理\n     * @param img img 对象\n     * @param params img 对象 src 值的 URL 参数数组\n     */\n    function __initBackground(img, params) {\n        let grid = params[\"grid\"];\n        if (grid === gUndefined)\n            return;\n        img.a(_dataFigGrid_, grid);\n    }\n\n    /**\n     * 初始化图片颜色替换的适配处理\n     * @param img img 对象\n     * @param params img 对象 src 值的 URL 参数数组\n     * @param hash img 对象 hash 值\n     * @param src img 对象的 src 值\n     */\n    function __initFillAlter(img, params, hash, src) {\n        if (params[_fill_] === gUndefined)\n            return;\n\n        img.a(_dataImgFill_, params[_fill_]);\n\n        // 图片为 SVG 格式时，将源文件通过 SVGInject 注入到 HTML 文档中\n        if (src.i(_suffixSvg_, 1) > -1) {\n            SVGInject(img[0], {\n                // SVG 注入成功\n                afterInject : function (img, svg) {\n                    let svgObj = $(svg);\n                    // 属于插图的，则绑定内容助手\n                    if (!__isNotFigure(params, hash))\n                        ContentAssistor_bind(svgObj, _fig_ + _suffixSvg_);\n                    // 对颜色进行替换的适配处理\n                    ExtFigure_adjustFillAlterForSVG(svgObj.a(_dataImgFill_), svgObj);\n                },\n                // SVG 注入失败\n                onFail : function (img, svg) {\n                    ERROR(\"SVGInject ERROR:\", $(img).a(_src_));\n                }\n            });\n        }\n    }\n\n    /**\n     * 初始化图片对颜色方案（Light / Dark）的适配处理\n     * @param img img 对象\n     * @param params img 对象 src 值的 URL 参数数组\n     */\n    function __initColorScheme(img, params) {\n        // 未指定 darksrc 参数，或同时指定了 fill 参数，则跳过\n        if (params[_darksrc_] === gUndefined)\n            return;\n\n        // 适配 Dark Mode 的方式：反转\n        if (params[_darksrc_] === _invert_  ) {\n            img.a(_dataDarkSrc_, _invert_);\n        }\n        // 适配 Dark Mode 的方式：替换\n        else {\n            img.a(_dataDarkSrc_, _alter_);\n\n            let src = img.a(_src_),\n                path = V_util_getPath(src),\n                queryString = V_util_getUrlQueryString(src);\n            // 补全 URL 参数内容\n            let darksrc = params[_darksrc_] + (queryString !== _ ? (\"?\" + queryString) : _);\n            // 如果 darksrc 只含文件名，则用 src 的路径进行补全\n            if (darksrc.i(\"/\") === -1)\n                darksrc = path + darksrc;\n\n            // 初始化不同颜色方案的 src 内容\n            img.a(_dataSrcLight_, img.a(_src_));\n            img.a(_dataSrcDark_, darksrc);\n\n            // 初始化不同颜色方案的 srcset 内容\n            if (params[_srcset_] !== gUndefined)\n                img.a(_dataSrcsetLight_, params[_srcset_]);\n            if (params[_darksrcset_] !== gUndefined)\n                img.a(_dataSrcsetDark_, params[_darksrcset_]);\n        }\n    }\n\n    /**\n     * 初始化图片高分屏的适配处理\n     * @param img img 对象\n     * @param params img 对象 src 值的 URL 参数数组\n     */\n    function __initHighDPI(img, params) {\n        let src = img.a(_src_),\n            srcset = params[_srcset_],\n            darksrcset = params[_darksrcset_];\n\n        // Light Mode 对应的图片集\n        if (srcset !== gUndefined) {\n            srcset = __transUrlSrcSet(src, srcset);\n            img.a(_dataSrcsetLight_, srcset);\n            // 设置默认值\n            img.a(_srcset_, srcset);\n        }\n\n        // Dark Mode 对应的图片集\n        if (darksrcset !== gUndefined) {\n            darksrcset = __transUrlSrcSet(img.a(_dataSrcDark_), darksrcset);\n            img.a(_dataSrcsetDark_, darksrcset);\n        }\n    }\n\n    /**\n     * 初始化图片高分屏的适配处理\n     * @param img img 对象\n     * @param hash img 对象 src 值的锚点\n     */\n    function __initPostcard(img, hash) {\n        // 未指定 card 参数，则跳过\n        if (hash === gUndefined || hash.i(_card_) === -1)\n            return;\n\n        // 如果是嵌套在 blockquote 中，则对其进行样式调整\n        let blockquote = img.parentsUntil(_blockquote_).last();\n        if (blockquote.length > 0) {\n            blockquote.p().c(_cssText_, _background_ + \":\" + _none_ + _important_ + _padding_ + \":0\" + _important_);\n            blockquote.p().c(_boxShadow_, _none_);\n            blockquote.p().c(_height_, _auto_);\n            JQ_removeAttr(blockquote.p(), _dataQuoteGroup_);\n        }\n\n        // 插入卡片元素\n        let altText = img.a(_alt_),\n            altTextForSearch = altText,\n            titleText = img.a(_title_),\n            cardBody = img.p().n();\n\n        // 若添加了通过引用块指定为正文内容的，则进行处理\n        if (cardBody !== gUndefined && cardBody.length > 0) {\n            if (V_util_getTagName(cardBody) === \"blockquote\") {\n                altText = cardBody.hm();\n                altTextForSearch = cardBody.t();\n                JQ_remove(cardBody);\n            }\n        }\n\n        JQ_removeAttr(img, _title_);\n\n        img.af(V_ui_div(_, \"v-post-card v-transition-all\",\n                (titleText === gUndefined ? _ : V_ui_div(_, \"v-card-title\", titleText))\n                + (altText === gUndefined ? _ : V_ui_div(_, \"v-card-text\", altText))\n            ));\n\n        // card 模式时绑定事件，card dual 模式时不绑定\n        if (hash.i(\"#cardd\") === -1) {\n            // 图片 hover 事件\n           img.hover(function () {\n                let _t = $(this),\n                    card = _t.n();\n                if (card.c(_display_) !== _none_)\n                    return;\n\n                let padding = JS_parseInt(_t.c(_paddingLeft_)),\n                    borderBottomWidth = JS_parseInt(_t.c(_borderBottomWidth_));\n\n                // 设置卡片尺寸信息\n                card.c(_width_, _t.w() + padding * 2);\n                let h = JS_parseInt(card.c(_height_)),\n                    imgH = _t.h() + padding * 2;\n                card.c(_top_, borderBottomWidth + _t.pos().top + imgH - h);\n\n                // 计算卡片应所在的 left 值\n                card.c(_left_, _t.pos().left);\n\n                // 显示\n                card.c(_display_, _block_);\n            }, function (event) {\n                let _t = $(this),\n                    card = _t.n();\n                if (!v_ui_mouseDropIn(_t, event))\n                    card.c(_display_, _none_);\n            });\n\n            // 鼠标离开文字卡片后事件\n            img.n().on(_mouseLeave_, function (event) {\n                if (!v_ui_mouseDropIn(img, event))\n                    $(this).c(_display_, _none_);\n            });\n        }\n        else {\n            // img.c(_cssText_, _borderWidth_ + \":0\" + _important_);\n        }\n\n        V_doc_counter_postcard++;\n\n        // 题注处理\n        if (titleText === gUndefined)\n            titleText = _;\n        if (altTextForSearch === gUndefined)\n            altTextForSearch = _;\n        let anchor = \"vk-id-psc\" + V_doc_counter_postcard,\n            caption = V_ui_span(_, _, [\n                \"明信片 \",\n                \"Postcard \"\n                ][V_lang_id] + V_doc_counter_postcard + \".\") + titleText,\n            dataForSearch = titleText + altTextForSearch;\n        img.a(_id_, anchor);\n        img.a(_dataTitle_, caption);\n        iNavCenter.figure.add(caption, anchor, dataForSearch);\n    }\n\n    /**\n     * 加载默认图片\n     * @param target 目标 img 对象\n     */\n    function __loadDefaultOnError(target) {\n        // let alt = target.a(s_Alt);\n        // 将 alt 替换为 title 避免无法指定 width、height 属性\n        JQ_removeAttr(target, _alt_);\n        JQ_removeAttr(target, _title_);\n        JQ_addClass(target, \"v-img-lost\");\n    }\n\n    /**\n     * 转换图片 URL 中的 srcset / darksrcset 参数为符合 <img> srcset 属性的格式\n     * @param src 图片 URL\n     * @param srcset srcset 或 darksrcset 参数的内容\n     */\n    function __transUrlSrcSet(src, srcset) {\n        // 针对 html 与 图片同一目录的情况\n        let path = V_util_getPath(src);\n\n        // @2x/@3x 图片资源为自动匹配名称的语法\n        // 2x/3x 的文件名为 <文件名@2x.xxx> 或 <文件名@3x.xxx> 的情况\n        if (/^@2x(,@3x)?$/.test(srcset)) {\n            let pureSrc = src.s(0, src.i(\"?\", 5)),\n                fileName = pureSrc.s(0, pureSrc.lastIndexOf(\".\")), // 图片资源文件名（不含扩展名）\n                suffix = pureSrc.s(pureSrc.lastIndexOf(\".\"), pureSrc.length); // 图片资源扩展名\n            // 自动补全图片资源 URL\n            srcset = srcset.r(/@2x/, fileName + \"@2x\" + suffix + \" 2x\");\n            srcset = srcset.r(/@3x/, fileName + \"@3x\" + suffix + \" 3x\");\n        }\n        // @2x/@3x 图片资源为指定文件名的语法\n        else {\n            // 将倍数标识转换为 srcset 标准语法\n            // 要从图片扩展名开始替换，避免将文件中的 @2x @3x 误替换掉\n            srcset = srcset.rAfter(\".\", \"@2x\", \" 2x\");\n            srcset = srcset.rAfter(\".\", \"@3x\", \" 3x\");\n        }\n\n        // 为 2x 图添加图片路径\n        let sss = srcset.sp(\",\");\n        if (sss[0].i(\"/\") === -1) // 仅为文件名时才添加路径\n            srcset = path + srcset;\n        // 为 3x 图添加图片路径\n        if (sss.length > 1 && sss[1].i(\"/\") === -1) // 仅为文件名时才添加路径\n            srcset = srcset.r(\" 2x,\", \" 2x,\" + path);\n\n        return srcset;\n    }\n}\n\n/**\n * 复制图片地址\n * @param source 内容源对象\n * @param event 事件对象\n */\nfunction ExtFigure_copySrc(source, event) {\n    let content = ContentAssistor_lastHover.a(_src_);\n    // 若复制为 Markdown\n    if (ContentAssistor_copyAsMarkdown) {\n        let alt = ContentAssistor_lastHover.a(_alt_),\n            title = ContentAssistor_lastHover.a(_title_);\n        content = \"![\" + (alt !== gUndefined ? alt : _)\n            + \"](\" + content + (title !== gUndefined ? ' \"' + title + '\"' : _) + \")\";\n    }\n    Copyer_action(source, content, gTrue);\n }\n\n/**\n * 适配指定图片在 Light / Dark Mode 的适配处理\n * @param disposeGrid 是否进行网格背景适配处理：true / false\n */\nfunction ExtFigure_adjustColorScheme(disposeGrid) {\n    let scheme = ColorScheme.scheme,\n        darkMode = scheme === _dark_;\n    // --------------------\n    // 对图片在 Dark Mode 时的适配处理\n    // 1. 对适配方式为「反转」的处理\n    $(_img_ + V_attrX(_dataDarkSrc_, \"invert\") + \", \" + _svg_ + V_attrX(_dataDarkSrc_, \"invert\")).e(function () {\n        let img = $(this),\n            src = img.a(_src_);\n        if (darkMode) {\n            // 如果图片没有指定替换颜色时才进行处理\n            if (img.a(_dataImgFill_) === gUndefined) {\n                // 设置默认的 srcset\n                if (src !== gUndefined)\n                    img.a(_srcset_, img.a(_dataSrcsetLight_));\n                // 添加反转样式\n                JQ_addClass(img, _vImgInvertDark_);\n            }\n        }\n        else {\n            JQ_removeClass(img, _vImgInvertDark_);\n            if (src !== gUndefined)\n                img.a(_srcset_, img.a(_dataSrcsetLight_));\n        }\n    });\n    // 2. 对适配方式为「替换」的处理\n    $(_img_ + V_attrX(_dataDarkSrc_, \"alter\")).e(function () {\n        let img = $(this);\n        JQ_removeClass(img, _vImgInvertDark_);\n        img.a(_src_, img.a(_dataSrc_ + scheme));\n        img.a(_srcset_, img.a(_dataSrcset_ + scheme));\n    });\n\n    // --------------------\n    // 对图片指定为颜色替换的处理\n    $(_img_ + V_attrX(_dataImgFill_, \"text\")\n        + \",\" + _img_ + V_attrX(_dataImgFill_, \"theme1\")\n        + \",\" + _img_ + V_attrX(_dataImgFill_, \"theme2\")\n        + \",\" + _svg_ + V_attrX(_dataImgFill_, \"text\")\n        + \",\" + _svg_ + V_attrX(_dataImgFill_, \"theme1\")\n        + \",\" + _svg_ + V_attrX(_dataImgFill_, \"theme2\")).e(function () {\n        let fig = $(this),\n            fill = fig.a(_dataImgFill_);\n        // SVG 对象，或 src 为 .svg 的 img 对象\n        if (V_util_getTagName(fig).sW(\"s\") || fig.a(_src_).i(_suffixSvg_, 1) > -1) {\n            ExtFigure_adjustFillAlterForSVG(fill, fig);\n        }\n        // 其他情况\n        else {\n            if (fill === _text_)\n                fig.c(_filter_, \"drop-shadow(12345px 0px \" + fig.p().c(_color_) + \")\");\n            else\n                fig.c(_filter_, \"drop-shadow(12345px 0px \" + V_ui_var(\"--ac-\" + fill + \"-lg\") + \")\");\n\n            if (fig.a(_dataFigNum_) !== gUndefined)\n                fig.c(_background_, _none_);\n        }\n    });\n\n    // --------------------\n    // 非初始化时执行，避免与 CSS 默认配置冲突\n    // 如：@media (prefers-color-scheme: dark) 部分\n    if (disposeGrid) {\n        // 适配图片网格背景的处理\n        $(_img_ + V_attrX(_dataFigGrid_, \"line\")\n            + \",\" + _img_ + V_attrX(_dataFigGrid_, \"block\")).e(function () {\n            let img = $(this);\n            // 先清空所有涉及的样式\n            if (darkMode) {\n                JQ_removeClass(img, \"v-fig-solid-bg-light\");\n                JQ_removeClass(img, \"v-fig-grid-line-light\");\n                JQ_removeClass(img, \"v-fig-grid-block-light\");\n            }\n            else {\n                JQ_removeClass(img, \"v-fig-solid-bg-dark\");\n                JQ_removeClass(img, \"v-fig-grid-line-dark\");\n                JQ_removeClass(img, \"v-fig-grid-line-dark-invert\");\n                JQ_removeClass(img, \"v-fig-grid-block-dark\");\n                JQ_removeClass(img, \"v-fig-grid-block-dark-invert\");\n            }\n\n            let gridType = img.a(_dataFigGrid_),\n                darkInvert = img.a(_dataDarkSrc_) === _invert_;\n            // 网络背景\n            if (gridType === _line_ || gridType === _block_) {\n                if (darkMode && darkInvert)\n                    // 先添加反色后的背景，以适配反色样式后能正常显示\n                    JQ_addClass(img, \"v-fig-grid-\" + gridType + \"-\" + scheme + \"-invert\");\n                else\n                    JQ_addClass(img, \"v-fig-grid-\" + gridType + \"-\" + scheme);\n            }\n            // 非网格背景\n            else\n                JQ_addClass(img, \"v-fig-solid-bg-\" + scheme);\n        });\n    }\n}\n\n/**\n * 适配 *.svg 格式的 img 图片注入为 SVG 实例后，对颜色进行替换的适配处理\n * @param fill 图片颜色替换方式：text / theme1 / theme2\n * @param svg SVG 实例对象\n */\nfunction ExtFigure_adjustFillAlterForSVG(fill, svg) {\n    // 先取消可能会因数 darksrc=invert 的 CSS 配置影响\n    svg.c(_filter_, _none_);\n    // 再针对进行微调\n    if (fill === _text_)\n        svg.f(\"path, rect, ellipse, polygon\").c(_fill_, svg.p().c(_color_));\n    else\n        svg.f(\"path, rect, ellipse, polygon\").c(_fill_, V_ui_var(\"--ac-\" + fill.l()));\n}\n\n// ==================== 插图导航模块 ==================== //\n\nfunction FigureNav() {\n    let T = this;\n    T.ui = $(\".\" + _vFigNav_); // 插图导航主界面\n    T.btns = {\n        ui : $(_vFigNavBtns_), // 所有导航按钮\n        prev : $(_vFigNavBtns_ + \".prev\"), // 上一张插图按钮\n        next : $(_vFigNavBtns_ + \".next\"), // 下一张插图按钮\n        close : $(\".v-btn-close-figure-nav\"), // 关闭按钮\n    };\n    T.content = $(\".\" + _vFigContent_); // 显示插图内容的控件\n    T.figNum = 1; // 当前插图索引序号，对应 vk-id-fig 中的值\n\n    V_ui_addAnimate(T.content.ch(_img_ + \", \" + _svg_));\n\n    // 绑定各按钮事件\n    T.btns.prev.uC().ck(function () {\n        T.prevFig();\n    });\n    T.btns.next.uC().ck(function () {\n        T.nextFig();\n    });\n    T.btns.close.uC().ck(function () {\n        T.hide();\n    });\n    T.content.uC().ck(function () {\n        T.hide();\n    });\n\n    /**\n     * 插图导航导航按钮在不同终端的适配处理\n     */\n    T.adjustHoverStyle = function () {\n        // 移动设备时解绑样式事件\n        if (env.device.mobile) {\n            T.btns.prev.uH();\n            T.btns.next.uH();\n        }\n        // 非移动设备时绑定样式事件\n        else {\n            T.btns.ui.hover(function () {\n                $(this).c(_transform_, \"translateY(-2px)\");\n            }, function () {\n                $(this).c(_transform_, _none_);\n            });\n            // 鼠标键按下事件，模拟 :active\n            T.btns.ui.on(_mouseDown_, function () {\n                $(this).c(_transform_, _none_);\n            });\n            // 鼠标键释放事件，模拟恢复正常\n            T.btns.ui.on(_mouseUp_, function () {\n                $(this).c(_transform_, \"translateY(-2px)\");\n            });\n        }\n    }\n\n    /**\n     * 是否已显示\n     * @returns boolean\n     */\n    T.isShowed = function () {\n        return T.ui.c(_display_) !== _none_;\n    }\n\n    /**\n     * 显示插图导航\n     */\n    T.show = function (fig) {\n        if (V_doc_counter_figure === 0)\n            return;\n\n        V_doc_scroll_freeze();\n        V_doc_block = gTrue;\n\n        if (fig == null)\n            fig = $(V_attrX(_dataFigNum_, T.figNum));\n\n        // 在插图导航中显示对应插图\n        T.figNum = JS_parseInt(fig.a(_dataFigNum_));\n\n        V_ui_show(T.ui);\n\n        T.display();\n        T.updateUI();\n    }\n\n    /**\n     * 关闭插图导航\n     */\n    T.hide = function () {\n        T.content.empty();\n        V_ui_hide(T.ui);\n\n        V_doc_scroll_unfreeze();\n        V_doc_block = gFalse;\n    }\n\n    /**\n     * 显示插图内容\n     */\n    T.display = function () {\n        let fig = $(V_attrX(_dataFigNum_, T.figNum));\n        T.content.empty();\n        T.content.show();\n        T.content.c(_width_, $(window).w())\n            .c(_height_, $(window).h());\n\n        let newFig = fig.clone();\n        newFig.c(_maxWidth_, $(window).w() - 80)\n            .c(_maxHeight_, $(window).h() - 50)\n            .c(_borderRadius_, _varVRB_);\n        JQ_addClass(newFig, \"v-interactive\");\n        V_ui_hide(newFig);\n\n        // 添加鼠标移入/移出事件\n        V_ui_bindHover(newFig);\n\n        // 添加鼠标点击事件\n        newFig.uC().ck(function () {\n            // 跳转到对应位置\n            V_util_gotoHash(\"#\" + _vkIdFig_ + T.figNum);\n            T.hide();\n        });\n\n        T.content.ap(newFig);\n        V_ui_show(newFig);\n    }\n\n    /**\n     * 查看上一个插图\n     */\n    T.prevFig = function () {\n        if (T.figNum > 1) {\n            T.figNum--;\n            T.display();\n            T.updateUI();\n        }\n    }\n\n    /**\n     * 查看下一个插图\n     */\n    T.nextFig = function () {\n        if (T.figNum < V_doc_counter_figure) {\n            T.figNum++;\n            T.display();\n            T.updateUI();\n        }\n    }\n\n    /**\n     * 更新插图导航界面\n     */\n    T.updateUI = function () {\n        let pageNum = $(\".\" + _vFigNav_ + \"-title\");\n\n        pageNum.hm(V_ui_span(\"v-fig-page-num\", _, T.figNum + \"/\" + V_doc_counter_figure)\n            + ___ + $(\"#\" + _vkIdFig_ + T.figNum + \">\" + _vCap1_).t());\n\n        // 更新导航按钮位置\n        T.btns.prev.c(_top_, (T.ui.h() - T.btns.prev.h()) / 2);\n        T.btns.next.c(_top_, T.btns.prev.c(_top_));\n\n        // 根据当前插图索引更新浏览按钮有效状态\n        T.btns.prev.c(_opacity_, \"0\");\n        T.btns.next.c(_opacity_, \"0\");\n        if (T.figNum > 1) {\n            T.btns.prev.c(_opacity_, \"1\");\n        }\n        if (T.figNum < V_doc_counter_figure) {\n            T.btns.next.c(_opacity_, \"1\");\n        }\n    }\n\n    /**\n     * 处理热键操作\n     * @param code 非功能键键\n     * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n     * @param event 事件对象\n     */\n    T.disposeHotkey = function (code, combKeys, event) {\n        if (iFigNav.ui.isHidden())\n            return;\n\n        let handled = false;\n        switch (code) {\n            case 188: // .\n            case 37: // ←\n                T.prevFig();\n                handled = true;\n                break;\n            case 190: // ,\n            case 39: // →\n                T.nextFig();\n                handled = true;\n                break;\n            case 27: // ESC\n                if (T.isShowed()) {\n                    T.hide();\n                    handled = true;\n                }\n                break;\n        }\n\n        // 如果事件已处理，则禁止双重操作\n        if (handled)\n            event.preventDefault();\n    }\n}\n\n// ==================== Mermaid - 脑图交互类 ==================== //\n\nfunction mmMindmap_init() {\n    // to-do: 新特性，未完成\n    let rootIndex = 0,\n        sectionGroup = \"\";\n    $(_svg_ + '[aria-roledescription=\"mindmap\"]>.mindmap-nodes>.mindmap-node').e(function () {\n        let _t = $(this);\n        if (rootIndex > 0) {\n            // if (sectionGroup !== _t.a(_class_)) {\n                // sectionGroup = _t.a(_class_);\n                _t.uC().ck(function () {\n                    mmMindmapToggleNode($(this));\n                });\n            // }\n            // else {\n                _t.c(_visibility_, _hidden_);\n            // }\n        }\n        else {\n            _t.uC().ck(function () {\n                mmMindmapToggleRoot($(this));\n            });\n        }\n        rootIndex++;\n    });\n\n    $(_svg_ + '[aria-roledescription=\"mindmap\"]>.mindmap-edges>.edge').e(function () {\n        let _t = $(this);\n        // if (_t.a(_class_).i(\"edge-depth-0\") === -1)\n            _t.c(_visibility_, _hidden_);\n    });\n}\n\nfunction mmMindmapToggleRoot(node) {\n}\n\nfunction mmMindmapToggleNode(node) {\n    let c = node.a(_class_),\n        si = c.i(\"section-\"),\n        secNum = 0;\n    if (si > -1) {\n        secNum = c.substring(si + 8, c.length);\n        if (secNum.isNumber()) {\n            $(_svg_ + '[aria-roledescription=\"mindmap\"]>.mindmap-nodes>.section-' + secNum).e(function () {\n                let _t = $(this);\n                _t.c(_visibility_, _visible_);\n            });\n\n            $(_svg_ + '[aria-roledescription=\"mindmap\"]>.mindmap-edges>.section-edge-' + secNum).e(function () {\n                let _t = $(this);\n                _t.c(_visibility_, _visible_);\n            });\n        }\n    }\n}\n\n// ==================== 样式重制类 ==================== //\n\n/**\n * 调整任务列表复选框的样式\n */\nfunction Restyler_forTaskList() {\n    // 遍历所有正文下的无序列表\n    $(_write_ + \">ul\").e(function () {\n        // 遍历所有含 checkbox 组件的无序列表项\n        $(this).f(\".md-task-list-item \" + _input_ + \"[type='\" + _checkbox_ + \"']\").e(function () {\n            let li = $(this).p();\n            // 遍历其下级无序列表\n            li.ch(\"ul\").e(function () {\n                let chkIndex = 0,\n                    notDone = gFalse;\n                // 遍历下级无序列表的所有一级子元素内 checkbox 的 checked 状态\n                $(this).ch(\"li\").e(function () {\n                    // 只对有两个或以上的 checkbox 子元素，因为只有 1 个 checkbox 是无法判断是否为不确定选择\n                    if (chkIndex > 0 && $(this).f(_input_).a(_checked_) === gUndefined) {\n                        notDone = gTrue;\n                        return gFalse;\n                    }\n                    chkIndex++;\n                });\n                // 若下级无序列表的一级子元素中，有任意一个 checkbox 为未完成的，则视为不确定选择\n                if (notDone)\n                    li.ch(_input_)[0].indeterminate = gTrue;\n                else if (!notDone && chkIndex === 1 && $(this).f(_input_).a(_checked_) === _checked_)\n                    li.ch(_input_).a(_checked_, gTrue);\n            });\n        });\n    });\n\n    // return;\n    // 对任务列表的 checkbox 组件转换为 SVG 图标\n    $(_write_ + ___ + _input_ + \"[type='\" + _checkbox_ + \"']\").e(function () {\n        let chkStatus = _no_, // 默认为未完成\n            chkStyle = _dark_; // 默认样式\n\n        // 已完成\n        let _t =  $(this),\n            checked = _t.a(_checked_);\n        if (checked !== gUndefined && checked.sW(\"c\")) { // checked\n            chkStatus = _yes_;\n            chkStyle = _theme_;\n        }\n        // 部分完成（不确定选择）\n        else if (_t[0].indeterminate) {\n            chkStatus = _un_;\n            // chkStyle = \"btn\";\n        }\n\n        // 替换为 SVG 图标\n        _t.bf(V_ui_svgIcon(_icoChkbox__ + chkStatus, 14, 14, chkStyle, \"v-svg-input-checkbox\"));\n        JQ_remove(_t);\n    });\n}\n\n/**\n * 调整默认的 Mermaid 样式\n */\nfunction Restyler_forMermaid() {\n    // ========== ZenUML 图 ==========\n    let zenSelector = \".md-diagram-panel>div>svg[aria-roledescription='zenuml']\";\n    // 调整 ZenUML 尺寸因主题原因导致强制被限制大小的情况\n    $(zenSelector).e(function () {\n        let target = $(this);\n        target.f(\".zenuml.bg-skin-canvas\").e(function () {\n            let zenuml = $(this);\n            target.c(_width_, zenuml.w())\n                .c(_height_, zenuml.h());\n            // 同时修正题注框的宽度、高度\n            target.ps(\".v-caption\").c(_width_, _auto_)\n                    .c(_height_, _auto_);\n        });\n    });\n    // to-do: 临时修复方式（多个图标同名渐变色定义冲突）\n    // 待 ZenUML 官方修复后可取消\n    let idPrefix = \"linearGradient-\",\n        svgIconCount = 0;\n    $(zenSelector + \" div[alt^='icon']>\" + _svg_).e(function () {\n        svgIconCount++;\n        let svgIcon = $(this),\n            idValue = \"linearGradient-vk-fixed-\" + svgIconCount;\n        // 图标渐变色定义 id 更名\n        svgIcon.f(\"defs>linearGradient\" + V_attrX(_id_, idPrefix, \"^=\")).attr(\"id\", idValue);\n        // 更新图标渐变色定义 id 值\n        svgIcon.f(\"g[fill^='url(#\" + idPrefix + \"']\").attr(\"fill\", \"url(#\" + idValue + \")\");\n    });\n\n    // ========== 时序图 ==========\n    let seqSelector = \".md-diagram-panel>div>svg[aria-roledescription='sequence']\";\n    // 修正顺序图整体的样式\n    // $(\".md-diagram-panel svg[id^='mermaidChart'][viewBox^='-']\").e(function () {\n    $(seqSelector).e(function () {\n        let target = $(this),\n            viewBox = target.a(_viewBox_).sp(/\\s+/),\n            paddingBottom = (target.c(_paddingBottom_));\n        // 修正顺序图的下边距，前提先在 CSS 中设置了合适的 padding-bottom 值\n        target.a(_viewBox_,\n            viewBox[0] + ___ + viewBox[1] + ___ + viewBox[2] + ___\n            + (JS_parseInt(viewBox[3]) + JS_parseInt(paddingBottom)));\n        // 重置 CSS 中的 padding-bottom 值，因为已由上面的下边距值替换\n        JQ_addClass(target, _vMermaidRestyler_);\n    });\n\n    // 更新顺序图中的角色样式\n    // $(\".md-diagram-panel svg[id^='mermaidChart'] g>rect[class='actor']\").e(function () {\n    $(seqSelector + \" g>rect[class='actor']\").e(function () {\n        let actor = $(this),\n            text = actor.n(_text_).ch(), // actor text object\n            tmpText = text.t(),\n            prefix = _;\n        const front = /@.+/g, // 前端触点角色\n            keySys = /^\\*\\*.+/g, // 重要系统角色\n            extSys = /^--.+/g; // 外部系统角色\n\n        // 更新 <前端触点角色> 样式\n        if (front.test(tmpText)) {\n            let h = actor.h(),\n                line = (actor.p().pr(_line_) || actor.pr(_line_));\n            actor.a(_rx_, (h - 20) / 2);\n            actor.a(_ry_, (h - 20) / 2);\n            actor.a(\"y\", JS_parseInt(actor.a(\"y\")) + 10);\n            actor.a(_height_, h - 20);\n            line.a(\"y1\", JS_parseInt(line.a(\"y1\")) + 10);\n            line.a(\"y2\", JS_parseInt(line.a(\"y2\")) - 20);\n            JQ_addClass(actor.pr(_line_), \"v-actor-front\");\n            text.t(prefix + tmpText.s(1, tmpText.length));\n        }\n        // 更新 <重要系统角色> 样式\n        else if (keySys.test(tmpText)) {\n            JQ_addClass(actor, _vActorKeySys_);\n            JQ_addClass(actor.pr(_line_), _vActorKeySys_);\n            JQ_addClass(actor.nextAll(_text_).ch(), _vActorKeySys_);\n            text.t(prefix + tmpText.s(2, tmpText.length));\n        }\n        // 更新 <外部系统角色> 样式\n        else if (extSys.test(tmpText)) {\n            JQ_addClass(actor, _vActorExtSys_);\n            JQ_addClass(actor.nextAll(_text_).ch(), _vActorExtSys_);\n            text.t(prefix + tmpText.s(2, tmpText.length));\n        }\n        else {\n            text.t(prefix + tmpText);\n        }\n    });\n\n    // 更新顺序图中消息序号的样式\n    // $(\".md-diagram-panel svg[id^='mermaidChart']>text.sequenceNumber\").e(function () {\n    $(seqSelector + \">text.sequenceNumber\").e(function () {\n        // 移除文本宽度，避免不同字体大小时显示效果问题\n        JQ_removeAttr($(this), _textLength_);\n    });\n\n    // 更新顺序图中的片断（如：loop、opt、par、alt）样式和位置\n    // $(\".md-diagram-panel svg[id^='mermaidChart'] polygon+.labelText\").e(function () {\n    $(seqSelector + \" polygon+.labelText\").e(function () {\n        let fragment = $(this),\n            g = fragment.p(),\n            segType = fragment.t();\n\n        // 默认的样式（par 片断）\n        let bgColor = _varMmOrange_,\n            borderColor = _varMmOrange_,\n            titleColor = _varAcOrangeLg_;\n        // 为 alt 片断设置样式\n        if (segType === _alt_) {\n            bgColor = _varMmRed_;\n            borderColor = _varMmRed_;\n            titleColor = _varAcRedLg_;\n        }\n        // 为 loop 片断设置样式\n        else if (segType === _loop_) {\n            bgColor = _varMmCyan_;\n            borderColor = _varMmCyan_;\n            titleColor = _varAcCyanLg_;\n        }\n        // 为 alt、loop、par 片断应用样式设置\n        if (segType !== \"opt\") {\n            // 背景色\n            g.f(\"polygon.labelBox\").c(_cssText_, _fill_ + \":\" + bgColor + _important_);\n            // 边框色\n            g.f(\"line.loopLine\").c(_cssText_, _stroke_ + \":\" + borderColor + _important_);\n            // 片断标题颜色\n            g.f(\"text.loopText, text.loopText>tspan\").c(_cssText_, _fill_ + \":\" + titleColor + _important_);\n        }\n\n        // 将 alt(alternative)、opt(optional)、loop(loops) 片断文本翻译为其他语言\n        if (segType === _alt_)\n            fragment.t([\n                \"分支\",\n                \"Alt.\"\n            ][V_lang_id]);\n        else if (segType === \"opt\")\n            fragment.t([\n                \"可选\",\n                \"Opt.\"\n            ][V_lang_id]);\n        else if (segType === _loop_)\n            fragment.t([\n                \"循环\",\n                \"Loop.\"\n            ][V_lang_id]);\n        else if (segType === \"par\")\n            fragment.t([\n                \"平行\",\n                \"Par.\"\n            ][V_lang_id]);\n    });\n\n    // 调整片断的标题文本\n    // $(\"svg text.loopText>tspan\").e(function () {\n    $(seqSelector + \" text.loopText>tspan\").e(function () {\n        // 去掉文本内容前后的中括号\n        let fragmentTitle = $(this);\n        fragmentTitle.p().a(_style_, \"text-anchor: start\");\n\n        // 调整文本的位置\n        let label = fragmentTitle.p().p().f(\".labelBox\"),\n            rect = label[0].getBBox();\n        fragmentTitle.a(\"x\", rect.x + rect.width + 10);\n\n        let nextText = fragmentTitle.p().n();\n        if (nextText !== gUndefined && nextText.a(_class_) !== gUndefined && nextText.a(_class_).i(\"loopText\") > -1) {\n            nextText.a(\"x\", rect.x + rect.width + 40);\n        }\n    });\n\n    // 针对 VLOOK 衍生的 Mermaid 的状态机图节点\n    let radius = V_util_getVarVal(_V_R_B_);\n    // 针对 VLOOK 顺序图开始、结束节点、子图\n    // $(\"svg .cluster rect\").e(function () {\n    $(seqSelector + \" .cluster rect\").e(function () {\n        $(this).a(_rx_, radius);\n        $(this).a(_ry_, radius);\n    });\n}\n\n// ==================== 第三方库修复工具类 ==================== //\n\n// Mermaid 相关的 DPR\nlet RepairTool_mermaidDPR_builder = 1, // 生成 Mermaid 时系统的 DPR\n    RepairTool_mermaidDPR_render = 1; // Mermaid 流程图显示的 DPR\n\n/**\n * 按倍数调整函数元组数据，目前只支持单个函数，且只能有两个参数\n * @param funcString 函数字符串，如：translate(-12,-18)\n * @param rate1 对第1个参数的调整倍数\n * @param rate2 对第2个参数的调整倍数\n */\n// function RepairTool_scaleTupleByTimes(funcString, rate1, rate2) {\n//     let lbIndex = funcString.i(\"(\"),\n//         dotIndex = funcString.i(\",\"),\n//         rbIndex = funcString.i(\")\");\n//\n//     // 提取两个参数值\n//     let r1 = funcString.s(lbIndex + 1, dotIndex),\n//         r2 = funcString.s(dotIndex + 1, rbIndex);\n//\n//     if (rate1 !== 1) r1 = r1 * rate1;\n//     if (rate2 !== 1) r2 = r2 * rate2;\n//\n//     return funcString.s(0, lbIndex + 1) +\n//         r1 + \",\" + r2 + \")\";\n// }\n\n// ==================== Sup Magic / Sub Magic 模块 ==================== //\n\n/**\n * 初始化\n */\nfunction XscriptMagic_init() {\n    // 遍历所有 sup\n    $(\"sup\").e(function () {\n        let _t = $(this),\n            text = _t.t(),\n            result;\n        if ((result = text.m(TextPhonetic_syntax)) != null)\n            TextPhonetic_build(_t, result);\n    });\n\n    // 遍历引用块、详情内的 sub 下标\n    $(_write_ + \" :is(blockquote, details)>p>sub\").e(function () {\n    // + _write_ + \">:is(blockquote, details) :is(blockquote, details)>p>sub\").e(function () {\n        let _t = $(this),\n            text = _t.t(),\n            colorSet;\n        // 颜色标签独占一行的情况下才被视为是对引用块、详情的颜色标识\n        // 否则将作为段落或指定格式的颜色标识，另行处理\n        if (ExtQuote_isValidColorMark(_t)\n            && (colorSet = text.m(RainbowColor_syntax)) != null)\n                RainbowQuote_build(_t, colorSet);\n    });\n\n    // 遍历段落内的 sub 下标（针对段落或指定格式）\n    $(_write_ + \" sub\").e(function () {\n        let _t = $(this),\n            text = _t.t(),\n            colorSet;\n        if ((colorSet = text.m(RainbowColor_syntax)) != null) {\n            // 只处理非独占一行的情况（独占一行的由彩虹引用进行处理）\n            if (text !== _t.p().t())\n                RainbowTextAndCell_build(_t, colorSet);\n        }\n    });\n\n    // 针对 GitHub Style Alert 移除内嵌的彩虹样式\n    $(\".md-alert\").e(function () {\n        let _t = $(this);\n        // 取消内嵌的彩虹引用块、summary、引用块小标题样式\n        _t.f(\".v-q, summary, strong[class*='title']\").e(function () {\n            JQ_removeAttr($(this), _class_);\n        });\n        // 根据浏览器语言更换类型文本\n        _t.f(\".md-alert-text-note\").e(function () {\n            $(this).hm(V_ui_svgIcon2(_icoAlertNote_, 16, 16) + [\"备注\", \"Note\"][V_lang_id]);\n        });\n        _t.f(\".md-alert-text-tip\").e(function () {\n            $(this).hm(V_ui_svgIcon2(_icoAlertTip_, 16, 16) + [\"提示\", \"Tip\"][V_lang_id]);\n        });\n        _t.f(\".md-alert-text-important\").e(function () {\n            $(this).hm(V_ui_svgIcon2(_icoAlertImportant_, 16, 16) + [\"重要的\", \"Important\"][V_lang_id]);\n        });\n        _t.f(\".md-alert-text-warning\").e(function () {\n            $(this).hm(V_ui_svgIcon2(_icoAlertWarning_, 16, 16) + [\"注意\", \"Warning\"][V_lang_id]);\n        });\n        _t.f(\".md-alert-text-caution\").e(function () {\n            $(this).hm(V_ui_svgIcon2(_icoAlertCaution_, 16, 16) + [\"警告\", \"Caution\"][V_lang_id]);\n        });\n        // _t.f(\".md-alert-text-note\").contents().e(function () {\n        //     if (this.nodeType === 3) // 文本节点\n        //         this.nodeValue = this.nodeValue.rA(\"Note\", [\"说明\", \"Note\"][V_lang_id]);\n        // });\n        // _t.f(\".md-alert-text-tip\").contents().e(function () {\n        //     if (this.nodeType === 3) // 文本节点\n        //         this.nodeValue = this.nodeValue.rA(\"Tip\", [\"提示\", \"Tip\"][V_lang_id]);\n        // });\n        // _t.f(\".md-alert-text-important\").contents().e(function () {\n        //     if (this.nodeType === 3) // 文本节点\n        //         this.nodeValue = this.nodeValue.rA(\"Important\", [\"重要的\", \"Important\"][V_lang_id]);\n        // });\n        // _t.f(\".md-alert-text-warning\").contents().e(function () {\n        //     if (this.nodeType === 3) // 文本节点\n        //         this.nodeValue = this.nodeValue.rA(\"Warning\", [\"警告\", \"Warning\"][V_lang_id]);\n        // });\n        // _t.f(\".md-alert-text-caution\").contents().e(function () {\n        //     if (this.nodeType === 3) // 文本节点\n        //         this.nodeValue = this.nodeValue.rA(\"Caution\", [\"注意\", \"Caution\"][V_lang_id]);\n        // });\n    });\n}\n\n/**\n * 生成预置颜色标识的 Markdown 格式\n * @param color 颜色标识\n * @param em 强调色标识\n * @param defaultColor 对应场景的默认颜色标识\n */\nfunction RainbowColor_genAsMarkdown(color, em, defaultColor) {\n    return (color === defaultColor\n        ? _\n        : \"~(\" + V_ui_campColor(color) + em + \")~\");\n}\n\n// ==================== Sup Magic / Sub Magic：文本注音模块 ==================== //\n\n// 新语法：^[symbol]^\nlet TextPhonetic_syntax = /^\\[(\\S+)]$/; // 新语法\n\n/**\n * 构建「注音」\n * @param target 源对象\n * @param result 正则表达式匹配后的结果数组\n */\nfunction TextPhonetic_build(target, result) {\n    let symbol = result[1].rA(\"_\", ___),\n        symbolCount = symbol.sp(___).length,\n        targetPrev = target.pr(),\n        prevText = (targetPrev === gUndefined ? _ : targetPrev.t()),\n        wordText;\n\n    // 拉丁内容结尾\n    if (/(.*)[a-z]$/i.test(prevText))\n        wordText = prevText.r(/(.*)(\\b\\w+\\b)/, \"$2\");\n    // 非拉丁内容结尾\n    else\n        wordText = prevText.s(prevText.length - symbolCount, prevText.length);\n\n    // 生成注音内容\n    let rubyHTML = \"$1<ruby>\" + wordText\n        + \"<rp>(</rp><rt>\" + symbol\n        + \"</rt><rp>)\" + _nbsp_ + \"</rp></ruby>\";\n    targetPrev.hm(targetPrev.hm().r(new RegExp(String.raw`(.*)${wordText}`), rubyHTML));\n\n    // 绑定注音的点击事件\n    targetPrev.f(\"ruby>rt\").uC().ck(function (event) {\n        TextPhonetic_translation(wordText, symbol, event);\n    });\n    // 删除预置颜色标识\n    JQ_remove(target);\n}\n\n// ==================== Sup Magic / Sub Magic：彩虹引用块模块 ==================== //\n\nlet RainbowQuote_defalutColor = \"T1!\",\n    RainbowQuote_defalutColor_withoutEm = \"T1\";\n\n/**\n * 构建彩虹引用块样式\n * @param colorCode 目标 code 对象\n * @param colorSet 正则表达式匹配后的结果数组\n */\nfunction RainbowQuote_build(colorCode, colorSet) {\n    let quote = colorCode.p().p(),\n        colorP = colorCode.p(),\n        color = RainbowQuote_getColor(colorSet[1]), // 颜色标识\n        em = CodeMagic_isRainbowColorEm(colorSet) ? \" em\" : _, // 判断是否指定了强调样式\n        tag = V_util_getTagName(quote);\n\n    // <blockquote> 或 <details>\n    if (tag.sW(\"bl\") || tag.sW(\"de\")) {\n        // 删除预置颜色标识\n        JQ_remove(colorCode);\n        // 删除原始彩虹颜色标识后，若其所在行为空，则同时也删除所在行\n        if (colorP.t().x().length === 0)\n            JQ_remove(colorP);\n        JQ_addClass(quote, \"v-q \" + color + em);\n        JQ_addClass(quote.f(\">p\" + _firstChild_ + \">\" + _strong_), \"title-\" + color + em);\n        JQ_addClass(quote.f(_summary_), \"title-\" + color + em);\n    }\n}\n\n/**\n * 获得获取对应的颜色标识\n * @param color 文档中指定的预置颜色标识\n * @returns string 返回有效的的颜色值\n */\nfunction RainbowQuote_getColor(color) {\n    // 没有指定颜色，则为默认颜色\n    if (color === gUndefined)\n        return RainbowQuote_defalutColor;\n    return color.l();\n}\n\n// ==================== Sup Magic / Sub Magic：彩虹文本模块 ==================== //\n\n/**\n * 构建彩虹文本与单元格样式\n * @param colorCode 颜色标识对象\n * @param colorSet 正则表达式匹配后的结果数组\n */\nfunction RainbowTextAndCell_build(colorCode, colorSet) {\n    let color = RainbowBadge_getColor(colorSet[1]), // 颜色标识\n        tableCellBgMode = CodeMagic_isRainbowColorEm(colorSet),\n        solid = color.length < 4, // true - 单色，false - 渐变色\n        gradientColors = [], // 渐变色标识数组\n        renderTarget = colorCode.pr(),\n        wholeRendering = gFalse;\n\n    // 颜色标识为第 1 个子元素时，代表是要对整个段落（或单元格）进行着色\n    if (!tableCellBgMode\n        && renderTarget !== gUndefined && renderTarget.length === 0) {\n            renderTarget = colorCode.p();\n            wholeRendering = gTrue;\n    }\n\n    // 获取目标对象的 HTML 标签名称\n    let tagName = V_util_getTagName(renderTarget);\n\n    // 当颜色标识为渐变色配置时，进行拆分渐变色的预处理\n    if (!solid)\n        gradientColors = V_ui_splitColors(color);\n\n    // 针对整个段落（或单元格）着色模式时\n    // 针对里面的 u 和 mark 标签进行独立处理\n    if (wholeRendering) {\n        __disposeUnderline(renderTarget.f(\"u\"));\n        __disposeMark(renderTarget.f(_mark_));\n    }\n\n    // 彩虹文本\n    if (!tableCellBgMode) {\n        // mark 标签的处理\n        if (tagName === _mark_) {\n            __disposeMark(renderTarget);\n        }\n        // mark 以外的标签的处理，如：p u strong span 等\n        else {\n            __disposeText(renderTarget);\n            if (tagName === \"u\")\n                __disposeUnderline(renderTarget);\n        }\n    }\n    // 彩虹单元格\n    else {\n        renderTarget = colorCode.p();\n        tagName = V_util_getTagName(renderTarget);\n\n        if (tagName === \"th\" || tagName === \"td\") {\n            __disposeCell(renderTarget);\n        }\n    }\n\n    // 删除预置颜色标识\n    JQ_remove(colorCode);\n\n    /**\n     * 处理文本着色\n     * @param obj 文本对象\n     */\n    function __disposeText(obj) {\n        if (obj === gUndefined)\n            return;\n\n        // 单色\n        if (solid) {\n            // 针对亮度较高的预置色，选择更深一些的 title 色值\n            let title = RainbowColorTooLight.test(color) ? \"-title\" : _;\n            obj.c(_color_, V_ui_var(\"--ac-\" + color + title\n                + (color !== \"bk\" ? \"-lg\" : _)));\n        }\n        // 渐变色\n        else {\n            let span = obj.f(_span_);\n            if (span.length === 0) // 无子元素 span 时恢复为 obj\n                span = obj;\n            if (span !== gUndefined) {\n                span.c(_backgroundImage_, \"linear-gradient(90deg, \"\n                    + V_ui_genGradColorCSS(gradientColors, _, \"-lg\") + \")\");\n                span.c(\"background-clip\", _text_);\n                span.c(\"-webkit-background-clip\", _text_);\n                span.c(\"color\", \"transparent\");\n            }\n        }\n\n        if (wholeRendering)\n            obj.a(_dataRbWholeText_, V_ui_campColor(color));\n        else\n            obj.a(_dataRbText_, V_ui_campColor(color));\n    }\n\n    /**\n     * 处理下划线着色\n     * @param obj 文本对象\n     */\n    function __disposeUnderline(obj) {\n        if (obj === gUndefined)\n            return;\n\n        // 单色\n        if (solid) {\n            obj.c(_borderColor_, V_ui_var(\"--ac-\" + color\n                + (color === \"bk\" ? _ : \"-lg\")));\n        }\n        // 渐变色\n        else {\n            obj.c(_borderImage_, \"linear-gradient(90deg, \"\n                + V_ui_genGradColorCSS(gradientColors, _, \"-lg\") + \") 0 0 1 0\");\n        }\n    }\n\n    /**\n     * 处理标识着色\n     * @param obj 文本对象\n     */\n    function __disposeMark(obj) {\n        if (obj === gUndefined)\n            return;\n\n        // 单色\n        if (solid) {\n            obj.c(_boxShadow_, \"0 -.9em 0 0 \" + V_ui_var(\"--ac-\" + color + \"-fade\"\n                + (color === \"bk\" ? _ : \"-lg\")) + \" inset\");\n        }\n        // 渐变色\n        else {\n            obj.c(_boxShadow_, _none_);\n            obj.c(_textShadow_, _none_);\n            obj.c(_backgroundImage_, \"linear-gradient(90deg, \"\n                + V_ui_genGradColorCSS(gradientColors, \"-fade\", \"-lg\") + \")\");\n        }\n    }\n\n    /**\n     * 处理表格单元格着色\n     * @param obj 文本对象\n     */\n    function __disposeCell(obj) {\n        if (obj === gUndefined)\n            return;\n\n        // 单色\n        if (solid) {\n            obj.c(_backgroundColor_, V_ui_var(\"--ac-\" + color + \"-fade\"\n                + (color === \"bk\" ? _ : \"-lg\" )));\n        }\n        // 渐变色\n        else {\n            obj.c(_backgroundImage_, \"linear-gradient(135deg, \"\n                + V_ui_genGradColorCSS(gradientColors, \"-fade\", \"-lg\") + \")\");\n        }\n        obj.a(_dataRbCellBg_, V_ui_campColor(color));\n    }\n}\n\n// ==================== Code Magic 模块 ==================== //\n\nlet RainbowColorCode = \"(r[do]|og|ye|l[am]|g[nyd]|aq|cy|b[unk]|se|vn|p[uk]|[mw]n|ol|t[12])\",\n    RainbowColor_syntax = new RegExp(\"^\\\\((\" + RainbowColorCode + \"+)(!)?\\\\)$\", \"i\"),\n    RainbowColor_syntaxByClass = new RegExp(\"\\\\s(\" + RainbowColorCode + \"+)\\\\s(em)?\", \"i\"),\n    // RainbowColor_syntax = /^\\(((r[do]|og|ye|l[am]|g[nyd]|aq|cy|b[unk]|se|vn|p[uk]|[mw]n|ol|t[12])+)(!)?\\)$/i,\n    RainbowColorTooLight = /ye|lm|aq|la|pk|gd|cy/i; // 属于亮度较高，用于文字显示时须要降低亮度的颜色标识\n\n/**\n * 初始化\n */\nfunction CodeMagic_init() {\n    // 初始化彩虹标签、彩虹徽章、刮刮卡的默认颜色标识\n    // 注：彩虹引用块的初始化在 ExtQuote 中进行\n    let dcTag = V_util_getParamVal(\"tag\"),\n        dcBadge = V_util_getParamVal(\"badge\"),\n        dcCoat = V_util_getParamVal(\"coat\");\n    if (dcTag !== gUndefined)\n        RainbowTag_defalutColor = dcTag;\n    if (dcBadge !== gUndefined)\n        RainbowBadge_defalutColor = dcBadge;\n    if (dcCoat !== gUndefined)\n        RainbowCoat_defalutColor = dcCoat;\n\n    // 遍历所有 code\n    let stdCount = 0;\n    $(\"code\").e(function () {\n        let _t = $(this),\n            codeText = _t.t(),\n            result;\n\n        // 徽章格式\n        if ((result = codeText.m(RainbowBadge_syntax)) != null)\n            RainbowBadge_build(_t, result);\n        // 彩虹标签格式\n        else if ((result = codeText.m(RainbowTag_syntax)) != null)\n            RainbowTag_build(_t, result);\n        // 刮刮卡格式\n        else if ((result = codeText.m(RainbowCoat_syntax)) != null)\n            RainbowCoat_build(_t, result);\n        // 文字注音格式（旧语法）\n        else if ((result = codeText.m(TextPhoneticOld_syntax)) != null)\n            TextPhoneticOld_build(_t, result);\n        // 普通代码增加样式标识，以用于深色模式时的识别\n        else {\n            stdCount++;\n            JQ_addClass(_t, _vStdCode_ + \" id-\" + stdCount);\n            _t.uC().ck(function (event) {\n                // event.stopPropagation(); // 停止事件冒泡\n\n                if (!_t.is(ContentAssistor_lastTarget))\n                    ContentAssistor_toggleCopyMode(gFalse);\n\n                let content = _t.t();\n                if (ContentAssistor_copyAsMarkdown)\n                    content = \"`\" + content + \"`\";\n                ContentAssistor_lastTarget = _t;\n                Copyer_action(_t, content, gTrue);\n            });\n        }\n    });\n}\n\n/**\n * 处理彩虹标签、徽章、引用块、刮刮卡指定的颜色\n * @param target 颜色标识对象\n * @return Array[] 正则表达式匹配的颜色标识数组\n */\nfunction CodeMagic_parseRainbowColor(target) {\n    let tagName = V_util_getTagName(target),\n        newColors = null;\n    // <sub> 标签\n    if (tagName === \"sub\"\n        && (newColors = target.t().m(RainbowColor_syntax)) != null) {\n            JQ_remove(target);\n    }\n    return newColors;\n}\n\n/**\n * 判断是否为彩虹颜色标识的强调风格\n * @param colorSet 颜色标识的正则匹配结果集\n * @return boolean 是否强调\n */\nfunction CodeMagic_isRainbowColorEm(colorSet) {\n    let em = colorSet[colorSet.length - 1];\n    return (em !== gUndefined && em === \"!\");\n}\n\n// ==================== Code Magic：彩虹标签模块 ==================== //\n\n// 语法：#tag#(color)\nlet RainbowTag_count = 0,\n    RainbowTag_syntax = /^#(.+)#$/i,\n    RainbowTag_defalutColor = \"t2\"; // theme1\n\n/**\n * 构建单标签样式\n * @param target 目标 code 对象\n * @param result 正则表达式匹配后的结果数组\n */\nfunction RainbowTag_build(target, result) {\n    let tag = result[1],\n        color = RainbowTag_getColor(),\n        em = _; // 强调样式的标识\n\n    RainbowTag_count++;\n\n    // 颜色标识新语法处理\n    // 新语法：~(color)~\n    let colorSet = CodeMagic_parseRainbowColor(target.n());\n    if (colorSet != null) {\n        color = RainbowTag_getColor(colorSet[1]);\n        em = CodeMagic_isRainbowColorEm(colorSet) ? \" em\" : _;\n    }\n\n    // 过滤语法内容\n    target.t(tag);\n    let solid = color.length < 4,\n        gradientColors = [], // 渐变色标识数组\n        id = \" id-\" + RainbowTag_count;\n    if (!solid) { // 渐变\n        gradientColors = V_ui_splitColors(color);\n        target.a(_class_, _vTag_ + ___ + gradientColors[0] + em + id);\n        target.c(_cssText_, _backgroundImage_ + \":linear-gradient(90deg, \"\n            + V_ui_genGradColorCSS(gradientColors, _, \"-lg\") + \")\" + _important_);\n    }\n    else {\n        target.a(_class_, _vTag_ + ___ + color + em + id);\n    }\n\n    // 复制标签内容\n    target.a(_dataAsMarkdown_, __asMarkdown());\n    target.a(_value_, \"#\" + target.t() + \"#\");\n    target.uC().ck(function (event) {\n        let _t = $(this),\n            content = _t.a(_value_);\n\n        if (!_t.is(ContentAssistor_lastTarget))\n            ContentAssistor_toggleCopyMode(gFalse);\n\n        if (ContentAssistor_copyAsMarkdown)\n            content = target.a(_dataAsMarkdown_);//__asMarkdown();\n        ContentAssistor_lastTarget = _t;\n        Copyer_action(_t, content, gTrue);\n    });\n\n    /**\n     * 生成标签的 Markdown 格式\n     */\n    function __asMarkdown() {\n        let content = \"#\" + tag + \"#\";\n        // 用反引号包裹\n        content = V_util_wrapBackquote(content);\n        // 添加预置色号\n        if (color !== RainbowBadge_defalutColor) {\n            content += RainbowColor_genAsMarkdown(color,\n                (em.length > 0 ? \"!\" : _),\n                RainbowTag_defalutColor);\n        }\n        return content;\n    }\n}\n\n/**\n * 获得获取对应的颜色标识\n * @param color 文档中指定的预置颜色标识\n * @returns string 返回有效的的颜色值\n */\nfunction RainbowTag_getColor(color = gUndefined) {\n    // 没有指定颜色，则为默认颜色\n    if (color === gUndefined)\n        return RainbowTag_defalutColor;\n    return color.l();\n}\n\n// ==================== Code Magic：徽章模块 ==================== //\n\n// 语法：#badge_name|badge_value|badge_value2#\nlet RainbowBadge_count = 0,\n    RainbowBadge_syntax = /^#([^|]+)\\|([^|]+)(\\|([^|]+))?#$/i, // 徽章\n    RainbowBadge_syntax_variable = /^(.*)({{.+}}|%.+%|\\${.+}|#{.+}|\\$.+\\$|var\\(.+\\))(.*)$/i, // 变量语法\n    RainbowBadge_defalutColor = \"gy\";\n\n/**\n * 构建徽章样式\n * @param target 目标 code 对象\n * @param result 正则表达式匹配后的结果数组\n */\nfunction RainbowBadge_build(target, result) {\n    let color = RainbowBadge_getColor(gUndefined, target), // 颜色标识\n        em = _, // 强调样式的标识\n        badgeName = result[1],\n        badgeValue = result[2],\n        badgeValue2 = (result.length > 4) ? result[4] : gUndefined,\n        varStr;\n\n    RainbowBadge_count++;\n\n    // 颜色标识新语法处理\n    // 新语法：~(color)~\n    let colorSet = CodeMagic_parseRainbowColor(target.n());\n    if (colorSet != null) {\n        color = RainbowBadge_getColor(colorSet[1], target);\n        em = CodeMagic_isRainbowColorEm(colorSet) ? \" em\" : _;\n    }\n\n    // ----- 徽章标题\n    target.wrap(\"<code class='\" + _vBadgeName_ + ___ + color + \" id-\" + RainbowBadge_count + \"'>\" + badgeName + \"</code>\");\n    // 复制徽章标题内容\n    let badge = $(\".\" + _vBadgeName_ + \".id-\" + RainbowBadge_count);\n    // 点击事件\n    badge.uC().ck(function (event) {\n        let _t = $(this),\n            content = _t.a(_value_);\n\n        // 激活复制为 Markdown 的判断\n        if (!_t.is(ContentAssistor_lastTarget))\n            ContentAssistor_toggleCopyMode(gFalse);\n\n        if (ContentAssistor_copyAsMarkdown)\n            content = _t.a(_dataAsMarkdown_);//__asMarkdown();\n        ContentAssistor_lastTarget = _t;\n        Copyer_action(_t, content, gTrue);\n    });\n\n    // ----- 徽章内容\n    JQ_addClass(target, _vBadgeValue_ + \" id-\" + RainbowBadge_count);\n    // 处理含变量的情况\n    if ((varStr = badgeValue.m(RainbowBadge_syntax_variable)) != null)\n        badgeValue = badgeValue.r(varStr[2], V_ui_span(\"var \" + color, _, varStr[2]));\n    target.hm(badgeValue);\n    // 指定的颜色标识带强调样式\n    if (em.length > 0)\n        JQ_addClass(target, color);\n\n    // 复制徽章内容\n    target.uC().ck(function (event) {\n        let _t = $(this),\n            content = _t.t();\n        Copyer_action(_t, content, gFalse);\n    });\n\n    // ----- 徽章内容2\n    if (badgeValue2 !== gUndefined) {\n        target.af(V_ui_span(\"v-badge-value2_\" + RainbowBadge_count, _, badgeValue2));\n        JQ_addClass(target.p(), _two_);\n        JQ_addClass(target, _two_);\n\n        target.n().uC().ck(function (event) {\n            let _t = $(this),\n                content = _t.t();\n            Copyer_action(_t, content, gFalse);\n        });\n    }\n\n    // 生成 asMarkdown 内容，用于复制\n    badge.a(_dataAsMarkdown_, __asMarkdown());\n    // 生成普通内容，用于复制\n    let nodeCnt = 0,\n        plainContent = _;\n    badge.contents().e(function () {\n        nodeCnt++;\n        plainContent += ((nodeCnt > 1) ? \"|\" : _) + $(this).t();\n    });\n    badge.a(_value_, \"#\" + plainContent + \"#\");\n\n    /**\n     * 生成徽章的 Markdown 格式\n     */\n    function __asMarkdown() {\n        let content = \"#\" + badgeName\n            + \"|\" + badgeValue\n            + ((badgeValue2 !== gUndefined) ? \"|\" + badgeValue2 : _)\n            + \"#\";\n        // 用反引号包裹\n        content = V_util_wrapBackquote(content);\n        // 添加预置色号\n        if (color !== RainbowBadge_defalutColor) {\n            content += RainbowColor_genAsMarkdown(color,\n                (em.length > 0 ? \"!\" : _),\n                RainbowBadge_defalutColor);\n        }\n        return content;\n    }\n\n}\n\n/**\n * 获得获取对应的颜色标识\n * @param color 文档中指定的预置颜色标识\n * @param target 目标 code 对象\n * @returns string 返回有效的的颜色值\n */\nfunction RainbowBadge_getColor(color, target = gUndefined) {\n    // 没有指定颜色，则为默认颜色\n    if (color === gUndefined) {\n        // 针对封面内的彩虹徽章（未指定颜色标识）的处理\n        if (target !== gUndefined) {\n            let p = target.p(),\n                tagName = (p !== gUndefined ? V_util_getTagName(p) : gUndefined);\n            if (tagName !== gUndefined\n                && tagName.l() === _h6_ && p.p().a(_id_) === \"write\" )\n                    return \"t2\";\n        }\n        return RainbowBadge_defalutColor;\n    }\n    return color.l();\n}\n\n// ==================== Code Magic：刮刮卡模块 ==================== //\n\nlet coatCount = 0,\n    RainbowCoat_syntax = /^\\/(.*?)\\|(.+)\\/$/i, // 语法：/tips|text/\n    RainbowCoat_defalutColor = \"gy\";\n\n/**\n * 构建「刮刮卡」\n * @param target 源对象\n * @param result 正则表达式匹配后的结果数组\n */\nfunction RainbowCoat_build(target, result) {\n    let tips = \" **** \",\n        text = result[2],\n        color = RainbowCoat_getColor(gUndefined);\n\n    // 颜色标识新语法处理\n    // 语法：~(color)~\n    let colorSet = CodeMagic_parseRainbowColor(target.n());\n    if (colorSet != null) {\n        color = RainbowCoat_getColor(colorSet[1]);\n    }\n    color = V_ui_var(\"--ac-\" + color + \"-lg\");\n\n    // 自定义提示信息\n    if (result[1] !== gUndefined && result[1] !== _)\n        tips = result[1];\n\n    // 初始化「刮刮卡」数据\n    coatCount++;\n    JQ_addClass(target, _vRbCoat_ + \" id-\" + coatCount);\n    target.a(_dataRbCoatData_, text);\n    target.a(_dataRbCoatShowed_, _false_);\n    target.a(_title_, [\n        \"点击查看有效的原始内容\",\n        \"Click to view valid original content\"\n        ][V_lang_id]);\n    target.t(tips);\n    target.c(_background_, RainbowCoat_generateBg(tips.length, color))\n        .c(_borderColor_, color);\n\n    // 「刮刮卡」的点击事件\n    target.uC().ck(function (event) {\n        RainbowCoat_toggle($(this), event);\n    });\n}\n\n/**\n * 根据提示信息字数生成条纹背景\n * @param charCount 提示信息字数\n * @param color 条纹背景色\n * @returns string 生成 CSS 规范的背景\n */\nfunction RainbowCoat_generateBg(charCount, color) {\n    let count = 16,\n        result = \"linear-gradient(135deg, \";\n    // 根据字数调整条纹数量\n    if (charCount <= 8)\n        count = 4;\n    else if (charCount <= 12)\n        count = 8;\n    else if (charCount <= 20)\n        count = 10;\n    // 计算每个条纹的步长\n    let step = 100 / count;\n    // 自动生成条纹背景\n    for (let i = 0; i < count; i++) {\n        let start = i * step,\n            end = start + step,\n            c = (i % 2 === 0) ? color : _varDFC_;\n        result += c + ___ + start + \"%, \" + c + ___ + end + \"%\"; // 分段渐变\n        result += (i < count - 1) ? \",\" : \")\";\n    }\n    return result;\n}\n\n/**\n * 获得获取对应的颜色标识\n * @param color 文档中指定的预置颜色标识\n * @returns string 返回有效的的颜色值\n */\nfunction RainbowCoat_getColor(color) {\n    // 没有指定颜色，则为默认颜色\n    if (color === gUndefined)\n        return RainbowCoat_defalutColor;\n    return color.l();\n}\n\n/**\n * 显示 / 隐藏「刮刮卡」的内容\n * @param target 刮刮卡对象\n * @param event 事件对象\n */\nfunction RainbowCoat_toggle(target, event) {\n    event.stopPropagation(); // 停止事件冒泡\n\n    if (target.a(_dataRbCoatShowed_).sW(\"f\"))\n        RainbowCoat_show(target);\n    else\n        RainbowCoat_hide(target);\n}\n\n/**\n * 显示「刮刮卡」的内容\n * @param target 刮刮卡对象\n */\nfunction RainbowCoat_show(target) {\n    let tmp = target.t();\n    JQ_addClass(target, _opened_);\n    target.c(_color_, target.c(_borderColor_));\n    // 显示原始信息\n    target.t(target.a(_dataRbCoatData_));\n    // 「刮刮卡」自定义数据\n    target.a(_dataRbCoatData_, tmp);\n    target.a(_dataRbCoatShowed_, _true_)\n}\n\n/**\n * 隐藏「刮刮卡」的内容\n * @param target 刮刮卡对象\n */\nfunction RainbowCoat_hide(target) {\n    let tmp = target.t();\n    JQ_removeClass(target, _opened_);\n    target.c(_color_, _varDBc_);\n    // 显示提示信息\n    target.t(target.a(_dataRbCoatData_));\n    // 「刮刮卡」自定义数据\n    target.a(_dataRbCoatData_, tmp);\n    target.a(_dataRbCoatShowed_, _false_);\n}\n\n// ==================== Code Magic：文本注音模块 ==================== //\n\n// 旧语法：{text}(symbol)\nlet TextPhoneticOld_syntax = /^{(.+)}\\((.+)\\)$/;\n\n/**\n * 构建「注音」（旧语法）\n * @param target 源对象\n * @param result 正则表达式匹配后的结果数组\n */\nfunction TextPhoneticOld_build(target, result) {\n    let text = result[1],\n        symbol = result[2];\n    // 生成注音内容\n    target.af(\"<ruby>\" + text\n        + \"<rp>(</rp><rt>\" + symbol\n        + \"</rt><rp>)\" + _nbsp_ + \"</rp></ruby>\");\n    // 绑定注音的点击事件\n    target.n().ch(\"rt\").uC().ck(function (event) {\n        TextPhonetic_translation(text, symbol, event);\n    });\n    // 删除预置颜色标识\n    JQ_remove(target);\n}\n\n/**\n * 释义或翻译\n * @param text 被注音的内容\n * @param symbol 注音\n * @param event 事件对象\n */\nfunction TextPhonetic_translation(text, symbol, event) {\n    event.stopPropagation(); // 停止事件冒泡\n\n    // 默认翻译为中文的服务\n    let translator = \"https://www.bing.com/translator/?from=&to=zh-chs&text=\",\n        // translator = \"https://translate.google.cn/?langpair=auto&sl=auto&op=translate&text=\",\n        url = translator + encodeURI(text);\n    // 若 symbol 为日文假名，则跳转至翻译平台翻译 symbol\n    if (/^[\\u3040-\\u30FF]/.test(symbol))\n        url = translator + encodeURI(symbol);\n    // 若 text 为中文，则跳转至汉典，翻译 text\n    else if (/^[\\u4e00-\\u9fa5]/.test(text))\n        url = \"https://www.zdic.net/hans/\" + encodeURI(text);\n\n    window.open(url, text);\n}\n\n// ==================== VLOOK UI 模块 ==================== //\n\n/**\n * 加载欢迎页资源\n */\nfunction VLOOKui_loadWelcomePage() {\n    let title = V_util_getDocTitle(),\n        date = V_util_getMetaByName(\"date\"),\n        author = V_util_getMetaByName(\"author\"),\n        defalutContent = (title !== gUndefined ? V_ui_div(_, _, title) : _)\n            + (date !== gUndefined ? V_ui_div(_, \"v-date\", \"( \" + date + \" )\") : _)\n            + (author !== gUndefined ? V_ui_div(_, \"v-author\", author) : _),\n        metaContent = V_util_getMetaByName(\"vlook-welcome\");\n\n    // 无指定欢迎页内容，则使用默认内容\n    if (metaContent === gUndefined)\n        metaContent = defalutContent;\n    metaContent += _br_ + _br_;\n    // --------------------------------------------------\n    // 欢迎页\n    return V_ui_div(_, \"v-welcome-page\",\n            // 文档专属图标\n            V_ui_div(_, _vDocLog_ + _light_)\n            + V_ui_div(_, _vDocLog_ + _dark_)\n            // 欢迎信息\n            + V_ui_div(_, \"v-tips\", metaContent.x())\n            // 文档加载进度及进入按钮\n            + V_ui_div(_, \"v-loading\", \"Loading...\")\n        );\n    // return ui;\n}\n\n/**\n * 加载图标集资源\n */\nfunction VLOOKui_loadIconSet() {\n    let ui = '<svg style=\"display: none;\">';\n        // SVG 图标集：图标|VLOOK LOGO\n    ui += V_ui_symbol(_icoVLOOK_,\n            '<path d=\"M17.15 0c2.382 0 3.245.248 4.116.714a4.856 4.856 0 0 1 2.02 2.02c.466.87.714 1.734.714 4.116v10.3c0 2.382-.248 3.245-.714 4.116a4.856 4.856 0 0 1-2.02 2.02c-.87.466-1.734.714-4.116.714H6.85c-2.382 0-3.245-.248-4.116-.714a4.856 4.856 0 0 1-2.02-2.02C.248 20.396 0 19.532 0 17.15V6.85c0-2.382.248-3.245.714-4.116a4.856 4.856 0 0 1 2.02-2.02C3.604.248 4.468 0 6.85 0h10.3zm-4.935 16.976a.26.26 0 0 0-.334 0l-.956.795a.26.26 0 0 0-.05.345l.956 1.432a.26.26 0 0 0 .434 0l.956-1.432a.26.26 0 0 0-.05-.345zM7.27 9.292a4.34 4.34 0 0 0-4.343 4.336 4.34 4.34 0 0 0 4.343 4.336 4.34 4.34 0 0 0 4.343-4.336A4.34 4.34 0 0 0 7.27 9.292zm9.554 0a4.34 4.34 0 0 0-4.343 4.336 4.34 4.34 0 0 0 4.343 4.336 4.34 4.34 0 0 0 4.343-4.336 4.34 4.34 0 0 0-4.343-4.336zm-9.554 1.3a3.038 3.038 0 0 1 3.04 3.036 3.038 3.038 0 0 1-3.04 3.035 3.038 3.038 0 0 1-3.04-3.035 3.038 3.038 0 0 1 3.04-3.035zm9.554 0a3.038 3.038 0 0 1 3.04 3.036 3.038 3.038 0 0 1-3.04 3.035 3.038 3.038 0 0 1-3.04-3.035 3.038 3.038 0 0 1 3.04-3.035zm2.883-5.174a.652.652 0 0 0-.853-.32l-.013.005-6.795 2.83-6.793-2.83-.014-.006a.65.65 0 1 0-.537 1.185l7.035 2.931.014.006c.097.043.2.06.299.055a.649.649 0 0 0 .293-.055l.014-.006 7.035-2.93.084-.048a.65.65 0 0 0 .23-.817z\" fill=\"#FFF\" fill-rule=\"evenodd\"/>')\n        // SVG 图标集：图标|导航中心\n        + V_ui_symbol(_icoNavCenter_,\n            '<path d=\"M7.087.453a.82.82 0 0 1 1.1-.366L13 2.493V17.2a.8.8 0 0 1-1.158.716L7 15.493V.82a.82.82 0 0 1 .087-.367zm12.755.797a1.5 1.5 0 0 1 .158.67v11.72a3 3 0 0 1-1.658 2.683l-3.184 1.592A.8.8 0 0 1 14 17.199V2.493L17.83.58a1.5 1.5 0 0 1 2.012.67zM5.913.453A.82.82 0 0 1 6 .82v14.673l-3.83 1.915A1.5 1.5 0 0 1 0 16.066V4.348a3 3 0 0 1 1.658-2.684L4.813.087a.82.82 0 0 1 1.1.366zM18.99 1.7a.5.5 0 0 0-.668-.23L15.61 2.79a.5.5 0 0 0-.046.874l2.71 1.693a.5.5 0 0 0 .765-.424V1.918a.5.5 0 0 0-.05-.219z\"/>')\n        // SVG 图标集：图标|导航中心分段控制|目录索引\n        + V_ui_symbol(_icoTocTabCatalog_,\n            '<path fill=\"none\" d=\"M0 0h16v16H0z\"/><path d=\"M13 1a3 3 0 0 1 3 3v8a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V4a3 3 0 0 1 3-3h10zm0 1H3a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zm0 8a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2h6zm-9 0a1 1 0 0 1 0 2H3a1 1 0 0 1 0-2h1zm9-3a1 1 0 0 1 0 2H7a1 1 0 1 1 0-2h6zM4 7a1 1 0 1 1 0 2H3a1 1 0 1 1 0-2h1zm9-3a1 1 0 0 1 0 2H7a1 1 0 1 1 0-2h6zM4 4a1 1 0 1 1 0 2H3a1 1 0 1 1 0-2h1z\"/>')\n        + V_ui_symbol(_icoTocTabCatalog_ + __checked_,\n            '<path fill=\"none\" d=\"M0 0h16v16H0z\"/><path d=\"M13 1a3 3 0 0 1 3 3v8a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V4a3 3 0 0 1 3-3h10zm0 10H7a1 1 0 0 0 0 2h6a1 1 0 0 0 0-2zm-9 0H3a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2zm9-4H7a1 1 0 1 0 0 2h6a1 1 0 0 0 0-2zM4 7H3a1 1 0 1 0 0 2h1a1 1 0 1 0 0-2zm9-4H7a1 1 0 1 0 0 2h6a1 1 0 0 0 0-2zM4 3H3a1 1 0 1 0 0 2h1a1 1 0 1 0 0-2z\"/>')\n        // SVG 图标集：图标|导航中心分段控制|插图索引\n        + V_ui_symbol(_icoTocTabFigure_,\n            '<path fill=\"none\" d=\"M0 0h16v16H0z\"/><path d=\"M13 1a3 3 0 0 1 3 3v8a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V4a3 3 0 0 1 3-3h10zm0 1H3a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zM5.823 7.22a1 1 0 0 1 .288.252l1.821 2.343a1 1 0 0 0 1.34.221l1.567-1.034a1 1 0 0 1 1.331.21l1.188 1.483a.8.8 0 0 1-.624 1.3H3.288a.8.8 0 0 1-.692-1.201l1.86-3.21a1 1 0 0 1 1.367-.364zM10 4a2 2 0 1 1 0 4 2 2 0 0 1 0-4z\"/>')\n        + V_ui_symbol(_icoTocTabFigure_ + __checked_,\n            '<path fill=\"none\" d=\"M0 0h16v16H0z\"/><path d=\"M13 1a3 3 0 0 1 3 3v8a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V4a3 3 0 0 1 3-3h10zM5.823 7.22a1 1 0 0 0-1.367.364l-1.86 3.21a.8.8 0 0 0 .692 1.201h9.446a.8.8 0 0 0 .624-1.3L12.17 9.212a1 1 0 0 0-1.331-.21l-1.567 1.034a1 1 0 0 1-1.34-.221L6.111 7.472a1 1 0 0 0-.288-.252zM10 4a2 2 0 1 0 0 4 2 2 0 0 0 0-4z\"/>')\n        // SVG 图标集：图标|导航中心分段控制|表格索引\n        + V_ui_symbol(_icoTocTabTable_,\n            '<path fill=\"none\" d=\"M0 0h16v16H0z\"/><path d=\"M13 1a3 3 0 0 1 3 3v8a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V4a3 3 0 0 1 3-3h10zM5 11H1v1a2 2 0 0 0 2 2h2v-3zm5 0H6v3h4v-3zm5 0h-4v3h2a2 2 0 0 0 2-2v-1zM5 6H1v4h4V6zm5 0H6v4h4V6zm5 0h-4v4h4V6zM5 2H3a2 2 0 0 0-2 2v1h4V2zm5 0H6v3h4V2zm3 0h-2v3h4V4a2 2 0 0 0-2-2z\" fill-rule=\"nonzero\"/>')\n        + V_ui_symbol(_icoTocTabTable_ + __checked_,\n            '<path fill=\"none\" d=\"M0 0h16v16H0z\"/><path d=\"M16 11v1a3 3 0 0 1-3 3h-1v-4h4zM4 11v4H3a3 3 0 0 1-3-3v-1h4zm7 0v4H5v-4h6zm0-5v4H5V6h6zm5 0v4h-4V6h4zm-5-5v4H5V1h6zm2 0a3 3 0 0 1 3 3v1h-4V1h1zM4 1v4H0V4a3 3 0 0 1 3-3h1zM0 6h4v4H0V6z\" fill-rule=\"nonzero\"/>')\n        // SVG 图标集：图标|导航中心分段控制|多媒体索引\n        + V_ui_symbol(_icoTocTabMedia_,\n            '<path fill=\"none\" d=\"M0 0h16v16H0z\"/><path d=\"M13 1a3 3 0 0 1 3 3v8a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V4a3 3 0 0 1 3-3h10zm-1 1.001H4v12h8v-12zM3 11H1v1a2 2 0 0 0 2 2v-3zm12 0h-2v3l.15-.005A2 2 0 0 0 15 12v-1zM3.002 6h-2v4h2V6zm11.997 0h-2v4h2V6zM3 2a2 2 0 0 0-2 2v1h2zm10 0v3h2V4a2 2 0 0 0-2-2zm-2.936 6.655L7.259 10.62A.8.8 0 0 1 6 9.963V6.037a.8.8 0 0 1 1.259-.656l2.805 1.964a.8.8 0 0 1 0 1.31z\" fill-rule=\"nonzero\"/>')\n        + V_ui_symbol(_icoTocTabMedia_ + __checked_,\n            '<path fill=\"none\" d=\"M0 0h16v16H0z\"/><path d=\"M16 11v1a3 3 0 0 1-3 3v-4h3zM3 11v4a3 3 0 0 1-3-3v-1h3zm9-10v14H4V1h8zM6.8 5.237a.8.8 0 0 0-.8.8v3.926a.8.8 0 0 0 1.259.656l2.805-1.964a.8.8 0 0 0 0-1.31L7.259 5.38a.8.8 0 0 0-.459-.144zM16 6v4h-3V6h3zM3 6v4H0V6h3zm10-5a3 3 0 0 1 3 3v1h-3V1zM3 1v4H0V4a3 3 0 0 1 3-3z\" fill-rule=\"nonzero\"/>')\n        // SVG 图标集：图标|导航中心分段控制|代码块索引\n        + V_ui_symbol(_icoTocTabCodeblock_,\n            '<path fill=\"none\" d=\"M0 0h16v16H0z\"/><path d=\"M13 1a3 3 0 0 1 3 3v8a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V4a3 3 0 0 1 3-3h10zm0 1H3a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zM6.555 4.168a1 1 0 0 1 .277 1.387L5.201 7.999l1.631 2.446a1 1 0 0 1-.184 1.317l-.093.07a1 1 0 0 1-1.387-.277L3.353 8.832a1.5 1.5 0 0 1 0-1.664l1.815-2.723a1 1 0 0 1 1.387-.277zm2.89 0a1 1 0 0 1 1.387.277l1.815 2.723a1.5 1.5 0 0 1 0 1.664l-1.815 2.723a1 1 0 0 1-1.387.277l-.093-.07a1 1 0 0 1-.184-1.317L10.799 8 9.168 5.555a1 1 0 0 1 .277-1.387z\" fill-rule=\"nonzero\"/>')\n        + V_ui_symbol(_icoTocTabCodeblock_ + __checked_,\n            '<path fill=\"none\" d=\"M0 0h16v16H0z\"/><path d=\"M13 1a3 3 0 0 1 3 3v8a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V4a3 3 0 0 1 3-3h10zM5.454 4.168a1 1 0 0 0-1.387.277L2.252 7.168a1.5 1.5 0 0 0 0 1.664l1.815 2.723a1 1 0 0 0 1.387.277l.093-.07a1 1 0 0 0 .184-1.317L4.101 8l1.63-2.444a1 1 0 0 0-.277-1.387zm4.89 0a1 1 0 0 0-.277 1.387l1.631 2.444-1.631 2.446a1 1 0 0 0 .184 1.317l.093.07a1 1 0 0 0 1.387-.277l1.815-2.723a1.5 1.5 0 0 0 0-1.664l-1.815-2.723a1 1 0 0 0-1.387-.277z\" fill-rule=\"nonzero\"/>')\n        // SVG 图标集：图标|导航中心分段控制|访问史\n        + V_ui_symbol(_icoTocTabHistory_,\n            '<path d=\"M8 0c4.411 0 8 3.589 8 8s-3.589 8-8 8-8-3.589-8-8 3.589-8 8-8zm0 1C4.142 1 1 4.142 1 8s3.142 7 7 7 7-3.142 7-7-3.142-7-7-7zm0 1.5a1 1 0 0 1 1 1v4.45l2.164 1.25a1 1 0 0 1-1 1.732l-2.598-1.5a1 1 0 0 1-.237-.19A1 1 0 0 1 7 8.5v-5a1 1 0 0 1 1-1z\"/>')\n        + V_ui_symbol(_icoTocTabHistory_ + __checked_,\n            '<path d=\"M8 0c4.411 0 8 3.589 8 8s-3.589 8-8 8-8-3.589-8-8 3.589-8 8-8zm0 3.5a1 1 0 0 0-1 1v5c0 .294.127.56.33.742a.979.979 0 0 0 .236.19l2.598 1.5a1 1 0 0 0 1-1.732L9 8.95V4.5a1 1 0 0 0-.883-.993z\" fill-rule=\"nonzero\"/>')\n        // SVG 图标集：图标|检索\n        + V_ui_symbol(_icoRetrieval_,\n            '<path d=\"M14.999 14.596a1.375 1.375 0 0 1-1.953 0L11.46 12.94a6.372 6.372 0 0 1-3.466 1.032c-3.559 0-6.444-2.904-6.444-6.486S4.435 1 7.994 1c3.56 0 6.445 2.904 6.445 6.486a6.47 6.47 0 0 1-1.026 3.488l1.586 1.656c.54.543.54 1.423 0 1.966zM7.993 2.32c-2.834 0-5.132 2.313-5.132 5.166s2.298 5.165 5.132 5.165c2.835 0 5.133-2.312 5.133-5.165s-2.298-5.166-5.133-5.166z\"/>')\n        // SVG 图标集：图标|向左关闭\n        // + V_ui_symbol(\"icoCloseTo-left\",\n        + V_ui_symbol(_icoMaskCloser_,\n            '<path d=\"M13.98.176l.035.013c1.506.534 2.311 2.123 1.86 3.607L6.21 30l9.61 26.04c.546 1.475-.186 3.097-1.64 3.707l-.2.077c-1.502.532-3.154-.18-3.781-1.597l-.065-.16L.315 31.916a5.987 5.987 0 0 1 0-3.832l9.818-26.151C10.702.41 12.422-.375 13.979.176z\"/>')\n        // SVG 图标集：图标|插图导航的上一张\n        + V_ui_symbol(_icoPrevFig_,\n            '<path d=\"M11.03.091c.765.284 1.159 1.147.88 1.927L3.002 27l8.91 24.982a1.516 1.516 0 0 1-.75 1.87l-.13.057a1.462 1.462 0 0 1-1.834-.765l-.055-.134L.12 27.705C.112 27.685 0 27.435 0 27c0-.435.111-.684.12-.706L9.141.99A1.465 1.465 0 0 1 11.03.09z\"/>')\n        // SVG 图标集：图标|逐章导航的上一章'\n        + V_ui_symbol(_icoPrevChapter_,\n            '<path d=\"M7.364.293a1 1 0 0 1 0 1.414l-4.97 4.969 4.974 4.974a1 1 0 0 1-1.415 1.414L.296 7.407a.996.996 0 0 1-.291-.658.995.995 0 0 1 .288-.8L5.95.294a1 1 0 0 1 1.414 0z\"/>')\n        // SVG 图标集：图标|已收起的 目录节点\n        + V_ui_symbol(_icoTocFolded_,\n            '<path d=\"M11.614 8.72L7.37 12.961a1 1 0 0 1-1.414-1.414l3.542-3.543-3.542-3.543A1 1 0 1 1 7.37 3.048l4.243 4.243a.997.997 0 0 1 .293.707v.014a.997.997 0 0 1-.293.707z\"/>')\n        // SVG 图标集：图标|已收起的 引用块折叠 / 表格折叠行节点\n        + V_ui_symbol(_icoFolded_,\n            '<path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm-.336 3.757A1 1 0 1 0 6.25 5.172l2.835 2.835-2.835 2.836a1 1 0 1 0 1.414 1.414l3.535-3.536a.997.997 0 0 0 .293-.707V8a.997.997 0 0 0-.293-.707z\"/>')\n        // need removed:\n        // SVG 图标集：图标|展开长内容\n        // + V_ui_symbol(_icoExtend_,\n        //     '<path d=\"M5.05 6.364A1 1 0 0 1 6.464 4.95L10 8.485l3.536-3.535a1 1 0 1 1 1.414 1.414l-4.243 4.243a1 1 0 0 1-1.414 0L5.05 6.364z\"/><path d=\"M5.05 12.364a1 1 0 0 1 1.414-1.414L10 14.485l3.536-3.535a1 1 0 1 1 1.414 1.414l-4.243 4.243a1 1 0 0 1-1.414 0L5.05 12.364z\"/>')\n        // SVG 图标集：图标|关闭\n        + V_ui_symbol(_icoClose_,\n            '<path d=\"M7,7 L7,-1 C7,-1.55228475 7.44771525,-2 8,-2 C8.55228475,-2 9,-1.55228475 9,-1 L9,7 L17,7 C17.5522847,7 18,7.44771525 18,8 C18,8.55228475 17.5522847,9 17,9 L9,9 L9,17 C9,17.5522847 8.55228475,18 8,18 C7.44771525,18 7,17.5522847 7,17 L7,9 L-1,9 C-1.55228475,9 -2,8.55228475 -2,8 C-2,7.44771525 -1.55228475,7 -1,7 L7,7 Z\" transform=\"translate(8.000000, 8.000000) rotate(45.000000) translate(-8.000000, -8.000000) \"></path>')\n        // SVG 图标集：图标|清空输入\n        + V_ui_symbol(_icoResetInput_,\n            '<path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM5.737 4.606a.8.8 0 0 0-1.131 1.131L6.869 8l-2.263 2.263a.8.8 0 1 0 1.131 1.131L8 9.131l2.263 2.263a.8.8 0 1 0 1.131-1.131L9.131 8l2.263-2.263a.8.8 0 1 0-1.131-1.131L8 6.869z\"/>')\n        // SVG 图标集：图标|颜色模式（Light/Dark）\n        + V_ui_symbol(_icoLightMode_,\n            '<path d=\"M10 17a1 1 0 0 1 1 1v1a1 1 0 0 1-2 0v-1a1 1 0 0 1 1-1zm6.364-2.05l.707.707a1 1 0 0 1-1.414 1.414l-.707-.707a1 1 0 1 1 1.414-1.414zm-11.314 0a1 1 0 0 1 0 1.414l-.707.707a1 1 0 1 1-1.414-1.414l.707-.707a1 1 0 0 1 1.414 0zM10 5a5 5 0 1 1 0 10 5 5 0 0 1 0-10zm9 4a1 1 0 0 1 0 2h-1a1 1 0 0 1 0-2h1zM2 9a1 1 0 0 1 0 2H1a1 1 0 0 1 0-2h1zm15.071-6.071a1 1 0 0 1 0 1.414l-.707.707a1 1 0 1 1-1.414-1.414l.707-.707a1 1 0 0 1 1.414 0zm-12.728 0l.707.707A1 1 0 1 1 3.636 5.05l-.707-.707A1 1 0 0 1 4.343 2.93zM10 0a1 1 0 0 1 1 1v1a1 1 0 0 1-2 0V1a1 1 0 0 1 1-1z\"/>')\n        // SVG 图标集：图标|深色模式\n        + V_ui_symbol(_icoDarkMode_,\n            '<path d=\"M5.646 2.646A9.003 9.003 0 0 0 9 20a9.003 9.003 0 0 0 8.354-5.646A9 9 0 0 1 5.613 2.729zM15.5 3l-1.065 2.7a1.303 1.303 0 0 1-.734.735L11 7.5l2.7 1.065c.337.133.602.398.735.734L15.5 12l1.065-2.7c.133-.337.398-.602.734-.735L20 7.5l-2.7-1.065a1.303 1.303 0 0 1-.735-.734L15.5 3zm-4.829-3l-.547 1.389a1 1 0 0 1-.564.563L8.171 2.5l1.39.548a1 1 0 0 1 .563.563L10.67 5l.548-1.389a1 1 0 0 1 .563-.563l1.39-.548-1.39-.548a1 1 0 0 1-.563-.563L10.671 0z\"/>')\n        // SVG 图标集：图标|聚光灯\n        + V_ui_symbol(_icoSpotlight_,\n            '<path d=\"M7 0a7 7 0 0 1 6.992 6.67A7.002 7.002 0 0 1 11 20a7 7 0 0 1-6.992-6.67A7.002 7.002 0 0 1 7 0zm4 6a7 7 0 0 0-6.992 7.33 7 7 0 0 0 9.985-6.662A6.984 6.984 0 0 0 11 6.001z\"/>')\n        // SVG 图标集：图标|激光笔\n        + V_ui_symbol(_icoLaserPointer_,\n            '<path d=\"M5.574 5.078a3.5 3.5 0 0 1 4.913.603l6.772 8.668a3.5 3.5 0 1 1-5.516 4.31L4.971 9.991a3.5 3.5 0 0 1 .603-4.913zm.576.769a2.5 2.5 0 1 0 3.078 3.94 2.5 2.5 0 0 0-3.078-3.94zm6.562-3.138a1 1 0 1 1 1.231 1.576l-.788.616a1 1 0 1 1-1.231-1.576l.788-.616zm-10.5 8a1 1 0 1 1 1.231 1.576l-.788.616a1 1 0 0 1-1.231-1.576l.788-.616zm-1.177-4.68l1 .034a1 1 0 0 1-.07 1.999l-1-.035a1 1 0 0 1 .07-1.999zM8.838.021a1 1 0 0 1 .77 1.186l-.208.978a1 1 0 0 1-1.956-.416l.208-.978a1 1 0 0 1 1.186-.77zM2.724 1.409a1 1 0 0 1 1.403.172l.616.788a1 1 0 0 1-1.576 1.232l-.616-.788a1 1 0 0 1 .173-1.404z\"/>')\n        // SVG 图标集：图标|段落导航\n        + V_ui_symbol(_icoParagraphNav_,\n            '<path d=\"M3.698 17.714v-5.036A.68.68 0 0 0 3.02 12a.68.68 0 0 0-.678.678v5.047L1.155 16.54a.689.689 0 0 0-.96 0c-.26.26-.26.69 0 .96l2.294 2.294a.67.67 0 0 0 .474.204h.068a.65.65 0 0 0 .475-.204L5.799 17.5c.26-.26.26-.689 0-.96-.237-.271-.666-.271-.926 0l-1.175 1.175zm0-15.432V7.32a.68.68 0 0 1-.678.678.68.68 0 0 1-.678-.678l.03-5.082-1.217 1.22c-.26.26-.689.26-.96 0a.689.689 0 0 1 0-.96L2.489.203A.67.67 0 0 1 2.963 0h.068c.17 0 .35.068.475.203l2.293 2.294c.26.26.26.69 0 .96-.237.272-.666.272-.926 0L3.698 2.283zM8 14h11a1 1 0 0 1 0 2H8a1 1 0 0 1 0-2zm0 3h8a1 1 0 0 1 0 2H8a1 1 0 0 1 0-2zM8 7h4a1 1 0 0 1 0 2H8a1 1 0 0 1 0-2zm0-6h11a1 1 0 0 1 0 2H8a1 1 0 0 1 0-2zm0 3h11a1 1 0 0 1 0 2H8a1 1 0 0 1 0-2z\"/>')\n        // SVG 图标集：图标|字体风格\n        + V_ui_symbol(_icoFontTheme_,\n            '<path d=\"M13.493 0l6.048 2.73a.5.5 0 0 1 .28.57l-.979 4.134a1 1 0 0 1-1.224.737l-1.092-.283.391 9.065a1 1 0 0 1-.999 1.043H3.94a1 1 0 0 1-1-1.04l.369-9.068-1.092.283a1 1 0 0 1-1.224-.737L.013 3.3a.5.5 0 0 1 .281-.57L6.341 0c.417 1.178 1.926 1.92 3.603 1.92 1.677 0 3.131-.742 3.55-1.92zm.84 15h-9a.5.5 0 1 0 0 1h9a.5.5 0 1 0 0-1zm0-2h-9a.5.5 0 1 0 0 1h9a.5.5 0 1 0 0-1zM9.49 4a1 1 0 0 0-.904.573L5.51 11.08a.644.644 0 0 0 .582.919h.379a1 1 0 0 0 .907-.578l.604-1.299h3.703l.566 1.28a1 1 0 0 0 .914.597h.39a.659.659 0 0 0 .596-.941L11.069 4.57A1 1 0 0 0 10.166 4zm.343 1.813l1.308 2.967H8.55l1.282-2.967z\"/>')\n        // SVG 图标集：图标|文库\n        + V_ui_symbol(_icoDocLib_,\n            '<path d=\"M17 0a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V3a3 3 0 0 1 3-3h14zm.001 7h-14a2 2 0 0 0-2 2h6a3 3 0 0 0 6 0h6l-.005-.15A2 2 0 0 0 17 7zm0-3h-14a2 2 0 0 0-2 2h18l-.005-.15A2 2 0 0 0 17 4zm0-3h-14a2 2 0 0 0-2 2h18l-.005-.15A2 2 0 0 0 17 1z\"/>')\n        // SVG 图标集：图标|文库-新标签中打开\n        + V_ui_symbol(_icoDocLibExt_,\n            '<path d=\"M17 0a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V3a3 3 0 0 1 3-3h14zm.002 2H11a1 1 0 0 0 0 2h3.585l-6.292 6.293a1 1 0 1 0 1.414 1.414L16 5.414V9a1 1 0 1 0 2 0L18 3c0-.017 0-.033-.003-.059v-.012a.999.999 0 0 0-.487-.789l-.023-.013-.047-.025a.995.995 0 0 0-.023-.011l-.014-.006-.025-.011a.993.993 0 0 0-.073-.027l-.014-.004-.017-.005a.993.993 0 0 0-.079-.019l-.02-.003-.017-.004A1.007 1.007 0 0 0 17.002 2h.02-.02z\"/>')\n        // SVG 图标集：图标|打开详情\n        + V_ui_symbol(_icoDetailsOpen_,\n            '<path d=\"M9 0a9 9 0 1 1 0 18A9 9 0 0 1 9 0zm1 3H8v5H3v2h5v5h2v-5h5V8h-5V3z\"/>')\n        // SVG 图标集：图标|打印\n        + V_ui_symbol(_icoPrint_,\n            '<path d=\"M15 0a2 2 0 0 1 2 2v4h1a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h1V2a2 2 0 0 1 2-2h10zm1 13H4v4a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-4zm-2 2v1H6v-1h8zm3.5-7h-1a.5.5 0 1 0 0 1h1a.5.5 0 1 0 0-1zm-3.372 0a.5.5 0 1 0 0 1 .5.5 0 0 0 0-1zM15 1H5a1 1 0 0 0-1 1v4h12V2a1 1 0 0 0-.883-.993L15 1z\"/>')\n        // SVG 图标集：图标|内容助力-插图浏览器中打开\n        + V_ui_symbol(_icoOpenInFigureNav_,\n            '<path d=\"M13 0a3 3 0 0 1 3 3v8a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V3a3 3 0 0 1 3-3h10zm0 6.507l-.117.007a1 1 0 0 0-.883.993V10L9 10a1 1 0 0 0 0 2h3.5a1.5 1.5 0 0 0 1.5-1.5V7.507a1 1 0 0 0-1-1zM6.98 2.004H3.5a1.5 1.5 0 0 0-1.5 1.5v3.062a1 1 0 0 0 1 1l.117-.006A1 1 0 0 0 4 6.566V4.004h2.98a1 1 0 1 0 0-2z\"/>')\n        // SVG 图标集：图标|内容助力-表格阅读模式（十字光标）\n        + V_ui_symbol(_icoTableX_,\n            '<path d=\"M13.6 0A2.4 2.4 0 0 1 16 2.4v9.2a2.4 2.4 0 0 1-2.4 2.4H2.4A2.4 2.4 0 0 1 0 11.6V2.4A2.4 2.4 0 0 1 2.4 0h11.2zM11 1H5v4.5A1.5 1.5 0 0 1 3.5 7H1v3h2.5A1.5 1.5 0 0 1 5 11.5V13h6v-1.5a1.5 1.5 0 0 1 1.5-1.5H15V7h-2.5A1.5 1.5 0 0 1 11 5.5V1zM9.5 6A1.5 1.5 0 0 1 11 7.5v2A1.5 1.5 0 0 1 9.5 11h-3A1.5 1.5 0 0 1 5 9.5v-2A1.5 1.5 0 0 1 6.5 6h3zm-.167 1H6.667a.667.667 0 0 0-.66.568L6 7.667v1.666c0 .335.247.612.568.66l.099.007h2.666a.667.667 0 0 0 .66-.568L10 9.333V7.667A.667.667 0 0 0 9.333 7z\"/>')\n        // SVG 图标集：图标|内容助力-表格自动换行\n        + V_ui_symbol(_icoTableWrap_,\n            '<path d=\"M11 0a2 2 0 0 1 2 2v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h9zm0 1H2a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1z\" fill-rule=\"nonzero\"/><path d=\"M2.5 2H13v1H2.5a.5.5 0 0 1 0-1z\" fill-rule=\"nonzero\"/><path d=\"M13 2h2.5a.5.5 0 1 1 0 1H13V2z\"/><path d=\"M16 6.1v3.4a2.9 2.9 0 0 1-2.9 2.9h-2v-1.8h2a1.1 1.1 0 0 0 1.1-1.1V6.1H16z\" fill-rule=\"nonzero\"/><path d=\"M9.5 11.5c.52-.961.953-1.628 1.3-2 .347-.372.847-.705 1.5-1v6c-.673-.383-1.173-.75-1.5-1.1-.327-.35-.76-.984-1.3-1.9z\"/><path d=\"M7 7a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h5zm-2.5 6h-2a.5.5 0 1 0 0 1h2a.5.5 0 1 0 0-1zm2-2h-4a.5.5 0 1 0 0 1h4a.5.5 0 1 0 0-1zm0-2h-4a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1z\" fill-rule=\"nonzero\"/>')\n        // SVG 图标集：图标|内容助力-画中画\n        + V_ui_symbol(_icoPicInPic_,\n            '<path d=\"M0 4.238l1 .966V11a2 2 0 0 0 1.85 1.995L3 13h4v1H3a3 3 0 0 1-3-3V4.238zM14 0a3 3 0 0 1 3 3v4h-1V3a2 2 0 0 0-1.85-1.995L14 1H5.283L4.247 0H14zm2 9a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h5zM2.121.707l3.086 3.086L7 2v5H2l1.793-1.793L.707 2.121A1 1 0 1 1 2.121.707z\"/>')\n        // SVG 图标集：图标|画中画的放大模式\n        + V_ui_symbol(_icoZoomIn_,\n            '<path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm4 7.503l-.117.007a1 1 0 0 0-.883.993v2.492H8.4a1 1 0 0 0 0 2h3.1a1.5 1.5 0 0 0 1.5-1.5V8.504a1 1 0 0 0-1-1zM7.58 3H4.5A1.5 1.5 0 0 0 3 4.5v3.062a1 1 0 0 0 1 1l.117-.007A1 1 0 0 0 5 7.562V5h2.58a1 1 0 1 0 0-2z\"/>')\n        // SVG 图标集：图标|内容助力-画中画的缩小模式\n        + V_ui_symbol(_icoZoomOut_,\n            '<path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm4.58 8H9.5A1.5 1.5 0 0 0 8 9.5v3.062a1 1 0 0 0 1 1l.117-.007a1 1 0 0 0 .883-.993V10h2.58a1 1 0 1 0 0-2zM7 2.503l-.117.007A1 1 0 0 0 6 3.503v2.492H3.4a1 1 0 1 0 0 2h3.1a1.5 1.5 0 0 0 1.5-1.5V3.504a1 1 0 0 0-1-1z\" fill-rule=\"evenodd\"/>')\n        // SVG 图标集：图标|复制\n        + V_ui_symbol(_icoCopy_,\n            '<path d=\"M14 0a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-2a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2-2h8zm-4 3H2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zm-4.5 9a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1h2zm3-3a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h5zm0-3a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h5z\"/>')\n        // SVG 图标集：图标|复制 as Markdown\n        + V_ui_symbol(_icoCopyAsMd_,\n            '<path d=\"M14 0a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-2a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2-2h8zm-4 3H2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zm4.3 3h-1.6v2.5H11l2.5 2.5L16 8.5h-1.7V6zM4.548 6l1.549 1.838L7.645 6h1.549v5H7.645V8.132L6.097 9.971 4.548 8.132V11H3V6h1.548z\"/>')\n        // SVG 图标集：图标|加载中\n        + V_ui_symbol(_icoLoading_,\n            '<rect x=\"7\" width=\"2\" height=\"4\" rx=\"1\"/><rect transform=\"rotate(45 12.243 3.757)\" x=\"11.243\" y=\"1.757\" width=\"2\" height=\"4\" rx=\"1\"/><rect transform=\"rotate(90 14 8)\" x=\"13\" y=\"6\" width=\"2\" height=\"4\" rx=\"1\"/><rect transform=\"rotate(135 12.243 12.243)\" x=\"11.243\" y=\"10.243\" width=\"2\" height=\"4\" rx=\"1\"/><rect transform=\"rotate(180 8 14)\" x=\"7\" y=\"12\" width=\"2\" height=\"4\" rx=\"1\"/><rect transform=\"rotate(-135 3.757 12.243)\" x=\"2.757\" y=\"10.243\" width=\"2\" height=\"4\" rx=\"1\"/><rect transform=\"rotate(-90 2 8)\" x=\"1\" y=\"6\" width=\"2\" height=\"4\" rx=\"1\"/><rect transform=\"rotate(-45 3.757 3.757)\" x=\"2.757\" y=\"1.757\" width=\"2\" height=\"4\" rx=\"1\"/>')\n        // SVG 图标集：图标|播放\n        + V_ui_symbol(_icoPlay_,\n            '<path d=\"M14.133 9.605l-7.86 6.028c-.93.633-2.223.427-2.887-.459A1.909 1.909 0 0 1 3 14.028V1.972C3 .882 3.927 0 5.07 0c.432 0 .852.128 1.203.367l7.86 6.028c.93.633 1.146 1.865.481 2.751a2.024 2.024 0 0 1-.481.459z\"/><path fill=\"none\" d=\"M0 0h16v16H0z\"/>')\n        // SVG 图标集：图标|暂停\n        + V_ui_symbol(_icoPause_,\n            '<path d=\"M3 2h1a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm9 0h1a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z\"/><path fill=\"none\" d=\"M0 0h16v16H0z\"/>')\n        // SVG 图标集：图标|停止\n        + V_ui_symbol(_icoStop_,\n            '<rect x=\"2\" y=\"2\" width=\"12\" height=\"12\" rx=\"2\"/><path fill=\"none\" d=\"M0 0h16v16H0z\"/>')\n        // SVG 图标集：图标|无法播放\n        + V_ui_symbol(_icoForbidden_,\n            '<path d=\"M3.11 4.523a6.001 6.001 0 0 0 8.368 8.367L3.11 4.523zM4.522 3.11l8.368 8.367A6 6 0 0 0 4.522 3.11zM8 16A8.001 8.001 0 1 1 8.002.002 8.001 8.001 0 0 1 8 16z\" /><path fill=\"none\" d=\"M0 0h16v16H0z\"/>')\n        // SVG 图标集：图标|复选框（未选择）\n        + V_ui_symbol(_icoChkbox__ + _no_,\n            '<path d=\"M10 0a4 4 0 0 1 4 4v6a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4h6zm0 1H4l-.205.007a2.99 2.99 0 0 0-1.916.872A2.99 2.99 0 0 0 1 4v6l.007.205a2.99 2.99 0 0 0 .872 1.916A2.99 2.99 0 0 0 4 13h6l.205-.007a2.99 2.99 0 0 0 1.916-.872A2.99 2.99 0 0 0 13 10V4l-.007-.205a2.99 2.99 0 0 0-.872-1.916A2.99 2.99 0 0 0 10 1z\"/>')\n        // SVG 图标集：图标|复选框（已选择）\n        + V_ui_symbol(_icoChkbox__ + _yes_,\n            '<path d=\"M10 0a4 4 0 0 1 4 4v6a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4h6zm.435 3.36a1 1 0 0 0-1.393.245L5.703 8.372 4.421 7.09a1 1 0 1 0-1.414 1.414l2.121 2.121a1 1 0 0 0 1.225.15l.01-.007.01-.005a.997.997 0 0 0 .292-.277l4.015-5.734a1 1 0 0 0-.245-1.393z\"/>')\n        // SVG 图标集：图标|复选框（不确定选择）\n        + V_ui_symbol(_icoChkbox__ + _un_,\n            '<path d=\"M10 0a4 4 0 0 1 4 4v6a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4h6zm0 6H4a1 1 0 1 0 0 2h6a1 1 0 0 0 0-2z\" opacity=\".3\"/><path d=\"M10 0a4 4 0 0 1 4 4v6a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4h6zm0 1H4l-.205.007a2.99 2.99 0 0 0-1.916.872A2.99 2.99 0 0 0 1 4v6l.007.205a2.99 2.99 0 0 0 .872 1.916A2.99 2.99 0 0 0 4 13h6l.205-.007a2.99 2.99 0 0 0 1.916-.872A2.99 2.99 0 0 0 13 10V4l-.007-.205a2.99 2.99 0 0 0-.872-1.916A2.99 2.99 0 0 0 10 1z\" opacity=\".3\"/>')\n        // SVG 图标集：图标|链接检查结果异常\n        + V_ui_symbol(_icoLinkError_,\n            '<path d=\"M8 0c.462 0 .887.24 1.11.626l6.73 11.572c.219.375.213.834-.016 1.204-.228.371-.645.598-1.095.598H1.271c-.45 0-.867-.227-1.095-.598a1.166 1.166 0 0 1-.016-1.204L6.89.626A1.28 1.28 0 0 1 8 0zm0 10.361c-.841 0-1.524.652-1.524 1.456 0 .52.29 1 .762 1.26.472.26 1.052.26 1.524 0 .471-.26.762-.74.762-1.26 0-.804-.683-1.456-1.524-1.456zm0-7.278l-.154.005c-.744.047-1.116.45-1.116 1.208v3.64c0 .808.424 1.212 1.27 1.212l.154-.005c.744-.047 1.116-.45 1.116-1.208V4.296c0-.808-.424-1.213-1.27-1.213z\"/>')\n        // SVG 图标集：GitHub Style Alert | Note\n        + V_ui_symbol(_icoAlertNote_,\n            '<path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm.25 7h-1a.75.75 0 0 0 0 1.5h.25v2h-.25a.75.75 0 1 0 0 1.5h2a.75.75 0 1 0 0-1.5H9V7.75A.75.75 0 0 0 8.25 7zM8 4a1 1 0 1 0 0 2 1 1 0 0 0 0-2z\"/>')\n        // SVG 图标集：GitHub Style Alert | Tip\n        + V_ui_symbol(_icoAlertTip_,\n            '<path d=\"M5.5 0C8.637 0 11 2.31 11 5.25c0 1.516-.701 2.5-1.328 3.259l-.268.319c-.207.245-.383.453-.541.681-.208.3-.33.595-.37.877a.76.76 0 0 1-.773.616L3.2 11a.748.748 0 0 1-.692-.614c-.04-.282-.163-.577-.37-.877a8.456 8.456 0 0 0-.354-.46l-.456-.54-.237-.296C.537 7.496 0 6.577 0 5.25 0 2.31 2.363 0 5.5 0zM3.25 12h4.5a.75.75 0 1 1 0 1.5h-4.5a.75.75 0 1 1 0-1.5zm.25 3.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75z\"/>')\n        // SVG 图标集：GitHub Style Alert | Important\n        + V_ui_symbol(_icoAlertImportant_,\n            '<path d=\"M14.25 0C15.216 0 16 .784 16 1.75v9.5A1.75 1.75 0 0 1 14.25 13H8.06l-2.573 2.573A1.458 1.458 0 0 1 3 14.543V13H1.75A1.75 1.75 0 0 1 0 11.25v-9.5C0 .784.784 0 1.75 0h12.5zM8 9a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm0-7c-.552 0-1 .42-1 .938v4.124C7 7.58 7.448 8 8 8s1-.42 1-.938V2.938C9 2.42 8.552 2 8 2z\"/>')\n        // SVG 图标集：GitHub Style Alert | Warning\n        + V_ui_symbol(_icoAlertWarning_,\n            '<path d=\"M9.576.933l6.213 11.471c.296.547.28 1.207-.043 1.739a1.792 1.792 0 0 1-1.533.857H1.787c-.628 0-1.21-.326-1.533-.857a1.744 1.744 0 0 1-.043-1.739L6.424.934c.673-1.245 2.479-1.245 3.152 0zM8 11a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm0-7c-.552 0-1 .42-1 .938v4.125C7 9.58 7.448 10 8 10s1-.42 1-.938V4.939C9 4.42 8.552 4 8 4z\"/>')\n        // SVG 图标集：GitHub Style Alert | Caution\n        + V_ui_symbol(_icoAlertCaution_,\n            '<path d=\"M11 0c.199 0 .389.079.53.22l4.25 4.25c.141.14.22.331.22.53v6c0 .199-.08.39-.22.53l-4.25 4.25A.749.749 0 0 1 11 16H5a.749.749 0 0 1-.53-.22L.22 11.53A.749.749 0 0 1 0 11V5c0-.199.079-.389.22-.53L4.47.22C4.61.08 4.801 0 5 0h6zM8 11a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm0-7c-.552 0-1 .42-1 .938v4.125C7 9.58 7.448 10 8 10s1-.42 1-.938V4.939C9 4.42 8.552 4 8 4z\"/>')\n    + '</svg>';\n    return ui;\n}\n\n/**\n * 加载顶栏 UI 资源\n */\nfunction VLOOKui_loadTopbar() {\n    // ==================================================\n    // 页面工具栏\n    let ui = V_ui_div(_, _vToolbar_ + \" v-focus-serch\",\n            // 导航中心\n            V_ui_div(_, _vBtn_ + \" nav-center\", V_ui_svgIcon(_icoNavCenter_, 20, 18, _light_))\n            // 文库\n            + V_ui_div(_, _vBtn_ + \" doc-lib\", V_ui_svgIcon(_icoDocLib_, 20, 18, _light_))\n            // 打印\n            + V_ui_div(_, _vBtn_ + \" print\", V_ui_svgIcon(_icoPrint_, 20, 19, _light_))\n            + V_ui_div(_, \"v-btn-group prs\",\n                // 段落导航\n                V_ui_div2(_, _vBtn_ + \" paragraph-nav\", V_attr(_dataBtnGroup_, \"prs\"),\n                    V_ui_svgIcon(_icoParagraphNav_, 20, 20, _light_))\n                // 聚光灯\n                + V_ui_div2(_, _vBtn_ + \" spotlight\", V_attr(_dataBtnGroup_, \"prs\"),\n                    V_ui_svgIcon(_icoSpotlight_, 18, 20, _light_))\n                // 激光笔\n                + V_ui_div2(_, _vBtn_ + \" laser-pointer\", V_attr(_dataBtnGroup_, \"prs\"),\n                    V_ui_svgIcon(_icoLaserPointer_, 18, 20, _light_))\n            )\n            // 分隔符\n            + V_ui_div(_, _vToolbar_ + \"-spliter\")\n        );\n\n    // ==================================================\n    // 逐章导航栏\n    let classSvgChpNav = \"v-svg-chp-nav\";\n    ui += V_ui_div(_, _vChapterNav_ + \" v-focus-serch\",\n            // 上一章\n            V_ui_div(_, _vChapterNav_ + \"-prev\",\n                V_ui_svgIcon(_icoPrevChapter_, 10, 15, _light_, classSvgChpNav + \" left\")\n                + V_ui_div(_, _vChapterNav_ + \"-prev-text\")\n            )\n            // 文档标题\n            + V_ui_div(_, _vChapterNav_ + \"-doc-title\")\n            // 当前章节\n            + V_ui_div(_, _vChapterNav_ + \"-current\")\n            // 下一章\n            + V_ui_div(_, _vChapterNav_ + \"-next\",\n                V_ui_div(_, _vChapterNav_ + \"-next-text\", \"next\")\n                // + V_ui_genSvgIcon(\"icoNextChapter\", 10, 15, s_Light, classSvgChpNav + \" right\")\n                + V_ui_svgIcon(_icoPrevChapter_, 10, 15, _light_, classSvgChpNav + \" right\")\n            )\n        );\n\n    return ui;\n}\n\n/**\n * 加载导航中心 UI 资源\n */\nfunction VLOOKui_loadNavCenter() {\n    // --------------------------------------------------\n    // 导航中心\n    let classTocFilterResult = _vTocFilterResult_ + \" \",\n        ui = V_ui_div(_, \"v-nav-center \" + _vFloatCard_,\n            // --- 导航中心头部 ---\n            V_ui_div(_, \"v-nav-center-header\",\n                // 关键字搜索\n                V_ui_div(_, \"v-serch-by-keyword\")\n                // 分段控制器组件\n                + V_ui_div(_, \"v-segment toc\")\n                // 访问历史标题\n                + V_ui_div(_, \"v-toc-history-title\", \"访问历史\"))\n                // --- 导航中心内容区 ---\n                + V_ui_div(_, \"v-nav-center-body\",\n                    V_ui_div2(_, \"v-toc-catalog-body\", V_attr(_dataCatalogEmpty_, \"( Catalog is Empty )\"))\n                    + V_ui_div(_, classTocFilterResult + _catalog_)\n                    + V_ui_div(_, classTocFilterResult + _figure_)\n                    + V_ui_div(_, classTocFilterResult + _table_)\n                    + V_ui_div(_, classTocFilterResult + _media_)\n                    + V_ui_div(_, classTocFilterResult + _codeblock_)\n                    + V_ui_div(_, \"v-toc-history-result\")\n                )\n            + V_ui_div(_, \"v-nav-center-footer\")\n        );\n\n    // --------------------------------------------------\n    // 导航中心收起/展开引导把手\n    ui += V_ui_div(_, \"v-toc-handle\")\n\n    return ui;\n }\n\n/**\n * 加载共用的 UI 资源\n */\nfunction VLOOKui_loadCommon() {\n    // --------------------------------------------------\n    // 聚光灯\n    let ui = V_ui_div(_, \"v-spotlight\", V_ui_div(_, _));\n\n    // --------------------------------------------------\n    // 字体风格选择器\n    let classFontThemeOpt = _vFontThemeOpt_,\n        previewPath = \"https://madmaxchow.gitee.io/vlookres/pic/\";\n    ui += V_ui_div(_, \"v-font-theme\",\n            V_ui_div(_, classFontThemeOpt,\n                V_ui_img(_vFontThemeOpt_ + \"-local\", \"默认 Default\", previewPath + \"fs-local.png\", previewPath + \"fs-local@2x.png 2x\")\n                + V_ui_div(_, _vFontInfo_ + \"local\",\n                    V_ui_div(_, _vFontPackage_, _font_)\n                    + V_ui_div(_fontsetStatus_, _, _ready_)\n                )\n            )\n            + V_ui_div(_, classFontThemeOpt,\n                V_ui_img(_vFontThemeOpt_ + \"-book\", \"Book\", previewPath + \"fs-book.png\", previewPath + \"fs-book@2x.png 2x\")\n                + V_ui_div(_, _vFontInfo_ + \"book\",\n                    V_ui_div(_, _vFontPackage_, _font_)\n                    + V_ui_div(_fontsetStatus_, _, _ready_)\n                )\n            )\n            + V_ui_div(_, classFontThemeOpt,\n                V_ui_img(_vFontThemeOpt_ + \"-sans\", \"小清新 Sans\", previewPath + \"fs-sans.png\", previewPath + \"fs-sans@2x.png 2x\")\n                + V_ui_div(_, _vFontInfo_ + \"sans\",\n                    V_ui_div(_, _vFontPackage_, _font_)\n                    + V_ui_div(_fontsetStatus_, _, _notLoaded_)\n                )\n            )\n            + V_ui_div(_, classFontThemeOpt,\n                V_ui_img(_vFontThemeOpt_ + \"-serif\", \"文艺范 Serif\", previewPath + \"fs-serif.png\", previewPath + \"fs-serif@2x.png 2x\")\n                + V_ui_div(_, _vFontInfo_ + \"serif\",\n                    V_ui_div(_, _vFontPackage_, _font_)\n                    + V_ui_div(_fontsetStatus_, _, _notLoaded_)\n                )\n            )\n            + V_ui_div(_, \"v-font-theme-info\", \"Download Font Package\")\n        );\n\n    // --------------------------------------------------\n    // 插图导航面板\n    ui += V_ui_div(_, _vFigNav_ + ___ + _vBackdropBlurs_,\n            V_ui_div(_, _vFigContent_)\n            + V_ui_div(_, _vFigNav_ + \"-title\")\n            + V_ui_div(_, _vFigNav_ + \"-btns prev\", V_ui_svgIcon(_icoPrevFig_, 12, 54, _light_))\n            + V_ui_div(_, _vFigNav_ + \"-btns next\", V_ui_svgIcon(_icoPrevFig_, 12, 54, _light_))\n            + V_ui_div(_, \"v-btn-close-figure-nav\", V_ui_svgIcon(_icoClose_, 16, 16, _light_))\n        );\n\n    // --------------------------------------------------\n    // 脚注弹层\n    ui += V_ui_div(_, _vFontnotePn_,\n            V_ui_div(_, _vFontnotePn_ + \"-content\")\n            + V_ui_div(_, _vFontnotePn_ + \"-header\")\n            + V_ui_div(_, _vFontnotePn_ + \"-footer\", V_ui_a(_, _, \"查看所有脚注\"))\n            + V_ui_a(\"vk-footer-area\")\n        );\n\n    // --------------------------------------------------\n    // 复制内容的按钮\n    let classBtnAssistor = _vBtn_ + \" assistor \";\n    ui += V_ui_div(_, \"v-content-assistor \" + _vFloatCard_,\n            V_ui_div(_, classBtnAssistor + \"copy\", V_ui_svgIcon(_icoCopy_, 16, 16, _light_))\n            + V_ui_div(_, classBtnAssistor + \"open-in-figure-nav\", V_ui_svgIcon(_icoOpenInFigureNav_, 16, 14, _light_))\n            + V_ui_div(_, classBtnAssistor + \"table-cross\", V_ui_svgIcon(_icoTableX_, 16, 14, _light_))\n            + V_ui_div(_, classBtnAssistor + \"table-wrap\", V_ui_svgIcon(_icoTableWrap_, 16, 16, _light_))\n            + V_ui_div(_, classBtnAssistor + \"pic-in-pic\", V_ui_svgIcon(_icoPicInPic_, 18, 16, _light_))\n        );\n\n    // --------------------------------------------------\n    // 画中画容器\n    let classPinBtn = \"v-pip-btn zoom-out \" + _vFloatCard_ + ___;\n    ui += V_ui_div(_, \"v-pic-in-pic\",\n            V_ui_div(_, classPinBtn + \"zoom\", V_ui_svgIcon(_icoZoomIn_, 16, 16, _theme_))\n            + V_ui_div(_, classPinBtn + \"close\", V_ui_svgIcon(_icoResetInput_, 16, 16, _theme_))\n            + V_ui_div(_, \"v-content\")\n        );\n\n    // --------------------------------------------------\n    // 提示信息\n    ui += V_ui_div(_, _vToolTips_)\n        + V_ui_div(_, _vInfoTips_ + ___ + _vFloatCard_);\n\n    // --------------------------------------------------\n    // 文档更多内容遮罩栏\n    ui += V_ui_div(_, _vMoreDocContent_ + \"before cover\")\n        + V_ui_div(_, _vMoreDocContent_ + \"after\");\n\n    // --------------------------------------------------\n    // 表格阅读模式（十字光标）\n    let classTableCross = _vTblX_.xD() + ___;\n    ui += V_ui_div(_, classTableCross + _left_ + \"-up\", _nbsp_)\n        + V_ui_div(_, classTableCross + _right_ + \"-up\", _nbsp_)\n        + V_ui_div(_, classTableCross + _left_ + \"-down\", _nbsp_)\n        + V_ui_div(_, classTableCross + _right_ + \"-down\", _nbsp_);\n\n    // --------------------------------------------------\n    // 内容展开操作区\n    // need removed:\n    // ui += V_ui_div(_, _vContentExpander_,\n    //         V_ui_div(_, _vBtn_, V_ui_span(_, _) + V_ui_svgIcon(_icoExtend_, 20, 20, _light_))\n    //     );\n\n    // --------------------------------------------------\n    // 页面坏链检查结果及错误列表\n    ui += V_ui_div(_, _vLinkErrorList_ + ___ + _vFloatCard_,\n            V_ui_div(_, _vLinkErrorList_ + \"-header\")\n            + V_ui_div(_, _vLinkErrorList_ + \"-body\",\n                V_ui_div(_, _vLinkErrorList_ + \"-items\"))\n            + V_ui_div(_, _vLinkErrorList_ + \"-footer\")\n        )\n        + V_ui_div(_, _vStatusBar_ + ___ + _vFloatCard_ + \"2 v-focus-serch \" + _vBackdropBlurs_,\n            V_ui_div(_, _vDocInfo_, \"- - / - -\")\n            + V_ui_div(_, _vStsFontTheme_, V_ui_svgIcon(_icoFontTheme_, 20, 18, _theme_))\n            + V_ui_div(_, _vColorScheme_, V_ui_svgIcon(_icoDarkMode_, 20, 20, _theme_))\n            + V_ui_div(_, _vLinkChkResult_, V_ui_svgIcon(_icoLoading_, 16, 16, _theme_))\n        );\n\n    // --------------------------------------------------\n    //统计数据上报中转页面\n    ui += V_ui_iframe(_vlookStatGitee_);\n    ui += V_ui_div(_, _vDocLib_ + ___ + _vFloatCard_, V_ui_iframe(_vlookDocLib_));\n    return ui;\n}\n\n// ==================== 加载与初始化 VLOOK ==================== //\n\n/**\n * 文档加载完成后执行主流程\n */\n$(function() { // 等价于 $(document).ready()\n    // ----------------------------------------\n    // 初始化启动参数\n    V_params_init();\n\n    // 判断文档类型\n    if (V_util_getParamVal(\"type\") === _mini_) {\n        V_type = _mini_;\n    }\n\n    // ----------------------------------------\n    INFO(\"- Ready\");\n    gTimes = iStopwatch.ed(_4space_);\n    // 打印环境信息\n    env.print();\n\n    iStopwatch.st();\n    INFO(\"=== Load VLOOK ===\");\n\n    // ----------------------------------------\n    // 初始化语言\n    V_lang_init();\n\n    // to-do\n    // $('meta[content^=\"${\"]').remove();\n\n    // ----------------------------------------\n    // 加载生成 VLOOK 界面\n    loadVLOOKui();\n\n    // ----------------------------------------\n    // 动效初始化\n    iStopwatch.st(\"* Effect\");\n    let effect = V_util_getParamVal(_effect_);\n    V_ui_effect = (effect === gUndefined) ? 2 : JS_parseInt(effect);\n    V_ui_effect = env.device.mobile ? 0 : V_ui_effect;\n    LOG(\"    └ Level [ \" + V_ui_effect + \" ]\");\n    V_ui_initEffectLevel();\n    iStopwatch.ed(_cost_);\n\n    // 先隐藏文档原始内容，减少页面重绘\n    VOM_doc().hide();\n\n    // ----------------------------------------\n    // 初始化欢迎页\n    iStopwatch.st(\"* Welcome Page Init\");\n    let wsMode = V_util_getParamVal(\"ws\");\n    wsMode = (wsMode === gUndefined) ? _auto_ : wsMode;\n    LOG(\"    └ mode: \" + wsMode);\n    WelcomePage_init(wsMode);\n\n    // 文档不符合 VLOOK 规范则不加载 VLOOK 插件\n    if (!V_checkSpec()) {\n        $(\".v-welcome-page\").hide();\n        $(\".\" + _vToolbar_).hide();\n        $(\".\" + _vBtn_).hide();\n        return;\n    }\n    iStopwatch.ed(_cost_);\n\n    // ----------------------------------------\n    // 初始化关键组件实例\n    iStopwatch.st(\"* Intance\");\n    V_init();\n    iStopwatch.ed(_cost_);\n\n    // ----------------------------------------\n    // 获取当前文档的 style 对象\n    gStyle = document.styleSheets[0];//$(\"head\").find(\"style\").first().get(0).sheet;\n    // $.each(gStyle.cssRules, function(i, rule) {\n    //     // 检查是否是要删除的规则\n    //     // ERROR(222, rule.selectorText !== gUndefined && rule.selectorText.indexOf(\"\\.expander\"));\n    //     if (rule.selectorText !== gUndefined && rule.selectorText.indexOf(\"\\.expander\\.id-\") > 0) {\n    //         ERROR(111, rule.selectorText);\n    //         // sheet.deleteRule(i);\n    //         // 如果只希望删除第一个匹配的规则，可以使用 return false; 来跳出循环\n    //         // return false;\n    //     }\n    // });\n\n    // ----------------------------------------\n    // 延后加载 VLOOK 插件，避免欢迎页的 UI 刷新阻塞\n    // 独立线程进行处理\n    setTimeout(loadVLOOKplugin, 100);\n});\n\n/**\n * 字体加载完成后执行的主流程\n */\ndocument.fonts.ready.then(function () {\n    // 字体加载完成后的逻辑\n    LOG(\"!!! ALL FONT READY !!!\");\n});\n\n/**\n * 加载 VLOOK UI 资源\n */\nfunction loadVLOOKui() {\n    $(\".v-vlook-inside\").af(VLOOKui_loadWelcomePage()\n        + VLOOKui_loadIconSet()\n        + VLOOKui_loadTopbar()\n        + VLOOKui_loadNavCenter()\n        + VLOOKui_loadCommon());\n}\n\n/**\n * 加载 VLOOK 插件\n */\nfunction loadVLOOKplugin() {\n    // ----------------------------------------\n    // 推荐的浏览器类型检测\n    iStopwatch.st(\"* Browser Check\");\n    if (!env.browser.Chrome && !env.browser.Edge && !env.browser.Firefox && !env.browser.Safari && !env.core.webkit) {\n        ALERT([\n            \"为获得最佳兼容性，建议使用 Chrome / Firefox / Edge 浏览器\",\n            \"For best compatibility, it is recommended to use Chrome / Firefox / Edge browser\"\n        ][V_lang_id]);\n    }\n\n    iStopwatch.ed(_4space_);\n\n    // ========================================\n    // 初始化 VLOOK 核心模块\n    V_initKernel();\n\n    // ----------------------------------------\n    // 修改主题默认的圆角风格\n    let newRadius = V_util_getParamVal(\"radius\");\n    if (newRadius === \"small\" || newRadius === \"big\") {\n        // 批量修改圆角相关的 CSS 变量为指定的新值\n        V_util_changeCssVarSet([\n            _V_R_B_,\n            _V_R_S_,\n            _V_R_T_,\n            _V_R_Tag_,\n            _V_R_C_\n        ], newRadius);\n    }\n    else if (newRadius === _none_) {\n        // 批量修改圆角相关的 CSS 变量为 0\n        V_util_changeCssVarSet([\n            _V_R_B_,\n            _V_R_S_,\n            _V_R_T_,\n            _V_R_Tag_,\n            _V_R_C_\n        ]);\n    }\n\n    // ----------------------------------------\n    // 统一同组的分栏引用块的高度\n    __fork(\"Quote Unite Columns Height\", function () {\n        ExtQuote_uniteColumnsHeight();\n    }, 1000);\n\n    // ----------------------------------------\n    // 段落导航初始化\n    __fork(\"Paragraph Nav\", function () {\n        ParagraphNav.init();\n    }, 100);\n\n    // ----------------------------------------\n    // 完成初始化后恢复显示\n    iStopwatch.st(\"* Write Ready\");\n    JQ_addClass(VOM_doc(), \"v-load-done v-focus-serch\");\n    iStopwatch.ed(_4space_);\n\n    // ----------------------------------------\n    // 初始化外部链接\n    __fork(\"External Link\", function () {\n        V_doc_link_adjustExternal();\n    }, 100);\n\n    // ----------------------------------------\n    // 初始化全局热键\n    __fork(\"Hotkey\", function () {\n        V_ui_initHotkey();\n    }, 150);\n\n    // ----------------------------------------\n    // 初始化须在页面 body 显示后才能执行的部分\n    __fork(\"Restyle\", function () {\n        V_initRestyle();\n    }, 200);\n\n    // ----------------------------------------\n    // 初始化，并安装自动适配器，实时跟随系统 Color Scheme 的变化\n    __fork(\"Color Scheme\", function () {\n        ColorScheme.scheme = V_util_getVarVal(_varColorScheme_).x();\n        INFO(\"    System [ \" + ColorScheme.scheme + \" ]\");\n        ColorScheme.init();\n        // 判断当前文档是否强制指定了颜色方案\n        let colorScheme = V_util_getParamVal(\"cs\");\n        if (colorScheme === _light_ || colorScheme === _dark_) {\n            INFO(\"    Force use [ \" + colorScheme + \" ]\");\n            ColorScheme.tg(colorScheme);\n        }\n        // 若系统当前颜色方案是 dark，则强制同步\n        else if (ColorScheme.scheme === _dark_)\n            ColorScheme.tg(ColorScheme.scheme);\n    }, 300);\n\n    // ----------------------------------------\n    // 初始化内容助手\n    // 须隐藏文档原始内容前执行，避免部分样式失效\n    __fork(\"Content Assistor\", function () {\n        ContentAssistor_init();\n        PicInPic_init();\n\n        // 设置表格阅读模式的开关状态（不指定则默认关闭）\n        if (V_util_getParamVal(\"tr\") === _on_)\n            TableCross_toggle();\n    }, 300);\n\n    // ----------------------------------------\n    // URL 带锚点的处理\n    __fork(\"Redirect to Hash\", function () {\n        let redirect = V_util_redirectTo();\n        if (VOM_cover() === gUndefined && !redirect) {\n            iNavCenter.catalog.currentHeaderIndex = 0;\n            V_ui_adjustAll();\n            ExtQuote_uniteColumnsHeight();\n        }\n    }, 450);\n\n    // ----------------------------------------\n    // 字数统计\n    __fork(\"Words count\", function () {\n        DocInfo_countWord();\n    }, 500);\n    // }\n\n    // ----------------------------------------\n    // 更新欢迎页\n    iStopwatch.st();\n    INFO(\"* Welcome Page Done (\" + WelcomePage_mode + \")\");\n    WelcomePage_done();\n    iStopwatch.ed(_cost_);\n\n    // ----------------------------------------\n    // VLOOK 加载完成\n    gTotalTimes = iStopwatch.stop() - 200;\n    INFO(\"=== !!! MAIN PROCESS DONE !!! ===\");\n    INFO(\"TOTAL COST   ⏱ \" + gTotalTimes + \" ms\");\n    INFO(\"    ├ HTML   ⏱ \" + gTimes + \" ms\");\n    INFO(\"    └ VLOOK  ⏱ \" + (gTotalTimes - gTimes) + \" ms\");\n\n    // ----------------------------------------\n    // 提交统计数据\n    // __fork(\"Push Stat\", function () {\n        V_report_submit(gTotalTimes - gTimes);\n    // }, 350);\n\n    /**\n     * 创建独立线程执行\n     * @param msg 线程信息\n     * @param callback 线程执行的回调函数\n     * @param delay 0 - 立即时间，>0 - 延时执行（毫秒）\n     */\n    function __fork(msg, callback, delay) {\n        setTimeout(function () {\n            let sw = new Stopwatch();\n            sw.st(\"* thread * [\" + msg + \"]\");\n            typeof(callback) === _function_ && callback();\n            sw.ed(_4space_);\n        }, delay);\n    }\n}\n"],"mappings":"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,EAAWV,EAAK,KAChBW,EAASX,EAAK,KACdY,EAASZ,EAAK,KACda,EAASb,EAAK,KACdc,EAASd,EAAK,KACde,EAAQf,EAAK,KACbgB,EAAahB,EAAK,KAClBiB,EAASjB,EAAK,KACdkB,EAAWlB,EAAK,KAChBmB,EAASnB,EAAK,KACdoB,EAASpB,EAAK,KACdqB,EAASrB,EAAK,KACdsB,EAAUtB,EAAK,KACfuB,EAASvB,EAAK,KACdwB,EAAUxB,EAAK,KACfyB,EAAWzB,EAAK,KAChB0B,EAAW1B,EAAK,KAEhB2B,EAAK,UAELC,EAAQD,EAAK,KACbE,EAAWF,EAAK,KAChBG,EAAWH,EAAK,KAChBI,EAAUJ,EAAK,KACfK,EAASL,EAAK,KACdM,EAASN,EAAK,KACdO,EAAWP,EAAK,KAChBQ,EAASR,EAAK,KACdS,EAAUT,EAAK,KACfU,EAASV,EAAK,KAEdW,EAAK,QAETzzD,EAAuB,CACnB,kBACA,sBACA,SACA,SAEA,WACA,WACA,WACA,SACA,iBACA,iBACA,iBACA,wBACA,wBACA,SACA,WAEA,cACA,cACA,cACA,kBACA,YACA,YACA,WACA,cACA,cACA,cACA,gBACA,oBACA,oBACA,QACA,iBACA,eACA,aACA,YACA,oBACA,mBACA,aACA,WACA,gBACA,eACA,eACAuxD,EACAA,EAAQH,EACRG,EAAQF,EACRE,EAAQD,EACRE,EACAA,EAAWJ,EACXI,EAAWH,EACXG,EAAWF,EACXG,EACAA,EAAWL,EACXK,EAAWJ,EACXI,EAAWH,EACXI,EACAA,EAASN,EACTM,EAASL,EACTK,EAASJ,EACTK,EACAA,EAAUP,EACVO,EAAUN,EACVM,EAAUL,EACVM,EACAA,EAAYR,EACZQ,EAAYP,EACZO,EAAYN,EACZO,EACAA,EAAWT,EACXS,EAAWR,EACXQ,EAAWP,EACXQ,EACAA,EAASV,EACTU,EAAST,EACTS,EAASR,EACTS,EACAA,EAASX,EACTW,EAASV,EACTU,EAAST,EACTU,EACAA,EAASZ,EACTY,EAASX,EACTW,EAASV,EACTW,EACAA,EAASb,EACTa,EAASZ,EACTY,EAASX,EACTY,EACAA,EAAQd,EACRc,EAAQb,EACRa,EAAQZ,EACRa,EACAA,EAAaf,EACbe,EAAad,EACbc,EAAab,EACbc,EACAA,EAAShB,EACTgB,EAASf,EACTe,EAASd,EACTe,EACAA,EAAWjB,EACXiB,EAAWhB,EACXgB,EAAWf,EACXgB,EACAA,EAASlB,EACTkB,EAASjB,EACTiB,EAAShB,EACTiB,EACAA,EAASnB,EACTmB,EAASlB,EACTkB,EAASjB,EACTkB,EACAA,EAASpB,EACToB,EAASnB,EACTmB,EAASlB,EACTmB,EACAA,EAAUrB,EACVqB,EAAUpB,EACVoB,EAAUnB,EACVoB,EACAA,EAAStB,EACTsB,EAASrB,EACTqB,EAASpB,EACTqB,EACAA,EAAUvB,EACVuB,EAAUtB,EACVsB,EAAUrB,EACVsB,EACAA,EAAWxB,EACXwB,EAAWvB,EACXuB,EAAWtB,EACXuB,EACAA,EAAWzB,EACXyB,EAAWxB,EACXwB,EAAWvB,EACXyB,EACAA,EAAQ3B,EACR4B,EACAA,EAAW5B,EACX6B,EACAA,EAAW7B,EACX8B,EACAA,EAAU9B,EACV+B,EACAA,EAAS/B,EACTgC,EACAA,EAAShC,EACTiC,EACAA,EAAWjC,EACXkC,EACAA,EAASlC,EACTmC,EACAA,EAAUnC,EACVoC,EACAA,EAASpC,EACTqC,EAAK,UACLA,EAAK,WACLA,EAAK,aACLA,EAAK,aACLA,EAAK,MACLA,EAAK,YACLA,EAAK,oBACLA,EAAK,SACLA,EAAK,WACLA,EAAK,UACLA,EAAK,SACLA,EAAK,QACLA,EAAK,KACLA,EAAK,OACLA,EAAK,WACLA,EAAK,WACLA,EAAK13D,GACL03D,EAAK,UACLA,EAAK,UACLA,EAAK,OACLA,EAAK,UACLp6C,GAAYC,SAAW/R,GAAU,KAAO,MAG5Cg4C,GAA4BrgD,GAChC,EAKA,IAAI+zB,GAAiB,0CAgiBrB/sB,GAAS9D,KAAO,WAEZ,IAAIsxD,EAAgB95D,EAAE,IAAMgB,IAExBH,MAAoBtC,GACpBu7D,EAAclc,aAAa/8C,KAG3BR,IAAUuN,GAAGksD,GAGjB95D,E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"}