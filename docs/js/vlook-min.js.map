{"version":3,"sources":["../../src/vlook.js"],"names":["LOG","console","log","apply","arguments","INFO","info","WARN","warn","ERROR","error","ALERT","m","alert","WINDOW_getHref","window","location","href","WINDOW_setHref","value","WINDOW_getHash","hash","JQ_addClass","target","className","gUndefined","addClass","JQ_removeClass","removeClass","JQ_exchangeClass","oldClassName","newClassName","JQ_remove","remove","JS_parseInt","parseInt","JS_parseFloat","parseFloat","JS_mathRound","Math","round","JS_mathCeil","ceil","JS_decodeURI","decodeURI","DOM_html","DOM_h","$","length","s_Failed","DOM_body","DOM_b","VOM_doc","VOM_d","VOM_cover","VOM_c","VOM_docTitle","VOM_backcover","VOM_bc","fns","backcover","prev","tagName","prop","s_TagName","l","VOM_dt","V_params_init","V_params_url","V_util_getQueryParams","vp","V_util_getMetaByName","V_params_yaml","V_data_get","key","localStorage","s_VLOOK_","V_data_set","V_util_getDocTitle","document","a","s_Title","metaName","content","s_Content","V_util_getParamVal","pName","v","u","h","i","si","s","qs","p","is","split","item","decodeURIComponent","V_util_getHash","V_util_getQueryString","V_util_getURLwithoutHash","V_util_holdKey_Alt","event","V_util_changeCssVarSet","varSet","flag","tmp","len","push","V_util_getVarVal","V_util_setVarVal","V_util_getPath","qi","ti","lastIndexOf","pi","V_util_htmlTagEncode","text","r","V_util_clearHtmlQuot","V_util_ellipsisText","limit","__getChs","str","cjk","cnt","__getChsRev","count","x","t","cjkHeader","cjkTailer","V_util_redirectTo","setTimeout","V_ui_tuningScrollTop","gTrue","gFalse","V_util_gotoHash","last","varName","getComputedStyle","documentElement","getPropertyValue","style","setProperty","V_util_getTemplateTheme","rA","V_formatting_thousands","V_formatting_decimal","V_formatting_percent","V_formatting_currency","V_checkSpec","c","V_lang_id","s_Class","V_init","sw","Stopwatch","st","iFontTheme","FontTheme","BgMask","s_FontTheme","s_Center","init","ed","iSpotlight","Spotlight","BottomTips","s_Spotlight","iLaserPointer","LaserPointer","cf","ContentFolder_enabled","s_Off","s_On","ContentFolder_enabled_table","s_Table","ContentFolder_enabled_figure","s_Figure","ContentFolder_enabled_codeblock","s_Codeblock","ContentFolder_init","ToolTips_init","iInfoTips","InfoTips","runMode","iNavCenter","NavCenter","s_NavCenter","s_Left","iChapNav","ChapterNav","chpNav","iToolbar","Toolbar","add","tg","s_ColorScheme","ColorScheme","addSpliter","s_ToolbarSpliter","s_ParagraphNav","inform","hide","iParagraphNav","s_LaserPointer","s_Print","V_print_ready","toolbar","bindButton","btns","iFigNav","FigureNav","MoreDocContent_init","iFootNote","FootNote","s_Bottom","DocInfo_init","ZoomView_init","LinkTool_init","s_Right","StatusBar_init","StatusBar_add","DocInfo_ui","ZoomView_ui","LinkTool_ui","V_initKernel","iStopwatch","icoLg","s_BackgroundImage","icoDk","append","s_4space","vTp","V_type","s_Mini","prepend","V_ui_initI18n","CaptionGenerator_autoContent","ExtAudio_init","ExtVideo_init","ExtQuote_init","ExtQuote_adjustHoverStyle","ExtFigure_init","s_Cost","ExtTable_init","TableCross_init","RowGroup_adjustHoverStyle","ExtCodeBlock_init","CodeMagic_init","ExtQuote_initAfterCap","catalog","hasIndexItem","figure","table","media","codeblock","V_ui_adjustHoverStyle","ContentFolder_adjust","env","device","mobile","showHandle","adjust","StatusBar_adjust","adjustHoverStyle","ChpAutoNum_initToc","addEventListener","repaint","snap","uC","ck","TableCross_hide","scroll","currentTime","Date","getTime","scrollTop","V_doc_scroll_lastUpdate","MoreDocContent_refresh","abs","V","doc","lastTop","V_doc_scroll_update","V_ui_adjustAll","focusHeader","resize","ExtQuote_uniteColumnsHeight","onbeforeprint","V_print_mode","onafterprint","V_print_done","on","anchor","history","aObj","o","top","hiddenObj","closest","s_Blockquote","isHidden","fd","f","tr","s_MouseUp","gLastHash","browser","Firefox","showed","V_ui_adjustAllDelay","V_initRestyle","Restyler_forTaskList","Restyler_forMermaid","V_ui_show","s_Visibility","s_Opacity","V_ui_hide","s_Hidden","V_ui_wrap_kbd","src","V_ui_getCtrlKeyUI","V_ui_getAltKeyUI","os","macOS","V_ui_getMetaKeyUI","V_ui_copyrightInfo","encodeURI","print","V_ui_isSmallScreen","w","sW","ui","s_Top","s_Height","y","tag","ht","V_ui_generateSvgIcon","ContentFolder_ui","s_DataTips","next","dt","current","close","buttonSeeAll","ch","V_ui_moveToCenter","s_Auto","V_ui_moveToTarget","left","s_PaddingLeft","s_PaddingRight","s_BorderWidth","V_ui_processingAdjust","s_CssBtn_BtnGroup","uH","V_ui_bindHover","cancleParent","hover","_t","this","s_Hover","V_ui_unbindHover","unbind","V_ui_initEffectLevel","V_ui_effect","s_None","s_Enabled","V_ui_addAnimate","css","s_CssTransitionAll","attrSet","V_ui_removeAnimate","V_ui_initHotkey","keydown","keyCode","which","charCode","cK","ctrlKey","shiftKey","altKey","metaKey","gHoldKeyAlt","ContentAssistor_btns_copyContent","s_Light","disposeHotkey","WelcomePage_disposeHotkey","LinkTool_disposeHotkey","V_doc_block","activeElement","isShowed","s_Click","docLib","enabled","handle","TableCross_toggle","ToolTips_hide","LinkTool_hide","TableCross_ui","TableCross_disable","returnValue","keyup","V_lang_init","language","base","V_doc_scroll_freeze","s_Unfreeze","s_Freeze","V_doc_scroll_unfreeze","V_doc_link_adjustExternal","e","s_Target","s_Href","scheme","s_Dark","schemeBeforePrint","refresh","s_BeforePrintWidth","s_Width","s_Style","s_MaxWidth","s_BeforePrintMaxWidth","ExtQuote_unfold","RowGroup_open","PicInPic_hide","rainbowCoats","confirm","s_DataRbCoatShowed","RainbowCoat_show","removeAttr","RainbowCoat_hide","V_report_submit","loadTimeCost","sd","display","DPR","Windows","iOS","Linux","Edge","browserVer","Chrome","Safari","mermaid","s_Audio","s_Video","pie","flow","flowSTART","flowINIT","state","seq","classD","gantt","fmBold","fmEm","fmUnderline","fmMark","fmDel","fmChk","fmNum","vlookStat","s_Src","V_debugMode","RandomColor_generate","floor","random","RandomColor_dissimilarRgb","RandomColor_palette","d","idx","sqrt","RandomColor_format","rgb","opacity","T","sT","lT","reset","pre","slient","msg","stop","WelcomePage_init","mode","WelcomePage_ui","WelcomePage_uiName","WelcomePage_button","WelcomePage_tips","WelcomePage_finished","WelcomePage_mode","WelcomePage_close","WelcomePage_done","s_Cursor","WelcomePage_stopAni","s_Animation","WelcomePage_updateCloseButton","WelcomePage_autoClose","s_Wait","__timeToClose","delaySecs","clearTimeout","closeTimer","sec","code","combKeys","ContentAssistor_init","__bindButtonEvent","source","ToolTips_show","ContentAssistor_ui","s_CssBtn__Assistor","ContentAssistor_btns_openInFigureNav","ContentAssistor_btns_tableCross","ContentAssistor_btns_picInPic","tag_2space","ContentAssistor_hide","show","ContentAssistor_lastHover","ContentAssistor_lastContentType","ExtCodeBlock_copyContent","s_Fig","ExtFigure_copySrc","ExtTable_copyContent","PicInPic_show","ContentAssistor_bind","contentType","__mouseDropIn","mx","pageX","clientX","body","scrollLeft","my","pageY","clientY","padding","s_PaddingTop","asMarkdown","ContentAssistor_show","s_First_Enable_Last","eW","s_Enabled_First","s_Enabled_Last","caption","container","offset","s_CssCaptionContainer","capWidth","conWidth","PicInPic_init","PicInPic_ui_body","PicInPic_ui_content","PicInPic_ui_zoom","s_CssPipBtn","PicInPic_ui_close","pipBtn","PicInPic_ratio","PicInPic_zoom","s_Min","__cloneForPicInPic","openAll","RowGroup_openAll","s_DataContentFolded","s_True","ContentFolder_expand","newClone","clone","s_Margin","s_Border","img","svg","s_DataFigNum","s_CssMermaidRestyler","RowGroup_reset","RowGroup_closeAll","PicInPic_calcSize","empty","pic","PicInPic_fitContentSize","baseW","baseH","PicInPic_size_width","PicInPic_size_height","__getImgSize","width","height","sourcePadding","uiPadding","Image","complete","onload","wWithPadding","s_TransformOrigin","hWithPadding","s_Transform","radius","tips","zoom","normal","bigger","lastPos","toggleZoom","useSpotlight","s_Selected","pointerScope","s_CssCursorLaser","key1","key2","isEnabled","s_Background","enable","useLaserPointer","SegmentControl","control","group","segs","segCnt","indicator","icon","checked","status","__updateIcon","entry","s_DataIcon","name","typeName","id","change","val","update","checkedItem","sts","s_DataResult","space","spacePercent","position","s_MarginLeft","mask","__keywordBody","keyword","TextField","lastDisplayType","s_Float","snapTimer","TocIndex_segments","TocCatalog","TocFigure","TocTable","TocMedia","TocCodeblock","TocHistory","DocLib","bindPartner","onChapterChanged","setIcon","placeholder","onInput","resultNav","result","hideFilterResult","scrollToCurrent","updateStatus","TocIndex_noneKeyword","filter","TocIndex_filter","onFocus","search","s_Actived","onBlur","pressEnter","input","focus","onInteractive","adjustClickHash","gotoCover","currentItem","s_CssTocItemCurrent","currentHeaderIndex","callback","inHeader","s_Block","s_Function","afterToggle","s_CssNavCenterFloat","s_CssFloatCard","s_CssNavCenterBlock","setWidth","s_varNavCenterHiddenLeft","s_varNavCenterWidth","__bindEvent","align","__prev","__current","__next","__dt","adjustEffectLevel","s_Effect","s_DataAnchor","s_Cover","gotoHeader","s_Disabled","curIdx","s_Display","s_InStart","inFirstHeader","inDocTitle","s_DataHeaderNum","MoreDocContent_ui_before","ParagraphNav","cur","MoreDocContent_hideAfter","key3","goto","s_DataId","s_DataPgIdx","ThreeClicker_tick","step","blurFocus","s_CssPgCurrentItem","ExtQuote_autoUnfold","ThreeClicker_active","ThreeClicker_activeTime","getSelection","removeAllRanges","clickEvent","btnGroup","s_DataBtnGroup","offsetY","btnCount","btnWidth","updateIcons","button","FontThemeOption","fonts","fontCount","theme","localTheme","sansTheme","serifTheme","initWebFont","__loadNumberFont","fontName","srcName","loadFont","s_Normal","s_WOFF2","s_Bold","_Bold","s_Italic","_Italic","__LoadDigitalSansFont","_Regular","s_TTF","unicodeRange","fontWeight500","_Medium","fontWeight900","_Black","__LoadDigitalSerifFont","luxiMonoSubName","__loadSansMonoFont","__loadSerifMonoFont","__loadSansCjkFont","__loadSerifCjkFont","timeOutMsg","fontFamily","fontStyle","fontWeight","srcFontName","srcFontSubName","suffix","woff","isExist","woffURL","webfontHostAlt","fontFace","FontFace","weight","load","then","loadedFontFace","fontID","readyMsg","loadingMsg","splice","sansLoadedCount","sansStatus","serifLoadedCount","serifStatus","values","isHave","done","family","varList","fontVarList","StatusBar_ui","StatusBar_items","StatusBar_options","DocInfo_countWord","latin","latinCount","cjkCount","wordCount","readCountPerMin","mins","times","toFixed","s_DataDefault","toString","s_DataExtend","cmdKey","s_Br","LinkTool_panel_list","LinkTool_panel_header","LinkTool_panel_body","LinkTool_enabled","LinkTool_icon_error","LinkTool_mask","LinkTool_mdToHtml","mdx","newExt","LinkTool_addToCheck","s_Tabindex","LinkTool_checkLink","s_Id","s_Error","LinkTool_show","after","partner","partnerUI","s_Zindex","s_Padding","ContentFolder_add","type","ContentFolder_contents","ContentFolder_buildTimers","shift","ContentFolder_rebuild","ContentFolder_checkAndProcess","rebuild","oldExpander","s_CssContentExpander","expanded","s_DataContentExpanded","folded","s_DataBeforePrintFolded","s_DataContainer","s_False","s_PaddingBottom","ContentFolder_limit","ContentFolder_buildContentExpander","tHeight","s_OverflowX","s_OverflowY","expander","ContentFolder_rowNumFilter","s_CssTableRowNumHidden","btn","tW","s_BorderBottomRightRadius","s_DataContentType","s_Overflow","ToolTips_ui","follow","ToolTips_aniTimer","ToolTips_continueTimer","ToolTips_lastStyle","ow","ww","gap","waitTime","s_BorderTopLeftRadius","s_BorderTopRightRadius","s_varRB","ToolTips_continueShow","ToolTips_delay","aniTimer","click","message","delay","bubble","s_Bubble","s_BorderRadius","MoreDocContent_ui_after","CaptionGenerator_actionForTextContent","indexObj","dataForSearch","fcSet","CaptionGenerator_getCaptions","fc","fc2","V_doc_counter_codeblock","wrap","V_doc_counter_table","before","has2Captions","s_DataCaptionCount","s_DataTitle","CaptionGenerator_actionForMediaContent","s_Alt","V_doc_counter_fig","V_doc_counter_audio","V_doc_counter_video","s_ViewBox","__parseCaptionSyntax","reg2","reg1","html","test","__getCaptionSet","captionTagName","hideCaptionSrc","capResult","s_Position","s_Absolute","lmc","s_DataLmc","lines","lineNum","lineCount","badChars","goodChars","encodeText","lang","s_Lang","Copyer_action","codeBlock","orgBg","s_BackgroundColor","s_varMarkBg","successCallback","errorCallback","Copyer_processing","ts","Copyer_lastActionTime","targetName","s_DataClipboardText","clipboard","ClipboardJS","note","clearSelection","destroy","__genNumContent","lv","diff","ChpAutoNum_lastLevel","absDiff","ChpAutoNum_push","ChpAutoNum_pop","ChpAutoNum_counter","ChpAutoNum_toString","ChpAutoNum_tocContent","isEmpty","ChpAutoNum_resetTpl","ChpAutoNum_resetCounter","ChpAutoNum_parseTocHeaderLevel","ChpAutoNum_tpl_prefix","__parseTplItem","ChpAutoNum_tplSet","ChpAutoNum_tpl_syntax","ChpAutoNum_tpl_leftPad","ChpAutoNum_tpl_format","ChpAutoNum_tpl_formatOpt","ChpAutoNum_tpl_suffix","metaTpl","ChpAutoNum_tpl","tplSet","isNaN","__formatNum","opt","ns","counter","upperCase","format","ChpAutoNum_leftPadForDecimal","ChpAutoNum_decimalToZh","ChpAutoNum_decimalToAlpha","ChpAutoNum_decimalToRoman","superLv","numStr","pad","padStr","num","__numToZh","strArr","reverse","newNum","ChpAutoNum_zhNum","ChpAutoNum_zhUnit","__toZhUpperCase","overWan","noWan","numeral","String","fromCharCode","ChpAutoNum_romanNum","ChpAutoNum_romanNumArea","__toggleQuoteFolding","s_DataBlockquoteFolded","ExtQuote_fold","__disposeQuoteFolder","matched","__separateTitle","rHTML","ExtQuote_icoClosed","ExtQuote_icoOpened","parent","mouseup","firstSpan","folder","dcQuote","RainbowQuote_defalutColor","RainbowQuote_defalutColorPrefix","RainbowQuote_syntax","s_DataFoldingQuote","parentTag","rainbowQuoteEnabled","ExtQuote_initColumns","ExtList_initColumns","preObj","preObjClass","__hideHr","__groupingColumns","quote","s_DataQuoteGroup","ExtQuote_columnsGroupCount","colCount","hr","prevUntil","nextUntil","ExtQuote_processingUCH","ExtQuote_uniteColumnsHeightForGroup","groupId","maxHeight","parentsUntil","__initCell","colIndex","needCheckCellMerge","needCheckColumnFormatting","needCheckThRpt","th","s_DataCellMerge","CellMerge_syntax_row","CellMerge_syntax_col","ColumnFormatting_init","ThRepeater_syntax_tag","s_DataThRpt","s_DataTblCol","TableCross_bind","needCheckRowGroup","td","s_DataRowGroup","RowGroup_syntax_tag","unwrap","s_CssTableColumnFormat_Mark","CellMerge_dispose","cell","ColumnFormatting_format","RowGroup_init","s_DataIdentLevel","ThRepeater_init","__createTheadSpliter","colNum","alignSet","lastAlign","spliter","xspanMatrix","__maybeAsMarkdown","mdStr","plainStr","__transCellContent","cellHTML","brTmp","__printXspanArr","debugMode","rowCount","sss","j","trSet","theadCount","columnFmting","s_DataColumnFmting","theadRepeater","rowGroup","rowIndex","__disposeRowspan","htmlText","rowspan","cellSet","colspan","colFmtChkbox","colFmtBold","colFmtEm","colFmtU","colFmtMark","colFmtDel","s_CssTableColumnFormat_Checkbox","yes","un","s_CssTableColumnFormat_Bold","s_CssTableColumnFormat_Em","s_CssTableColumnFormat_U","s_CssTableColumnFormat_Del","s_TextAlign","s_CssTableRowGroupSub","identerCount","s_Rowspan","s_Colspan","substring","colSpanCount","colSpanCell","lastCell","tblData","tblSpan","tblTd2ThData","needRowSpan","CellMerge_emptyBlankCell","rowSpanCount","rowSpanCell","thSpanFlag","s_VerticalAlign","foundTd","tblCol","classValue","s_DataColspan","s_DataTd2th","TableCross_enabled","TableCross_enable","TableCross_lastTable","TableCross_lastCell","stopPropagation","s_CssTableCrossCell","tblWidth","tblHeight","cellWidth","cellHeight","cornerLeftX","cornerUpY","cornerLeftWidth","cornerUpHeight","cornerRightX","cornerDownY","cornerRightWidth","cornerDownHeight","leftUp","s_CssTableCross","rightUp","leftDown","rightDown","ColumnFormatting_syntax_checkbox_header","ColumnFormatting_getCells","cells","ColumnFormatting_getTbodyCells","tbodyCells","cellsCSS","thHTML","contents","ColumnFormatting_removeCheckboxSyntax","ce","typeFlag","ColumnFormatting_syntax_checkbox","chkStatus","chkStyle","s_Checked","isNumber","ColumnFormatting_coloringNumber","isPercent","coloring","percent","percentValue","bg1","bg2","bgSplit","baseBg","s_Color","s_MinWidth","isCurrency","s_CssTableColumnFormat_NumNeg","s_CssTableColumnFormat_NumPos","syntaxText","s_CssTableRowGroupNotFolder","lastLevel","currentLevel","RowGroup_parentStack","RowGroup_colorStack","RowGroup_spliter","beforeChanged","RowGroup_newFolder","s_varTblRowAlpha","RowGroup_ident","pop","RowGroup_lastParent","RowGroup_lastColor","level","color","__echoOuterHTML","objectSet","outerHTML","folderRow","RowGroup_folderCount","s_DataFolderId","s_DataFolder","s_DataRowFolded","tdHadIdent","RowGroup_icoClosed","preClass","preObjs","cloneTd","s_CssTableRowGroupBtn","RowGroup_toggle","RowGroup_close","s_DataRowOpenMode","s_DataParentFolderId","RowGroup_syntax_tag2Replace","identer","identObj","subRows","folderButton","RowGroup_icoOpened","thRow","tdHTML","colID","prevThRow","s_CssThRepeater","hasRowGroup","pageSize","skipRowCount","lastSkipRowCount","tbody","rowSpan","__transToAudio","audioLike","autoplay","loop","preload","audio","s_Autoplay","s_Loop","s_Preload","__play","self","controls","paused","play","ExtAudio_icon_play","s_Playing","pause","s_DataPause","__addToLinkChecker","params","V_doc_counter_audiomini","bind","s_CssAudioMiniControl","s_Loading","ExtAudio_icon_loading","dur","dur2","s_DataDuration","duration","min","minStr","ExtAudio_icon_pause","ExtAudio_icon_stop","ExtAudio_icon_forbidden","s_Controls","s_Caption2","s_MarginBottom","__transToVideo","videoLike","video","action","lastValue","timerValueChanged","onKeyDown","onAction","pressESC","__appendTo","__processInput","actionHover","__checkComValueChanged","s_CssTextFieldFocus","blur","select","clear","setAction","enter","s_HoverAction","s_Placeholder","FilterResultNavigator","index","nextItem","set","eq","holder","hidden","foldItems","lastHeaderFolder","lastHeaderLevel","lastDocScrollTop","unfold","s_DataCatalogEmpty","s_CssTocFolder","s_DataRef","s_DataNode","s_DataFolded","insertBefore","folderParent","disposeFold","cancelBubble","s_DataPid","__expandUpFolder","headerHeight","preDis","sTop","sBottom","showFilterResult","s_Toc","title","cloneItem","s_CssTocItem","s_DataKeywordMatch","TocIndex_updateStatus","traversal","lastItem","itemSet","nextAll","btnFolder","hd1","hd2","TocIndex_initUI","TocIndex_showTips","items","TocIndex_add","forSearch","s_DataForSearch","TocIndex_hasIndexItem","TocIndex_show","TocIndex_hide","hashObj","existsItem","tocItem","noneHistory","iframe","page","wf","identifier","__getDocLibTitle","timerGetTitle","getTitleTimes","docLibBoard","reload","s_DataDocLibHash","cs","__disposeCaption","fig","s_CssFig","__bindLoadChecker","cp1","s_Caption1","cp2","__loadDefaultOnError","__isNotFigure","ai","mi","iconMode","logoMode","frameMode","__initAlign","__initBackground","grid","s_DataFigureGrid","__initFillAlter","s_DataImgFill","s_SuffixSvg","SVGInject","afterInject","svgObj","ExtFigure_adjustFillAlterForSVG","onFail","__initColorScheme","s_Invert","s_DataDarkSrc","path","queryString","darksrc","s_DataSrcLight","s_DataSrcDark","s_DataSrcsetLight","s_DataSrcsetDark","__initHighDPI","srcset","darksrcset","__transUrlSrcSet","s_Srcset","alt","pureSrc","fileName","rAfter","httpMode","canFillAlter","hostname","imgHost","src2FillAlter","matchRes","match","srcHost","needImgHost","ExtFigure_adjustColorScheme","darkMode","s_CssImgInvertDark","s_DataSrc_","s_DataSrcset_","fill","s_Text","s_Filter","gridType","darkInvert","s_Line","s_Fill","s_CssFigNavBtns","figNum","mousedown","updateUI","newFig","s_MaxHeight","pageNum","li","chkCount","notDone","indeterminate","viewBox","paddingBottom","actor","tmpText","prefix","front","keySys","extSys","line","s_Rx","s_Ry","s_CssActorKeySys","s_CssActorExtSys","s_TextLength","fragment","g","segType","bgColor","s_varMmOrange","borderColor","titleColor","s_varMmRed","s_varMmCyan","s_CssText","fragmentTitle","label","rect","getBBox","nextText","dcTag","dcBadge","dcCoat","RainbowTag_defalutColor","RainbowBadge_defalutColor","RainbowCoat_defalutColor","codeText","stdCount","RainbowBadge_syntax_color","RainbowBadge_build","RainbowTag_syntax","RainbowTag_build","TextPhonetic_syntax","TextPhonetic_build","RainbowCoat_syntax","RainbowCoat_build","RainbowQuote_build","__asMarkdown","RainbowTag_getColor","em","RainbowTag_count","badgeName","RainbowBadge_getColor","badgeValue","varStr","RainbowBadge_count","RainbowBadge_syntax_variable","RainbowQuote_getColor","__generateBg","charCount","start","end","s_varDFC","RainbowCoat_getColor","s_CssRbCoat","s_DataRbCoatData","s_BorderColor","RainbowCoat_toggle","s_Opened","s_varDBc","symbol","VLOOKui_loadWelcomePage","date","author","defalutContent","metaContent","VLOOKui_loadIconSet","VLOOKui_loadTopbar","VLOOKui_loadNavCenter","VLOOKui_loadCommon","loadVLOOKui","loadVLOOKplugin","__fork","newRadius","s_varRB__","s_varRS__","s_varRT__","s_varRTag__","s_varRC__","colorScheme","gTotalTimes","gTimes","redirect","vVer","s_CssAccentBtn","s_CssBadgeValue","s_CssBlockquoteFolder","s_CssCaption__Mermaid","s_CssCodeMirrorLine","s_CssFences","s_CssFocusSearch","s_CssTocHistory","s_CssSegmentBtn","s_CssTableRowGroupIdenter","s_CssTocFilterResult","s_Darksrc","s_Darksrcset","s_DataFigType","s_DataHistory","s_DataIdFigType","s_FootnotesArea","s_MdToc","s_Name","s_SuffixImg","prototype","attr","children","each","find","toggle","trigger","searchValue","replaceValue","replace","trim","exp","reg","RegExp","replaceAll","startsWith","endsWith","indexOf","toLowerCase","devMode","wrapText","suff","oldValue","newValue","core","navigator","userAgent","trident","presto","webkit","gecko","android","iPhone","iPad","full","subset","devicePixelRatio","silent","printMermaidDPR","RepairTool_mermaidDPR_builder","RepairTool_mermaidDPR_render","V_ver","toc","hideOnError","vlookToc","tocSet","tocSetLength","hasCover","tocAutoCloseLevel","dblclick","__setLightIcon","__darkIcon","head","__lightIcon","__setDarkIcon","__syncScheme","matcher","matches","__updateIcons","querySelector","matchMedia","addListener","ac","_alt","_fade","_title","acRed","acOrange","acYellow","acLime","acGreen","acAqua","acCyan","acBlue","acSea","acSteel","acPurple","acRose","acPink","acGold","acBrown","acGray","acTheme1","acTheme2","mm","mmRed","mmOrange","mmYellow","mmGreen","mmCyan","mmBlue","mmPurple","mmPink","mmBrown","mmGray","cm","footnotesArea","CaptionGenerator_spliter","CHPAUTONUM_TPL_FORMAT_OPT_NONE","CHPAUTONUM_TPL_FORMAT_OPT_MIN","CHPAUTONUM_TPL_FORMAT_OPT_SUP","ready","effect","wsMode"],"mappings":"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J,EAAK,QACfK,EAASL,EAAK,OACdM,EAASN,EAAK,OACdO,EAAWP,EAAK,SAChBQ,EAASR,EAAK,OACdS,EAAUT,EAAK,QACfU,EAASV,EAAK,OAEdW,EAAK,QAETpgD,EAAuB,CACnB,kBACA,sBACA,SACA,SACA,aACA,UACA,SACA,aACA,aACA,kBACA,YACA,YACA,aACA,cACA,cACA,kBACA,oBACA,oBACA,QACA,iBACA,eACA,aACA,YACA,oBACA,mBACA,aACA,WACA,gBACA,eACAu+C,EACAA,EAAQH,EACRG,EAAQF,EACRE,EAAQD,EACRE,EACAA,EAAWJ,EACXI,EAAWH,EACXG,EAAWF,EACXG,EACAA,EAAWL,EACXK,EAAWJ,EACXI,EAAWH,EACXI,EACAA,EAASN,EACTM,EAASL,EACTK,EAASJ,EACTK,EACAA,EAAUP,EACVO,EAAUN,EACVM,EAAUL,EACVM,EACAA,EAASR,EACTQ,EAASP,EACTO,EAASN,EACTO,EACAA,EAAST,EACTS,EAASR,EACTQ,EAASP,EACTQ,EACAA,EAASV,EACTU,EAAST,EACTS,EAASR,EACTS,EACAA,EAAQX,EACRW,EAAQV,EACRU,EAAQT,EACRU,EACAA,EAAUZ,EACVY,EAAUX,EACVW,EAAUV,EACVW,EACAA,EAAWb,EACXa,EAAWZ,EACXY,EAAWX,EACXY,EACAA,EAASd,EACTc,EAASb,EACTa,EAASZ,EACTa,EACAA,EAASf,EACTe,EAASd,EACTc,EAASb,EACTc,EACAA,EAAShB,EACTgB,EAASf,EACTe,EAASd,EACTe,EACAA,EAAUjB,EACViB,EAAUhB,EACVgB,EAAUf,EACVgB,EACAA,EAASlB,EACTkB,EAASjB,EACTiB,EAAShB,EACTiB,EACAA,EAAWnB,EACXmB,EAAWlB,EACXkB,EAAWjB,EACXkB,EACAA,EAAWpB,EACXoB,EAAWnB,EACXmB,EAAWlB,EACXoB,EACAA,EAAQtB,EACRuB,EACAA,EAAWvB,EACXwB,EACAA,EAAWxB,EACXyB,EACAA,EAAUzB,EACV0B,EACAA,EAAS1B,EACT2B,EACAA,EAAS3B,EACT4B,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","sourcesContent":["/**************************************\n *\n * VLOOK JS - Typora Plugin\n *\n * V17.0\n * 2023-05-26\n * powered by MAX°孟兆\n *\n * QQ Group: 805502564\n * email: maxchow@qq.com\n *\n * https://github.com/MadMaxChow/VLOOK\n * https://gitee.com/madmaxchow/VLOOK\n *\n *************************************/\n\nlet vVer = \"V17.0\",\n    iStopwatch = new Stopwatch(), // 初始化计时器\n    gUndefined = undefined,\n    gTrue = true,\n    gFalse = false,\n    gTimes = 0,\n    gTotalTimes = 0,\n    gHoldKeyAlt = gFalse,\n    gLastHash = null,\n    s_4space = \"    \",\n    s_Absolute = \"absolute\",\n    s_Actived = \"actived\",\n    s_Alt = \"alt\",\n    s_Audio = \"audio\",\n    s_Animation = \"animation\",\n    s_Auto = \"auto\",\n    s_Autoplay = \"autoplay\",\n    s_Background = \"background\",\n    s_BackgroundColor = \"background-color\",\n    s_BackgroundImage = \"background-image\",\n    s_BeforePrintWidth = \"before-print-width\",\n    s_BeforePrintMaxWidth = \"before-print-max-width\",\n    s_Block = \"block\",\n    s_Blockquote = \"blockquote\",\n    s_Bold = \"bold\",\n    s_Border = \"border\",\n    s_BorderBottomRightRadius = \"border-bottom-right-radius\",\n    s_BorderColor = \"border-color\",\n    s_BorderRadius = \"border-radius\",\n    s_BorderTopLeftRadius = \"border-top-left-radius\",\n    s_BorderTopRightRadius = \"border-top-right-radius\",\n    s_BorderWidth = \"border-width\",\n    s_Bottom = \"bottom\",\n    s_Br = \"<br>\",\n    s_Bubble = \"bubble\",\n    s_Caption1 = \".v-cap-1\",\n    s_Caption2 = \".v-cap-2\",\n    s_Center = \"center\",\n    s_CssAccentBtn = \"v-accent-btn\",\n    s_CssActorKeySys = \"v-actor-key-sys\",\n    s_CssActorExtSys = \"v-actor-ext-sys\",\n    s_CssAudioMiniControl = \"v-audio-mini-control\",\n    s_CssBadgeValue = \"v-badge-value\",\n    s_CssBlockquoteFolder = \"v-blockquote-folder\",\n    s_CssBtn_BtnGroup = \".v-btn, .v-btn-group\",\n    s_CssBtn__Assistor = \".v-btn.assistor\",\n    s_CssCaptionContainer = \"v-cap-cntr\",\n    s_CssCaption__Mermaid = \"v-caption.mermaid\",\n    s_CssCodeMirrorLine = \"CodeMirror-line\",\n    s_CssContentExpander = \"v-content-expander\",\n    s_CssCursorLaser = \"v-cursor-laser\",\n    s_CssFences = \"md-fences\",\n    s_CssFloatCard = \"v-float-card\",\n    s_CssFig = \"v-fig\",\n    s_CssFigNavBtns = \".v-fig-nav-btns\",\n    s_CssFocusSearch = \"v-focus-search\",\n    s_CssTocHistory = \"v-toc-history\",\n    s_CssImgInvertDark = \"v-img-invert-dark\",\n    s_CssMermaidRestyler = \"v-mermaid-restyler\",\n    s_CssNavCenterBlock = \"v-nav-center-block\",\n    s_CssNavCenterFloat = \"v-nav-center-float\",\n    s_CssPgCurrentItem = \"v-pg-current-item\",\n    s_CssPipBtn = \".v-pip-btn\",\n    s_CssRbCoat = \"v-rb-coat\",\n    s_CssResultNone = \"v-result-none\",\n    s_CssSegmentBtn = \"v-segment-btn\",\n    s_CssTableCross = \".v-table-cross\",\n    s_CssTableCrossCell = \"v-table-cross-cell\",\n    s_CssTableRowGroupNotFolder = \"v-tbl-row-g-not-folder\",\n    s_CssTableRowGroupBtn = \".v-tbl-row-g-btn\",\n    s_CssTableRowNumHidden = \"v-tbl-row-num-hidden\",\n    s_CssTableColumnFormat_Checkbox = \"v-tbl-col-fmt-chkbox\",\n    s_CssTableColumnFormat_Bold = \"v-tbl-col-fmt-bold\",\n    s_CssTableColumnFormat_Em = \"v-tbl-col-fmt-em\",\n    s_CssTableColumnFormat_U = \"v-tbl-col-fmt-u\",\n    s_CssTableColumnFormat_Mark = \"v-tbl-col-fmt-mark\",\n    s_CssTableColumnFormat_Del = \"v-tbl-col-fmt-del\",\n    s_CssTableColumnFormat_NumNeg = \"v-tbl-col-fmt-num-negative\",\n    s_CssTableColumnFormat_NumPos = \"v-tbl-col-fmt-num-positive\",\n    s_CssTableRowGroupSub = \"v-tbl-row-g-sub\",\n    s_CssTableRowGroupIdenter = \"v-tbl-row-g-identer\",\n    s_CssText = \"cssText\",\n    s_CssTextFieldFocus = \"v-textfield-focus\",\n    s_CssThRepeater = \"v-th-repeater\",\n    s_CssTocFolder = \".v-toc-folder\",\n    s_CssTocFilterResult = \"v-toc-filter-result\",\n    s_CssTocItem = \"v-toc-item\",\n    s_CssTocItemCurrent = \"v-toc-item-current\",\n    s_CssTransitionAll = \"v-transition-all\",\n    s_Checked = \"yes\",\n    s_Class = \"class\",\n    s_Click = \"click\",\n    s_Codeblock = \"codeblock\",\n    s_Color = \"color\",\n    s_Colspan = \"colspan\",\n    s_Content = \"content\",\n    s_Controls = \"controls\",\n    s_Cursor = \"cursor\",\n    s_ColorScheme = \"color-scheme\",\n    s_Cost = \"    COST \",\n    s_Cover = \"cover\",\n    s_Dark = \"dark\",\n    s_Darksrc = \"darksrc\",\n    s_Darksrcset = \"darksrcset\",\n    s_DataAnchor = \"d-anchor\",\n    s_DataBeforePrintFolded = \"d-before-print-folded\",\n    s_DataBlockquoteFolded = \"d-blockquote-folded\",\n    s_DataBtnGroup = \"d-btn-group\",\n    s_DataCaptionCount =\"d-cap-count\",\n    s_DataCatalogEmpty = \"d-catalog-empty\",\n    s_DataCellMerge = \"d-cell-merge\",\n    s_DataClipboardText = \"data-clipboard-text\",\n    s_DataColspan = \"d-colspan\",\n    s_DataColumnFmting = \"d-column-fmting\",\n    s_DataContainer = \"d-cntr\",\n    s_DataContentExpanded = \"d-content-expanded\",\n    s_DataContentFolded = \"d-content-folded\",\n    s_DataContentType = \"d-content-type\",\n    s_DataDefault = \"d-default\",\n    s_DataExtend = \"d-extend\",\n    s_DataFigNum = \"d-fig-num\",\n    s_DataFigType = \"d-fig-type\",\n    s_DataFolded = \"d-folded\",\n    s_DataFolder = \"d-folder\",\n    s_DataFolderId = \"d-folder-id\",\n    s_DataFoldingQuote = \"d-folding-quote\",\n    s_DataForSearch = \"data-for-search\",\n    s_DataDarkSrc = \"d-darksrc\",\n    s_DataDuration = \"d-duration\",\n    s_DataFigureGrid = \"d-fig-grid\",\n    s_DataDocLibHash = \"data-doc-lib-hash\",\n    s_DataHeaderNum = \"d-header-num\",\n    s_DataHistory = \"d-history\",\n    s_DataIcon = \"d-icon\",\n    s_DataIdFigType = \"d-id-fig-type\",\n    s_DataKeywordMatch = \"d-keyword-match\",\n    s_DataLmc = \"d-lmc\",\n    s_DataNode = \"d-node\",\n    s_DataParentFolderId = \"d-parent-folder-id\",\n    s_DataPid = \"d-pid\",\n    s_DataQuoteGroup = \"d-quote-group\",\n    s_DataRef = \"data-ref\",\n    s_DataRowFolded = \"d-row-folded\",\n    s_DataRowOpenMode = \"d-row-open-mode\",\n    s_DataSrc_ = \"d-src-\",\n    s_DataSrcDark = \"d-src-dark\",\n    s_DataSrcLight = \"d-src-light\",\n    s_DataSrcset_ = \"d-srcset-\",\n    s_DataSrcsetDark = \"d-srcset-dark\",\n    s_DataSrcsetLight = \"d-srcset-light\",\n    s_DataTd2th = \"d-td2th\",\n    s_DataTitle = \"d-title\",\n    s_DataId = \"d-id\",\n    s_DataIdentLevel = \"d-ident-level\",\n    s_DataImgFill = \"d-img-fill\",\n    s_DataPause = \"d-pause\",\n    s_DataPgIdx = \"d-pg-idx\",\n    s_DataResult = \"d-result\",\n    s_DataRbCoatData = \"d-rb-coat-data\",\n    s_DataRbCoatShowed = \"d-rb-coat-showed\",\n    s_DataRowGroup = \"d-row-group\",\n    s_DataTblCol = \"d-tbl-col\",\n    s_DataThRpt = \"d-th-rpt\",\n    s_DataTips = \"d-tips\",\n    s_Disabled = \"disabled\",\n    s_Display = \"display\",\n    s_Effect = \"effect\",\n    s_Enabled = \"enabled\",\n    s_Enabled_First = \"enabled first\",\n    s_Enabled_Last = \"enabled last\",\n    s_Error = \"error\",\n    s_Failed = \"Failed [ \",\n    s_False = \"false\",\n    s_Fig = \"fig\",\n    s_Figure = \"figure\",\n    s_Fill = \"fill\",\n    s_Filter = \"filter\",\n    s_First_Enable_Last = \"first enabled last\",\n    s_Float = \"float\",\n    s_FontTheme = \"font-theme\",\n    s_FootnotesArea = \"footnotes-area\",\n    s_Freeze = \"freeze\",\n    s_Function = \"function\",\n    s_Height = \"height\",\n    s_Hidden = \"hidden\",\n    s_Hotkey = \"Hotkey\",\n    s_Hover = \"hover\",\n    s_HoverAction = \"hover-action\",\n    s_Href = \"href\",\n    s_Id = \"id\",\n    s_InStart = \"in-start\",\n    s_Interactive = \"Interactive\",\n    s_Invert = \"invert\",\n    s_Italic = \"italic\",\n    s_Lang = \"lang\",\n    s_LaserPointer = \"laser-pointer\",\n    s_Left = \"left\",\n    s_Light = \"light\",\n    s_Line = \"line\",\n    s_Loading = \"loading\",\n    s_Loop = \"loop\",\n    s_Margin = \"margin\",\n    s_MarginBottom = \"margin-bottom\",\n    s_MarginLeft = \"margin-left\",\n    s_MaxHeight = \"max-height\",\n    s_MaxWidth = \"max-width\",\n    s_MdToc = \"md-toc\",\n    s_Min = \"min\",\n    s_Mini = \"mini\",\n    s_MinWidth = \"min-width\",\n    s_MouseUp = \"mouseup\",\n    s_Name = \"name\",\n    s_NavCenter = \"nav-center\",\n    s_None = \"none\",\n    s_Normal = \"normal\",\n    s_Off = \"off\",\n    s_On = \"on\",\n    s_Opacity = \"opacity\",\n    s_Opened = \"opened\",\n    s_Overflow = \"overflow\",\n    s_OverflowX = \"overflow-x\",\n    s_OverflowY = \"overflow-y\",\n    s_Padding = \"padding\",\n    s_PaddingBottom = \"padding-bottom\",\n    s_PaddingLeft = \"padding-left\",\n    s_PaddingRight = \"padding-right\",\n    s_PaddingTop = \"padding-top\",\n    s_Par = \"par\",\n    s_ParagraphNav = \"paragraph-nav\",\n    s_Placeholder = \"placeholder\",\n    s_Playing = \"playing\",\n    s_Position = \"position\",\n    s_Preload = \"preload\",\n    s_Presentation = \"Presentation\",\n    s_Print = \"print\",\n    s_Right = \"right\",\n    s_Rowspan = \"rowspan\",\n    s_Rx = \"rx\",\n    s_Ry = \"ry\",\n    s_Selected = \"selected\",\n    s_Spotlight = \"spotlight\",\n    s_Src = \"src\",\n    s_Srcset = \"srcset\",\n    s_Style = \"style\",\n    s_SuffixImg = \".img\",\n    s_SuffixSvg = \".svg\",\n    s_Tabindex = \"tabindex\",\n    s_Table = \"table\",\n    s_TagName = \"tagName\",\n    s_Target = \"target\",\n    s_Text = \"text\",\n    s_TextAlign = \"text-align\",\n    s_TextLength = \"textLength\",\n    s_Title = \"title\",\n    s_Toc = \"#vlook-toc>.md-toc-item\",\n    s_ToolbarSpliter = \"toolbar-spliter\",\n    s_Top = \"top\",\n    s_Transform = \"transform\",\n    s_TransformOrigin = \"transform-origin\",\n    s_True = \"true\",\n    s_TTF = \"ttf\",\n    s_Unfreeze = \"unfreeze\",\n    s_VLOOK_ = \"VLOOK-\",\n    s_varDBc = \"var(--d-bc)\",\n    s_varDFC = \"var(--d-f-c)\",\n    s_varMarkBg = \"var(--mark-bg)\",\n    s_varMmCyan = \"var(--mm-c-cyan)\",\n    s_varMmCyanAlt = \"var(--mm-c-cyan-alt)\",\n    s_varMmOrange = \"var(--mm-c-orange)\",\n    s_varMmOrangeAlt = \"var(--mm-c-orange-alt)\",\n    s_varMmRed = \"var(--mm-c-red)\",\n    s_varMmRedAlt = \"var(--mm-c-red-alt)\",\n    s_varNavCenterHiddenLeft = \"var(--v-nav-center-hidden-left)\",\n    s_varNavCenterWidth = \"var(--v-nav-center-width)\",\n    s_varRB = \"var(--v-r-b)\",\n    s_varRB__ = \"--v-r-b\",\n    s_varRC__ = \"--v-r-c\",\n    s_varRS__ = \"--v-r-s\",\n    s_varRT__ = \"--v-r-t\",\n    s_varRTag__ = \"--v-r-tag\",\n    s_varTblRowAlpha = \"var(--tbl-row-g-alpha)\",\n    s_VerticalAlign = \"vertical-align\",\n    s_Video = \"video\",\n    s_ViewBox = \"viewBox\",\n    s_Visibility = \"visibility\",\n    s_Wait = \"wait\",\n    s_Width = \"width\",\n    s_WOFF2 = \"woff2\",\n    s_Zindex = \"z-index\",\n    tag_2space = \"&nbsp;&nbsp;\";\niStopwatch.st();\n\n// ==================== 内置函数调用简化 ==================== //\n\n// 控制台打印日志\nfunction LOG() {\n    console.log.apply(console, arguments);\n}\n// 控制台打印通知\nfunction INFO() {\n    console.info.apply(console, arguments);\n}\n// 控制台打印警告\nfunction WARN() {\n    console.warn.apply(console, arguments);\n}\n// 控制台打印错误\nfunction ERROR() {\n    console.error.apply(console, arguments);\n}\n// 弹窗显示信息\nfunction ALERT(m) {\n    alert(m);\n}\n\n// 获得文档 URL\nfunction WINDOW_getHref() {\n    return window.location.href;\n}\n\n// 设置文档 URL\nfunction WINDOW_setHref(value) {\n    window.location.href = value;\n}\n\n// 获得文档 URL 的 hash\nfunction WINDOW_getHash() {\n    return window.location.hash;\n}\n\n// ==================== JQuery 方法调用简化 ==================== //\n\nfunction JQ_addClass(target, className) {\n    if (target !== gUndefined)\n        target.addClass(className);\n}\n\nfunction JQ_removeClass(target, className) {\n    if (target !== gUndefined)\n        target.removeClass(className);\n}\n\nfunction JQ_exchangeClass(target, oldClassName, newClassName) {\n    if (target !== gUndefined) {\n        target.removeClass(oldClassName);\n        target.addClass(newClassName);\n    }\n}\n\nfunction JQ_remove(target) {\n    if (target !== gUndefined)\n        target.remove();\n}\n\n// attr 简化版\n$.prototype.a = function (key, value) {\n    if (value === gUndefined)\n        return this.attr(key);\n    else\n        return this.attr(key, value);\n}\n\n// css 简化版\n$.prototype.c = function (key, value) {\n    if (value === gUndefined)\n        return this.css(key);\n    else\n        return this.css(key, value);\n}\n\n// click 简化版\n$.prototype.ck = function (callback) {\n    this.click(callback);\n}\n\n// children 简化版\n$.prototype.ch = function (value) {\n    return this.children(value);\n}\n\n// each 简化版\n$.prototype.e = function (callback) {\n    this.each(callback);\n}\n\n// find 简化版\n$.prototype.f = function (value) {\n    return this.find(value);\n}\n\n// html 简化版\n$.prototype.h = function (value) {\n    if (value === gUndefined)\n        return this.html();\n    else\n        return this.html(value);\n}\n\n// height 简化版\n$.prototype.ht = function () {\n    return this.height();\n}\n\n// offset 简化版\n$.prototype.o = function () {\n    return this.offset();\n}\n\n// parent 简化版\n$.prototype.p = function () {\n    return this.parent();\n}\n\n// text 简化版\n$.prototype.t = function (value) {\n    if (value === gUndefined)\n        return this.text();\n    else\n        return this.text(value);\n}\n\n// toggle 简化版\n$.prototype.tg = function (value) {\n    this.toggle(value);\n}\n\n// trigger 简化版\n$.prototype.tr = function (value) {\n    this.trigger(value);\n}\n\n// unbind(\"click\") 简化版\n$.prototype.uC = function () {\n    return this.unbind(s_Click);\n}\n\n// unbind(\"hover\") 简化版\n$.prototype.uH = function () {\n    return this.unbind(s_Hover);\n}\n\n// width 简化版\n$.prototype.w = function () {\n    return this.width();\n}\n\n// ==================== JavaScript 方法调用简化 ==================== //\n\n// match 简化版\nString.prototype.m = function (value) {\n    return this.match(value);\n}\n\n// replace 简化版\nString.prototype.r = function (searchValue, replaceValue) {\n    return this.replace(searchValue, replaceValue);\n}\n\n// trim 简化版\nString.prototype.x = function () {\n    return this.trim();\n}\n\n/**\n * replaceAll 简化版\n */\nString.prototype.rA = function (exp, value) {\n    const reg = new RegExp(exp, \"g\");\n    return this.replaceAll(reg, value);\n}\n\n/**\n * startsWith 简化版\n */\nString.prototype.sW = function (value) {\n    return this.startsWith(value);\n}\n\n/**\n * endsWith 简化版\n */\nString.prototype.eW = function (value) {\n    return this.endsWith(value);\n}\n\n// indexOf 简化版\nString.prototype.i = function (value) {\n    return this.indexOf(value);\n}\n\n// toLowerCase 简化版\nString.prototype.l = function () {\n    return this.toLowerCase();\n}\n\n// substring 简化版\nString.prototype.s = function (start, end) {\n    return this.substring(start, end);\n}\n\n// parseInt 简化版\nfunction JS_parseInt(value) {\n    return parseInt(value);\n}\n\n// parseFloat 简化版\nfunction JS_parseFloat(value) {\n    return parseFloat(value);\n}\n\n// Math.round 简化版\nfunction JS_mathRound(value) {\n    return Math.round(value);\n}\n\n// Math.ceil 简化版\nfunction JS_mathCeil(value) {\n    return Math.ceil(value);\n}\n\n// decodeURI 简化版\nfunction JS_decodeURI(value) {\n    return decodeURI(value);\n}\n\n// ======================================== //\n\nLOG(\":::::::::::::::::::\");\n// LOG(devMode,lVer);\nLOG(\"!!! \" + (devMode ? \"- DEV -\" : \"RELEASED\" ) + \" !!!\");\nLOG(\"::: \" + vVer + \" :::\");\nLOG(\":::::::::::::::::::\");\n\nINFO(\"=== Load Document ===\");\n\n// UI 元素\nlet iToolbar = gUndefined,\n    iNavCenter = gUndefined,\n    iChapNav = gUndefined,\n    iParagraphNav = gUndefined,\n    iSpotlight = gUndefined,\n    iLaserPointer = gUndefined,\n    iFontTheme = gUndefined,\n    iFigNav = gUndefined,\n    iInfoTips = gUndefined,\n    iFootNote = gUndefined;\n\n// ==================== 文档对象模型 ==================== //\n\n// 文档的 html 对象\nlet DOM_h = gUndefined;\nfunction DOM_html() {\n    if (DOM_h === gUndefined) {\n        DOM_h = $(\"html\");\n        if (DOM_h.length === 0) {\n            DOM_h = gUndefined;\n            ERROR(s_Failed + \"DOM.html ]\");\n        }\n    }\n    return DOM_h;\n}\n\n// 文档的 body 对象\nlet DOM_b = gUndefined;\nfunction DOM_body() {\n    if (DOM_b === gUndefined) {\n        DOM_b = $(\"body\");\n        if (DOM_b.length === 0) {\n            DOM_b = gUndefined;\n            ERROR(s_Failed + \"DOM.body ]\");\n        }\n    }\n    return DOM_b;\n}\n\n// ==================== VLOOK 对象模型 ==================== //\n\n// Markdown 导出为 HTML 的内容对象\nlet VOM_d = gUndefined;\nfunction VOM_doc() {\n    if (VOM_d === gUndefined) {\n        VOM_d = $(\"#write\");\n        if (VOM_d.length === 0) {\n            VOM_d = gUndefined;\n            ERROR(s_Failed + \"VOM.doc ]\");\n        }\n    }\n    return VOM_d;\n}\n\n// 封面对象\nlet VOM_c = gUndefined;\nfunction VOM_cover() {\n    if (VOM_c === gUndefined) {\n        VOM_c = $(\"#write>pre.md-meta-block:first-child + h6, #write>h6:first-child\");\n        if (VOM_c.length === 0) {\n            VOM_c = gUndefined;\n            if (VOM_docTitle() === gUndefined)\n                WARN(s_Failed + \"VOM.c ], maybe no cover: \" + WINDOW_getHref());\n        }\n    }\n    return VOM_c;\n}\n\n// 封底对象\nlet VOM_bc = gUndefined;\nfunction VOM_backcover() {\n    // 注意该方法调用，必须在 #vk-footer-area 的位置调整前完成\n    if (VOM_bc === gUndefined) {\n        let fns = $(\".\" + s_FootnotesArea);\n        if (fns !== gUndefined) {\n            let backcover = fns.prev(),\n                tagName = backcover.prop(s_TagName);\n            if (tagName !== gUndefined && tagName.l() === \"h1\")\n                VOM_bc = backcover;\n        }\n        else {\n            VOM_bc = gUndefined;\n            WARN(s_Failed + \"VOM.bc ], maybe no backcover\");\n        }\n    }\n    return VOM_bc;\n}\n\n// 文档标题对象（无封面模式）\nlet VOM_dt = gUndefined;\nfunction VOM_docTitle() {\n    if (VOM_dt === gUndefined) {\n        VOM_dt = $(\"#vk-id-doc-title\");\n        if (VOM_dt.length === 0) {\n            VOM_dt = gUndefined;\n            WARN(s_Failed + \"VOM.dt ] \" + WINDOW_getHref());\n        }\n    }\n    return VOM_dt;\n}\n\n// ==================== 通用方法 ==================== //\n\n/**\n * 检查是否为空对象\n */\n$.prototype.isEmpty = function () {\n    return (typeof (this) == \"undefined\");\n}\n\n/**\n * 判断对象是否已隐藏\n */\n$.prototype.isHidden = function () {\n    let T = this;\n    return T !== gUndefined\n        && (T.c(s_Display) === s_None || T.c(s_Visibility) === s_Hidden || T.c(s_Opacity) === \"0\");\n}\n\n/**\n * 判断对象是否已显示\n */\n$.prototype.isShowed = function () {\n    return !this.isHidden();\n}\n\n/**\n * 在元素前后以指定的前缀和后缀文本进行包裹\n * @param pre 前缀文本\n * @param suff 后缀文本\n*/\n$.prototype.wrapText = function (pre, suff) {\n    this.h(pre + this.h() + suff);\n}\n\n/**\n * 替换 innerHTML 的内容\n * @param exp 用于匹配内容的正则表达式\n * @param value 将匹配的内容替换成该内容\n*/\n$.prototype.rHTML = function (exp, value) {\n    this.h(this.h().replace(exp, value));\n}\n\n/**\n * 从指定内容开始，替换之后的匹配的内容\n * @param str 从指定内容出现的位置开始进行替换\n * @param oldValue 被替换的内容\n * @param newValue 用于替换的新内容\n */\nString.prototype.rAfter = function (str, oldValue, newValue) {\n    let T = this,\n        i = T.i(str);\n    if (i > -1) {\n        let pre = T.s(0, i),\n            suff = T.s(i, T.length);\n        return pre + suff.r(oldValue, newValue);\n    }\n    return this;\n};\n\n/**\n * 判断是否为数值型\n */\nString.prototype.isNumber = function () {\n    return /^([-+])*\\d+(\\.\\d+)?$/.test(this);\n}\n\n/**\n * 判断是否为百分数\n */\nString.prototype.isPercent = function () {\n    return /^([-+])*\\d+(\\.\\d+)?%$/.test(this);\n}\n\n/**\n * 判断是否为货币型\n */\nString.prototype.isCurrency = function () {\n    return /^(\\D{1,3} )([-+])*\\d+(\\.\\d+)?$/.test(this);\n}\n\n/**\n * 环境信息类\n */\nconst env = {\n    /*\n    Windows 平台样例：\n        - (Chrome) Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36\n        - (Edge) Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36 Edge/18.18362\n        - (Firefox) Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:69.0) Gecko/20100101 Firefox/69.0\n\n    macOS 平台样例：\n        - (Safari) Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.2 Safari/605.1.15\n        - (Chrome) Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36\n        - (Edge) Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 Edg/113.0.1774.35\n        - (Firefox) Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:69.0) Gecko/20100101 Firefox/69.0\n\n    iPhone 平台样例：\n        - (Safari) Mozilla/5.0 (iPhone; CPU iPhone OS 15_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.2 Mobile/15E148 Safari/604.1\n        - (Chrome) Mozilla/5.0 (iPhone; CPU iPhone OS 15_02 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/97.0.04692.72 Mobile/15E148 Safari/604.1\n        - (Edge) Mozilla/5.0 (iPhone; CPU iPhone OS 13_2_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.3 Mobile/15E148 Safari/604.1 Edg/113.0.0.0\n        - (Firefox) Mozilla/5.0 (iPhone; CPU iPhone OS 15_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) FxiOS/40.2 Mobile/15E148 Safari/605.1.15\n    */\n\n    // 浏览器内核信息\n    core : function () {\n        const u = navigator.userAgent;\n        return {\n            trident: u.i(\"Trident\") > -1, //IE内核\n            presto: u.i(\"Presto\") > -1, //opera内核\n            webkit: u.i(\"AppleWebKit\") > -1, //苹果、谷歌内核\n            gecko: u.i(\"Gecko\") > -1 && u.i(\"KHTML\") === -1 //火狐内核\n        };\n    }(),\n\n    // 设备信息\n    device : function () {\n        const u = navigator.userAgent;\n        return {\n            mobile: u.i(\"Mobile\") > -1, // 是否为移动终端\n            iOS: u.i(\"iPhone\") > -1, // iOS 类终端\n            android: u.i(\"Android\") > -1 || u.i(\"Linux\") > -1, // android 终端或者 UC 浏览器\n            iPhone: u.i(\"iPhone\") > -1, // 是否为 iPhone 或者 QQHD 浏览器\n            iPad: u.i(\"iPad\") > -1 // 是否 iPad\n        };\n    }(),\n\n    // 浏览器类型\n    browser : function () {\n        const u = navigator.userAgent;\n        return {\n            Chrome: (u.i(\"Chrome\") > -1 && u.i(\"Edg\") < 0) || u.i(\"CriOS\") > -1, // Chrome 浏览器\n            Firefox: u.i(\"Firefox\") > -1 || u.i(\"FxiOS\") > -1, // Firefox 浏览器\n            Safari: u.i(\"Safari\") > -1 && (u.i(\"Chrome\") < 0 || u.i(\"CriOSc\") < 0 || u.i(\"Edg\") < 0 || u.i(\"FxiOS\") < 0), // Safari 浏览器\n            Edge: u.i(\"Edg\") > -1 // Edge 浏览器\n        };\n    }(),\n\n    // 浏览器版本信息\n    browserVer : function () {\n        const u = navigator.userAgent;\n        return {\n            Chrome: u.m(/Chrome\\/[\\d.]+/gi) ? u.m(/Chrome\\/[\\d.]+/gi)[0].m(/\\d+/)[0] : \"0\", // Chrome 浏览器版本\n            Firefox: u.m(/Firefox\\/[\\d.]+/gi) ? u.m(/Firefox\\/[\\d.]+/gi)[0].m(/\\d+/)[0] : \"0\", // Firefox 浏览器版本\n            Safari: u.m(/Version\\/[\\d.]+.+Safari\\/[\\d.]+/gi) ? u.m(/Version\\/[\\d.]+.+Safari\\/[\\d.]+/gi)[0].m(/\\d+/)[0] : \"0\", // Safari 浏览器版本\n            Edge: u.m(/Edg\\/[\\d.]+/gi) ? u.m(/Edg\\/[\\d.]+/gi)[0].m(/\\d+/)[0] : \"0\" // Edge 浏览器版本\n        };\n    }(),\n\n    // 操作系统信息\n    os : function () {\n        const u = navigator.userAgent;\n        return {\n            Windows: /windows|win32|win64/i.test(u), // 是否为 Windows 平台\n            macOS: /macintosh/i.test(u), // 是否为 macOS 平台\n            iOS: /iphone os/i.test(u), // 是否为 iOS 平台\n            Linux: /linux/i.test(u) // 是否为 iOS 平台\n        };\n    }(),\n\n    // 语言信息\n    language : function () {\n        const lang = navigator.language;\n        return {\n            full: lang.l(),\n            base: lang.s(0, 2),\n            subset: lang.s(3, lang.length)\n        };\n    }(),\n\n    // 显示信息\n    display : function () {\n        return {\n            DPR : window.devicePixelRatio\n        };\n    }(),\n\n    /**\n     * 打印环境信息\n     * @param silent 是否为静默模式，静默模式只反馈环境信息值，不打印到控制台\n     * @returns string 环境信息\n     */\n    print : function (silent) {\n        let info = \"::: Environmental :::\\n\",\n            r = info;\n        if (!silent) LOG(info);\n\n        info = \"    ├ Language   [ \"\n            + env.language.base\n            + (env.language.subset.length > 0 ? \"_\" + env.language.subset : \"\")\n            + \" ]\\n\";\n        r += info;\n        if (!silent) LOG(info);\n\n        info = \"    ├ Device     [ \"\n            + (env.device.mobile ? \"Mobile\" : \"\")\n            + (env.device.iOS ? \"/iOS\" : \"\")\n            + (env.device.android ? \"/Android\" : \"\")\n            + (env.device.iPhone ? \"/iPhone\" : \"\")\n            + (env.device.iPad ? \"/iPad\" : \"\")\n            + \"]\\n\";\n        r += info;\n        if (!silent) LOG(info);\n\n        info = \"    ├ OS         \" +\n            (env.os.macOS ? \"[ macOS ]\"\n                : (env.os.Windows ? \"[ Windows ]\"\n                    : (env.os.iOS ? \"[ iOS ]\"\n                        : (env.os.Linux ? \"[Linux]\" : \"[Others]\"))))\n            + \"\\n\";\n        r += info;\n        if (!silent) LOG(info);\n\n        info = \"    ├ Browser    [ \"\n            + (env.browser.Chrome ? \"Chrome / \" + env.browserVer.Chrome : \"\")\n            + (env.browser.Firefox ? \"Firefox / \" + env.browserVer.Firefox : \"\")\n            + (env.browser.Safari ? \"Safari / \" + env.browserVer.Safari : \"\")\n            + (env.browser.Edge ? \"Edge / \" + env.browserVer.Edge : \"\")\n            + \" ]\\n\";\n        r += info;\n        if (!silent) LOG(info);\n\n        info = \"    ├ Core       [ \"\n            + (env.core.gecko ? \"Gecko\" : \"\")\n            + (env.core.presto ? \"Presto\" : \"\")\n            + (env.core.trident ? \"Trident\" : \"\")\n            + (env.core.webkit ? \"WebKit\" : \"\")\n            + \" ]\\n\";\n        r += info;\n        if (!silent) LOG(info);\n\n        info = \"    ├ DPR        [ \"\n            + env.display.DPR\n            + \" ]\\n\"; // Device Pixel Ratio\n        r += info;\n        if (!silent) LOG(info);\n\n        info = \"    ├ Theme      [ \"\n            + V_util_getTemplateTheme()\n            + \" ]\\n\"; // 文档风格主题\n        r += info;\n        if (!silent) LOG(info);\n\n        info = \"    └ VLOOK Type [ \"\n            + V_type\n            + \" ]\\n\"; // VLOOK 插件运行类型\n        r += info;\n        if (!silent) LOG(info);\n\n        info = navigator.userAgent + \"\\n\";\n        r += info;\n        if (!silent) LOG(info);\n\n        return r;\n    },\n\n    // 打印 Mermaid 缩放信息\n    printMermaidDPR : function() {\n        let info = \"::: Mermaid DPR :::\\n\"\n            + \"    ├ DPR of builder  [ \" + RepairTool_mermaidDPR_builder + \" ]\\n\"\n            + \"    └ DPR of render   [ \" + RepairTool_mermaidDPR_render + \" ]\\n\";\n        LOG(info);\n        return info;\n    },\n\n    /**\n     * 屏幕上显示环境信息、Mermaid 信息等\n     **/\n    show : function (source) {\n        let info = env.print()\n            + env.printMermaidDPR()\n            + \"\\n----------\\nPowered by MAX°孟兆\\n\";\n        console.log(info);\n        Copyer_action(source, info, gFalse);\n        ALERT(info);\n    }\n};\n\n// ==================== VLOOK 关键信息类 ==================== //\n\nlet V_ver = vVer, // VLOOK 版本信息\n    V_debugMode = debugMode, // 是否为开发模式\n    V_type = \"max\", // 插件运行类型：max, pro, mini\n    V_params_url = [], // VLOOK 的调校参数\n    V_params_yaml = []; // VLOOK 文档的 YAML\n\n// 初始化调校参数\nfunction V_params_init() {\n    V_params_url = V_util_getQueryParams(WINDOW_getHref());\n    let vp = V_util_getMetaByName(\"vlook-query\");\n    V_params_yaml = V_util_getQueryParams(\"file.html\" + (vp !== gUndefined ? \"?\" + vp : \"\"));\n}\n// ========================================\n\n\n// ========================================\n// 在 debug 模式下输出调试信息\nfunction DEBUG(...info) {\n    if (V_debugMode)\n        WARN(...info);\n}\n\n// ========================================\n// VLOOK 本地数据读/写\n// 获得数据\nfunction V_data_get(key) {\n    return localStorage[s_VLOOK_ + key];\n}\n// 写入数据\nfunction V_data_set(key, value) {\n    localStorage[s_VLOOK_ + key] = value;\n}\n// ========================================\n\n// ========================================\n// VLOOK 工具包\n/**\n * 获取 HTML 文档标题\n */\nfunction V_util_getDocTitle() {\n    return $(document).a(s_Title);\n}\n\n/**\n * 获取 HTML <meta> 标签的内容\n * @param metaName 指定 meta 的名称\n * @returns 指定 meta 的内容\n */\nfunction V_util_getMetaByName(metaName) {\n    let content = $(\"meta[name='\" + metaName + \"']\").a(s_Content);\n    return (content === \"${\" + metaName + \"}\" ? gUndefined : content);\n}\n\n/**\n * 获取启动参数的值\n * @param pName 启动参数名称\n * @returns 启动参数的值\n */\nfunction V_util_getParamVal(pName) {\n    let v = V_params_url[pName];\n    // URL 中无指定，则深度通过 YAML 中获取\n    if (v === gUndefined)\n        v = V_params_yaml[pName];\n    return v;\n}\n\n/**\n * 获取 URL 中的参数数组\n * @param u 完整的 URL 内容\n */\nfunction V_util_getQueryParams(u) {\n    let h = u.i(\"#\");\n    u = h > -1 ? u.s(0, h) : u; // 只截取 URL 中 # 前的内容\n\n    let si = u.i(\"?\"),\n        qs = u.s(si > -1 ? si + 1 : u.length, u.length), // 获取url中\"?\"符后的字串\n        p = {}, // 保存参数数据的对象\n        is = (qs.length > 0) ? qs.split(\"&\") : [], // 取得每一个参数项,\n        item = null,\n        l = is.length;\n\n    // 将所有参数拆解至数组中\n    for (let i = 0; i < l; i++) {\n        item = is[i].split(\"=\");\n        p[decodeURIComponent(item[0])] = decodeURIComponent(item[1]);\n    }\n    return p;\n}\n\n/**\n * 获取 URL 中的锚点\n * @param u 完整的 URL 内容\n */\nfunction V_util_getHash(u) {\n    let i = u.i(\"#\");\n    return i > -1 ? u.s(i, u.length) : \"\";\n}\n\n/**\n * 获取 URL 中的参数字符串\n * @param u 完整的 URL 内容\n */\nfunction V_util_getQueryString(u) {\n    let i = u.i(\"?\");\n    return i > -1 ? u.s(i + 1, u.length) : \"\";\n}\n\n/**\n * 获取 URL 中的不含锚点的部分\n * @param u 完整的 URL 内容\n */\nfunction V_util_getURLwithoutHash(u) {\n    let i = u.i(\"#\");\n    return i > -1 ? u.s(0, i) : u;\n}\n\n/**\n * 获取 Alt / Option 修饰键情况\n * @returns true：按下，false：未按下\n */\nfunction V_util_holdKey_Alt() {\n    return (event.altKey);// || event.metaKey);\n}\n\n/**\n * 批量修改指定的 CSS 变量集\n * @param varSet 变量数组\n * @param flag 修改为指定变量集的标识\n */\nfunction V_util_changeCssVarSet(varSet, flag) {\n    // 生成目标颜色方案值列表\n    let tmp = [];\n    if (flag !== gUndefined) {\n        for (let i = 0, len = varSet.length; i < len; i++) {\n            tmp.push(V_util_getVarVal(varSet[i] + \"-\" + flag));\n        }\n    }\n    // 遍历所有变量实现 ColorScheme 切换\n    for (let i = 0, len = varSet.length; i < len; i++) {\n        if (flag !== gUndefined)\n            V_util_setVarVal(varSet[i], tmp[i]);\n        else\n            V_util_setVarVal(varSet[i], 0);\n    }\n}\n\n/**\n * 获得 URL 中的路径部分\n * @param u URL 地址\n */\nfunction V_util_getPath(u) {\n    let qi = u.i(\"?\"),\n        ti = u.s(0, qi).lastIndexOf(\"/\"),\n        pi = ti === -1 ? 0 : ti;\n    return u.s(0, pi + 1);\n}\n\n/**\n * 进行 HTML 特殊符号进行转义\n * @param text 原始文本\n * @return String 转义后文本\n */\nfunction V_util_htmlEncode(text) {\n    if (text.length === 0)\n        return \"\";\n    return text.r(/&/g, \"&amp;\")\n        .r(/</g, \"&lt;\")\n        .r(/>/g, \"&gt;\")\n        .r(/ /g, \"&nbsp;\")\n        .r(/'/g, \"&apos;\")\n        .r(/\"/g, \"&quot;\")\n        .r(/<br>/g, \"\");\n}\n\n/**\n * 进行 HTML 标签符转义\n * @param text 原始文本\n * @return String 转义后文本\n */\nfunction V_util_htmlTagEncode(text) {\n    if (text.length === 0)\n        return \"\";\n    return text.r(/</g, \"&lt;\")\n        .r(/>/g, \"&gt;\");\n}\n\n/**\n * 进行 HTML 单、双引号转义\n * @param text 原始文本\n * @return String 转义后文本\n */\nfunction V_util_htmlQuotEncode(text) {\n    if (text.length === 0)\n        return \"\";\n    return text.r(/'/g, \"&apos;\")\n        .r(/\"/g, \"&quot;\");\n}\n\n/**\n * 清理 HTML 中的单、双引号\n * @param text 原始文本\n * @return String 清理后的文本\n */\nfunction V_util_clearHtmlQuot(text) {\n    if (text.length === 0)\n        return \"\";\n    return text.r(/'/g, \"\")\n        .r(/\"/g, \"\");\n}\n\n/**\n * 处理并返回省略后的文本\n * @param text 原始文本\n * @param limit 头、尾长度限制\n * @return String 省略后的文本\n */\nfunction V_util_ellipsisText(text, limit) {\n    // 多个空格替换为 1 个\n    text = text.r(/\\s+/g, \" \");\n\n    // 不需要进行省略处理\n    if (text.length <= limit * 2)\n        return V_util_htmlTagEncode(text);\n\n    // 默认先按 1 个字占 1 个字节长度取头、尾部分\n    let h = text.s(0, limit).x(),\n        t = text.s(text.length - limit, text.length).x();\n    // 判断头、尾部分是否含中文\n    let cjkHeader = h.m(/\\p{Unified_Ideograph}/ug),\n        cjkTailer = t.m(/\\p{Unified_Ideograph}/ug);\n    if (cjkHeader != null && cjkHeader.length > 0)\n        h = __getChs(h, limit, cjkHeader);\n    if (cjkTailer != null && cjkTailer.length > 0)\n        t = __getChsRev(t, limit, cjkTailer);\n\n    /**\n     * 正序获取字符串（ 1 个 CJK 算两个字符）\n     *\n     * @param {*} str 原始字符\n     * @param {*} limit 限制长度\n     * @param {*} cjk CJK 字符数组\n     * @returns 新的字符串\n     */\n    function __getChs(str, limit, cjk) {\n        let cnt = 0;\n        while (limit > 0) {\n            if (cjk.i(str[cnt]) > -1)\n                limit -= 2;\n            else\n                limit--;\n            cnt++;\n        }\n        return str.s(0, cnt);\n    }\n    /**\n     * 反序获取字符串（ 1 个 CJK 算两个字符）\n     *\n     * @param {*} str 原始字符\n     * @param {*} limit 限制长度\n     * @param {*} cjk CJK 字符数组\n     * @returns 新的字符串\n     */\n    function __getChsRev(str, limit, cjk) {\n        let count = 0,\n            len = str.length - 1;\n        while (limit > 0) {\n            if (cjk.i(str[len - count]) > -1)\n                limit -= 2;\n            else\n                limit--;\n            count++;\n        }\n        return str.s(len + 1 - count);\n    }\n\n    return V_util_htmlTagEncode(h + \" . . . \" + t);\n}\n\n/**\n * 重定位至锚点\n * @return boolean true：已进行重定向，false：无须进行重定向\n */\nfunction V_util_redirectTo() {\n    let h = WINDOW_getHash();\n    // 如果 URL 带锚点\n    if (h.length > 0 && h !== \"#vk-id-doc-title\") {\n        LOG(\"    ↩ Redirect to h: \" + JS_decodeURI(h));\n        WINDOW_setHref(\"#\"); // 强制先清空当前 h\n        WINDOW_setHref(h);\n        // 若最后访问的锚点与本次相同，则强制进行一次微调\n        setTimeout(function () {\n            V_ui_tuningScrollTop(h);\n        }, 300);\n        return gTrue;\n    }\n    return gFalse;\n}\n\n/**\n * 跳转至页内锚点，并自动进行位置微调适配\n */\nfunction V_util_gotoHash(hash) {\n    let last = JS_decodeURI(WINDOW_getHash());\n    WINDOW_setHref(hash);\n    // 若前后锚点一样，则会导致不会触发 hashchange 事件，须强制进行一次微调\n    if (last === JS_decodeURI(hash))\n        V_ui_tuningScrollTop(hash);\n}\n\n/**\n * 获取 CSS 变量值\n * @param varName CSS 变量名\n */\nfunction V_util_getVarVal(varName) {\n    return getComputedStyle(document.documentElement).getPropertyValue(varName);\n}\n\n/**\n * 设置 CSS 变量值\n * @param varName CSS 变量名\n * @param value CSS 变量值\n */\nfunction V_util_setVarVal(varName, value) {\n    document.documentElement.style.setProperty(varName, value);\n}\n/**\n * 获取 HTML 文档使用的模板主题\n */\nfunction V_util_getTemplateTheme() {\n    return V_util_getVarVal(\"--v-theme-name\").rA(\"\\\"\", \"\").x();\n}\n// VLOOK 工具 包\n// ========================================\n\n// ========================================\n// 通用的格式化操作\n/**\n * 添加千位符\n * @param str 需要进行格式化的目标字符串\n * @returns string 格式化后的字符串\n */\nfunction V_formatting_thousands(str) {\n    return str.r(/(\\d)(?=(\\d{3})+(\\.\\d+)*(\\D)*$)/g, \"$1,\");\n}\n\n/**\n * 对小数部分进行格式化\n * @param str 需要进行格式化的目标字符串\n * @returns string 格式化后的字符串\n */\nfunction V_formatting_decimal(str) {\n    return str.r(/\\.(\\d+)/, \".<span class='v-tbl-col-fmt-num-decimal'>$1</span>\");\n}\n\n/**\n * 对百分号进行格式化\n * @param str 需要进行格式化的目标字符串\n * @returns string 格式化后的字符串\n */\nfunction V_formatting_percent(str) {\n    return str.r(/%</, \"<span class='v-tbl-col-fmt-percent'> %</span><\");\n}\n\n/**\n * 对货币符号进行格式化\n * @param str 需要进行格式化的目标字符串\n * @returns string 格式化后的字符串\n */\nfunction V_formatting_currency(str) {\n    // 对于存在转义符号 $ 时（与 Markdown 的数学公式格式冲突，所以一般会写成 \\$）\n    // 先将其处理成不存在转义的标准形式，如：HK$\n    str = str.r(/<\\/span><span>([$])<\\/span><span>/, \"$1\");\n    str = str.r(/>([$])<\\/span><span>/, \">$1\");\n    // 因 html() 中含有 > 字符，所以替换的内容中须进行 > 的前后拼接调整\n    return str.r(/>([a-z$¥￥]{0,3})\\s/i, '><span class=\"v-tbl-col-fmt-currency\">$1</span>');\n    // return str;\n}\n// ========================================\n\n// ========================================\n// 检查文档结构是否符合 VLOOK 规范程度\nfunction V_checkSpec () {\n    let v = gTrue,\n        c = [\n            \"因以下原因无法激活 VLOOK 插件：\\n\\n\",\n            // \"因以下原因無法激活 VLOOK 插件：\\n\\n\",\n            \"The VLOOK plugin cannot be activated for the following reasons:\\n\\n\",\n            // \"Le plugin VLOOK ne peut pas être activé pour les raisons suivantes:\\n\\n\",\n            // \"Das VLOOK-Plugin kann aus folgenden Gründen nicht aktiviert werden:\\n\\n\",\n            // \"El complemento VLOOK no se puede activar por las siguientes razones:\\n\\n\",\n            // \"Плагин VLOOK не может быть активирован по следующим причинам:\\n\\n\",\n            // \"次の理由により、VLOOKプラグインをアクティブ化できません：\\n\\n\",\n            // \"다음과 같은 이유로 VLOOK 플러그인을 활성화 할 수 없습니다 :\\n\\n\"\n            ][V_lang_id];\n\n    // 只支持由 Typora 导出的 HTML 文件\n    if (DOM_body().a(s_Class).i(\"typora-export\") === -1) {\n        c += [\n            \"• 只支持由 Typora 导出的 HTML 文件\\n\",\n            // \"• 只支持由 Typora 導出的 HTML 文件\\n\",\n            \"• Only HTML files exported by Typora are supported\\n\",\n            // \"• Seuls les fichiers HTML exportés par Typora sont pris en charge\\n\",\n            // \"• Es werden nur von Typora exportierte HTML-Dateien unterstützt\\n\",\n            // \"• Solo se admiten archivos HTML exportados por Typora\\n\",\n            // \"• Поддерживаются только файлы HTML, экспортированные Typora\\n\",\n            // \"• Typora によってエクスポートされたHTMLファイルのみがサポートされています\\n\",\n            // \"• Typora 에서 내 보낸 HTML 파일 만 지원됩니다\\n\"\n            ][V_lang_id];\n        v = gFalse;\n    }\n\n    // 缺少目录\n    if ($(\".\" + s_MdToc).length === 0) {\n        c += [\n            \"• 缺少 [TOC], 这是 GFM 标准的「目录」语法\\n\",\n            // \"• 缺少 [TOC], 这是 GFM 標準的「目錄」语法\\n\",\n            \"• Missing [TOC], the GFM standard \\\"Table of Content\\\"\\n\",\n            // \"• Manquant [TOC], la \\\"Table des matières\\\" standard GFM\\n\",\n            // \"• Fehlendes [TOC], der GFM-Standard \\\"Inhaltsverzeichnis\\\"\\n\",\n            // \"• Falta [TOC], la \\\"Tabla de contenido\\\" estándar de GFM\\n\",\n            // \"• Отсутствует [TOC], стандарт GFM \\\"Table of Content\\\".\\n\",\n            // \"• [TOC] がない、GFM標準の「目次」\\n\",\n            // \"•GFM 표준 '목차'인 [TOC] 누락\\n\"\n            ][V_lang_id];\n    }\n\n    // 存在不符合规范的情况\n    if (!v) {\n        c += [\n            \"\\n建议参考文档模板：\",\n            // \"\\n建議參考文檔模板：\",\n            \"\\nSuggestion Reference document template: \",\n            // \"\\nModèle de document de référence de suggestion: \",\n            // \"\\nVorschlag Referenzdokumentvorlage: \",\n            // \"\\nPlantilla de documento de referencia de sugerencia: \",\n            // \"\\nПредложение Шаблон справочного документа: \",\n            // \"\\n提案参照ドキュメントテンプレート：\",\n            // \"\\n제안 참조 문서 템플릿 : \"\n        ][V_lang_id] + \"\\nreleased/demo/VLOOK-Document-Template.md\";\n\n        ALERT(c);\n        return gFalse;\n    }\n\n    // 符合规范\n    return gTrue;\n}\n// ========================================\n\n\n/**\n * 初始化关键组件实例\n */\nfunction V_init() {\n    let sw = new Stopwatch();\n    sw.st();\n    iFontTheme = new FontTheme(new BgMask(s_FontTheme, s_Center), V_util_getVarVal(\"--v-f-theme\"));\n    if (iFontTheme === gFalse)\n        ALERT(s_Failed + \"iFntThm ]\");\n    else\n        iFontTheme.init(V_util_getParamVal(\"wf\")); // 初始化\n    sw.ed(\"    ├ Font Themer: \");\n\n    // ==================== UI --------------------\n\n    // 聚光灯\n    sw.st();\n    iSpotlight = new Spotlight(180, new BottomTips(s_Spotlight));\n    if (iSpotlight === gFalse)\n        ALERT(s_Failed + \"iSpotlight ]\");\n    sw.ed(\"    ├ Spotlight: \");\n\n    // 激光笔\n    iLaserPointer = new LaserPointer(new BottomTips(\"laserPointe\"));\n    if (iLaserPointer === gFalse)\n        ALERT(s_Failed + \"iPter ]\");\n    sw.ed(\"    ├ LaserPointer: \");\n\n    // 长内容折叠\n    sw.st();\n    // iContentFolder = new ContentFolder();\n    // if (iContentFolder.length === 0)\n        // ALERT(s_Failed + \"iCtFolder ]\");\n    let cf = V_util_getParamVal(\"cf\");\n    ContentFolder_enabled = (cf !== s_Off);\n    // 指定对象（table,figure,codeblock）启用的处理\n    if (cf !== gUndefined && cf !== s_On && cf !== s_Off) {\n        ContentFolder_enabled_table = (cf.i(s_Table) > -1);\n        ContentFolder_enabled_figure = (cf.i(s_Figure) > -1);\n        ContentFolder_enabled_codeblock = (cf.i(s_Codeblock) > -1);\n    }\n    // DEBUG(\"cf: \", ContentFolder_enabled_table, ContentFolder_enabled_figure, ContentFolder_enabled_codeblock);\n\n    ContentFolder_init();\n    sw.ed(\"    ├ Content Folding: \");\n\n    // 工具提示\n    // iToolTips = new ToolTips();\n    // if (iToolTips.length === 0)\n    //     ALERT(s_Failed + \"iToolTips ]\");\n    ToolTips_init();\n\n    // 弹窗信息提示\n    iInfoTips = new InfoTips(new BgMask(\"info-tips\", s_Center));\n    if (iInfoTips.length === 0)\n        ALERT(s_Failed + \"iInfoTips ]\");\n\n    // 导航中心\n    sw.st();\n    let runMode = V_util_getParamVal(\"nc\");\n    iNavCenter = new NavCenter(new BgMask(s_NavCenter, s_Left, gTrue), runMode);\n    if (iNavCenter === gFalse)\n        ALERT(s_Failed + \"iNavCenter ]\");\n    sw.ed(\"    ├ Nav Center: \");\n\n    // 逐章导航\n    sw.st();\n    iChapNav = new ChapterNav(iNavCenter);\n    if (iChapNav === gFalse)\n        ALERT(s_Failed + \"iChapNav ]\");\n    else {\n        // 添加关联组件\n        iNavCenter.chpNav = iChapNav;\n    }\n    sw.ed(\"    ├ Chapter Nav: \");\n\n    // 工具栏\n    sw.st();\n    iToolbar = new Toolbar(iNavCenter, iChapNav);\n    if (iToolbar === gFalse)\n        ALERT(s_Failed + \"iTb ]\");\n    else {\n        // 导航中心按钮\n        iToolbar.add(s_NavCenter, function () {\n            iNavCenter.tg();\n        });\n\n        // 字体风格\n        iToolbar.add(s_FontTheme, function () {\n            iFontTheme.tg();\n        });\n\n        // 颜色方案（Light/Dark）\n        iToolbar.add(s_ColorScheme, function () {\n            ColorScheme.tg();\n        });\n\n        // 分隔条\n        iToolbar.addSpliter(s_ToolbarSpliter);\n\n        // 段落导航\n        iToolbar.add(s_ParagraphNav, function () {\n            iInfoTips.inform([\n                \"开启方式：<br /><strong>三击文档中的「任意段落」</strong>\",\n                // \"开启方式：<br /><strong>三击文档中的「任意段落」</strong>\",\n                \"Open method:<br /><strong>three click \\\"any paragraph\\\" in the document</strong>\",\n                // \"Méthode ouverte: <br /><strong>trois clics \\\"n'importe quel paragraphe\\\" dans le document</strong>\",\n                // \"Methode öffnen: <br /><strong>drei Klick Sie im Dokument auf \\\"einen beliebigen Absatz\\\"</strong>\",\n                // \"Método abierto: <br /><strong>haga tres clics en \\\"cualquier párrafo\\\" en el documento</strong>\",\n                // \"Метод открытия: <br /><strong>тройной щелчок «любой абзац» в документе.</strong>\",\n                // \"開く方法：<br /><strong>ドキュメント内の「任意の段落」をスリークリックします</strong>\",\n                // \"열기 방법 : <br /><strong>문서에서 \\\"임 의 단락\\\"세 번 클릭.</strong>\"\n            ][V_lang_id], 10000, gTrue);\n        });\n\n        // 聚光灯\n        iToolbar.add(s_Spotlight, function () {\n            iLaserPointer.hide();\n            if (iSpotlight.tg())\n                iParagraphNav.hide();\n        });\n\n        // 激光笔\n        iToolbar.add(s_LaserPointer, function () {\n            // DEBUG(iLaserPointer);\n            iSpotlight.hide();\n            if (iLaserPointer.tg())\n                iParagraphNav.hide();\n        });\n\n        // 打印按钮\n        iToolbar.add(s_Print, function () {\n            V_print_ready();\n        });\n\n        // 添加关联组件\n        iNavCenter.toolbar = iToolbar;\n        iSpotlight.toolbar = iToolbar;\n        iLaserPointer.toolbar = iToolbar;\n\n        // 绑定选择字体风格的工具栏按钮\n        iFontTheme.bindButton(iToolbar.btns[s_FontTheme]);\n    }\n    sw.ed(\"    ├ Toolbar: \");\n\n    // 插图浏览器\n    sw.st();\n    iFigNav = new FigureNav();\n    if (iFigNav === gFalse)\n        ALERT(s_Failed + \"iFigNav ]\");\n    sw.ed(\"    ├ Figure Nav: \");\n\n    // ----------------------------------------\n    sw.st();\n\n    // 文档更多内容栏遮罩栏\n    MoreDocContent_init();\n\n    // 脚注\n    iFootNote = new FootNote(new BgMask(\"foot-note\", s_Bottom, gTrue));\n    if (iFootNote === gFalse)\n        ALERT(s_Failed + \"iFootNote ]\");\n\n    // 文档信息\n    DocInfo_init();\n\n    // 缩放显示\n    ZoomView_init();\n\n    // 链接检查\n    LinkTool_init(new BgMask(\"link-checker\", s_Right, gTrue));\n\n    // 状态栏\n    StatusBar_init();\n    StatusBar_add(\"doc-info\", DocInfo_ui);\n    StatusBar_add(\"zoom-view\", ZoomView_ui);\n    StatusBar_add(\"link-checker\", LinkTool_ui);\n\n    sw.ed(\"    └ Misc: \");\n}\n\n/**\n * 初始化 VLOOK 核心模块\n */\nfunction V_initKernel() {\n    // ----------------------------------------\n    // 加载本文档主题配套的 Logo 图标\n    iStopwatch.st(\"* Document Logo\");\n    let icoLg = $(\".v-doc-logo-light\").c(s_BackgroundImage),\n        icoDk = $(\".v-doc-logo-dark\").c(s_BackgroundImage);\n    $(\"head\").append(\"<link rel='icon' id='doc-icon-light' href='\" + icoLg.s(5, icoLg.length - 2) + \"' type='image/x-icon'/>\"\n        + \"<link rel='icon' id='doc-icon-dark' href='\" + icoDk.s(5, icoDk.length - 2) + \"' type='image/x-icon'/>\");\n    iStopwatch.ed(s_4space);\n\n    // ----------------------------------------\n    // 封面、封底处理\n    if (VOM_cover() === gUndefined) {\n        let vTp = (V_type === s_Mini ? \" mini\" : \"\");\n        VOM_doc().prepend('<div id=\"vk-id-doc-title\" class=\"v-doc-title' + vTp + '\">' + V_util_getDocTitle() +'</div>');\n    }\n\n    // ----------------------------------------\n    // 初始化国际化 UI\n    iStopwatch.st(\"* UI i18n\");\n    V_ui_initI18n();\n    iStopwatch.ed(s_4space);\n\n    // ----------------------------------------\n    // 初始化题注生成器配置\n    // let capNum = V_util_getParamVal(\"capnum\");\n    // if (capNum !== gUndefined && capNum.i(s_Fig) > -1)\n    //     ExtFigure_blockCapNum = gTrue;\n    // if (capNum !== gUndefined && capNum.i(s_Table) > -1)\n    //     ExtTable.blockCapNum = gTrue;\n    // if (capNum !== gUndefined && capNum.i(s_Audio) > -1)\n    //     ExtAudio_blockCapNum = gTrue;\n    // if (capNum !== gUndefined && capNum.i(s_Video) > -1)\n    //     ExtVideo_blockCapNum = gTrue;\n    // if (capNum !== gUndefined && capNum.i(s_Codeblock) > -1)\n    //     ExtCodeBlock_blockCapNum = gTrue;\n    if (V_util_getParamVal(\"capauto\") === s_On)\n        CaptionGenerator_autoContent = gTrue;\n\n    // ----------------------------------------\n    // 初始化音频数据\n    iStopwatch.st(\"* Audio: \");\n    ExtAudio_init();\n    iStopwatch.ed(s_4space);\n\n    // ----------------------------------------\n    // 初始化视频数据\n    iStopwatch.st(\"* Video: \");\n    ExtVideo_init();\n    iStopwatch.ed(s_4space);\n\n    // ========================================\n    // 初始化引用块\n    // 须在 ExtFigure 处理前，避免引用折叠处理中，对其内含有 svg 颜色替换处理导致 DOM 冲突而失效\n    iStopwatch.st(\"* Quote: \");\n    ExtQuote_init();\n    ExtQuote_adjustHoverStyle();\n    iStopwatch.ed(s_4space);\n\n    // ----------------------------------------\n    // 初始化插图数据\n    iStopwatch.st(\"* Figure: \");\n    ExtFigure_init();\n    iStopwatch.ed(s_Cost);\n\n    // ----------------------------------------\n    // 初始化表格\n    iStopwatch.st(\"* Table: \");\n    ExtTable_init();\n    iStopwatch.ed(s_Cost);\n\n    TableCross_init();\n    // // 设置表格阅读模式的开关状态（不指定则默认开启）\n    // if (V_util_getParamVal(\"tr\") !== s_Off)\n    //     TableCross_toggle();\n    RowGroup_adjustHoverStyle();\n\n    // ----------------------------------------\n    // 初始化代码块\n    iStopwatch.st(\"* Code Block: \");\n    ExtCodeBlock_init();\n    iStopwatch.ed(s_4space);\n\n    // ========================================\n    // iStopwatch.st(\"* Quote: \");\n    // ExtQuote_init();\n    // ExtQuote_adjustHoverStyle();\n    // iStopwatch.ed(s_4space);\n    // ----------------------------------------\n    // Code Magic 处理\n    // （注意：须在 ExtQuote 初始化之后执行）\n    // 包括了：彩虹标签、彩虹徽章、彩虹引用、刮刮卡、文字注音等\n    iStopwatch.st(\"* Code°Magic: \");\n    CodeMagic_init();\n    iStopwatch.ed(s_4space);\n    // ========================================\n\n    // ========================================\n    // 在插图、表格、代码等内容的题注处理后，进行引用的二次初始化\n    ExtQuote_initAfterCap();\n    // ========================================\n\n    // ----------------------------------------\n    // 文档没有任何可索引的对象时，默认不显示导航中心\n    if (!iNavCenter.catalog.hasIndexItem()\n        && !iNavCenter.figure.hasIndexItem()\n        && !iNavCenter.table.hasIndexItem()\n        && !iNavCenter.media.hasIndexItem()\n        && !iNavCenter.codeblock.hasIndexItem()) {\n            iNavCenter.runMode = \"closed\";\n    }\n\n    // ----------------------------------------\n    // 增强脚注\n    iStopwatch.st(\"* Foot Note: \");\n    FootNote.init();\n    iStopwatch.ed(s_4space);\n\n    // VLOOK UI 统一样式适配处理\n    V_ui_adjustHoverStyle();\n\n    // 主要针对小屏情况，完成表格初始化后进行适配\n    // 如果不是小屏，则由 adjustAll 触发\n    ContentFolder_adjust();\n\n    // ----------------------------------------\n    // 初始化 导航中心、章节导航 数据\n    iStopwatch.st(\"* Adjust NavCenter/ChapterNav/FigureNav/Toolbar/StatusBar\");\n    if (NavCenter.init()) {\n        if (!env.device.mobile)\n            iNavCenter.showHandle();\n\n        iNavCenter.adjust();\n        iChapNav.adjust();\n        iToolbar.adjust();\n        StatusBar_adjust();\n\n        // 根据设备类型自适应 hover 样式\n        iNavCenter.catalog.adjustHoverStyle();\n        iChapNav.adjustHoverStyle();\n        iFigNav.adjustHoverStyle();\n    }\n    iStopwatch.ed(s_4space);\n\n    // ----------------------------------------\n    // 自动生成可通过 DOM 引用的目录自动编号\n    ChpAutoNum_initToc();\n\n    // ----------------------------------------\n    iStopwatch.st(\"* Binding Event\");\n    // 绑定文档鼠标移动事件，聚光灯跟随鼠标移动\n    document.addEventListener(\"mousemove\", function () {\n        iSpotlight.repaint(event || window.event);\n        iNavCenter.snap(event || window.event);\n    });\n\n    // 绑定文档的单击事件\n    $(document).uC().ck(function () {\n        TableCross_hide();\n    });\n\n    // 绑定文档的滚动事件\n    $(document).scroll(function () {\n        let currentTime = new Date().getTime(),\n            scrollTop = $(document).scrollTop();\n\n        // 显示或隐藏文档更多内容遮罩栏\n        if (scrollTop < 10\n            || scrollTop > (scrollTop - 10)\n            || currentTime - V_doc_scroll_lastUpdate > 500)\n                MoreDocContent_refresh(scrollTop);\n\n        // ----------------------------------------\n        // 控制执行频率，避免处理过快影响性能\n        if (scrollTop < 10\n            || scrollTop > (scrollTop - 10)\n            || currentTime - V_doc_scroll_lastUpdate > 500\n            || (Math.abs(scrollTop - V.doc.scroll.lastTop) > 50 && (currentTime - V_doc_scroll_lastUpdate) > 500)) {\n                // 更新控制执行频率相关判断数据\n                V_doc_scroll_update(currentTime, $(document).scrollTop());\n                // 根据是屏幕大小进行不同的适配控制\n                V_ui_adjustAll();\n        }\n\n        // 由于涉及到章节导航栏数据更新等不同逻辑处理，执行频率由 focusHeader 内进行控制\n        iNavCenter.catalog.focusHeader();\n    });\n\n    // 绑定窗口大小缩放事件\n    $(window).resize(function () {\n        TableCross_hide();\n        iNavCenter.catalog.focusHeader();\n        V_ui_adjustAll();\n        ExtQuote_uniteColumnsHeight();\n    });\n\n    // 绑定打印前的触发事件\n    window.onbeforeprint = function () {\n        if (V_type === s_Mini)\n            return;\n        // 不是通过 VLOOK 打印按钮进行打印时进行提醒\n        if (V_print_mode !== \"VLOOK\")\n            ALERT([\n                \"注意！为确保打印正常，建议使用文档内工具栏左侧的【打印】按钮进行打印！\",\n                // \"注意！為保證打印正常，建議使用文檔中工具欄左側的【打印】按鈕進行打印！\",\n                \"Notice! To ensure normal printing, it is recommended to use the [Print] button on the left side of the toolbar in the document to print!\",\n                // \"Avis! Pour assurer une impression normale, il est recommandé d'utiliser le bouton [Imprimer] sur le côté gauche de la barre d'outils dans le document à imprimer !\",\n                // \"Notiz! Um einen normalen Druck zu gewährleisten, wird empfohlen, die Schaltfläche [Drucken] auf der linken Seite der Symbolleiste im Dokument zum Drucken zu verwenden!\",\n                // \"¡Aviso! Para garantizar una impresión normal, se recomienda utilizar el botón [Imprimir] en el lado izquierdo de la barra de herramientas del documento para imprimir.\",\n                // \"Уведомление! Чтобы обеспечить нормальную печать, рекомендуется использовать кнопку [Печать] в левой части панели инструментов документа для печати!\",\n                // \"知らせ！ 通常の印刷を行うために、ドキュメントのツールバーの左側にある[印刷]ボタンを使用して印刷することをお勧めします。\",\n                // \"알아 채다! 정상적인 인쇄를 위해서는 인쇄할 문서의 툴바 왼쪽에 있는 [인쇄] 버튼을 이용하시는 것을 권장합니다!\"\n            ][V_lang_id]);\n    };\n    // 绑定打印后的触发事件\n    window.onafterprint = function () {\n        if (V_type === s_Mini)\n            return;\n        V_print_done();\n    };\n\n    // 监听页内锚点链接跳转\n    // 注意：同一个锚点连续点击不会触发该事件\n    $(window).on(\"hashchange\", function(event) {\n        let h = WINDOW_getHash(),\n            anchor = h.s(1, h.length);\n        if (anchor.x().length === 0)\n            return;\n\n        iNavCenter.history.add(h);\n\n        // 锚点未显示的处理（如所在父元素被隐藏）\n        let aObj = $(\"#\" + JS_decodeURI(anchor) + \", a[name='\" + anchor + \"']\");\n        if (aObj !== gUndefined && aObj.o() !== gUndefined && aObj.o().top === 0) {\n            let hiddenObj = aObj.closest(s_Blockquote);\n            // 若属于被折叠的引用，则模拟点击展开，并重新定位到该引用\n            if (hiddenObj.length > 0 && hiddenObj.isHidden()) {\n                let fd = hiddenObj.prev().f(\".\" + s_CssBlockquoteFolder);\n                if (fd.length > 0) {\n                    fd.tr(s_MouseUp);\n                    WINDOW_setHref(h);\n                }\n            }\n        }\n\n        // 页内位置改变后，微调滚动条位置\n        if (gLastHash == null || gLastHash !== h) {\n            // 其中对于 Firefox 若不延时微调会存在微调无效的情况\n            setTimeout(function () {\n                V_ui_tuningScrollTop(JS_decodeURI(anchor));\n            }, env.browser.Firefox ? 300 : 0);\n        }\n        gLastHash = h;\n\n        // 若导航中心没有显示，则强制进行延时适配处理（如从封面直接到指定章节）\n        if (!iNavCenter.showed)\n            V_ui_adjustAllDelay();\n    });\n\n    iStopwatch.ed(s_4space);\n}\n\n/**\n * 初始化须在页面 body 显示后才能执行的部分\n */\nfunction V_initRestyle() {\n    let sw = new Stopwatch();\n\n    // ----------------------------------------\n    // 重置任务列表样式\n    sw.st();\n    Restyler_forTaskList();\n    sw.ed(\"    ├ TaskList: \");\n\n    // ----------------------------------------\n    // 重置脚本化图表样式，须在以上页面内容恢复显示后再处理\n    sw.st();\n    Restyler_forMermaid();\n    sw.ed(\"    └ Mermaid: \");\n}\n\n// ========================================\n// VLOOK UI\nlet V_ui_effect = 0, // 0: 无动效\n    V_ui_processingAdjust= gFalse;\n\n/**\n * 淡入显示\n * @param t 目标对象\n */\nfunction V_ui_show(t) {\n    if (t === gUndefined)\n        return;\n\n    t.c(s_Visibility, \"visible\")\n        .c(s_Opacity, 1);\n}\n\n/**\n * 淡出隐藏\n * @param t 目标对象\n */\nfunction V_ui_hide(t) {\n    if (t === gUndefined)\n        return;\n\n    t.c(s_Visibility, s_Hidden)\n        .c(s_Opacity, 0);\n}\n\nfunction V_ui_wrap_kbd(src) {\n    return \"<kbd>\" + src + \"</kbd>\"\n}\n/**\n * 获得当前 OS 环境下的 Ctrl 键 UI 元素\n */\nfunction V_ui_getCtrlKeyUI() {\n    return V_ui_wrap_kbd(\"⌃ control / Ctrl\");\n}\n\n/**\n * 获得当前 OS 环境下的 Shift 键 UI 元素\n */\nfunction V_ui_getShiftKeyUI() {\n    return V_ui_wrap_kbd(\"⇧ shift\");\n}\n\n/**\n * 获得当前 OS 环境下的 Alt / Option 键 UI 元素\n */\nfunction V_ui_getAltKeyUI() {\n    return V_ui_wrap_kbd(env.os.macOS ? \"⌥ option\" : \"Alt\");\n}\n\n/**\n * 获得当前 OS 环境下的 Windows / Command 键 UI 元素\n */\nfunction V_ui_getMetaKeyUI() {\n    return V_ui_wrap_kbd(env.os.macOS ? \"⌘ command\" : \"Win\");\n}\n\n/**\n * 获得滚动条宽度\n */\nfunction V_ui_scrollWidth() {\n    let sc,\n        d = document.createElement(\"DIV\");\n    d.style.cssText = \"position: absolute; top: -9999px; width: 100px; height: 100px; overflow: hidden;\";\n    sc = document.body.appendChild(d).clientWidth;\n    d.style.overflowY = \"scroll\";\n    document.body.removeChild(d);\n    return sc - d.clientWidth;\n}\n\n/**\n * 获得 VLOOK 与技术支持信息内容\n * @returns string VLOOK 与技术支持信息内容\n */\nfunction V_ui_copyrightInfo() {\n    return '<div class=\"v-copyright\">'\n        + '<svg class=\"v-copyright-svg-ico\" width=\"24px\" height=\"24px\" style=\"display: inline-block; vertical-align: middle; cursor: pointer;\"><use xlink:href=\"#icoVLOOK\"></use></svg>' + tag_2space\n        // + 'Document author: ' + V_util_getMetaByName(\"author\") + '.' + tag_2space\n        + 'Published with <a href=\"https://github.com/MadMaxChow/VLOOK\" target=\"_blank\"><strong>VLOOK</strong></a>™ (V17.0) &amp; <a href=\"https://www.typora.io\" target=\"_blank\"><strong>Typora</strong></a>.'\n        + tag_2space + 'Support: <strong><a href=\"https://qm.qq.com/cgi-bin/qm/qr?k=oB8wpFG_4SEMf1CL9qVy-jMw0CMfSwff&jump_from=webapi\">QQ Group</a></strong> / <strong><a href=\"mailto:67870144@qq.com?subject=Feedback%20about%20VLOOK%20' + V_ver + '&body=Hi,%0D%0A%0D%0A====================%0D%0A%0D%0A' + encodeURI(env.print(gTrue)) + '\">Email</a></strong>.'\n        + '</div>'\n}\n\n/**\n * 判断是否为小屏\n */\nfunction V_ui_isSmallScreen() {\n    return $(window).w() <= 1280;\n}\n\n/**\n * 微调页内跳转后的滚动条位置\n * @param anchor 锚点名称，不含 #，如含 # 会自动过滤\n */\nfunction V_ui_tuningScrollTop(anchor) {\n    if (anchor !== gUndefined && anchor.sW(\"#\"))\n        anchor = anchor.s(1, anchor.length);\n    if (anchor === gUndefined || anchor.x().length === 0)\n        return;\n\n    let t = JS_parseInt(iChapNav.ui.c(s_Top)),\n        h = JS_parseInt(iChapNav.ui.c(s_Height)),\n        y = 10,\n        aObj = $(\"#\" + JS_decodeURI(anchor) + \", a[name='\" + anchor + \"']\"),\n        tag = aObj.prop(s_TagName);\n\n    if (tag !== gUndefined)\n        tag = tag.l();\n\n    // h1-6\n    if (tag !== gUndefined && \"h1h2h3h4h5h6\".i(tag) > -1) {\n        y += (tag === \"h6\")\n            ? (t + h + 16)\n            : (aObj.ht() + 10 + (JS_parseInt(tag.s(1, 2)) - 1) * 6);\n        y -= JS_parseInt(V_util_getVarVal(\"--v-top-margin\"));\n    }\n    // 从底部脚注列表回到脚注位置\n    else if (anchor.sW(\"ref-footnote\"))\n        y += 70;\n    // 其他情况\n    else\n        y += t + h;\n    // 微调滚动位置\n    $(document).scrollTop($(document).scrollTop() - y);\n}\n\n/**\n * 生成 SVG 图标\n * @param i 图标资源集标识\n * @param w 图标宽度\n * @param h 图标高度\n * @param c 内置图标样式 v-svg-ico-xxx 标识：light / dark / alpha / ...\n * @param s 扩展补充的 style 样式\n */\nfunction V_ui_generateSvgIcon(i, w, h, c, s) {\n    s = (s !== gUndefined) ? ' style=\"' + s + '\"' : \"\"\n    return '<svg width=\"' + w + 'px\" height=\"' + h + 'px\"' + s + ' class=\"v-svg-small-ico\">'\n        + '<use class=\"v-svg-ico-' + c + '\" xlink:href=\"#' + i + '\">'\n        + '</use></svg>';\n}\n\n/**\n * 初始 UI 国际化\n */\nfunction V_ui_initI18n() {\n    if (ContentFolder_ui !== gUndefined) {\n        ContentFolder_ui.f(\"div > span\").a(s_Title, [\n            \"查看更多\",\n            // \"查看更多\",\n            \"View More\",\n            // \"Voir Plus\",\n            // \"Mehr sehen\",\n            // \"Ver más\",\n            // \"Посмотреть ещё\",\n            // \"もっと見る\",\n            // \"더보기\"\n        ][V_lang_id]);\n    }\n\n    iToolbar.btns[s_NavCenter].a(s_DataTips, [\n        \"<strong>隐藏</strong> / <strong>显示</strong> 导航中心\",\n        // \"<strong>隱藏</strong> / <strong>顯示</strong> 導航中心\",\n        \"<strong>Hide</strong> / <strong>Show</strong> Navigation Center\",\n        // \"<strong>Cacher</strong> / <strong>Montrer</strong> Centre de navigation\",\n        // \"<strong>Esconder</strong> / <strong>Show</strong> Navigationszentrum\",\n        // \"<strong>Esconder</strong> / <strong>Show</strong> Centro de navegación\",\n        // \"<strong>Скрывать</strong> / <strong>Показывать</strong> Центр навигации\",\n        // \"<strong>隠れる</strong> / <strong>見せる</strong> ナビゲーションセンター\",\n        // \"<strong>숨다</strong> / <strong>보여 주다</strong> 내비게이션 센터\"\n    ][V_lang_id] + \"\\n<sub>\" + V_ui_wrap_kbd(\"O\") + \"</sub>\");\n\n    iToolbar.btns[s_ColorScheme].a(s_DataTips, [\n        \"切换 [ <strong>黑暗</strong> / <strong>明亮</strong> ] 模式\",\n        // \"切換 [ <strong>黑暗</strong> / <strong>明亮</strong> ] 模式\",\n        \"Switch <strong>Dark</strong> / <strong>Light</strong> Mode\",\n        // \"Basculer en mode <strong>Sombre</strong> / <strong>Clair</strong>\",\n        // \"Schalten Sie den  / <strong>Hell</strong> -Modus um\",\n        // \"Cambiar el modo <strong>Oscuro</strong> / <strong>Claro</strong>\",\n        // \"Переключить <strong>Темный</strong> / <strong>Светлый</strong> режим\",\n        // \"<strong>ダーク</strong> / <strong>ライト</strong> モードの切り替え\",\n        // \"<strong>다크</strong> / <strong>라이트</strong> 모드 전환\"\n    ][V_lang_id] + \"\\n<sub>\" + V_ui_wrap_kbd(\"D\") + \"</sub>\");\n\n    iToolbar.btns[s_FontTheme].a(s_DataTips, [\n        \"切换 字体风格\",\n        // \"切換 字體風格\",\n        \"Switch Font Theme\",\n        // \"Changer de style de police\",\n        // \"Schriftart wechseln\",\n        // \"Cambiar estilo de fuente\",\n        // \"Переключить стиль шрифта\",\n        // \"フォントスタイルの切り替え\",\n        // \"글꼴 스타일 전환\"\n    ][V_lang_id] + \"\\n<sub>\" + V_ui_wrap_kbd(\"A\") + \"</sub>\");\n\n    iToolbar.btns[s_ParagraphNav].a(s_DataTips, [\n        \"段落导航 模式\",\n        // \"段落導航 模式\",\n        \"Paragraph Navigation mode\",\n        // \"Mode de navigation de paragraphe\",\n        // \"Absatznavigationsmodus\",\n        // \"Modo de navegación de párrafo\",\n        // \"Режим навигации по абзацам\",\n        // \"段落ナビゲーションモード\",\n        // \"단락 탐색 모드\"\n    ][V_lang_id]);\n\n    iToolbar.btns[s_Spotlight].a(s_DataTips, [\n        \"聚光灯\",\n        // \"聚光燈\",\n        s_Spotlight,\n        // \"Projecteur\",\n        // \"Scheinwerfer\",\n        // \"Destacar\",\n        // \"Прожектор\",\n        // \"スポットライト\",\n        // \"스포트라이트\"\n    ][V_lang_id] + \"\\n<sub>\" + V_ui_wrap_kbd(\"S\") + \"</sub>\");\n\n    iToolbar.btns[s_LaserPointer].a(s_DataTips, [\n        \"激光笔\",\n        // \"激光筆\",\n        \"Laser Pointer\",\n        // \"Pointeur Laser\",\n        // \"Laserpointer\",\n        // \"Puntero Láser\",\n        // \"Лазерный Указатель\",\n        // \"レーザーポインター\",\n        // \"레이저 포인터\"\n    ][V_lang_id] + \"\\n<sub>\" + V_ui_wrap_kbd(\"P\") + \"</sub>\");\n\n    iToolbar.btns[s_Print].a(s_DataTips, [\n        \"打印...\",\n        // \"打印...\",\n        \"Print...\",\n        // \"Imprimer...\",\n        // \"Drucken...\",\n        // \"Impresión...\",\n        // \"Печать...\",\n        // \"印刷する...\",\n        // \"인쇄...\"\n    ][V_lang_id]);\n\n    iChapNav.prev.ui.a(s_DataTips, [\n        \"前一章\",\n        // \"前一章\",\n        \"Previous Chapter\",\n        // \"Chapitre Précédent\",\n        // \"Vorheriges Kapitel\",\n        // \"Capítulo previo\",\n        // \"Предыдущая глава\",\n        // \"前の章\",\n        // \"이전 장\"\n    ][V_lang_id] + \"\\n<sub>\" + V_ui_wrap_kbd(\"◄\") + \"</sub>\");\n\n    iChapNav.next.ui.a(s_DataTips, [\n        \"后一章\",\n        // \"後一章\",\n        \"Next Chapter\",\n        // \"Chapitre Suivant\",\n        // \"Nächstes Kapitel\",\n        // \"Siguiente capítulo\",\n        // \"Следующая глава\",\n        // \"次の章\",\n        // \"다음 장\"\n    ][V_lang_id] + \"\\n<sub>\" + V_ui_wrap_kbd(\"►\") + \"</sub>\");\n\n    iChapNav.dt.a(s_DataTips, [\n        \"回到封面\",\n        // \"回到封面\",\n        \"Back to cover\",\n        // \"Retour à la couverture\",\n        // \"Zurück zur Titelseite\",\n        // \"Volver a la portada\",\n        // \"Вернуться к обложке\",\n        // \"表紙に戻る\",\n        // \"표지로 돌아 가기\"\n    ][V_lang_id]);\n\n    iChapNav.current.ui.a(s_DataTips, [\n        \"回到本章的开始\",\n        // \"回到本章的開始\",\n        \"Go back to the beginning of this chapter\",\n        // \"Retourner au début de ce chapitre\",\n        // \"Gehen Sie zurück zum Anfang dieses Kapitels\",\n        // \"Regrese al comienzo de este capítulo\",\n        // \"Вернитесь к началу этой главы\",\n        // \"この章の始めに戻る\",\n        // \"이 장의 시작 부분으로 돌아 가기\"\n    ][V_lang_id]);\n\n    iFigNav.btns.prev.a(s_Title, \"[ ← ] \" + [\n        \"前一张\",\n        // \"前一張\",\n        \"Previous\",\n        // \"Précédent\",\n        // \"Previo\",\n        // \"Próximo\",\n        // \"Предыдущая фотографияs\",\n        // \"前へ\",\n        // \"이전\"\n    ][V_lang_id]);\n\n    iFigNav.btns.next.a(s_Title, \"[ → ] \" + [\n        \"后一张\",\n        // \"後一張\",\n        \"Next\",\n        // \"Le suivant\",\n        // \"Nächster\",\n        // \"Próximo\",\n        // \"Следующий\",\n        // \"次の\",\n        // \"다음\"\n    ][V_lang_id]);\n\n    iFigNav.btns.close.a(s_Title, \"[ ESC ] \" + [\n        \"关闭\",\n        // \"關閉\",\n        \"Close\",\n        // \"Fermer\",\n        // \"Schließen\",\n        // \"Cerrar\",\n        // \"близко\",\n        // \"閉じる\",\n        // \"닫기\"\n    ][V_lang_id]);\n\n    iFontTheme.ui.f(\".v-font-package\").t([\n        \"字体\",\n        // \"字體包\",\n        \"Font\",\n        // \"Package de polices\",\n        // \"Schriftpaket\",\n        // \"Paquete de fuentes\",\n        // \"Пакет шрифтов\",\n        // \"フォントパッケージ\",\n        // \"글꼴 패키지\"\n    ][V_lang_id] + \" \");\n\n    iFontTheme.ui.f(\".v-font-theme-info\").h([\n        \"若无法连接互联网加载在线版本字体，建议将字体直接下载到本地\",\n        // \"若無法連接互聯網加載在線版本字體，建議將字體直接下載到本地\",\n        \"If you cannot connect to the Internet to load the online version of the font, it is recommended to download the font directly to the local\",\n        // \"Si vous ne pouvez pas vous connecter à Internet pour charger la version en ligne de la police, il est recommandé de télécharger la police directement sur le\",\n        // \"Wenn Sie keine Verbindung zum Internet herstellen können, um die Online-Version der Schriftart zu laden, wird empfohlen, die Schriftart direkt auf die lokale Version herunterzuladen\",\n        // \"Si no puede conectarse a Internet para cargar la versión en línea de la fuente, se recomienda descargar la fuente directamente al local.\",\n        // \"Если вы не можете подключиться к Интернету для загрузки онлайн-версии шрифта, рекомендуется загрузить шрифт непосредственно на локальный компьютер.\",\n        // \"インターネットに接続してオンラインバージョンのフォントを読み込めない場合は、フォントをローカルに直接ダウンロードすることをお勧めします。\",\n        // \"온라인 버전의 글꼴을로드하기 위해 인터넷에 연결할 수없는 경우 글꼴을 로컬로 직접 다운로드하는 것이 좋습니다.\"\n    ][V_lang_id] + \" (<a href='https://github.com/MadMaxChow/VLOOK/blob/master/FONT.md'>\" + [\n        \"主站\",\n        // \"主站\",\n        \"Primary\",\n        // \"Primaire\",\n        // \"Primär\",\n        // \"Primario\",\n        // \"Первичный\",\n        // \"主要\",\n        // \"위성을 가진 행성\"\n    ][V_lang_id] + \"</a> | <a href='https://gitee.com/madmaxchow/VLOOK/blob/master/FONT.md'>\" + [\n        \"备用\",\n        // \"備用\",\n        \"Standby\",\n        // \"Veille\",\n        // \"Standby\",\n        // \"En espera\",\n        // \"Резервный\",\n        // \"スタンバイ\",\n        // \"대기\"\n    ][V_lang_id] + \"</a>)\");\n\n    iFootNote.buttonSeeAll.ch(\"a\").t([\n        \"查看所有脚注\",\n        // \"查看所有腳註\",\n        \"View all footnotes\",\n        // \"Afficher toutes les notes de bas de page\",\n        // \"Alle Fußnoten anzeigen\",\n        // \"Ver todas las notas al pie\",\n        // \"Просмотреть все сноски\",\n        // \"すべての脚注を見る\",\n        // \"모든 각주보기\"\n    ][V_lang_id] + \" ▶\");\n\n    ZoomView_ui.t(\"⊖ \" + [\n        \"缩放\",\n        // \"縮放\",\n        \"Zoom\",\n        // \"Zoom\",\n        // \"Zoomen\",\n        // \"Zoom\",\n        // \"Увеличить\",\n        // \"ズーム\",\n        // \"줌\"\n    ][V_lang_id] + \" ⊕\");\n}\n\n/**\n * 移动到中间\n * @param s 源对象\n */\nfunction V_ui_moveToCenter(s) {\n    let l = ($(window).w() - s.w()) / 2,\n        r = s_Auto;\n    if (env.device.mobile) { // 移动端\n        l = 10;\n        r = 10;\n    }\n\n    s.c(s_Left, l)\n        .c(s_Right, r)\n        .c(s_Top, ($(window).ht() - s.ht()) / 2);\n}\n\n/**\n * 移动到中间\n * @param s 源对象\n * @param t 目标对象\n */\nfunction V_ui_moveToTarget(s, t) {\n    let l = t.o().left,\n        w = s.w() + JS_parseInt(s.c(s_PaddingLeft))\n            + JS_parseInt(s.c(s_PaddingRight))\n            + JS_parseInt(s.c(s_BorderWidth)) * 2;\n\n    if (l + w + 10 > $(window).w())\n        l = $(window).w() - w - 10;\n\n    s.c(s_Left, l)\n        .c(s_Top, t.o().top - $(document).scrollTop() + t.ht() + 10);\n}\n\n/**\n * 进行文档导航相关的 UI 元素的适配处理\n */\nfunction V_ui_adjustAll() {\n    if (V_ui_processingAdjust)\n        return;\n\n    V_ui_processingAdjust = gTrue;\n\n    if (iNavCenter.adjust())\n        ContentFolder_adjust();\n    iChapNav.adjust();\n    iToolbar.adjust();\n\n    V_ui_processingAdjust = gFalse;\n}\n\n/**\n * 模拟等待页面完成跳转后，再进行导航中心布局自适应处理\n */\nfunction V_ui_adjustAllDelay() {\n    // LOG(\"Adjust all delay ...\");\n    setTimeout(function () {\n        V_ui_adjustAll();\n        ExtQuote_uniteColumnsHeight();\n    }, 500);\n}\n\n/**\n * 根据设备类型自适应hover样式\n */\nfunction V_ui_adjustHoverStyle() {\n    // 移动设备时解绑样式事件\n    if (env.device.mobile) {\n        $(s_CssBtn_BtnGroup).uH();\n        $(\".\" + s_CssSegmentBtn).uH();\n        $(\".\" + s_CssAccentBtn).uH();\n        ZoomView_ui.uH();\n        $(\".v-doc-lib-board>.item\").uH();\n        $(\".v-std-code, .v-tag, .v-badge-name\").uH();\n        $(\".\" + s_CssBadgeValue).uH();\n    }\n    // 非移动设备时绑定样式事件\n    else {\n        // 所有常规按钮 hover 事件处理\n        V_ui_bindHover($(s_CssBtn_BtnGroup));\n        // 所有导航中心分段控制按钮 hover 事件处理\n        V_ui_bindHover($(\".\" + s_CssSegmentBtn));\n        // 所有辅助按钮 hover 事件处理\n        V_ui_bindHover($(\".\" + s_CssAccentBtn));\n        // 状态栏上缩放文档按钮\n        V_ui_bindHover(ZoomView_ui);\n        // 文库按钮 hover 事件处理\n        V_ui_bindHover($(\".v-doc-lib-board>.item\"));\n        // 代码、标签类 hover 事件处理\n        V_ui_bindHover($(\".v-std-code, .v-tag, .v-badge-name\"));\n        V_ui_bindHover($(\".\" + s_CssBadgeValue), gTrue);\n    }\n}\n\n/**\n * 为对象绑定 hover 事件\n * @param target 目标对象\n * @param cancleParent 是否临时模拟取消父元素的 hover 处理（即 mouseenter）\n */\nfunction V_ui_bindHover(target, cancleParent) {\n    target.hover(function () {\n        let _t = $(this);\n        JQ_addClass(_t, s_Hover);\n        if (cancleParent)\n            JQ_removeClass(_t.p(), s_Hover);\n    }, function () {\n        let _t = $(this);\n        JQ_removeClass(_t, s_Hover);\n        if (cancleParent)\n            _t.p().tr(\"mouseenter\");\n    });\n}\n\n/**\n * 为对象取消 hover 事件绑定\n * @param t 目标对象\n */\nfunction V_ui_unbindHover(t) {\n    t.unbind(\"mouseenter\").unbind(\"mouseleave\");\n}\n\n/**\n * 初始化动效处理\n */\nfunction V_ui_initEffectLevel() {\n    // 不启用动效\n    if (V_ui_effect < 1)\n        V_util_setVarVal(\"--v-trans-value\", s_None);\n    // 动效等级为 2 或更高级时才开启毛玻璃动效（如遮罩、插图浏览器背景）\n    else if (V_ui_effect >= 2)\n        JQ_addClass($(\".v-backdrop-blurs\"), s_Enabled);\n    // 以下动效等级为 1 或更高级时才开启\n    // V_ui_addAnimate($(\".v-btn, .v-btn-group, .v-doc-lib-board, .v-doc-lib-board.flip\"));\n    V_ui_addAnimate($(\".v-doc-lib-board>.flip\"));\n    V_ui_addAnimate($(\"a kbd, a img\"));\n}\n\n/**\n * 为指定对象添加过渡动画\n * @param t 目标对象\n * @param css 应用的属性，不指定时默认为 “all”\n */\nfunction V_ui_addAnimate(t, css) {\n    if (V_ui_effect >= 1) {\n        if  (css === gUndefined)\n            JQ_addClass(t, s_CssTransitionAll);\n        else {\n            let attrSet = css.split(\" \");\n            for (let i = 0; i < attrSet.length; i++)\n                JQ_addClass(t, \"v-transition-\" + attrSet[i]);\n        }\n    }\n}\n\n/**\n * 为指定对象移除过渡动画\n * @param t 目标对象\n * @param css 应用的属性，不指定时默认为 “all”\n */\nfunction V_ui_removeAnimate(t, css) {\n    if  (css === gUndefined)\n        JQ_removeClass(t, s_CssTransitionAll);\n    else {\n        let attrSet = css.split(\" \");\n        for (let i = 0; i < attrSet.length; i++)\n            JQ_removeClass(t, \"v-transition-\" + attrSet[i]);\n    }\n}\n\n/**\n * 检查目标对象是否有指定的任意过渡动画\n * @param t 目标对象\n * @returns boolean true：有，false：无\n */\nfunction V_ui_existAnimate(t) {\n    return t.a(s_Class).i(\"v-transition-\") > -1;\n}\n\n/**\n * 初始化热键\n */\nfunction V_ui_initHotkey() {\n    // 键盘按下事件\n    $(document).keydown(function (event) {\n        const c = event.keyCode || event.which || event.charCode;\n        let cK = (event.ctrlKey ? \"⌃ Ctrl _ \" : \"\")\n            + (event.shiftKey ? \"⇧ Shift _ \" : \"\")\n            + (event.altKey ? \"⌥ Alt / Option_ \" : \"\")\n            + (event.metaKey ? \"Windows / ⌘ Command _ \" : \"\");\n\n        // 按下 alt / option 键\n        if (V_util_holdKey_Alt() === true) {\n            gHoldKeyAlt = gTrue;\n            // 切换复制光标、内容助手的复制图标\n            V_util_setVarVal(\"--cur-copy\", V_util_getVarVal(\"--cur-copy-as-md\"));\n            ContentAssistor_btns_copyContent.h(V_ui_generateSvgIcon(\"icoCopyAsMd\", 16, 16, s_Light));\n        }\n\n        // 按了组合键时忽略（除 Shift）\n        if (event.ctrlKey || event.altKey || event.metaKey)\n            return;\n\n        // 焦点不在文档内容上时的子模块热键操作处理\n        // 第一梯队，避免同时触发（如 ESC 导致同时退出多个）\n        iSpotlight.disposeHotkey(c, cK);\n        iLaserPointer.disposeHotkey(c, cK);\n        iParagraphNav.disposeHotkey(c, cK);\n        // 第二梯队\n        WelcomePage_disposeHotkey(c, cK);\n        iFigNav.disposeHotkey(c, cK);\n        iNavCenter.disposeHotkey(c, cK);\n        iFontTheme.disposeHotkey(c, cK);\n        iInfoTips.disposeHotkey(c, cK);\n        iFootNote.disposeHotkey(c, cK);\n        LinkTool_disposeHotkey(c, cK);\n\n        // 文档的热键操作处理，只在文档为当前焦点且没有弹层时才有效\n        if (V_doc_block || document.activeElement.tagName.l() !== \"body\")\n            return;\n\n        // 逐章导航热键操作处理\n        iChapNav.disposeHotkey(c, cK);\n\n        switch (c) {\n            case 79: // O\n                // V_report_push([s_Hotkey, cK, String.fromCharCode(c), 0]);\n                if (iFigNav.ui.isShowed())\n                    return;\n                iToolbar.btns[s_NavCenter].tr(s_Click);\n                break;\n            case 76: // L\n                // V_report_push([s_Hotkey, cK, String.fromCharCode(c), 0]);\n                if (iNavCenter.docLib.enabled)\n                    iNavCenter.docLib.handle.tr(s_Click);\n                break;\n            case 68: // D\n                // V_report_push([s_Hotkey, cK, String.fromCharCode(c), 0]);\n                iToolbar.btns[s_ColorScheme].tr(s_Click);\n                break;\n            case 65: // A\n                // V_report_push([s_Hotkey, cK, String.fromCharCode(c), 0]);\n                if (iFontTheme.ui.isHidden())\n                    iToolbar.btns[s_FontTheme].tr(s_Click);\n                else\n                    iFontTheme.hide();\n                break;\n            case 88: // X\n                // V_report_push([s_Hotkey, cK, String.fromCharCode(c), 0]);\n                TableCross_toggle();\n                break;\n            case 80: // P\n                // V_report_push([s_Hotkey, cK, String.fromCharCode(c), 0]);\n                iParagraphNav.hide();\n                iSpotlight.hide();\n                iLaserPointer.tg();\n                break;\n            case 83: // S\n                // V_report_push([s_Hotkey, cK, String.fromCharCode(c), 0]);\n                iParagraphNav.hide();\n                iLaserPointer.hide();\n                iSpotlight.tg();\n                break;\n            case 27: // ESC\n                // V_report_push([s_Hotkey, cK, 'ESC', 0]);\n                if (!V_doc_block) {\n                    ToolTips_hide();\n                    LinkTool_hide();\n                }\n\n                // 表格为阅读模式时，则退出\n                if (!TableCross_ui.isHidden())\n                    TableCross_disable();\n\n                // 拦截该按键事件，避免退出全屏（如：Safari）\n                window.event.returnValue = gFalse;\n                break;\n        }\n    });\n\n    $(document).keyup(function (event) {\n        // 松开 alt / option 键\n        if (gHoldKeyAlt === true) {\n            gHoldKeyAlt = gFalse;\n            // 恢复复制光标、内容助手的复制图标\n            V_util_setVarVal(\"--cur-copy\", V_util_getVarVal(\"--cur-copy-normal\"));\n            ContentAssistor_btns_copyContent.h(V_ui_generateSvgIcon(\"icoCopy\", 16, 16, s_Light));\n        }\n    });\n}\n// V.ui\n// ========================================\n\n// ========================================\n// VLOOK 语言类\nlet V_lang_id = 1;\n\n/**\n * 初始化语言\n */\nfunction V_lang_init() {\n    switch (env.language.base) {\n        case \"zh\":\n            // V_lang_id = 1; // 中（繁）\n            // if (env.language.subset.l() === \"cn\" || env.language.subset.l() === \"chs\")\n                V_lang_id = 0; // 中（简）\n            break;\n        // case \"en\":\n        //     V_lang_id = 2; // 英语\n        //     break;\n        // case \"fr\":\n        //     V_lang_id = 3; // 法语\n        //     break;\n        // case \"de\":\n        //     V_lang_id = 4; // 德语\n        //     break;\n        // case \"es\":\n        //     V_lang_id = 5; // 西班牙语\n        //     break;\n        // case \"ru\":\n        //     V_lang_id = 6; // 俄语\n        //     break;\n        // case \"ja\":\n        //     V_lang_id = 7; // 日语\n        //     break;\n        // case \"ko\":\n        //     V_lang_id = 8; // 韩语\n        //     break;\n        default:\n            V_lang_id = 1; // 默认：英语\n    }\n}\n// V.lang\n// ========================================\n\n// 动画类\n// V.animate = {\n//     speed : 300, // 动画速度，值越小越快\n//     tension : 200, // 动画张力参数\n//     friction : 20 // 动画摩擦力参数\n// }\n\n// ========================================\n// 文档类\nlet V_doc_block = gFalse; // 当前文档是否被模态窗口阻塞\n\n// 滚动信息\nlet V_doc_scroll_lastUpdate = 0, // 最后一次根据滚动变动更新 UI 的时间\n    V_doc_scroll_lastTop = 0; // 最后一次记录的滚动位置\n/**\n * 更新页面滚动信息\n *\n * @param u 最后更新滚动信息的时间时间\n * @param t 最后更新的滚动位置\n */\nfunction V_doc_scroll_update(u, t) {\n    V_doc_scroll_lastUpdate = u;\n    V_doc_scroll_lastTop = t;\n}\n\n/**\n * 冻结文档滚动\n */\nfunction V_doc_scroll_freeze() {\n    JQ_exchangeClass(DOM_body(), s_Unfreeze, s_Freeze);\n}\n\n/**\n * 解冻文档滚动\n */\nfunction V_doc_scroll_unfreeze() {\n    JQ_exchangeClass(DOM_body(), s_Freeze, s_Unfreeze);\n}\n\n// 内容计数器\nlet V_doc_counter_fig = 0, // 插图总数\n    V_doc_counter_table = 0, // 表格总数\n    V_doc_counter_codeblock = 0, // 代码块总数\n    V_doc_counter_audio = 0, // 非 mini 模式音频总数\n    V_doc_counter_audiomini = 0, // mini 模式音频总数\n    V_doc_counter_video = 0; // 视频总数\n\n/**\n * 初始化外部链接（如：http://、https://、ftp://、站内链接等），为其添加 target 参数\n */\nfunction V_doc_link_adjustExternal() {\n    $(\"a:not([href^='#'])\").e(function () {\n        let a = $(this);\n        a.a(s_Target, a.a(s_Href));\n    });\n}\n// ========================================\n\n// ========================================\n// 打印类\n// 打印模式。none：指由直接使用浏览器自带的打印，vlook：指先通过 vlook 进行预处理\nlet V_print_mode = s_None;\n\n/**\n * 打印文档前处理\n */\nfunction V_print_ready() {\n    // V_report_push([s_Style, 'Print', '', 0]);\n    V_print_mode = \"VLOOK\";\n\n    // 若当前为 Dark Mode 则强制临时切换为 Light 模式\n    if (ColorScheme.scheme === s_Dark) {\n        ColorScheme.schemeBeforePrint = ColorScheme.scheme;\n        ColorScheme.scheme = s_Light;\n        ColorScheme.refresh();\n    }\n\n    // 将 Mermaid 图表题注 width 等属性临时禁用，并调整为 100%，以适应打印纸张宽度\n    $(\".\" + s_CssCaption__Mermaid).e(function () {\n        let _t = $(this);\n        _t.a(s_BeforePrintWidth, _t.c(s_Width));\n        _t.c(s_Width, \"100%\");\n    });\n\n    // 将 Mermaid 图表的 width, max-width 等属性临时禁用，并调整为 100%，以适应打印纸张宽度\n    $(\".\" + s_CssCaption__Mermaid + \" svg\").e(function () {\n        let _t = $(this);\n        if (_t.a(s_Width) === \"100%\") {\n            // 针对流程图\n            if (_t.a(s_Style).i(s_MaxWidth + \":\") > -1) {\n                _t.a(s_BeforePrintMaxWidth, _t.c(s_MaxWidth));\n                _t.c(s_MaxWidth, \"\");\n            }\n            // 针对状态机图\n            else if (_t.a(s_Style).i(s_Width + \":\") > -1) {\n                _t.a(s_BeforePrintWidth, _t.c(s_Width));\n                _t.c(s_Width, \"100%\");\n            }\n        } else { // 针对顺序图\n            _t.a(s_BeforePrintWidth, _t.a(s_Width));\n            _t.c(s_Width, \"100%\");\n        }\n    });\n\n    // 展开折叠的引用块\n    $(\"[\" + s_DataBlockquoteFolded + \"='true']\").e(function () {\n        ExtQuote_unfold($(this));\n    });\n\n    // 展开所有折叠的长内容\n    $(\"[\" + s_DataContentFolded + \"='true']\").e(function () {\n        $(this).next(\".\" + s_CssContentExpander).ch(\".v-btn\").tr(s_Click);\n    });\n\n    // 展开所有折叠的表格行\n    $(\".v-tbl-row-g-btn\").e(function () {\n        RowGroup_open($(this).p().p());\n    });\n\n    // 隐藏画中画\n    PicInPic_hide();\n\n    // 若存在「刮刮卡」内容，则先让用户确认是否显示\n    let rainbowCoats = $(\".\" + s_CssRbCoat);\n    if (rainbowCoats.length > 0) {\n        if (confirm(\"文档含有「刮刮卡」内容，打印前是否显示实际内容？\")) {\n            rainbowCoats.e(function () {\n                let _t = $(this);\n                if (_t.a(s_DataRbCoatShowed).sW(\"f\"))\n                    RainbowCoat_show(_t);\n            });\n        }\n    }\n\n    // 调用浏览器的打印功能\n    // 延后是为以上相关的异步和界面完成刷新\n    setTimeout(function () {\n        window.print();\n    }, 2000);\n}\n\n/**\n * 打印文档后处理\n */\nfunction V_print_done () {\n    // 若打印前为 Dark Mode 则先恢复为 Dark Mode\n    if (ColorScheme.schemeBeforePrint === s_Dark) {\n        ColorScheme.tg();\n    }\n\n    // 恢复打印前的配置，详见 V_print_ready()\n    $(\".\" + s_CssCaption__Mermaid).e(function () {\n        let _t = $(this);\n        _t.c(s_Width, _t.a(s_BeforePrintWidth));\n        _t.removeAttr(s_BeforePrintWidth);\n    });\n\n    //恢复打印前的配置，详见 V_print_ready()\n    $(\".\" + s_CssCaption__Mermaid + \" svg\").e(function () {\n        let _t = $(this);\n        if (_t.a(s_Width) === \"100%\") {\n            // 针对流程图\n            if (_t.a(s_Style).i(s_MaxWidth + \":\") > -1) {\n                _t.c(s_MaxWidth, _t.a(s_BeforePrintMaxWidth));\n                _t.removeAttr(s_BeforePrintMaxWidth);\n            }\n            // 针对状态机图\n            else if (_t.a(s_Style).i(s_Width + \":\") > -1) {\n                _t.c(s_Width, _t.a(s_BeforePrintWidth));\n                _t.removeAttr(s_BeforePrintWidth);\n            }\n        } else { // 针对顺序图\n            _t.c(s_Width, _t.a(s_BeforePrintWidth));\n            _t.removeAttr(s_BeforePrintWidth);\n        }\n    });\n\n    // 隐藏所有刮刮卡\n    $(\".\" + s_CssRbCoat).e(function () {\n        let _t = $(this);\n        if (_t.a(s_DataRbCoatShowed).sW(\"t\"))\n            RainbowCoat_hide(_t);\n    });\n\n    V_print_mode = s_None;\n}\n// ========================================\n\n// ========================================\n// VLOOK 埋点数据统计\n// 上报事件的累计次数，用于标识不同的上报事件 iframe 的 id\nlet V_report_count =  0;\n\n/**\n * 提交统计数据\n */\nfunction V_report_submit(loadTimeCost) {\n    // VLOOK 基本信息\n    let sd = \"?p=vlook\"\n        + \"&ver=\" + V_ver\n        + \"&thm=\" + V_util_getTemplateTheme();\n\n    sd += \"&d=\" + (env.device.mobile ? \"mob\" : \"\") // 设备类型\n        + \"&dpr=\" + env.display.DPR; // DPR\n\n    // OS 信息\n    sd += \"&os=\";\n    if (env.os.macOS)\n        sd += \"macOS\";\n    else if (env.os.Windows)\n        sd += \"Windows\";\n    else if (env.os.iOS)\n        sd += \"iPhone\";\n    else if (env.os.Linux)\n        sd += \"iPhone\";\n    else\n        sd += \"others\";\n\n    // 浏览器及版本\n    sd += \"&b=\";\n    if (env.browser.Edge)\n        sd += \"edge&bv=\" + env.browserVer.Edge;\n    else if (env.browser.Chrome)\n        sd += \"chrome&bv=\" + env.browserVer.Chrome;\n    else if (env.browser.Firefox)\n        sd += \"firefox&bv=\" + env.browserVer.Firefox;\n    else if (env.browser.Safari)\n        sd += \"safari&bv=\" + env.browserVer.Safari;\n    else\n        sd += \"others&bv=\";\n\n    // 浏览器的颜色方案\n    sd += \"&cs=\" + V_util_getVarVal(\"--v-color-scheme\").rA(\"\\\"\", \"\").x();\n\n    sd += \"&lang=\" + V_lang_id // 浏览器语言\n        + \"&size=\" + VOM_doc().t().length // 文档大小\n        + \"&time=\" + loadTimeCost; // 加载文档时间\n\n    // 图片插图数据\n    sd += \"&img=\" + $(\".\" + s_CssFig).length\n        + \"&img-fold=\" + $(\"p[\" + s_DataContainer + \"='img'][\" + s_DataContentFolded + \"='true']\").length\n        + \"&img-fill=\" + $(\"img:not([\" + s_DataImgFill + \"])\").length\n        + \"&img-invert=\" + $(\"img[\" + s_DataDarkSrc + \"='invert']\").length\n        + \"&img-alter=\" + $(\"img[\" + s_DataDarkSrc + \"='alter']\").length\n        + \"&img-cap1=\" + $(\"div[id^=vk-id-fig][\" + s_DataIdFigType + \"='img'] .v-cap-1 strong\").length\n        + \"&img-cap2=\" + $(\"div[id^=vk-id-fig][\" + s_DataIdFigType + \"='img'] .v-cap-2\").length;\n\n    // Mermaid 插图数据\n    let mermaid = $(\".md-diagram-panel\");\n    sd += \"&mm=\" + mermaid.length\n        + \"&mm-fold=\" + $(\"div[\" + s_DataContainer + \"='svg'][\" + s_DataContentFolded + \"='true']\").length\n        + \"&mm-cap1=\" + $(\"div[id^=vk-id-fig][\" + s_DataIdFigType + \"='svg'] .v-cap-1 strong\").length\n        + \"&mm-cap2=\" + $(\"div[id^=vk-id-fig][\" + s_DataIdFigType + \"='svg'] .v-cap-2\").length;\n\n    // Mermaid 音频数据\n    sd += \"&audio=\" + $(s_Audio).length\n        + \"&mm-cap1=\" + $(\"div[id^=vk-id-audio] .v-cap-1 strong\").length\n        + \"&mm-cap2=\" + $(\"div[id^=vk-id-audio] .v-cap-2\").length;\n\n    // Mermaid 视频数据\n    sd += \"&video=\" + $(s_Video).length\n        + \"&mm-cap1=\" + $(\"div[id^=vk-id-video] .v-cap-1 strong\").length\n        + \"&mm-cap2=\" + $(\"div[id^=vk-id-video] .v-cap-2\").length;\n\n    // Mermaid 图的细类\n    let pie = 0,\n        flow = 0,\n        flowSTART = 0,\n        flowINIT = 0,\n        state = 0,\n        seq = 0,\n        classD = 0,\n        gantt = 0;\n    mermaid.e(function () {\n        let _t = $(this);\n        if (_t.f(\"g.legend\").length > 0)\n            pie++; // 饼图\n        else if (_t.f(\"g.output g.nodes\").length > 0) {\n            flow++; // 流程图\n            if (_t.f(\"g.output g.nodes g#START.node\").length > 0)\n                flowSTART++; // VLOOK 标准的流程图\n            else if (_t.f(\"g.output g.nodes g#INIT.node\").length > 0)\n                flowINIT++; // VLOOK 标准的状态机图\n        }\n        else if (_t.f(\"g.stateGroup\").length > 0)\n            state++; // 状态机图（原生）\n        else if (_t.f(\"g rect.actor\").length > 0)\n            seq++; // 顺序图\n        else if (_t.f(\"g.classGroup\").length > 0)\n            classD++; // 类图\n        else if (_t.f(\"g rect.section\").length > 0)\n            gantt++; // 甘特图\n    });\n    sd += \"&mm-pie=\" + pie\n        + \"&mm-flow=\" + flow\n        + \"&mm-flow-S=\" + flowSTART\n        + \"&mm-flow-I=\" + flowINIT\n        + \"&mm-state=\" + state\n        + \"&mm-seq=\" + seq\n        + \"&mm-class=\" + classD\n        + \"&mm-gantt=\" + gantt;\n\n    // 表格数据\n    sd += \"&tbl=\" + $(s_Table).length\n        + \"&tbl-fold=\" + $(\"figure[\" + s_DataContainer + \"='\" + s_Table + \"'][\" + s_DataContentFolded + \"='true']\").length\n        + \"&tbl-cap1=\" + $(\"div[id^=vk-id-tbl] .v-cap-1 strong\").length\n        + \"&tbl-cap2=\" + $(\"div[id^=vk-id-tbl] .v-cap-2\").length;\n\n    // 表格列格式数据\n    let fmBold = 0,\n        fmEm = 0,\n        fmUnderline = 0,\n        fmMark = 0,\n        fmDel = 0,\n        fmChk = 0,\n        fmNum = 0;\n    $(s_Table + \"[\" + s_DataColumnFmting + \"='true']\").e(function () {\n        let _t = $(this);\n        if (_t.f(\"thead .v-tbl-col-fmt-bold\").length > 0)\n            fmBold++;\n        if (_t.f(\"thead .v-tbl-col-fmt-em\").length > 0)\n            fmEm++;\n        if (_t.f(\"thead u\").length > 0)\n            fmUnderline++;\n        if (_t.f(\"thead .v-tbl-col-fmt-mark\").length > 0)\n            fmMark++;\n        if (_t.f(\"thead del\").length > 0)\n            fmDel++;\n        if (_t.f(\"thead .v-tbl-col-fmt-chkbox\").length > 0)\n            fmChk++;\n        if (_t.f(\"thead .v-tbl-col-fmt-num\").length > 0)\n            fmNum++;\n    });\n    sd += \"&tbl-fm-b=\" + fmBold\n        + \"&tbl-fm-em=\" + fmEm\n        + \"&tbl-fm-u=\" + fmUnderline\n        + \"&tbl-fm-m=\" + fmMark\n        + \"&tbl-fm-d=\" + fmDel\n        + \"&tbl-fm-chk=\" + fmChk\n        + \"&tbl-fm-num=\" + fmNum;\n\n    // 带单元格合并的表格数\n    sd += \"&tbl-cell-merge=\" + $(s_Table + \"[\" + s_DataCellMerge + \"='true']\").length;\n\n    // 带行折叠的表格数\n    sd += \"&tbl-row-group=\" + $(s_Table + \"[\" + s_DataRowGroup + \"='true']\").length;\n\n    // 代码块数据\n    sd += \"&cb=\" + $(\".\" + s_CssFences).length\n        + \"&cb-fold=\" + $(\"p[\" + s_DataContainer + \"='pre'][\" + s_DataContentFolded + \"='true']\").length\n        + \"&cb-cap1=\" + $(\"div[id^=vk-id-codeblock] .v-cap-1 strong\").length\n        + \"&cb-cap2=\" + $(\"div[id^=vk-id-codeblock] .v-cap-2\").length;\n\n    // 标签数据\n    sd += \"&tag=\" + $(\"code[class^=v-tag]\").length\n        + \"&badge=\" + $(\"code[class^=v-badge-name]\").length;\n\n    // 引用数据\n    sd += \"&bq=\" + $(s_Blockquote).length\n        + \"&bq-fold=\" + $(\"[\" + s_DataBlockquoteFolded + \"='true']\").length;\n\n    // 脚注数据\n    sd += \"&fn=\" + $(\".md-footnote\").length;\n\n    // 当前文档的 URL\n    sd += \"&url=\" + WINDOW_getHref();\n\n    // 提交统计数据\n    let vlookStat = $(\"iframe[name='vlook-stat-gitee']\");\n    vlookStat.a(s_Src,\n        \"https://madmaxchow.gitee.io/vlook/act/\" + (V_debugMode ? \"dev-\" : \"\") + \"stat-gitee.html\"\n        + encodeURI(sd));\n    // DEBUG(\"Stat. in Gitee:\\n\" + vlookStat.a(s_Src));\n}\n\n/**\n * 上报事件统计数据（基于百度统计）\n * 为兼容在本地打开的 HTML 文件，所以通过 iframe 的方式进行数据上报\n * @param d 数据数组，与百度统计的 _hmt.push([\"_trackEvent\", data[0], data[1], data[2], data[3]) 的参数保持一致\n */\n// function V_report_push(d) {\n//     return false; // 暂停事件数据上报，因百度统计免费版已下线了事件服务\n//     // ---\n//     $(\"body\").append('<iframe name=\"vk-event-' + V_report_count + '\" style=\"display: block; margin: 0; border: none; overflow: hidden; width: 100%; height: 0;\"'\n//         + ' src=\"https://madmaxchow.gitee.io/vlook/act/'\n//         + (V_debugMode ? \"dev-\" : \"\")\n//         + 'event-gitee.html'\n//         + \"?category=\" + (V_debugMode ? \"dev-\" : \"\") + d[0]\n//         + \"&action=\" + d[1]\n//         + \"&label=\" + d[2]\n//         + \"&value=\" + d[3]\n//         + \"&debug=\" + V_debugMode\n//         + '\"></iframe>');\n//\n//     // 默认在指定时间后回收 iframe 资源\n//     setTimeout(V_report_recycleResources, 10000);\n//     V_report_count++;\n// }\n\n/**\n * 转换标签名为 VLOOK 中的特定内容类型名称\n */\nfunction V_report_transTagName(t) {\n    if (t.sW(\"i\"))\n        return s_Fig + s_SuffixImg;\n    else if (t.sW(\"s\"))\n        return s_Fig + s_SuffixSvg;\n    else if (t.sW(\"t\"))\n        return s_Table;\n    else if (t.sW(\"p\"))\n        return s_Codeblock;\n    return \"Unknown\";\n}\n\n/**\n * 移除上报事件的资源\n */\nfunction V_report_recycleResources() {\n    $(\"iframe[name^=vk-event-]\").e(function () {\n        JQ_remove($(this));\n        return gFalse; // 执行一次即跳出，即每次只删除当前最早创建的\n    });\n}\n// V.report\n// ========================================\n\n// ==================== 随机颜色类 ==================== //\n\nlet RandomColor_palette = []; // 不相似颜色的色板\n\n/**\n * 生成随机颜色\n * @returns string R/G/B 颜色分量是数组\n */\nfunction RandomColor_generate() {\n    let c = [0, 0, 0];\n    c[0] = Math.floor(Math.random() * 255);\n    c[1] = Math.floor(Math.random() * 255);\n    c[2] = Math.floor(Math.random() * 255);\n    return c;\n}\n\n/**\n * 生成不相似的随机颜色\n * @returns string R/G/B 颜色分量是数组\n */\nfunction RandomColor_dissimilarRgb() {\n    // 色板为空时，生成随机颜色后直接返回\n    let c = [0, 0, 0];\n    if (RandomColor_palette.length === 0) {\n        c = RandomColor_generate();\n        RandomColor_palette.push(c);\n        return c;\n    }\n\n    // 色板不为空时，避免相似的颜色\n    let flag = gFalse,\n        t = 0,\n        d = [0, 0, 0];\n\n    // 随机生成不相似的颜色（最多尝试次数上限为 20）\n    while (!flag && t < 20) {\n        c = RandomColor_generate();\n        // 判断新生成的随机颜色，色板中是否已有相似的\n        let idx = 0;\n        for (let i = 0; i < RandomColor_palette.length; i++) {\n            idx = i;\n            d[0] = (RandomColor_palette[i][0] - c[0]) / 256;\n            d[1] = (RandomColor_palette[i][1] - c[1]) / 256;\n            d[2] = (RandomColor_palette[i][2] - c[2]) / 256;\n            // 比例两个颜色的 RGB 色差来作为相似性的依据（0.3 为经验值，值越大差异最大）\n            if (Math.sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]) < 0.3)\n                break;\n        }\n\n        // 色板中没有找到相似的颜色\n        if (idx === RandomColor_palette.length) {\n            RandomColor_palette.push(c);\n            flag = gTrue;\n        }\n        t++;\n    }\n    return c;\n}\n\n/**\n * 格式化颜色为 rgba 格式\n * @param rgb RGB 颜色分量数组\n * @param opacity 透明度，0:透明，1:不透明\n */\nfunction RandomColor_format(rgb, opacity) {\n    return \"rgba(\" + rgb[0] + \", \" + rgb[1] + \", \" + rgb[2] + \", \" + opacity + \")\";\n}\n\n// ==================== 处理耗时计时器类 ==================== //\n\n/**\n * 构造函数\n */\nfunction Stopwatch() {\n    let T = this;\n    T.sT = null; // 重置后的初始时间\n    T.lT = null; // 每次中间计时的初始时间\n\n    /**\n     * 重置计时器\n     */\n    T.reset = function () {\n        T.sT = new Date().getTime();\n    }\n\n    /**\n     * 一次中间计时开始\n     */\n    T.st = function (t) {\n        if (t !== gUndefined)\n            LOG(t);\n        T.lT = new Date().getTime();\n    }\n\n    /**\n     * 一次中间计时结束\n     * @param pre 输出内容前缀\n     * @param slient 是否为静默模式，true：是\n     */\n    T.ed = function (pre, slient) {\n        let c = new Date().getTime() - T.lT;\n        // 非静默模式时，输出计时结果\n        if (!slient) {\n            let msg = pre + \"⏱ \" + c + \" ms\";\n            if (c < 300)\n                INFO(msg);\n            else if (c < 500)\n                WARN(msg);\n            else\n                ERROR(msg);\n        }\n        return c;\n    }\n\n    /**\n     * 计时器结束\n     */\n    T.stop = function () {\n        return new Date().getTime() - T.sT;\n    }\n\n    // 初始化计时器\n    T.reset();\n}\n\n// ==================== 欢迎页 ==================== //\n\nlet WelcomePage_uiName = \".v-welcome-page\",\n    WelcomePage_ui = gUndefined, // 欢迎页主界面\n    WelcomePage_button = gUndefined, // 关闭欢迎页按钮\n    WelcomePage_tips = gUndefined, // 欢迎信息\n    WelcomePage_finished = gFalse, // 是否已加载\n    WelcomePage_mode = \"auto\"; // 模式\n/**\n * 构造函数\n * @param mode 欢迎页显示模式\n */\nfunction WelcomePage_init(mode) {\n    WelcomePage_ui = $(WelcomePage_uiName); // 欢迎页主界面\n    WelcomePage_button = $(WelcomePage_uiName + \">.v-loading\"); // 关闭欢迎页按钮\n    WelcomePage_tips = $(WelcomePage_uiName + \">.v-tips\"); // 欢迎信息\n    WelcomePage_finished = gFalse; // 是否已加载\n    WelcomePage_mode = mode; // 模式\n\n    // 初始执行\n    if (WelcomePage_mode === s_None)\n        WelcomePage_close();\n    else\n        V_ui_show(WelcomePage_ui);\n}\n/**\n * 完成所有内容加载后调用\n */\nfunction WelcomePage_done() {\n    // 关闭欢迎页事件\n    WelcomePage_button.uC().ck(function () {\n        WelcomePage_close();\n    });\n\n    WelcomePage_ui.c(s_Cursor, \"default\");\n    WelcomePage_stopAni();\n\n    WelcomePage_tips.c(s_Animation, s_None);\n\n    WelcomePage_updateCloseButton(null);\n    JQ_addClass(WelcomePage_button, \"v-btn-done\");\n\n    WelcomePage_finished = gTrue;\n\n    // auto 模式时延时自动关闭\n    if (WelcomePage_mode === s_Auto)\n        WelcomePage_autoClose();\n    // wait 模式\n    else if (WelcomePage_mode === s_Wait)\n        JQ_addClass(WelcomePage_button, s_Wait);\n}\n\n/**\n * 自动延时关闭\n */\nfunction WelcomePage_autoClose() {\n    let delaySecs = 3,\n        closeTimer = null;\n\n    __timeToClose();\n    function __timeToClose() {\n        WelcomePage_updateCloseButton(delaySecs);\n        delaySecs--;\n        if (delaySecs < 0) { // 倒计时结束\n            clearTimeout(closeTimer);\n            WelcomePage_close();\n        }\n        else\n            closeTimer = setTimeout(__timeToClose, 1000);\n    }\n}\n\n/**\n * 更新关闭按钮\n * @param sec 显示倒计时的秒数\n */\nfunction WelcomePage_updateCloseButton(sec) {\n    WelcomePage_button.h([\n        \"开始阅览\",\n        // \"開始閱覽\",\n        \"Start Reading\",\n        // \"Commence À Lire\",\n        // \"Lesen Starten\",\n        // \"Haga Clic Para Comenzar\",\n        // \"Начать Чтение\",\n        // \"読み始める\",\n        // \"읽 기 시작 하 다\"\n    ][V_lang_id]\n        + (sec == null ? \"\" : \" <span> (\" + sec + \"s)</span>\"));\n}\n\n/**\n * 停止加载时的呼吸动画\n */\nfunction WelcomePage_stopAni() {\n    WelcomePage_tips.c(s_Animation, s_None);\n}\n\n/**\n * 关闭欢迎页\n */\nfunction WelcomePage_close() {\n    WelcomePage_ui.hide();\n    V_doc_scroll_unfreeze();\n}\n\n/**\n * 处理热键操作\n * @param code 非功能键键\n * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n */\nfunction WelcomePage_disposeHotkey(code, combKeys) {\n    if (!WelcomePage_finished || WelcomePage_ui.isHidden())\n        return;\n\n    switch (code) {\n        case 13: // ENTER\n            // 关闭欢迎页\n            WelcomePage_close();\n            break;\n    }\n}\n\n// ==================== 内容助手类 ==================== //\n\nlet ContentAssistor_ui = gUndefined,\n    ContentAssistor_btns_openInFigureNav = gUndefined, // 插图浏览器中打开\n    ContentAssistor_btns_copyContent = gUndefined, // 复制内容\n    ContentAssistor_btns_tableCross = gUndefined, // 表格阅读模式（十字光标）\n    ContentAssistor_btns_picInPic = gUndefined, // 「画中画」\n    // 最后显示新标签打开按钮的内容（插图/表格等）\n    ContentAssistor_lastHover = gUndefined,\n    ContentAssistor_lastContentType = gUndefined;\n\nfunction ContentAssistor_init() {\n    ContentAssistor_ui = $(\".v-content-assistor\");\n    ContentAssistor_btns_copyContent = $(s_CssBtn__Assistor + \".copy\"); // 复制内容\n    ContentAssistor_btns_openInFigureNav = $(s_CssBtn__Assistor + \".open-in-figure-nav\"); // 插图浏览器中打开\n    ContentAssistor_btns_tableCross = $(s_CssBtn__Assistor + \".table-cross\"); // 表格阅读模式（十字光标）\n    ContentAssistor_btns_picInPic = $(s_CssBtn__Assistor + \".pic-in-pic\"); // 「画中画」\n\n    ContentAssistor_btns_openInFigureNav.a(s_DataTips, [\n        \"全屏显示\",\n        // \"全屏顯示\",\n        \"Full screen\",\n        // \"Plein écran\",\n        // \"Vollbild\",\n        // \"Pantalla completa\",\n        // \"Полноэкранный\",\n        // \"全画面表示\",\n        // \"전체 화면\"\n    ][V_lang_id]);\n\n    ContentAssistor_btns_tableCross.a(s_DataTips, V_ui_wrap_kbd(\"X\") + tag_2space + [\n        \"阅读模式\",\n        // \"閱讀模式\",\n        \"Reading mode\",\n        // \"Mode de lecture\",\n        // \"Lesemodus\",\n        // \"Modo de lectura\",\n        // \"Режим чтения\",\n        // \"読書モード\",\n        // \"읽기 모드\"\n    ][V_lang_id]);\n\n    ContentAssistor_btns_picInPic.a(s_DataTips, [\n        \"画中画\",\n        // \"畫中畫\",\n        \"Picture in picture\",\n        // \"Image dans l'image\",\n        // \"Bild im Bild\",\n        // \"Imagen en imagen\",\n        // \"Картинка в картинке\",\n        // \"ピクチャーインピクチャー\",\n        // \"사진 속 사진\"\n    ][V_lang_id]);\n\n    /**\n     * 初始化内容助手\n     */\n    // T.init = function () {\n    // 在插图浏览器中打开\n    ContentAssistor_btns_openInFigureNav.uC().ck(function () {\n        ContentAssistor_hide();\n        iFigNav.show(ContentAssistor_lastHover);\n    });\n    //  开/关表格阅读模式（十字光标）\n    ContentAssistor_btns_tableCross.uC().ck(function () {\n        TableCross_toggle(ContentAssistor_lastHover);\n    });\n    // 复制（表格、代码块内容、图片地址）\n    ContentAssistor_btns_copyContent.uC().ck(function () {\n        if (ContentAssistor_lastHover === gUndefined)\n            return;\n\n        let _t = $(this);\n        if (ContentAssistor_lastContentType === s_Codeblock)\n            ExtCodeBlock_copyContent(_t);\n        else if (ContentAssistor_lastContentType === s_Fig + s_SuffixImg)\n            ExtFigure_copySrc(_t);\n        else if (ContentAssistor_lastContentType === s_Table)\n            ExtTable_copyContent(_t);\n    });\n    // 画中画\n    ContentAssistor_btns_picInPic.uC().ck(function () {\n        PicInPic_show(ContentAssistor_lastHover);\n    });\n\n    __bindButtonEvent(ContentAssistor_btns_copyContent);\n    __bindButtonEvent(ContentAssistor_btns_openInFigureNav);\n    __bindButtonEvent(ContentAssistor_btns_tableCross);\n    __bindButtonEvent(ContentAssistor_btns_picInPic);\n\n    /**\n     * 绑定事件\n     * @param source 源对象\n     */\n    function __bindButtonEvent(source) {\n        source.hover(function () {\n            ToolTips_show($(this), s_Auto);\n        }, function () {\n            ToolTips_hide();\n        });\n    }\n}\n\n/**\n * 绑定对象的 hover 行为\n * @param target 目标对象\n * @param contentType 内容类型：Figure/Table/CodeBlock\n */\nfunction ContentAssistor_bind(target, contentType) {\n    target.hover(function () {\n        V_ui_removeAnimate(ContentAssistor_ui);\n        if (ContentAssistor_lastHover !== target)\n            ContentAssistor_hide();\n\n        ContentAssistor_lastHover = target;\n        ContentAssistor_lastContentType = contentType;\n\n        let asMarkdown =  \"\\n<sub>\" + [\n            \"按住\",\n            // \"按住\",\n            \"Hold\",\n            // \"Tenir\", \"Halt\", \"Sostener\", \"Держать\", \"所有\", \"잡고있다\"\n        ][V_lang_id]\n            + tag_2space+ V_ui_getAltKeyUI() + [\n                tag_2space +\"- 复制为 Markdown\",\n                // tag_2space +\"- 複製為 Markdown\",\n                tag_2space +\"- Copy as Markdown\",\n                // tag_2space +\"- Copier comme Markdown\",\n                // tag_2space +\"- Kopieren als Markdown\",\n                // tag_2space +\"- Copiar como Markdown\",\n                // tag_2space +\"- Скопировать как Markdown\",\n                // tag_2space +\"- としてコピー Markdown\",\n                // tag_2space +\"- 다른 이름으로 복사 Markdown\"\n            ][V_lang_id] + \"</sub>\";\n        if (contentType === s_Codeblock) {\n            ContentAssistor_btns_copyContent.a(s_DataTips, [\n                \"复制全部代码\",\n                // \"複製全部代碼\",\n                \"Copy code\",\n                // \"Copiez tout le code\",\n                // \"Kopieren Sie den gesamten Code\",\n                // \"Copiar todo el código\",\n                // \"Скопируйте весь код\",\n                // \"すべてのコードをコピー\",\n                // \"모든 코드 복사\"\n            ][V_lang_id] + asMarkdown);\n        }\n        else if (contentType === s_Fig + s_SuffixImg) {\n            ContentAssistor_btns_copyContent.a(s_DataTips, [\n                \"复制图片地址\",\n                // \"複製圖片鏈接\",\n                \"Copy Image Link\",\n                // \"Copier le lien de l'image\",\n                // \"Bildlink kopieren\",\n                // \"Copiar enlace de imagen\",\n                // \"Скопировать ссылку на изображение\",\n                // \"画像リンクをコピー\",\n                // \"이미지 링크 복사\"\n            ][V_lang_id] + asMarkdown);\n        }\n        else if (contentType === s_Table) {\n            ContentAssistor_btns_copyContent.a(s_DataTips, [\n                \"复制表格内容\",\n                // \"複製圖片鏈接\",\n                \"Copy Table Content\",\n                // \"Copier le lien de l'image\",\n                // \"Bildlink kopieren\",\n                // \"Copiar enlace de imagen\",\n                // \"Скопировать ссылку на изображение\",\n                // \"画像リンクをコピー\",\n                // \"이미지 링크 복사\"\n            ][V_lang_id] + asMarkdown);\n        }\n\n        ContentAssistor_show();\n    }, function () {\n        if (!__mouseDropIn(ContentAssistor_lastHover)) {\n            ContentAssistor_hide();\n        }\n    });\n\n    /**\n     * 判断鼠标当前位置是否落在指定对象的区域范围内\n     * @param target 指定对象\n     */\n    function __mouseDropIn (target) {\n        let e = (event || window.event),\n            mx = e.pageX || e.clientX + document.body.scrollLeft,\n            my = e.pageY || e.clientY + document.body.scrollTop,\n            padding = JS_parseInt(target.c(s_PaddingTop)) * 2;\n        return !(mx < target.o().left || mx > (target.o().left + target.w() + padding)\n            || my < target.o().top || my > (target.o().top + target.ht() + padding));\n    }\n}\n\n/**\n * 显示指定内容的内容助手\n */\nfunction ContentAssistor_show() {\n    // 移动端不显示\n    if (env.device.mobile)\n        return;\n\n    // 圆角重置样式\n    JQ_removeClass(ContentAssistor_btns_copyContent, s_First_Enable_Last);\n    JQ_removeClass(ContentAssistor_btns_openInFigureNav, s_First_Enable_Last);\n    JQ_removeClass(ContentAssistor_btns_tableCross, s_First_Enable_Last);\n    JQ_removeClass(ContentAssistor_btns_picInPic, s_First_Enable_Last);\n\n    // 插图\n    if (ContentAssistor_lastContentType.sW(s_Fig)) {\n        if (ContentAssistor_lastContentType.eW(\"img\")) {\n            JQ_addClass(ContentAssistor_btns_copyContent, s_Enabled_First);\n            JQ_addClass(ContentAssistor_btns_openInFigureNav, s_Enabled);\n        }\n        else\n            JQ_addClass(ContentAssistor_btns_openInFigureNav, s_Enabled_First);\n        JQ_addClass(ContentAssistor_btns_picInPic, s_Enabled_Last);\n    }\n    // 表格\n    else if (ContentAssistor_lastContentType === s_Table) {\n        JQ_addClass(ContentAssistor_btns_copyContent, s_Enabled_First);\n        JQ_addClass(ContentAssistor_btns_tableCross, s_Enabled);\n        JQ_addClass(ContentAssistor_btns_picInPic, s_Enabled_Last);\n    }\n    // 代码块\n    else if (ContentAssistor_lastContentType === s_Codeblock) {\n        JQ_addClass(ContentAssistor_btns_copyContent, s_Enabled_First);\n        JQ_addClass(ContentAssistor_btns_picInPic, s_Enabled_Last);\n    }\n\n    // ----------------------------------------\n    // 计算助手显示的位置\n    let caption = ContentAssistor_lastHover.p(),\n        className = caption.a(s_Class),\n        container = caption.p(),\n        offset = 0;\n        // 对于存在横向滚动的情况时，须计算其偏移量用来位置调整\n    if (className !== gUndefined && className.i(\"v-caption\") > -1\n        && container !== gUndefined) {\n            className = container.a(s_Class);\n            if (className !== gUndefined && className.i(s_CssCaptionContainer) > -1) {\n                let capWidth = JS_parseInt(caption.w()),\n                    conWidth = JS_parseInt(container.w());\n                if (capWidth > conWidth)\n                    offset = capWidth - conWidth + 1;\n            }\n    }\n    ContentAssistor_ui.c(s_Left, ContentAssistor_lastHover.o().left\n            + ContentAssistor_lastHover.w() + 1\n            - ContentAssistor_ui.w()\n            + JS_parseInt(ContentAssistor_lastHover.c(s_PaddingLeft))\n            + JS_parseInt(ContentAssistor_lastHover.c(s_PaddingRight))\n            - offset)\n        .c(s_Top, ContentAssistor_lastHover.o().top + 3);\n\n    // 须延时后再执行显示，让以上代码先完成\n    setTimeout(function () {\n        V_ui_addAnimate(ContentAssistor_ui);\n        V_ui_show(ContentAssistor_ui);\n    }, 50);\n}\n\n/**\n * 隐藏内容辅助动作按钮\n */\nfunction ContentAssistor_hide() {\n    V_ui_hide(ContentAssistor_ui);\n}\n\n// ==================== 画中画类 ==================== //\n\nlet PicInPic_ui_body = gUndefined,\n    PicInPic_ui_content = gUndefined,\n    PicInPic_ui_zoom = gUndefined,\n    PicInPic_ui_close = gUndefined;\n\nlet PicInPic_ratio = 0.75;\n\nlet PicInPic_size_width = 0,\n    PicInPic_size_height = 0;\n\n/**\n * 初始化画中画\n */\nfunction PicInPic_init() {\n    PicInPic_ui_body = $(\".v-pic-in-pic\");\n    PicInPic_ui_content = PicInPic_ui_body.ch(\".v-content\");\n    // PicInPic_ui_content = $(\".v-pic-in-pic>.v-content\");\n    PicInPic_ui_zoom = $(s_CssPipBtn + \".v-zoom\");\n    PicInPic_ui_close = $(s_CssPipBtn + \".v-close\");\n\n    // 缩放事件处理\n    PicInPic_ui_zoom.uC().ck(function () {\n        let _t = $(this),\n            pipBtn = $(s_CssPipBtn);\n        if (PicInPic_ratio === 1) {\n            PicInPic_ratio = 0.75;\n            JQ_exchangeClass(pipBtn, \"zoom-in\", \"zoom-out\");\n            _t.h(V_ui_generateSvgIcon(\"icoZoomIn\", 16, 16, \"theme\"));\n        }\n        else {\n            PicInPic_ratio = 1;\n            JQ_exchangeClass(pipBtn, \"zoom-out\", \"zoom-in\");\n            _t.h(V_ui_generateSvgIcon(\"icoZoomOut\", 16, 16, \"theme\"));\n        }\n        PicInPic_zoom();\n    });\n\n    PicInPic_ui_close.uC().ck(function () {\n        PicInPic_hide();\n    });\n\n    PicInPic_ui_body.hover(function () {\n        // 高度过小时调整操作按钮位置\n        if (PicInPic_ui_body.ht() < 30) {\n            JQ_addClass(PicInPic_ui_zoom, s_Min);\n            JQ_addClass(PicInPic_ui_close, s_Min);\n        }\n        else {\n            JQ_removeClass(PicInPic_ui_zoom, s_Min);\n            JQ_removeClass(PicInPic_ui_close, s_Min);\n        }\n        V_ui_show(PicInPic_ui_zoom);\n        V_ui_show(PicInPic_ui_close);\n    }, function () {\n        V_ui_hide(PicInPic_ui_zoom);\n        V_ui_hide(PicInPic_ui_close);\n    });\n}\n\n/**\n * 显示画中画\n * @param source 显示内容的来源对象\n */\nfunction PicInPic_show(source) {\n    PicInPic_calcSize();\n\n    // 清空原有内容（除关闭按钮）\n    PicInPic_ui_content.empty();\n\n    // 为画中画进行克隆处理\n    let pic = __cloneForPicInPic(source);\n\n    // 缩放并显示\n    PicInPic_zoom();\n    PicInPic_ui_body.show();\n\n    // 根据内容调整画中画的展示\n    PicInPic_fitContentSize(pic);\n    PicInPic_ui_content.scrollTop(0);\n\n    /**\n     * 为画中画进行克隆处理\n     * @param source 源对象\n     */\n    function __cloneForPicInPic (source) {\n        let openAll = gFalse,\n            tagName = source.prop(s_TagName).l();\n        // 针对表格的处理\n        if (tagName === s_Table) {\n            // 1. 先展开所有行分组\n            openAll = RowGroup_openAll(source, s_Auto);\n            // 2. 先展开长内容\n            let container = source.p().p();\n            if (container.a(s_DataContentFolded) === s_True)\n                ContentFolder_expand(container.next());\n        }\n\n        // 将来源对象的内容进行克隆\n        let newClone = source.clone();\n        newClone.c(s_Margin, 0)\n            .c(s_Border, 0);\n        PicInPic_ui_content.append(newClone);\n\n        // 针对插图的处理\n        let img = (tagName === \"img\"),\n            svg = tagName === \"svg\";\n        if (img || svg) {\n            newClone.removeAttr(s_DataFigNum);\n            if (svg)\n                JQ_addClass(newClone, s_CssMermaidRestyler);\n        }\n\n        // 对展开了所有行分组的表格进行克隆后的干净处理\n        if (openAll) {\n            RowGroup_reset(newClone); // 重置、切断\n            RowGroup_closeAll(source, s_Auto); // 全部收起\n        }\n\n        return newClone;\n    }\n}\n\n/**\n * 隐藏画中画\n */\nfunction PicInPic_hide() {\n    PicInPic_ui_body.hide();\n}\n\n/**\n * 计算画中画建议的基准尺寸\n */\nfunction PicInPic_calcSize() {\n    // 计算基准大小\n    let baseW = 550,\n        baseH = 350,\n        w = $(window).w() / 2.5,\n        h = $(window).ht() / 3;\n    PicInPic_size_width = w < baseW ? baseW : w;\n    PicInPic_size_height = h < baseH ? baseH : h;\n    PicInPic_ui_body.c(s_Width, PicInPic_size_width)\n        .c(s_Height, PicInPic_size_height);\n}\n\n/**\n * 调整画中画的基准大小，以适应内容的实际大小\n */\nfunction PicInPic_fitContentSize(source) {\n    // 宽度\n    let tagName = source.prop(s_TagName).l(),\n        w = source.w(),\n        h = source.ht(),\n        sourcePadding = JS_parseInt(source.c(s_PaddingTop)) * 2,\n        uiPadding = JS_parseInt(PicInPic_ui_body.c(s_PaddingTop)) * 2;\n\n    // 针对图片尺寸的兼容性处理（部分浏览器不使用该处理尺寸不正常，如：Firefox）\n    if (tagName === \"img\") {\n        let img = new Image();\n        img.src = source.a(s_Src);\n        if (img.complete)\n            __getImgSize(img);\n        else\n            img.onload = function () {\n                __getImgSize(img);\n            }\n    }\n\n    // 宽度\n    let wWithPadding = w + sourcePadding;\n    if (w > 0 && wWithPadding < PicInPic_size_width) {\n        PicInPic_size_width = w;\n        PicInPic_ui_body.c(s_Width, wWithPadding)\n            .c(s_TransformOrigin, PicInPic_size_width + \"px \" + PicInPic_size_height + \"px\");\n    }\n\n    // 高度\n    h = source.ht(); // 重新获得画中画最新高度\n    let hWithPadding = h + uiPadding + sourcePadding;\n    if (h > 0 && hWithPadding < PicInPic_size_height) {\n        // 针对会进行等比缩放的对象进行高度微调\n        if ((tagName === \"img\" || tagName === \"svg\")\n            && h > source.ht()) {\n                h = source.ht();\n                hWithPadding = h + uiPadding + sourcePadding;\n        }\n        PicInPic_size_height = h;\n        PicInPic_ui_body.c(s_Height, hWithPadding)\n            .c(s_TransformOrigin, PicInPic_size_width + \"px \" + PicInPic_size_height + \"px\");\n    }\n\n    /**\n     * 获得 img 对象的实际长宽\n     * @param img img 对象\n     */\n    function __getImgSize(img) {\n        w = img.width;\n        h = img.height;\n    }\n}\n\n/**\n * 放大、缩放显示\n */\nfunction PicInPic_zoom() {\n    V_ui_removeAnimate(PicInPic_ui_zoom);\n    V_ui_removeAnimate(PicInPic_ui_close);\n\n    PicInPic_ui_body.c(s_Transform, \"scale(\" + PicInPic_ratio + \")\")\n        .c(s_TransformOrigin, PicInPic_size_width + \"px \" + PicInPic_size_height + \"px\");\n\n    setTimeout(function () {\n        V_ui_addAnimate(PicInPic_ui_zoom);\n        V_ui_addAnimate(PicInPic_ui_close);\n    }, 50);\n}\n\n// ==================== 聚光灯类 ==================== //\n\n/**\n * 构造函数\n * @param radius 半径大小\n * @param tips 操作提示栏对象\n */\nfunction Spotlight(radius, tips) {\n    let T = this;\n    T.ui = $(\".v-spotlight\");\n    T.radius = radius; // 聚光灯半径\n    T.tips = tips;\n    T.zoom = {\n        normal: radius, // 标准大半径\n        bigger: radius * 1.4, // 放大的半径\n    };\n    T.lastPos = {\n        x : -1,\n        y : -1\n    };\n\n    T.toolbar = gUndefined; // 联动的工具栏\n\n    /**\n     * 切换聚光灯的不同大小\n     */\n    T.toggleZoom = function () {\n        if (T.ui.isHidden())\n            return;\n\n        // V_report_push([s_Presentation, 'Spotlight', 'Zoom', 0]);\n\n        T.radius = T.radius < T.zoom.bigger\n            ? T.zoom.bigger\n            : T.zoom.normal;\n\n        T.repaint();\n    }\n\n    /**\n     * 使用聚光灯模式\n     */\n    T.useSpotlight = function () {\n        JQ_removeClass(T.toolbar.btns[s_LaserPointer], s_Selected);\n        JQ_addClass(T.toolbar.btns[s_Spotlight], s_Selected);\n\n        // T.pointer = gFalse;\n        T.mode = \"S\";\n        T.ui.show();\n        JQ_removeClass($(T.pointerScope), s_CssCursorLaser);\n        T.repaint();\n\n        let key1 = V_ui_wrap_kbd(\"⇧ Shift\") + tag_2space,\n            key2 = tag_2space + tag_2space +\"-\" + tag_2space + tag_2space + V_ui_wrap_kbd(\"ESC\") + tag_2space;\n        T.tips.show([\n            key1 + \"调整聚光灯大小\" + key2 + \"退出\",\n            // key1 + \"調整聚光燈大小\" + key2 + \"退出\",\n            key1 + \"Adjust the size of the spotlight\" + key2 + \"Exit\",\n            // key1 + \"Ajustez la taille du projecteur\" + key2 + \"Sortie\",\n            // key1 + \"Passen Sie die Größe des Scheinwerfers an\" + key2 + \"Ausfahrt\",\n            // key1 + \"Ajusta el tamaño del foco\" + key2 + \"Salida\",\n            // key1 + \"Отрегулируйте размер прожектора\" + key2 + \"Выход\",\n            // key1 + \"スポットライトのサイズを調整します\" + key2 + \"終了\",\n            // key1 + \"스포트라이트의 크기를 조정하십시오\" + key2 + \"종료\"\n        ][V_lang_id]);\n    }\n\n    /**\n     * 刷新聚光灯的显示\n     * @param event window.event 鼠标事件对象\n     */\n    T.repaint = function (event) {\n        // 记录鼠标最新位置，避免通过快捷键显示时无法在鼠标位置正常渲染\n        if (event !== gUndefined) {\n            if (event.clientX !== gUndefined)\n                T.lastPos.x = event.clientX;\n            if (event.clientY !== gUndefined)\n                T.lastPos.y = event.clientY;\n        }\n\n        // 未启用则跳过\n        if (!T.isEnabled())\n            return;\n\n        // 聚光灯模式\n        // if (T.pointer === gFalse) {\n            T.ui.c(s_Background, \"radial-gradient(circle at \"\n                + T.lastPos.x + \"px \" + T.lastPos.y + \"px, \"\n                + \"transparent \" + T.radius + \"px, \"\n                + \"rgba(0, 0, 0, 0.4)\" + (T.radius + 5) + \"px, rgba(0, 0, 0, 0.9) 900px)\");\n        // }\n    }\n\n    /**\n     * 是否已显示\n     */\n    T.isEnabled = function () {\n        return T.ui.isShowed();\n    }\n\n    /**\n     * 切换聚光灯的开关\n     */\n    T.tg = function () {\n        // V_report_push([s_Presentation, 'Spotlight', 'Show/Hide', 0]);\n\n        // 已打开，则关闭\n        if (T.isEnabled()) {\n            T.hide();\n        }\n        // 未打开，则打开\n        else {\n            T.useSpotlight();\n            return gTrue;\n        }\n        return gFalse;\n    }\n\n    /**\n     * 隐藏聚光灯\n     */\n    T.hide = function () {\n        MoreDocContent_refresh();\n        T.tips.hide();\n        JQ_removeClass(T.toolbar.btns[s_Spotlight], s_Selected);\n        T.ui.hide();\n    }\n\n    /**\n     * 处理热键操作\n     * @param code 非功能键键\n     * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n     */\n    T.disposeHotkey = function (code, combKeys) {\n        if (V_doc_block)\n            return;\n\n        switch (code) {\n            case 16: // Shift\n                // if (T.pointer === gFalse)\n                    T.toggleZoom();\n                break;\n            case 27: // ESC\n                T.hide();\n                break;\n        }\n    }\n}\n\n// ==================== 激光笔类 ==================== //\n\n/**\n * 构造函数\n * @param tips 操作提示栏对象\n */\n function LaserPointer(tips) {\n    let T = this;\n    T.tips = tips;\n    T.toolbar = gUndefined; // 联动的工具栏\n\n    T.enable = gFalse;\n\n    // 激光笔模式时鼠标形状影响的范围\n    T.pointerScope = \"body, rt, #write,\"\n        + \".v-std-code, .v-tag, .v-badge-name, .v-badge-value, \"\n        + \".v-textfield>input, .v-blockquote-folder, p[d-blockquote-folded],\"\n        +  \"audio, video, .v-audio-mini-control, .v-tbl-row-g-btn, .v-textfield-action,\"\n        + \".v-segment-btn, .v-nav-center, .md-toc-item, .v-toc-item, .v-btn, .v-accent-btn, .v-toolbar,\"\n        + \".v-fig, .v-fig-nav, .v-fig-content, .v-fig-nav-btns, .v-btn-close-figure-nav, .v-rb-coat, a, img,\"\n        + \".v-chapter-nav-prev, .v-chapter-nav-current, .v-chapter-nav-next, .v-link-chk-result.error, .v-toc-tab-button\";\n\n    /**\n     * 使用激光笔\n     */\n    T.useLaserPointer = function () {\n        JQ_removeClass(T.toolbar.btns[s_Spotlight], s_Selected);\n        JQ_addClass(T.toolbar.btns[s_LaserPointer], s_Selected);\n\n        T.enable = gTrue;\n        JQ_addClass($(T.pointerScope), s_CssCursorLaser);\n\n        T.tips.show(V_ui_wrap_kbd(\"ESC\") + tag_2space + [\n            \"退出\",\n            // \"退出\",\n            \"Exit\",\n            // \"Sortie\", \"Ausfahrt\", \"Salida\", \"Выход\", \"終了\", \"종료\"\n        ][V_lang_id]);\n    }\n\n    /**\n     * 是否已显示\n     */\n    T.isEnabled = function () {\n        return T.enable;\n    }\n\n    /**\n     * 切换激活笔开关\n     */\n    T.tg = function () {\n        // V_report_push([s_Presentation, 'LaserPointer', 'Show/Hide', 0]);\n\n        // 已打开，则关闭\n        if (T.isEnabled()) {\n            T.hide();\n        }\n        // 未打开，则打开\n        else {\n            T.useLaserPointer();\n            return gTrue;\n        }\n        return gFalse;\n    }\n\n    /**\n     * 隐藏激活笔\n     */\n    T.hide = function () {\n        MoreDocContent_refresh();\n        T.tips.hide();\n        T.enable = gFalse;\n        JQ_removeClass(T.toolbar.btns[s_LaserPointer], s_Selected);\n        JQ_removeClass($(T.pointerScope), s_CssCursorLaser);\n    }\n\n    /**\n     * 处理热键操作\n     * @param code 非功能键键\n     * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n     */\n     T.disposeHotkey = function (code, combKeys) {\n        if (V_doc_block)\n            return;\n\n        switch (code) {\n            case 27: // ESC\n                T.hide();\n                break;\n        }\n    }\n}\n\n// ==================== 分段控制器类 ==================== //\n\n/**\n * @param control 控件 UI 对象\n * @param group 分段控制器分组标识\n */\nfunction SegmentControl(control, group) {\n    let T = this;\n    T.ui = control;\n    T.group = group;\n\n    T.last = gUndefined;\n    T.segs = [];\n    T.segCnt = 0;\n\n    T.ui.append('<span class=\"v-segment-indicator\"></span>');\n    T.indicator = T.ui.ch(\".v-segment-indicator\"); // 当前选中分段的滑块\n\n    V_ui_addAnimate(T.indicator);\n\n    /**\n     * 添加分段\n     * @param target 分段对应的组件\n     * @param icon 分段使用的图标标识\n     * @param checked 是否为默认选中\n     * @param status 默认状态\n     */\n    T.add = function (target, icon, checked, status) {\n        let name = target.typeName();\n        T.segCnt++;\n        T.segs[name] = target;\n\n        // 新增段的 UI\n        let id = T.group + \"-\" + name,\n            ui = '<input id=\"' + id + '\" onfocus=\"T.blur()\" type=\"radio\" name=\"' + T.group\n                + '\"' + (status ? '' : ' ' + s_DataResult + '=\"' + s_None + '\"')\n                + ' value=\"' + name + '\"' + (checked ? ' checked' : '' ) + ' />'\n                + '<label for=\"' + id + '\" class=\"v-segment-btn ' + name + '\" ' + s_DataIcon + '=\"' + icon + '\">'\n                + V_ui_generateSvgIcon(icon, 16, 16, s_Dark)\n                + '</label>';\n        T.ui.append(ui);\n        target.ui.entry = T.ui.ch(\".\" + s_CssSegmentBtn + \".\" + name);\n        // V_ui_addAnimate(target.ui.entry);\n\n        // 指定为默认选项\n        if (checked) {\n            T.last = target;\n            __updateIcon(gTrue);\n        }\n\n        // 为新添加的段绑定事件\n        T.ui.f(\"input#\" + id).change(function () {\n            // 隐藏切换前选择的组件\n            T.last.hide();\n            __updateIcon(gFalse);\n            // 显示最新选择的组件\n            T.last = T.segs[$(this).val()];\n            __updateIcon(gTrue);\n\n            T.last.show();\n            T.update();\n        });\n\n        return T.segs[name];\n\n        /**\n         * 更新分段的图标\n         *\n         * @param checked 是否为选择状态\n         */\n        function __updateIcon(checked) {\n            T.last.ui.entry.h(V_ui_generateSvgIcon(T.last.ui.entry.a(s_DataIcon)\n                + (checked ? \"-checked\" : \"\") , 16, 16, s_Dark));\n        }\n    }\n\n    /**\n     * 获得当前选中的分段\n     * @returns 当前选中的分段\n     */\n    T.checkedItem = function () {\n        return T.ui.f('input[name=\"' + T.group + '\"]:checked').val();\n    }\n\n    /**\n     * 获得、设置指定分段的状态\n     * @returns 无 value 时，返回指定分段的状态\n     */\n    T.sts = function (target, value) {\n        let id = T.group + \"-\" + target.typeName();\n        if (value === gUndefined) {\n            JQ_addClass(T.ui.f('label[for=\"' + id + '\"]'), s_CssCursorLaser);\n            return T.ui.f('input[id=\"' + id + '\"]').a(s_DataResult);\n        }\n\n        if (value) {\n            JQ_removeClass(T.ui.f('label[for=\"' + id + '\"]'), s_CssCursorLaser);\n            T.ui.f('input[id=\"' + id+ '\"]').removeAttr(s_DataResult);\n        }\n        else {\n            JQ_addClass(T.ui.f('label[for=\"' + id + '\"]'), s_CssCursorLaser);\n            T.ui.f('input[id=\"' + id+ '\"]').a(s_DataResult, s_None);\n        }\n    }\n\n    /**\n     * 更新分段控制器界面\n     */\n    T.update = function () {\n        // 更新各分段 UI 大小、间隔等\n        let space = 2,\n            spacePercent = (space * (T.segCnt - 1)) / T.ui.w() * 100,\n            width = (100 - spacePercent) / T.segCnt;\n        T.ui.ch(\".\" + s_CssSegmentBtn).c(s_Margin, \"0 0 0 \" + space + \"px\")\n            .c(s_Width, width + \"%\");\n        // 修正第一个\n        T.ui.ch(\".\" + s_CssSegmentBtn + \":first\").c(s_Margin, 0);\n\n        // 更新当前选择分段相关 UI\n        if (T.last === gUndefined)\n            return;\n        let target = T.last.ui.entry;\n        T.indicator.c(s_Left, target.position().left + JS_parseInt(target.c(s_MarginLeft)))\n            .c(s_Width, target.w());\n    }\n}\n\n// ==================== 导航中心类 ==================== //\n\n/**\n * 构造函数\n * @param mask 遮罩对象\n * @param runMode 关闭模式\n */\nfunction NavCenter(mask, runMode) {\n    let T = this;\n    T.ui = $(\".v-nav-center\"); // 导航中心主界面\n    T.handle = $(\".v-toc-handle\"); // 导航中心引导把手\n\n    // 关键字搜索\n    T.__keywordBody = $(\".v-search-by-keyword\");\n    T.keyword = new TextField(T.__keywordBody, \"toc-filter-nav-center\", gTrue);\n\n    T.runMode = (runMode === gUndefined) ? s_Auto : runMode; // 导航中心运行方式\n    T.lastDisplayType = s_Float; // 最后一次的显示方式（float/block）\n    T.showed = gFalse; // 是否已显示\n\n    T.width = T.ui.w(); // 导航中心宽度\n\n    T.chpNav = gUndefined; // 联动的章节导航栏\n    T.toolbar = gUndefined; // 联动的工具栏\n\n    T.snapTimer = null; // 鼠标在边缘悬停计时器\n\n    // 索引内容分类选择\n    T.segs = new SegmentControl($(\".v-segment.toc\"), \"toc-segment\");\n    TocIndex_segments = T.segs;\n\n    // 目录索引组件\n    T.catalog = T.segs.add(new TocCatalog(this, gFalse), \"icoTocTabCatalog\", gTrue, gFalse);\n    // 插图索引组件\n    T.figure = T.segs.add(new TocFigure(this, gTrue), \"icoTocTabFigure\", gFalse, gFalse);\n    // 表格索引组件\n    T.table = T.segs.add(new TocTable(this, gTrue), \"icoTocTabTable\", gFalse, gFalse);\n    // 多媒体索引组件\n    T.media = T.segs.add(new TocMedia(this, gTrue), \"icoTocTabMedia\", gFalse, gFalse);\n    // 代码块索引组件\n    T.codeblock = T.segs.add(new TocCodeblock(this, gTrue), \"icoTocTabCodeblock\", gFalse, gFalse);\n    // 访问历史组件\n    T.history = T.segs.add(new TocHistory(this, gTrue), \"icoTocTabHistory\", gFalse, gFalse);\n\n    // 文库\n    T.docLib = new DocLib(new BgMask(\"doc-lib\", s_Center), this);\n\n    // 遮罩\n    T.mask = mask;\n    T.mask.bindPartner(this, T.ui);\n\n    T.segs.update();\n\n    V_ui_addAnimate(T.handle);\n    // V_ui_addAnimate(T.keyword.ui);\n\n    /**\n     * 当前章节变化事件\n     */\n    T.catalog.onChapterChanged = function () {\n        // 更新逐章导航内容\n        if (T.chpNav !== gUndefined)\n            T.chpNav.update();\n    }\n\n    // 关键字输入组件属性设置\n    T.keyword.setIcon(V_ui_generateSvgIcon(\"icoRetrieval\", 16, 16, \"alpha\"));\n    T.keyword.placeholder([\n        \"输入搜索\",\n        // \"輸入搜尋\",\n        \"Type to search\",\n        // \"Tapez à la recherche\",\n        // \"TYPEN, um zu suchen\",\n        // \"Tipo para buscar\",\n        // \"Тип для поиска\",\n        // \"検索するタイプ\",\n        // \"검색 할 입력하십시오\"\n    ][V_lang_id]);\n\n    // 绑定输入框事件处理\n    T.keyword.onInput = function (source, value) {\n        T.catalog.resultNav.reset();\n        T.figure.resultNav.reset();\n        T.table.resultNav.reset();\n        T.table.resultNav.reset();\n        T.media.resultNav.reset();\n        T.codeblock.resultNav.reset();\n\n        if (value.x().length === 0) {\n            // 目录\n            T.catalog.ui.result.empty();\n            if (T.segs.checkedItem() === T.catalog.typeName())\n               T.catalog.ui.body.show();\n            T.catalog.hideFilterResult();\n            T.catalog.scrollToCurrent();\n            T.catalog.updateStatus();\n            // 插图、表格、多媒体、代码块\n            TocIndex_noneKeyword(T.figure);\n            TocIndex_noneKeyword(T.table);\n            TocIndex_noneKeyword(T.media);\n            TocIndex_noneKeyword(T.codeblock);\n        }\n        else {\n            // 目录\n            T.catalog.filter(value.l());\n            // 插图、表格、多媒体、代码块\n            TocIndex_filter(T.figure, value.l());\n            TocIndex_filter(T.table, value.l());\n            TocIndex_filter(T.media, value.l());\n            TocIndex_filter(T.codeblock, value.l());\n        }\n    }\n\n    T.keyword.onFocus = function (source) {\n        if (T.lastDisplayType !== s_Float) {\n            JQ_addClass(VOM_doc(), s_Actived);\n            let search = $(\".\" + s_CssFocusSearch);\n            JQ_addClass(search, s_Actived);\n            // V_ui_addAnimate(search);\n        }\n    }\n\n    T.keyword.onBlur = function (source) {\n        JQ_removeClass(VOM_doc(), s_Actived);\n        JQ_removeClass($(\".\" + s_CssFocusSearch), s_Actived);\n    }\n\n    // 绑定输入框事件处理\n    T.keyword.pressEnter = function (source, value) {\n        T.keyword.input.focus();\n    }\n\n    /**\n     * 触发互动事件\n     */\n    T.onInteractive = function () {\n        T.adjustClickHash();\n    }\n\n    // 当前文档不是 mini 类型（文库类文档一般为 mini 类型）\n    if (V_type !== s_Mini) {\n        // 文库\n        if (T.docLib.length === 0)\n            ALERT(s_Failed + \"iDocLib ]\");\n        else if (V_util_getParamVal(\"dl\") !== s_Off)\n            T.docLib.init();\n    }\n\n    /**\n     * 跳转回文档封面\n     */\n    T.gotoCover = function () {\n        // V_report_push(['nav-center', 'Goto', 'Cover', 0]);\n        WINDOW_setHref(\"#\");\n        // 【有封面】模式时处理\n        if (VOM_cover() !== gUndefined) {\n            if (T.catalog.currentItem !== gUndefined) {\n                JQ_removeClass(T.catalog.currentItem, s_CssTocItemCurrent);\n                T.catalog.currentHeaderIndex = -1;\n            }\n            T.adjust();\n            T.chpNav.adjust();\n            T.toolbar.adjust();\n        }\n        // 【无封面】模式时处理\n        else {\n            ToolTips_hide();\n        }\n    }\n\n    /**\n     * 适配锚点击事件\n     */\n    T.adjustClickHash = function () {\n        if (T.lastDisplayType === s_Float)\n            T.hide(s_Auto);\n    }\n\n    /**\n     * 显示/隐藏导航中心\n     * @param callback 显示/隐藏导航中心后执行回调函数\n     */\n    T.tg = function (callback) {\n        // 导航中心已显示\n        if (T.showed) {\n            T.hide(\"closed\");\n        }\n        // 导航中心未显示\n        else {\n            T.runMode = s_Auto;\n            // 在封面，或小屏\n            if (!T.catalog.inHeader() || V_ui_isSmallScreen()) {\n                T.show(s_Float);\n            }\n            // 在章节内，非小屏\n            else {\n                // 导航中心运行模式为 auto 时，自动显示导航中心\n                if (T.runMode === s_Auto)\n                    T.show(s_Block);\n            }\n        }\n\n        typeof(callback) === s_Function && callback();\n        T.afterToggle();\n    }\n\n    /**\n     * 显示导航中心\n     * @param lastDisplayType float: 以浮动形式显示，block: 以占位形式显示\n     * @returns boolean true: 需要处理显示，false: 已显示，无须重复处理\n     */\n    T.show = function (lastDisplayType) {\n        // 已显示，或在以动画显示过程中\n        if (V_type !== \"max\" || T.showed || T.ui.o().left > -T.width) {\n            // T.handle.hide();\n            return gFalse;\n        }\n\n        T.ui.c(s_Left, 20);\n        T.handle.hide();\n\n        T.lastDisplayType = lastDisplayType;\n        // 以「占位方式」显示导航中心\n        if (T.lastDisplayType === s_Block) {\n            // 占位方式的样式设置\n            JQ_removeClass(T.ui, s_CssNavCenterFloat);\n            JQ_removeClass(T.ui, s_CssFloatCard);\n            JQ_addClass(T.ui, s_CssNavCenterBlock);\n\n            // 更新工具栏导航中心按钮图标\n            if (!env.device.mobile)\n                JQ_addClass(T.toolbar.btns[s_NavCenter], s_Selected);\n\n            VOM_doc().c(s_MarginLeft, \"calc(var(--v-nav-center-width) + 30px)\");\n\n            // 因为从切换为占位显示后，会影响文档内容布局，所以须调整随大小变化的内容\n            if (!T.showed) {\n                setTimeout(function () {\n                    // 重定位至当前锚点\n                    V_util_redirectTo();\n                    // 统一同组的分栏引用的高度\n                    ExtQuote_uniteColumnsHeight();\n                }, 300);\n            }\n        }\n        // 以「浮动方式」显示导航中心\n        else if (T.lastDisplayType === s_Float) {\n            // 浮动方式的样式设置\n            JQ_removeClass(T.ui, s_CssNavCenterBlock);\n            JQ_addClass(T.ui, s_CssNavCenterFloat);\n            JQ_addClass(T.ui, s_CssFloatCard);\n\n            // 显示联动的遮罩\n            T.mask.show();\n\n            // 若文档可视空间比导航中心宽度要小，则进行微调\n            if ($(window).w() < T.width + 20)\n                T.ui.c(s_Width, $(window).w() - 20);\n            // 若文档空间比导航中心宽度大，则直接显示原始大小\n            else\n                T.ui.c(s_Width, T.width);\n        }\n\n        T.showed = gTrue;\n        return gTrue;\n    }\n\n    /**\n     * 隐藏导航中心\n     * @param runMode 导航中心的运行模式（auto/closed）\n     * @returns boolean true: 需要处理隐藏，false: 已显示，无须重复处理\n     */\n    T.hide = function (runMode) {\n        // 已隐藏，或在以动画隐藏过程中\n        if (!T.showed || T.ui.o().left < 10)\n            return gFalse;\n\n        // 若最后一次显示以是「占位方式」显示\n        if (T.lastDisplayType === s_Block) {\n            // 更新运行模式\n            T.runMode = runMode;\n\n            // 统一同组的分栏引用的高度\n            ExtQuote_uniteColumnsHeight();\n\n            // 更新工具栏导航中心按钮图标\n            if (!env.device.mobile)\n                JQ_removeClass(T.toolbar.btns[s_NavCenter], s_Selected);\n        }\n\n        T.ui.c(s_Left, V_util_getVarVal(\"--v-nav-center-hidden-left\"));\n\n        // 恢复不挤压文档正文区\n        VOM_doc().c(s_MarginLeft, 0);\n\n        T.mask.hide();\n\n        // 非移动设备时显示把手\n        if (!env.device.mobile)\n            T.showHandle();\n\n        T.showed = gFalse;\n\n        return gTrue;\n    }\n\n    /**\n     * 导航中心根据规则进行布局的自适应处理\n     * @returns boolean true: 需要处理显示/隐藏，false: 已显示/隐藏，无须重复处理\n     */\n    T.adjust = function () {\n        let result = gFalse;\n\n        // 根据导航中心宽度更新相关界面组件的样式\n        if (T.showed && T.lastDisplayType === s_Block)\n            VOM_doc().c(s_MarginLeft, \"calc(var(--v-nav-center-width) + 30px)\");\n\n        T.width = T.ui.w();\n\n        T.keyword.setWidth(T.width - 2 - JS_parseInt(T.__keywordBody.c(s_MarginLeft)) * 2);\n\n        // 根据最新窗口大小调整宽度\n        T.segs.update();\n\n        // 在封面，或为小屏\n        if (!T.catalog.inHeader() || V_ui_isSmallScreen()) {\n            // 自动隐藏导航中心\n            result = T.hide(s_Auto);\n\n            // 根据最新窗口大小调整收起位置\n            T.ui.c(s_Left, s_varNavCenterHiddenLeft);\n\n            // 更新工具栏导航中心按钮图标\n            if (!env.device.mobile)\n                JQ_removeClass(T.toolbar.btns[s_NavCenter], s_Selected);\n        }\n        // 不在封面\n        else {\n            // 导航中心运行模式为 auto 时，自动显示导航中心\n            if (T.runMode === s_Auto) {\n                // 以占位方式显示导航中心\n                result = T.show(s_Block);\n\n                // 根据最新窗口大小调整导航中心宽度\n                T.ui.c(s_Width, s_varNavCenterWidth);\n\n                // 更新工具栏导航中心按钮图标\n                if (!env.device.mobile)\n                    JQ_addClass(T.toolbar.btns[s_NavCenter], s_Selected);\n            }\n        }\n        return result;\n    }\n\n    /**\n     * 显示导航中心引导把手\n     */\n    T.showHandle = function () {\n        if (V_type !== \"max\")\n            return;\n\n        T.handle.c(s_Top, ($(window).ht() - T.handle.ht()) / 2);\n        T.handle.show();\n    }\n\n    /**\n     * 鼠标位置变化对导航中心处理\n     */\n    T.snap = function (event) {\n        // 已显示则跳过\n        if (T.showed || env.device.mobile)\n            return;\n\n        // 鼠标离左边缘小于指定值时\n        if (event.clientY > 200 && event.clientY < ($(window).ht() - 300) && event.clientX <= 20) {\n            if (T.snapTimer != null)\n                return;\n\n            JQ_addClass(T.handle, s_Hover);\n\n            // 延时（模拟悬停一定时间）以浮动方式显示导航中心\n            T.snapTimer = setTimeout(function () {\n                JQ_removeClass(T.handle, s_Hover);\n                T.show(s_Float);\n            }, 1000);\n        }\n        else {\n            // 未显示导航中心前离开边缘则取消显示\n            if (T.snapTimer != null) {\n                clearTimeout(T.snapTimer);\n                T.snapTimer = null;\n                JQ_removeClass(T.handle, s_Hover);\n            }\n        }\n    }\n\n    /**\n     * 显示/隐藏导航中心，并进行关联处理\n     */\n     T.afterToggle = function () {\n        if (iNavCenter.lastDisplayType === s_Block)\n            ContentFolder_adjust();\n    }\n\n    /**\n     * 处理热键操作\n     * @param code 非功能键键\n     * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n     */\n    T.disposeHotkey = function (code, combKeys) {\n        // 文档库热键操作\n        T.docLib.disposeHotkey(code, combKeys);\n\n        if (T.ui.isHidden())\n            return;\n\n        switch (code) {\n            case 27: // ESC\n                if (T.lastDisplayType === s_Float)\n                    T.hide();\n                break;\n        }\n    }\n}\n\n/**\n * 导航中心初始化\n */\nNavCenter.init = function () {\n    // 提取文档中由[toc]标签生成的文档目录作为浮动 outline 中的内容\n    let toc = $(\".\" + s_MdToc);\n    // 没有生成目录\n    if (toc.isEmpty()) {\n        NavCenter.hideOnError();\n        return gFalse;\n    }\n\n    // 有生成目录，则复制 toc 内容\n    let vlookToc = toc.clone();\n    // 隐藏原目录\n    toc.hide();\n    // 将复制的目录进行唯一性标识\n    vlookToc.f(\".md-toc-content\").a(s_Id, \"vlook-toc\")\n    iNavCenter.catalog.ui.body.append(vlookToc);\n\n    // 没有目录内容\n    ChpAutoNum_tocContent = $(\"#vlook-toc\");\n    if (ChpAutoNum_tocContent.isEmpty()) {\n        NavCenter.hideOnError();\n        return gFalse;\n    }\n\n    // 有 Typora 生成的原始目录节点，针对 VLOOK 的封面规则进行调整\n    let tocSet = ChpAutoNum_tocContent.ch(\".md-toc-h1, .md-toc-h2, .md-toc-h3, .md-toc-h4, .md-toc-h5, .md-toc-h6\"),\n        tocSetLength = tocSet.length,\n        hasCover = (VOM_cover() !== gUndefined);\n    tocSet.e(function (i) {\n        let _t = $(this);\n        // 只处理 h1～h5 的目录节点\n        if (_t.a(s_Class).i(\"md-toc-h6\") === -1) {\n            if (hasCover) { // 文档有封面时\n                if (i < tocSetLength - 1) // 未到最后一个元素\n                    iNavCenter.catalog.add(_t);\n                else // 最后一个 h1 为封底，移除\n                    JQ_remove(_t);\n            }\n            else\n                iNavCenter.catalog.add(_t);\n        }\n        // 移除无效的目录节点（如：封面、封底、普通的 h6 节点）\n        else\n            JQ_remove(_t);\n    });\n\n    // 不指定打开，则默认收起所有含子章节的 h1 章节\n    let tocAutoCloseLevel = V_util_getParamVal(\"toc\");\n    tocAutoCloseLevel = (tocAutoCloseLevel !== gUndefined) ? JS_parseInt(tocAutoCloseLevel) : 2;\n    if (tocAutoCloseLevel >= 1 && tocAutoCloseLevel <=5) {\n        ChpAutoNum_tocContent.ch(\".md-toc-h\" + tocAutoCloseLevel + \"[\" + s_DataNode + \"='1'][\" + s_DataFolded + \"='false']\").e(function () {\n            iNavCenter.catalog.disposeFold($(this).a(s_Id), \"c\", gTrue);\n        });\n    }\n\n    return gTrue;\n}\n\n/**\n * 隐藏导航中心（异常情况使用）\n */\nNavCenter.hideOnError = function () {\n    iNavCenter.hide();\n\n    ERROR([\n        \"文档中没有找到目录信息，请用Typora最新版本导出，并应用最新VLOOK插件\",\n        // \"文檔中沒有找到目錄信息，請用Typora最新版本導出，並應用最新VLOOK插件\",\n        \"No [TOC] information was found in the document, export it with the latest version of Typora and apply the latest VLOOK plug-in.\",\n        // \"Les informations du répertoire ne figurent pas dans la documentation, veuillez les exporter avec la dernière version de Typora et appliquer le dernier plug-in V.\",\n        // \"Das Dokument enthält keine [TOC] -Informationen. Exportieren Sie es mit der neuesten Version von Typora und wenden Sie das neueste VLOOK-Plug-In an.\",\n        // \"No se encontró información [TOC] en el documento, expórtelo con la última versión de Typora y aplique el último complemento V.\",\n        // \"Информация в каталоге не найдена в документации, пожалуйста, экспортируйте ее с последней версией Typora и примените последний плагин VLOOK\",\n        // \"ドキュメントにディレクトリ情報が見つからない場合は、Typoraの最新バージョンでエクスポートし、最新のVLOOKプラグインを適用してください\",\n        // \"설명서에 디렉토리 정보가 없으므로 Typora 최신 버전으로 내보내고 최신 VLOOK 플러그인을 적용하십시오.\"\n    ][V_lang_id]);\n}\n\n// ==================== 逐章导航类 ==================== //\n\n/**\n * 构造函数\n */\nfunction ChapterNav() {\n    let T = this,\n        __prev = \".v-chapter-nav-prev\",\n        __current = \".v-chapter-nav-current\",\n        __next = \".v-chapter-nav-next\",\n        __dt = \".v-chapter-nav-doc-title\";\n    // 逐章导航面板主界面\n    T.ui = $(\".v-chapter-nav\");\n\n    T.prev = {\n        ui : $(__prev), // 前一章界面\n        text: $(\".v-chapter-nav-prev-text\"), // 前一章文本界面\n    };\n\n    T.current = {\n        ui : $(__current), // 当前章节界面\n    };\n\n    T.next = {\n        ui : $(__next), // 后一章界面\n        text : $(\".v-chapter-nav-next-text\"), // 后一章文本界面\n    };\n\n    // 文档标题\n    T.dt = $(__dt);\n    T.dt.t(V_util_getDocTitle());\n\n    if (V_type !== \"max\")\n        T.ui.hide();\n\n    /**\n     * 初始化动效\n     */\n    T.adjustEffectLevel = function (target) {\n        // 因 CSS 的 transition 不变动渐变背景过渡效果，须通过增/减不同的预置样式实现过渡效果\n        if (V_ui_effect >= 1) {\n            JQ_addClass($(target), s_Effect);\n            V_ui_addAnimate($(target + \".effect\"));\n        }\n        else {\n            JQ_exchangeClass($(target), s_Effect, \"noeffect\");\n        }\n    }\n    // 初始化动效\n    T.adjustEffectLevel(__prev);\n    T.adjustEffectLevel(__current);\n    T.adjustEffectLevel(__next);\n    T.adjustEffectLevel(__dt);\n\n    /**\n     * 跳转至前一章节\n     */\n    T.prev.ui.uC().ck(function () {\n        ToolTips_hide();\n        if (T.prev.text.a(s_DataAnchor) === s_Cover)\n            iNavCenter.gotoCover();\n        else\n            iNavCenter.catalog.gotoHeader(T.prev.text);\n    });\n\n    /**\n     * 回到封面\n     */\n    T.dt.uC().ck(function () {\n        ToolTips_hide();\n        if ($(this).a(s_Disabled) === gUndefined)\n            iNavCenter.gotoCover();\n    });\n\n    /**\n     * 跳转至当前章节\n     */\n    T.current.ui.uC().ck(function () {\n        ToolTips_hide();\n        iNavCenter.catalog.gotoHeader(T.current.ui);\n    });\n\n    /**\n     * 跳转至后一章节\n     */\n    T.next.ui.uC().ck(function () {\n        ToolTips_hide();\n        iNavCenter.catalog.gotoHeader(T.next.text);\n    });\n\n    /**\n     * 更新逐章导航栏 UI 及数据\n     */\n    T.update = function () {\n        let curIdx = iNavCenter.catalog.currentHeaderIndex;\n\n        // ----------------------------------------\n        // 更新「上一章」导航内容\n        if (curIdx > 0) {\n            T.prev.ui.show();\n            T.prev.ui.c(s_Display, s_Block);\n            T.prev.text.t($(\"#\" + iNavCenter.catalog.h[curIdx - 1]).t());\n            T.prev.text.a(s_DataAnchor, iNavCenter.catalog.h[curIdx - 1]);\n\n            // 【无封面】模式时处理\n            if (VOM_cover() === gUndefined) {\n                JQ_removeClass(T.dt, s_InStart);\n                T.dt.removeAttr(s_Disabled);\n                T.adjustEffectLevel(__dt);\n                __bindEvent(T.dt, s_Center);\n            }\n        }\n        // 当前章节为第 1 章时特殊处理，设置为「封面」\n        else if (iNavCenter.catalog.inFirstHeader()) {\n            T.prev.text.t([\n                \"封面\",\n                // \"封面\",\n                \"Cover\",\n                // \"Couverture\", \"Startseite\", \"Cubrir\", \"передняя крышка\", \"カバー\", \"표지\"\n            ][V_lang_id]);\n            T.prev.text.a(s_DataAnchor, s_Cover);\n        }\n        // 「无封面」模式时对「文档标题」章节的特殊处理\n        else if (iNavCenter.catalog.inDocTitle()) {\n            T.prev.ui.hide();\n            T.current.ui.hide();\n            // 调整为在文档开始位置时的样式\n            JQ_removeClass(T.dt, \"noeffect effect hover\");\n            JQ_addClass(T.dt, s_InStart);\n            T.dt.a(s_Disabled, s_True);\n            V_ui_unbindHover(T.dt);\n        }\n\n        // ----------------------------------------\n        // 更新「当前章节」导航内容\n        if (iNavCenter.catalog.currentItem !== gUndefined) {\n            // 【无封面】模式\n            if (iNavCenter.catalog.inDocTitle())\n                T.current.ui.hide();\n            else\n                T.current.ui.show();\n\n            T.current.ui.h(\"<span>\" + iNavCenter.catalog.currentItem.a(s_DataHeaderNum) + \"</span>\"\n                + iNavCenter.catalog.currentItem.a(s_Title));\n            T.current.ui.a(s_DataAnchor, iNavCenter.catalog.h[curIdx]);\n            // T.current.ui.a(s_DataHeaderNum, iNavCenter.catalog.currentItem.a(s_DataHeaderNum));\n        }\n\n        // ----------------------------------------\n        // 更新「下一章」导航内容\n        if (curIdx < iNavCenter.catalog.h.length - 1) {\n            T.next.ui.show();\n            T.next.text.t($(\"#\" + iNavCenter.catalog.h[curIdx + 1]).t());\n            T.next.text.a(s_DataAnchor, iNavCenter.catalog.h[curIdx + 1]);\n        }\n        else\n            T.next.ui.hide();\n    }\n\n    /**\n     * 显示逐章导航栏\n     */\n    T.show = function () {\n        // 若已显示则直接退出\n        if (V_type !== \"max\" || JS_parseInt(T.ui.c(s_Top)) >= 0)\n            return;\n\n        JQ_addClass(T.ui, s_CssFloatCard);\n        T.ui.c(s_Top, 0);\n        T.ui.show();\n    }\n\n    /**\n     * 隐藏逐章导航栏\n     */\n    T.hide = function () {\n        // 若已隐藏则直接退出\n        if (JS_parseInt(T.ui.c(s_Top)) < 0)\n            return;\n\n        JQ_removeClass(T.ui, s_CssFloatCard);\n        T.ui.c(s_Top, -50);\n        T.ui.hide();\n    }\n\n    /**\n     * 逐章导航栏自适应显示\n     */\n    T.adjust = function () {\n        // 在封面时，隐藏逐章导航栏\n        if (!iNavCenter.catalog.inHeader()) {\n            T.hide();\n            JQ_addClass(MoreDocContent_ui_before, s_Cover);\n\n            // 初始化前 / 后章节数据\n            T.prev.text.a(s_DataAnchor, s_Cover);\n            T.next.text.a(s_DataAnchor, iNavCenter.catalog.h[0]);\n        }\n        // 不在封面时，显示逐章导航栏\n        else {\n            JQ_removeClass(MoreDocContent_ui_before, s_Cover);\n            T.show();\n            T.update();\n        }\n    }\n\n    /**\n     * 逐章导航导航按钮在不同终端的适配处理\n     */\n    T.adjustHoverStyle = function () {\n        // 移动设备时解绑样式事件\n        if (env.device.mobile) {\n            T.prev.ui.uH();\n            T.current.ui.uH();\n            T.next.ui.uH();\n        }\n        // 非移动设备时绑定样式事件\n        else {\n            // 上一章\n            __bindEvent(T.prev.ui, s_Auto);\n            // 文档标题\n            __bindEvent(T.dt, s_Center);\n            // 当前章节\n            __bindEvent(T.current.ui, s_Center);\n            // 下一章\n            __bindEvent(T.next.ui, s_Right);\n        }\n    }\n\n    /**\n     * 绑定操作相关事件\n     * @param source 对象\n     * @param align 对齐方式，auto/center/right\n     */\n    function __bindEvent(source, align) {\n        V_ui_bindHover(source);\n        source.hover(function () {\n            ToolTips_show(source, align);\n        }, function () {\n            ToolTips_hide();\n        });\n    }\n\n    /**\n     * 处理热键操作\n     * @param code 非功能键键\n     * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n     */\n    T.disposeHotkey = function (code, combKeys) {\n        if (V_doc_block)\n            return;\n\n        switch (code) {\n            case 188: // <\n            case 37: // ←\n                T.prev.ui.tr(s_Click);\n                // 自适应页面内容显示\n                iNavCenter.catalog.focusHeader();\n                break;\n            case 190: // >\n            case 39: // →\n                T.next.ui.tr(s_Click);\n                // 强制设置滚动间隔已超时，以强制触发 focusHeader 中的处理\n                V_doc_scroll_update(0, 0);\n                // 自适应页面内容显示\n                iNavCenter.catalog.focusHeader();\n                break;\n        }\n    }\n}\n\n// ==================== 段落导航类 ==================== //\n\n/**\n * 构造函数\n * @param tips 操作提示栏对象\n */\nfunction ParagraphNav(tips) {\n    let T = this;\n    T.tips = tips;\n    T.count = 0; // 段的总数量\n    T.curIdx = -1; // 当前段索引号\n    T.enabled = gFalse; // 是否段落导航激活\n\n    T.toolbar = gUndefined; // 联动的工具栏\n\n    /**\n     * 返回当前段落\n     */\n    T.cur = function () {\n        if (T.curIdx === -1)\n            return gUndefined;\n        return $(\"[\" + s_DataId + \"='vk-pg-\" + T.curIdx + \"']\");\n    }\n\n    /**\n     * 切换段落导航开关\n     * @returns boolean true：开启，false：关闭\n     */\n    T.tg = function (target) {\n        T.enabled = !T.enabled;\n        if (T.enabled) {\n            // V_report_push(['ParagraphNav', 'Action', s_Enabled, 0]);\n\n            JQ_addClass(T.toolbar.btns[s_ParagraphNav], s_Selected);\n            MoreDocContent_hideAfter();\n\n            // 显示工具底栏提示信息\n            let key1 = V_ui_wrap_kbd(\"J\") + \" / \" + V_ui_wrap_kbd(\"K\") + tag_2space,\n                key2 = tag_2space + tag_2space + V_ui_wrap_kbd(\"H\") + \" / \" + V_ui_wrap_kbd(\"L\") + tag_2space,\n                key3 = tag_2space + tag_2space +\"-\" + tag_2space + tag_2space + V_ui_wrap_kbd(\"ESC\") + tag_2space;\n            T.tips.show([\n                key1 + \"前/后段落\" + key2 + \"前/后十个段落\" + key3 + \"退出\",\n                // key1 + \"前/後段落\" + key2 + \"前/後十個段落\" + key3 + \"退出\",\n                key1 + \"front/back paragraph\" + key2 + \"front/back ten paragraphs\" + key3 + \"Exit\",\n                // key1 + \"paragraphe avant/arrière\" + key2 + \"dix paragraphes avant/arrière\" + key3 + \"Sortie\",\n                // key1 + \"vorderer/hinterer Absatz\" + key2 + \"vorne/hinten 10 Absätze\" + key3 + \"Ausfahrt\",\n                // key1 + \"párrafo delantero/trasero\" + key2 + \"anverso/reverso 10 párrafos\" + key3 + \"Salida\",\n                // key1 + \"передний / задний абзац\" + key2 + \"передний / задний десять абзацев\" + key3 + \"Выход\",\n                // key1 + \"前後の段落\" + key2 + \"前後の10段落\" + key3 + \"終了\",\n                // key1 + \"앞 / 뒤 단락\" + key2 + \"앞 / 뒤 10 단락\" + key3 + \"종료\"\n            ][V_lang_id]);\n\n            T.goto(target);\n            return gTrue;\n        }\n        else {\n            T.hide();\n        }\n        return gFalse;\n    }\n\n    /**\n     * 添加段落\n     */\n    T.add = function (item) {\n        item.a(s_DataId, \"vk-pg-\" + T.count);\n        item.a(s_DataPgIdx, T.count);\n        T.count++;\n\n        // 单击内容块处理\n        item.uC().ck(function () {\n            // 未激活段落导航模式模式\n            if (!iParagraphNav.enabled) {\n                if (ThreeClicker_tick()\n                    && iParagraphNav.tg(item)) {\n                        iSpotlight.hide();\n                        iLaserPointer.hide();\n                        // // 取消文本选择\n                        // window.getSelection().removeAllRanges();\n                    }\n            }\n            else {\n                // event.stopPropagation(); // 停止事件冒泡\n                T.goto(item);\n                if (ThreeClicker_tick()) {\n                    iParagraphNav.tg(item);\n                    // // 取消文本选择\n                    // window.getSelection().removeAllRanges();\n                }\n            }\n        });\n    }\n\n    /**\n     * 上一个段\n     * @param step 跳转的步长\n     * @returns boolean 跳转结果，true：成功，false：失败\n     */\n    T.prev = function (step) {\n        if (!T.enabled)\n            return;\n\n        T.blurFocus();\n\n        // 未到首段\n        if (T.curIdx > 0) {\n            T.curIdx = T.curIdx - step;\n\n            if (T.curIdx < 0)\n                T.curIdx = 0;\n\n            // 如果目标内容块 item 跳转失败，则再尝试上一个\n            if (!T.goto())\n                T.prev(1);\n\n            return gTrue;\n        }\n        return gFalse\n    }\n\n    /**\n     * 下一个段\n     * @param step 跳转的步长\n     * @returns boolean 跳转结果，true：成功，false：失败\n     */\n    T.next = function (step) {\n        if (!T.enabled)\n            return;\n\n        T.blurFocus();\n\n        // 未到末段\n        if (T.curIdx < T.count - 1) {\n            T.curIdx = T.curIdx + step;\n\n            // 跳转 step 后修正超出最大值的情况\n            if (T.curIdx > T.count - 1)\n                T.curIdx = T.count - 1;\n\n            // 如果目标内容块item跳转失败，则再尝试下一个\n            if (!T.goto())\n                T.next(1);\n\n            return gTrue;\n        }\n        return gFalse;\n    }\n\n    /**\n     * 跳到指定的内容块，或最新的_blockFocusItemIndex指定的内容块\n     * @param target 跳转的目标。null: 指定跳到上/下一个位置，非null: 指定的目标位置\n     */\n    T.goto = function (target) {\n        T.blurFocus();\n\n        // 初始化目标段\n        let item = (target !== gUndefined)\n            ? target\n            : T.cur();\n\n        // 若目标聚焦块为空（可能是对象已在其他处理过程中被删除）、不可视等情况\n        // 则返回跳转失败\n        if (item === gUndefined || item.isHidden() || item.o() === gUndefined)\n            return gFalse;\n\n        // 添加高亮样式\n        JQ_addClass(item, s_CssPgCurrentItem);\n        T.curIdx = JS_parseInt(item.a(s_DataPgIdx));\n\n        // 或目标段不在当前窗口显示区域内，则跳转到对应位置\n        let height = item.ht() * 3;\n        if (item.o().top !== 0\n            && ((item.o().top - height) < $(document).scrollTop()\n            || (item.o().top + height) > ($(document).scrollTop() + $(window).ht()))) {\n                DOM_html().scrollTop(item.o().top - $(window).ht() / 2);\n        }\n\n        return gTrue; // 返回跳转成功\n    }\n\n    /**\n     * 让当前聚焦段其失去聚焦效果\n     */\n    T.blurFocus = function () {\n        if (T.cur() !== gUndefined)\n            JQ_removeClass(T.cur(), s_CssPgCurrentItem);\n    }\n\n    /**\n     * 隐藏当前段落的高亮样式\n     */\n    T.hide = function () {\n        MoreDocContent_refresh();\n        T.tips.hide();\n        JQ_removeClass(T.toolbar.btns[s_ParagraphNav], s_Selected);\n        T.enabled = gFalse;\n        T.blurFocus();\n    }\n\n    /**\n     * 处理热键操作\n     * @param code 非功能键键\n     * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n     */\n    T.disposeHotkey = function (code, combKeys) {\n        if (!T.enabled)\n            return;\n\n        switch (code) {\n            case 74: // J\n                TableCross_hide();\n                if (T.next(1)) // 步长1\n                    ExtQuote_autoUnfold(); // 自动展开引用\n                break;\n            case 75: // K\n                TableCross_hide();\n                if (T.prev(1)) // 步长1\n                    ExtQuote_autoUnfold(); // 自动展开引用\n                break;\n            case 72: // H\n                TableCross_hide();\n                if (T.prev(10)) // 步长10，快速移动\n                    ExtQuote_autoUnfold(); // 自动展开引用\n                break;\n            case 76: // L\n                TableCross_hide();\n                if (T.next(10)) // 步长10，快速移动\n                    ExtQuote_autoUnfold(); // 自动展开引用\n                break;\n            case 27: // ESC\n                T.hide();\n                break;\n        }\n    }\n}\n\n/**\n * 初始化段落导航模式\n */\nParagraphNav.init = function() {\n    iParagraphNav = new ParagraphNav(new BottomTips(s_ParagraphNav));\n    // 添加关联组件\n    iParagraphNav.toolbar = iToolbar;\n\n    // 先清理多余的段落标签\n    $(\"li>p:only-child\").contents().unwrap();\n\n    // 初始化\n    $(\"h1, h2, h3, h4, h5, h6, ul>li, ol>li, p[class!=md-toc-content][class!=v-cap-1][class!=v-cap-2], figure, .md-diagram-panel, .MathJax_SVG_Display\").e(function () {\n        let item = $(this);\n        // 跳过不可见元素、子元素有嵌套 p 的情况，如li > p\n        if (item.is(\":visible\") && item.ch(\"p\").length === 0) {\n            iParagraphNav.add(item);\n\n            // 双击内容块\n            item.dblclick(function () {\n                // 激活三击检查\n                // 配合段落的单击事件对 ThreeClicker_tick() 的判断实现\n                ThreeClicker_active();\n            });\n        } // if\n    });\n}\n\n// ==================== 三击处理器 ==================== //\n\nlet ThreeClicker_activeTime = 0;\n\n/**\n * 进入激活状态（在双击事件中触发）\n */\nfunction ThreeClicker_active() {\n    ThreeClicker_activeTime = new Date().getTime();\n}\n\n/**\n * 三击触发尝试\n * @returns boolean true：成功触发三击，false：未满足触发三击\n */\nfunction ThreeClicker_tick() {\n    // 未进入激活状态\n    if (ThreeClicker_activeTime === 0)\n        return gFalse;\n\n        // 与进入激活状态时间隔小于指定时间，则满足触发三击条件\n    if (new Date().getTime() - ThreeClicker_activeTime < 300) {\n        // 取消文本选择\n        window.getSelection().removeAllRanges();\n        return gTrue;\n    }\n\n    // 超过指定时间隔音则恢复为未激活\n    ThreeClicker_activeTime = 0;\n    return gFalse;\n}\n\n// ==================== 工具栏类 ==================== //\n\n/**\n * 构造函数\n * @param chpNav 章节导航对象\n */\nfunction Toolbar(chpNav) {\n    let T = this;\n    T.ui = $(\".v-toolbar\"); // 工具栏主界面\n    T.btns = []; // 工具栏按钮集\n    T.chpNav = chpNav;\n\n    if (V_type !== \"max\")\n        T.ui.hide();\n\n    /**\n     * 添加按钮\n     * @param name 按钮标识\n     * @param clickEvent 按钮点击事件回调函数\n     */\n    T.add = function (name, clickEvent) {\n        T.btns[name] = $(\".v-btn.\" + name);\n\n        T.btns[name].uC().ck(function () {\n            // DEBUG(name);\n            ToolTips_hide();\n            typeof(clickEvent) === s_Function && clickEvent();\n        });\n\n        // hover 事件处理\n        T.btns[name].hover(function () {\n            let _t = $(this),\n                btnGroup = _t.a(s_DataBtnGroup);\n            if (btnGroup !== gUndefined)\n                JQ_addClass($(\".v-btn-group.\" + btnGroup), s_Hover);\n            ToolTips_show(_t, s_Auto);\n        }, function () {\n            let btnGroup = $(this).a(s_DataBtnGroup);\n            if (btnGroup !== gUndefined)\n                JQ_removeClass($(\".v-btn-group.\" + btnGroup), s_Hover);\n            ToolTips_hide();\n        });\n    }\n\n    /**\n     * 添加分隔条\n     * @param name 分隔条标识\n     */\n    T.addSpliter = function (name) {\n        T.btns[name] = $(\".v-\" + name);\n    }\n\n    /**\n     * 自适应显示工具栏\n     */\n    T.adjust = function () {\n        if (V_type !== \"max\")\n            return;\n\n        // 移动端下隐藏不必要的功能入口\n        if (env.device.mobile) {\n            T.btns[s_ParagraphNav].hide();\n            T.btns[s_Spotlight].hide();\n            T.btns[s_LaserPointer].hide();\n            T.btns[s_Print].hide();\n            T.btns[s_ToolbarSpliter].hide();\n        }\n\n        // 如果是小屏，或在封面\n        if (V_ui_isSmallScreen() || !iNavCenter.catalog.inHeader()) {\n            // 调整具栏按钮分隔空间\n            V_util_setVarVal(\"--v-toolbar-btn-space\", \"5px\");\n\n            let offsetY = 0;//JS_parseInt(T.chpNav.ui.c(s_Top));\n            // 小屏\n            if (V_ui_isSmallScreen()) {\n                T.ui.c(s_PaddingLeft, 0)\n                    .c(s_PaddingRight, 0)\n                    .c(s_Top, 50 + offsetY);\n            }\n\n            // 微调工具栏分隔宽度\n            T.btns[s_ToolbarSpliter].c(s_Width, 20);\n\n            // 调整工具栏样式\n            JQ_removeClass(T.ui, s_CssFloatCard);\n            JQ_addClass(T.ui, s_Cover);\n\n            // 为去掉工具栏背景的按钮添加浮动样式\n            JQ_addClass(T.ui.ch(s_CssBtn_BtnGroup), s_CssFloatCard);\n            JQ_addClass(T.ui.ch(s_CssBtn_BtnGroup), s_Float);\n\n            // 大屏，回到封面及最开始位置进行二次调整\n            if (!V_ui_isSmallScreen()\n                && !iNavCenter.catalog.inHeader()) {\n                if ($(document).scrollTop() <= 5) {\n                    T.ui.c(s_PaddingLeft, 10)\n                        .c(s_PaddingRight, 10)\n                        .c(s_Top, 10);\n                }\n                else {\n                    T.ui.c(s_PaddingLeft, 10)\n                        .c(s_PaddingRight, 10)\n                        .c(s_Top, 0);\n                }\n            }\n            else {\n                // 小屏，在非封面位置进行二次调整\n                if (V_ui_isSmallScreen() && iNavCenter.catalog.inHeader())\n                    T.ui.c(s_PaddingLeft, 0)\n                        .c(s_PaddingRight, 0)\n                        .c(s_Top, 50 + offsetY);\n                else {\n                    // 小屏，在封面及最开始位置进行二次调整\n                    if ($(document).scrollTop() <= 5)\n                        T.ui.c(s_PaddingLeft, 10)\n                            .c(s_PaddingRight, 10)\n                            .c(s_Top, 10);\n                    // 小屏，在封面位置进行二次调整\n                    else\n                        T.ui.c(s_PaddingLeft, 10)\n                            .c(s_PaddingRight, 10)\n                            .c(s_Top, 0);\n                }\n            }\n        }\n        // 宽屏，且不在封面\n        else {\n            if (T.ui.o().top === 0)\n                return;\n\n            // 调整具栏按钮分隔空间\n            V_util_setVarVal(\"--v-toolbar-btn-space\", \"2px\");\n\n            // 调整工具栏样式\n            JQ_removeClass(T.ui, s_Cover);\n            JQ_addClass(T.ui, s_CssFloatCard);\n\n            // 微调工具栏分隔宽度\n            let btnCount = T.ui.f(\".v-btn\").length,\n                btnWidth = JS_parseInt(V_util_getVarVal(\"--v-toolbar-btn-width\")),\n                space = JS_parseInt(V_util_getVarVal(\"--v-toolbar-btn-space\"));\n            T.btns[s_ToolbarSpliter].c(s_Width, \"calc((var(--v-nav-center-width) - \"\n                    + (btnCount * btnWidth + JS_parseInt(T.ui.c(s_PaddingLeft)) * 2 + (btnCount - 4) * space) + \"px) / 2)\");\n\n            T.ui.c(s_PaddingLeft, 10)\n                .c(s_PaddingRight, 10)\n                .c(s_Top, 0);\n            // 为增加了工具栏按钮的背景去掉浮动样式\n            JQ_removeClass(T.ui.ch(s_CssBtn_BtnGroup), s_CssFloatCard);\n            JQ_removeClass(T.ui.ch(s_CssBtn_BtnGroup), s_Float);\n        } // else\n        T.ui.show();\n    }\n\n    /**\n     * 更新工具栏按钮图标\n     */\n    T.updateIcons = function () {\n        // 调整模式切换按钮图标\n        if (ColorScheme.scheme === s_Light)\n            T.btns[s_ColorScheme].h(\n                \"<svg width='18px' height='18px'><use xlink:href='#icoDarkMode' class='v-svg-ico-light'/></svg>\"\n            );\n        else\n            T.btns[s_ColorScheme].h(\n                \"<svg width='20px' height='20px'><use xlink:href='#icoLightMode' class='v-svg-ico-light'/></svg>\"\n            );\n    }\n}\n\n// ==================== 颜色方案类 ==================== //\n\n/**\n * 构造函数\n */\nfunction ColorScheme(button) {}\n\nColorScheme.scheme = s_Light; // 当前颜色以方案，light/dark\nColorScheme.schemeBeforePrint = s_Light; // 打印前的颜色方案\n\n/**\n * 初始化\n */\nColorScheme.init = function () {\n    const __lightIcon = document.querySelector('link#doc-icon-light');\n    const __darkIcon = document.querySelector('link#doc-icon-dark');\n\n    // Light Mode 时的文档图标\n    function __setLightIcon() {\n        JQ_remove(__darkIcon);\n        document.head.append(__lightIcon);\n    }\n\n    // Dark Mode 时的文档图标\n    function __setDarkIcon() {\n        JQ_remove(__lightIcon);\n        document.head.append(__darkIcon);\n    }\n\n    // 根据系统 Color Scheme 变化进行适配更新颜色方案\n    function __syncScheme(matcher) {\n        if (matcher.matches) {\n            __updateIcons(gTrue);\n            ColorScheme.tg(s_Dark);\n        }\n        else {\n            __updateIcons(gFalse);\n            ColorScheme.tg(s_Light);\n        }\n    }\n\n    // 根据系统 Color Scheme 变化进行适配更新图标\n    function __updateIcons(flag) {\n        if (flag) {\n            __setDarkIcon();\n            ColorScheme.scheme = s_Dark;\n        }\n        else {\n            __setLightIcon();\n            ColorScheme.scheme = s_Light;\n        }\n        iToolbar.updateIcons();\n    }\n\n    // 监听系统的 Color Scheme 变化\n    const matcher = window.matchMedia('(prefers-color-scheme:dark)');\n    matcher.addListener(__syncScheme);\n\n    // 初始执行\n    __updateIcons(matcher.matches);\n}\n\n/**\n * 切换颜色方案\n * @param scheme 指定方案，为空时则轮换\n */\nColorScheme.tg = function (scheme) {\n    if (scheme === gUndefined)\n        scheme = (ColorScheme.scheme === s_Light) ? s_Dark : s_Light;\n\n    ColorScheme.scheme = scheme;\n    INFO(\"    Switch to ... [ \" + ColorScheme.scheme + \" ]\");\n    // 应用最新颜色方案\n    ColorScheme.refresh();\n\n    if (iNavCenter.docLib.enabled) {\n        iNavCenter.docLib.reload(ColorScheme.scheme);\n    }\n    INFO(\"    DONE!\");\n}\n\n/**\n * 根据指定的颜色方案进行文档刷新\n */\nColorScheme.refresh = function () {\n    iToolbar.updateIcons();\n\n    // 批量修改颜色方案相关的 CSS 变量为指定的新值\n    let ac = \"--ac-\",\n        _alt = \"-alt\",\n        _fade = \"-fade\",\n        _title = \"-title\",\n        // ---\n        acRed = ac + \"red\",\n        acOrange = ac + \"orange\",\n        acYellow = ac + \"yellow\",\n        acLime = ac + \"lime\",\n        acGreen = ac + \"green\",\n        acAqua = ac + \"aqua\",\n        acCyan = ac + \"cyan\",\n        acBlue = ac + \"blue\",\n        acSea = ac + \"sea\",\n        acSteel = ac + \"steel\",\n        acPurple = ac + \"purple\",\n        acRose = ac + \"rose\",\n        acPink = ac + \"pink\",\n        acGold = ac + \"gold\",\n        acBrown = ac + \"brown\",\n        acGray = ac + \"gray\",\n        acTheme1 = ac + \"theme1\",\n        acTheme2 = ac + \"theme2\",\n        // ---\n        mm = \"--mm-c-\",\n        // ---\n        mmRed = mm + \"red\",\n        mmOrange = mm + \"orange\",\n        mmYellow = mm + \"yellow\",\n        mmGreen = mm + \"green\",\n        mmCyan = mm + \"cyan\",\n        mmBlue = mm + \"blue\",\n        mmPurple = mm + \"purple\",\n        mmPink = mm + \"pink\",\n        mmBrown = mm + \"brown\",\n        mmGray = mm + \"gray\",\n        // ---\n        cm = \"--cm-\";\n\n    V_util_changeCssVarSet([\n        \"--v-invert-dark\",\n        \"--v-brightness-dark\",\n        \"--d-bc\",\n        \"--d-bi\",\n        \"--d-bc-tsp\",\n        \"--d-f-c\",\n        \"--pn-c\",\n        \"--pn-c-alt\",\n        \"--pn-c-tsp\",\n        \"--blockquote-bg\",\n        \"--a-color\",\n        \"--mark-bg\",\n        \"--tbl-bder\",\n        \"--tbl-th-bg\",\n        \"--tbl-td-bg\",\n        \"--tbl-cell-bder\",\n        \"--tbl-row-g-alpha\",\n        \"--toc-h-num-color\",\n        \"--h-f\",\n        \"--h-box-shadow\",\n        \"--h-bg-start\",\n        \"--h-bg-end\",\n        \"--code-bg\",\n        \"--std-code-shadow\",\n        \"--rb-code-shadow\",\n        \"--c-blk-bg\",\n        \"--key-bg\",\n        \"--key-reflect\",\n        \"--key-shadow\",\n        acRed,\n        acRed + _alt,\n        acRed + _fade,\n        acRed + _title,\n        acOrange,\n        acOrange + _alt,\n        acOrange + _fade,\n        acOrange + _title,\n        acYellow,\n        acYellow + _alt,\n        acYellow + _fade,\n        acYellow + _title,\n        acLime,\n        acLime + _alt,\n        acLime + _fade,\n        acLime + _title,\n        acGreen,\n        acGreen + _alt,\n        acGreen + _fade,\n        acGreen + _title,\n        acAqua,\n        acAqua + _alt,\n        acAqua + _fade,\n        acAqua + _title,\n        acCyan,\n        acCyan + _alt,\n        acCyan + _fade,\n        acCyan + _title,\n        acBlue,\n        acBlue + _alt,\n        acBlue + _fade,\n        acBlue + _title,\n        acSea,\n        acSea + _alt,\n        acSea + _fade,\n        acSea + _title,\n        acSteel,\n        acSteel + _alt,\n        acSteel + _fade,\n        acSteel + _title,\n        acPurple,\n        acPurple + _alt,\n        acPurple + _fade,\n        acPurple + _title,\n        acRose,\n        acRose + _alt,\n        acRose + _fade,\n        acRose + _title,\n        acPink,\n        acPink + _alt,\n        acPink + _fade,\n        acPink + _title,\n        acGold,\n        acGold + _alt,\n        acGold + _fade,\n        acGold + _title,\n        acBrown,\n        acBrown + _alt,\n        acBrown + _fade,\n        acBrown + _title,\n        acGray,\n        acGray + _alt,\n        acGray + _fade,\n        acGray + _title,\n        acTheme1,\n        acTheme1 + _alt,\n        acTheme1 + _fade,\n        acTheme1 + _title,\n        acTheme2,\n        acTheme2 + _alt,\n        acTheme2 + _fade,\n        acTheme2 + _title,\n        mmRed,\n        mmRed + _alt,\n        mmOrange,\n        mmOrange + _alt,\n        mmYellow,\n        mmYellow + _alt,\n        mmGreen,\n        mmGreen + _alt,\n        mmCyan,\n        mmCyan + _alt,\n        mmBlue,\n        mmBlue + _alt,\n        mmPurple,\n        mmPurple + _alt,\n        mmPink,\n        mmPink + _alt,\n        mmBrown,\n        mmBrown + _alt,\n        mmGray,\n        mmGray + _alt,\n        cm + \"keyword\",\n        cm + \"variable\",\n        cm + \"variable-2\",\n        cm + \"variable-3\",\n        cm + \"tag\",\n        cm + \"attribute\",\n        cm + \"CodeMirror-cursor\",\n        cm + \"string\",\n        cm + \"string-2\",\n        cm + \"comment\",\n        cm + \"header\",\n        cm + \"quote\",\n        cm + \"hr\",\n        cm + \"link\",\n        cm + \"negative\",\n        cm + \"positive\",\n        cm + \"meta\",\n        cm + \"bulidin\",\n        cm + \"bracket\",\n        cm + \"atom\",\n        cm + \"number\"\n    ], (ColorScheme.scheme === s_Dark) ? \"dk\" : \"lg\");\n\n    // 针对 Dark Mode 进行适配处理\n    ExtFigure_adjustColorScheme(gTrue);\n\n}\n\n/**\n * 根据颜色方案对浏览器兼容性处理\n */\n// ColorScheme.afterToggle = function () {\n//     $(\".v-copyright\").ch(\"svg\").h(\"<use xlink:href='#icoVLOOK-\" + ColorScheme.scheme + \"'></use>\");\n// }\n\n// ==================== 字体风格选项、选择器类 ==================== //\n\nlet webfontHostAlt = \"https://madmaxchow.github.io/openfonts/\";\n// let webfontHostAlt = \"https://cdn.jsdelivr.net/gh/MadMaxChow/openfonts@master/\";\n\n/**\n * 构造函数\n * @param ui 选项的 UI\n * @param fonts 字体集数组\n */\nfunction FontThemeOption(ui, fonts) {\n    let T = this;\n    T.ui = ui;\n    T.fonts = fonts;\n    T.fontCount = T.fonts.length;\n}\n\n/**\n * 构造函数\n * @param mask 遮罩对象\n * @param theme 默认的字体主题\n */\nfunction FontTheme(mask, theme) {\n    let T = this;\n    T.theme = theme; // 当前字体风格，sans：非衬线（小清新），serif：衬线（文艺范）\n    T.ui = $(\".v-font-theme\"); // 字体风格切换选择界面\n    // 系统默认字体风格选项\n    T.localTheme = new FontThemeOption($(\".v-font-theme-opt-local\"), []);\n    // 小清新字体风格选项\n    T.sansTheme = new FontThemeOption($(\".v-font-theme-opt-sans\"),\n        [\n            \"VLOOK Number/normal/normal\", \"VLOOK Number/normal/bold\", \"VLOOK Number/italic/normal\",\n            \"VLOOK Digital Sans/normal/normal\", \"VLOOK Digital Sans/normal/500\", \"VLOOK Digital Sans/normal/bold\", \"VLOOK Digital Sans/normal/900\",\n            \"VLOOK Sans Mono/normal/normal\", \"VLOOK Sans Mono/normal/500\", \"VLOOK Sans Mono/normal/bold\", \"VLOOK Sans Mono/normal/900\",\n            \"VLOOK Sans/normal/normal\", \"VLOOK Sans/normal/bold\", \"VLOOK Sans/normal/900\"\n            ]);\n    // 艺术范字体风格选项\n    T.serifTheme = new FontThemeOption($(\".v-font-theme-opt-serif\"),\n        [\n            \"VLOOK Number/normal/normal\", \"VLOOK Number/normal/bold\", \"VLOOK Number/italic/normal\",\n            \"VLOOK Digital Serif/normal/normal\", \"VLOOK Digital Serif/normal/bold\", \"VLOOK Digital Serif/italic/normal\", \"VLOOK Digital Serif/italic/bold\",\n            \"VLOOK Serif Mono/normal/normal\", \"VLOOK Serif Mono/normal/bold\", \"VLOOK Serif Mono/italic/normal\", \"VLOOK Serif Mono/italic/bold\",\n            \"VLOOK Serif/normal/500\", \"VLOOK Serif/normal/900\",\n            \"VLOOK Sans Mono/normal/normal\", \"VLOOK Sans Mono/normal/500\", \"VLOOK Sans Mono/normal/bold\", \"VLOOK Sans Mono/normal/900\",\n            \"VLOOK Sans/normal/normal\", \"VLOOK Sans/normal/bold\", \"VLOOK Sans/normal/900\"\n        ]);\n    // 遮罩\n    T.mask = mask;\n    T.mask.bindPartner(this, T.ui);\n\n    V_ui_addAnimate(T.ui);\n\n    // 绑定各字体风格选项事件\n    T.localTheme.ui.uC().ck(function () {\n        T.apply(\"local\");\n        T.hide();\n    });\n    T.sansTheme.ui.uC().ck(function () {\n        T.apply(\"sans\");\n        // DEBUG(\"fontCount\", T.sansTheme.fontCount, \"fontLength\", T.sansTheme.fonts.length);\n        T.initWebFont();\n        T.hide();\n    });\n    T.serifTheme.ui.uC().ck(function () {\n        T.apply(\"serif\");\n        // DEBUG(\"fontCount\", T.serifTheme.fontCount, \"fontLength\", T.serifTheme.fonts.length);\n        T.initWebFont();\n        T.hide();\n    });\n\n    /**\n     * 初始化\n     * @param theme 可选。强制指定的字体主题\n     */\n    T.init = function (theme) {\n        // 有指定强制字体主题，同时指定的字体主题合法且与文档配套的不一致，则进行处理\n        if (theme !== gUndefined\n            && theme.m(/^(local|sans|serif)$/i) != null\n            && theme !== T.theme) {\n                T.theme = theme;\n                T.apply(T.theme);\n        }\n\n        LOG(\"_____ FONT THEME (\" + T.theme + \") _____ \");\n\n        T.initWebFont();\n\n        // 对于本地字体主题的状态，直接为就绪\n        $(\".v-fontinfo-local > #fontset-status\").t(\"✅ \" + [\n            \"已就绪\",\n            // \"已就緒\",\n            \"Ready\",\n            // \"Prêt\", \"Bereit\", \"Listo\", \"готов\", \"準備完了\", \"준비된\"\n        ][V_lang_id],);\n    }\n\n    /**\n     * 初始化 WebFont\n     */\n    T.initWebFont = function () {\n        let fontWeight500 = \"500\",\n            fontWeight900 = \"900\",\n            _Regular = \"-Regular\",\n            _Medium = \"-Medium\",\n            _Bold = \"-Bold\",\n            _Black = \"-Black\",\n            _Italic = \"-Italic\";\n        let unicodeRange = \"U+0021-002F,\" // !\"#$%&'()*+,-./（不含空格）\n            + \"U+0030-0039,\" // 0123456789\n            + \"U+003A-0040,\" // :;<=>?@\n            + \"U+005B-0060,\" // [\\]^_`\n            + \"U+007B-007E\"; // {|}~\n        let timeOutMsg = \"❌ \" + [\"超时\", \"Timeout\"][V_lang_id];\n\n        if (T.theme === \"local\") {\n            // 动态加载字体 VLOOK Number\n            __loadNumberFont();\n        }\n        else if (T.theme === \"sans\") {\n            // 动态加载字体 VLOOK Number\n            __loadNumberFont();\n            // 动态加载字体 VLOOK Digital Sans\n            __LoadDigitalSansFont();\n            // 动态加载字体 VLOOK Sans Mono\n            __loadSansMonoFont();\n            // 动态加载字体 VLOOK Noto Sans CJK SC\n            __loadSansCjkFont();\n\n            // Sans 字体主题的加载超时检测\n            setTimeout(function () {\n                if (T.sansTheme.fonts.length > 0)\n                    $(\".v-fontinfo-sans > #fontset-status\").t(timeOutMsg);\n            }, 600000); // 10 分钟后进行超时检测\n        }\n        else if (T.theme === \"serif\") {\n            // 动态加载字体 VLOOK Number\n            __loadNumberFont();\n            // 动态加载字体 VLOOK Digital Serif\n            __LoadDigitalSerifFont();\n            // 动态加载字体 VLOOK Serif Mono\n            __loadSerifMonoFont();\n            // 动态加载字体 VLOOK Noto Serif CJK SC\n            __loadSerifCjkFont();\n\n            // 动态加载字体 VLOOK Sans Mono\n            __loadSansMonoFont();\n            // 动态加载字体 VLOOK Noto Sans CJK SC\n            __loadSansCjkFont();\n\n            // Serif 字体主题的加载超时检测\n            setTimeout(function () {\n                if (T.serifTheme.fonts.length > 0)\n                    $(\".v-fontinfo-serif > #fontset-status\").t(timeOutMsg);\n            }, 600000); // 10 分钟后进行超时检测\n        }\n\n        // 动态加载字体 VLOOK Number\n        function __loadNumberFont() {\n            let fontName = \"VLOOK Number\",\n                srcName = \"Altinn-DIN\";\n            T.loadFont(fontName, s_Normal, s_Normal, srcName, srcName, \"otf\", s_WOFF2);\n            T.loadFont(fontName, s_Normal, s_Bold, srcName, srcName + _Bold, \"otf\", s_WOFF2);\n            T.loadFont(fontName, s_Italic, s_Normal, srcName, srcName + _Italic, \"otf\", s_WOFF2);\n        }\n\n        // 动态加载字体 VLOOK Digital Sans\n        function __LoadDigitalSansFont() {\n            let fontName = \"VLOOK Digital Sans\",\n                srcName = \"NotoSansMono\";\n            T.loadFont(fontName, s_Normal, s_Normal, srcName, srcName + _Regular, s_TTF, s_WOFF2, unicodeRange);\n            T.loadFont(fontName, s_Normal, fontWeight500, srcName, srcName + _Medium, s_TTF, s_WOFF2, unicodeRange);\n            T.loadFont(fontName, s_Normal, s_Bold, srcName, srcName + _Bold, s_TTF, s_WOFF2, unicodeRange);\n            T.loadFont(fontName, s_Normal, fontWeight900, srcName, srcName + _Black, s_TTF, s_WOFF2, unicodeRange);\n        }\n\n        // 动态加载字体 VLOOK Digital Serif\n        function __LoadDigitalSerifFont() {\n            let fontName = \"VLOOK Digital Serif\",\n                srcName = \"LuxiMono\";\n            let luxiMonoSubName = srcName + _Italic;\n            T.loadFont(fontName, s_Normal, s_Normal, srcName, srcName + _Regular, s_TTF, s_WOFF2, unicodeRange);\n            T.loadFont(fontName, s_Normal, s_Bold, srcName, srcName + _Bold, s_TTF, s_WOFF2, unicodeRange);\n            T.loadFont(fontName, s_Italic, s_Normal, srcName, luxiMonoSubName + _Regular, s_TTF, s_WOFF2, unicodeRange);\n            T.loadFont(fontName, s_Italic, s_Bold, srcName, luxiMonoSubName + _Bold, s_TTF, s_WOFF2, unicodeRange);\n        }\n\n        // 动态加载字体 VLOOK Sans Mono\n        function __loadSansMonoFont() {\n            let fontName = \"VLOOK Sans Mono\",\n                srcName = \"NotoSansMono\";\n            T.loadFont(fontName, s_Normal, s_Normal, srcName, srcName + _Regular, s_TTF, s_WOFF2);\n            T.loadFont(fontName, s_Normal, fontWeight500, srcName, srcName +_Medium, s_TTF, s_WOFF2);\n            T.loadFont(fontName, s_Normal, s_Bold, srcName, srcName + _Bold, s_TTF, s_WOFF2);\n            T.loadFont(fontName, s_Normal, fontWeight900, srcName, srcName + _Black, s_TTF, s_WOFF2);\n        }\n\n        // 动态加载字体 VLOOK Serif Mono\n        function __loadSerifMonoFont() {\n            let fontName = \"VLOOK Serif Mono\",\n                srcName = \"LuxiMono\";\n            let luxiMonoSubName = srcName + _Italic;\n            T.loadFont(fontName, s_Normal, s_Normal, srcName, srcName + _Regular, s_TTF, s_WOFF2);\n            T.loadFont(fontName, s_Normal, s_Bold, srcName, srcName + _Bold, s_TTF, s_WOFF2);\n            T.loadFont(fontName, s_Italic, s_Normal, srcName, luxiMonoSubName + _Regular, s_TTF, s_WOFF2);\n            T.loadFont(fontName, s_Italic, s_Bold, srcName, luxiMonoSubName + _Bold, s_TTF, s_WOFF2);\n        }\n\n        // 动态加载字体 VLOOK Noto Sans CJK SC\n        function __loadSansCjkFont() {\n            let fontName = \"VLOOK Sans\",\n                srcName = \"NotoSansCJKsc\";\n            T.loadFont(fontName, s_Normal, s_Normal, srcName, srcName + _Regular, \"otf\", s_WOFF2);\n            T.loadFont(fontName, s_Normal, s_Bold, srcName, srcName + _Bold, \"otf\", s_WOFF2);\n            T.loadFont(fontName, s_Normal, fontWeight900, srcName, srcName + _Black, \"otf\", s_WOFF2);\n        }\n\n        // 动态加载字体 VLOOK Noto Serif CJK SC\n        function __loadSerifCjkFont() {\n            let fontName = \"VLOOK Serif\",\n                srcName = \"NotoSerifCJKsc\";\n            T.loadFont(fontName, s_Normal, fontWeight500, srcName, srcName + _Medium, \"otf\", s_WOFF2);\n            T.loadFont(fontName, s_Normal, fontWeight900, srcName, srcName + _Black, \"otf\", s_WOFF2);\n        }\n    }\n\n    /**\n     * 绑定选择字体风格操作按钮\n     * @param button 绑定的工具栏按钮\n     */\n    T.bindButton = function (button) {\n        T.button = button; // 绑定的工具栏按钮\n    }\n\n    /**\n     * 加载自定义字体\n     * @param fontFamily 自定义字体名称\n     * @param fontStyle 字体样式\n     * @param fontWeight 字重\n     * @param srcFontName 字体源名称\n     * @param srcFontSubName 字体源子名称\n     * @param suffix 字体扩展名，支持 otf ttf\n     * @param woff 加载 woff 的版本，支持 woff woff2，不加载不指定\n     * @param unicodeRange 指定应用的字符范围\n     */\n    T.loadFont = function (fontFamily, fontStyle, fontWeight, srcFontName, srcFontSubName, suffix, woff, unicodeRange) {\n        if (document.fonts && !T.isExist(fontFamily, fontStyle, fontWeight)) {\n            let woffURL = \"url('\" + webfontHostAlt + srcFontName + \"-\" + woff + \"/\" + srcFontSubName + \".\" + woff + \"') format('woff2')\",\n                fontFace;\n            if (unicodeRange === gUndefined) {\n                fontFace = new FontFace(fontFamily,\n                    ((woff !== gUndefined) ? woffURL : \"\"), {\n                        style: fontStyle,\n                        weight: fontWeight,\n                        display: \"swap\"\n                    });\n            }\n            else {\n                fontFace = new FontFace(fontFamily,\n                    ((woff !== gUndefined) ? woffURL : \"\"), {\n                        style: fontStyle,\n                        weight: fontWeight,\n                        display: \"swap\",\n                        unicodeRange: \"U+0030-0039\"\n                    });\n            }\n\n            // 指定字体加载完成后回调函数\n            fontFace.load().then(function(loadedFontFace) {\n                document.fonts.add(loadedFontFace);\n\n                let fontID = fontFamily + \"/\" + fontStyle + \"/\" + fontWeight,\n                    readyMsg = \"✅ \" + [\"已就绪\", \"Ready\"][V_lang_id],\n                    loadingMsg = [\"加载中\", \"Loading\"][V_lang_id];\n                LOG(\"↓↓↓ FONT LOADED ↓↓↓\");\n                LOG(fontID);\n\n                // --------------------\n                // 更新小清新风格字体包下载进度\n                // 剔除已下载的字体字形\n                for (let i = 0; i < T.sansTheme.fonts.length; i++) {\n                    if (T.sansTheme.fonts[i] === fontID) {\n                        T.sansTheme.fonts.splice(i, 1);\n                        break;\n                    }\n                }\n                // 计算进度\n                let sansLoadedCount = T.sansTheme.fontCount - T.sansTheme.fonts.length,\n                    sansStatus = $(\".v-fontinfo-sans > #fontset-status\");\n                if (sansLoadedCount < T.sansTheme.fontCount)\n                    sansStatus.t(loadingMsg + \"... (\" + JS_mathRound(sansLoadedCount / T.sansTheme.fontCount * 100) + \"%)\");\n                else\n                    sansStatus.t(readyMsg);\n\n                // --------------------\n                // 更新艺术范风格字体包下载进度\n                // 剔除已下载的字体字形\n                for (let i = 0; i < T.serifTheme.fonts.length; i++) {\n                    if (T.serifTheme.fonts[i] === fontID) {\n                        T.serifTheme.fonts.splice(i, 1);\n                        break;\n                    }\n                }\n                // 计算进度\n                let serifLoadedCount = T.serifTheme.fontCount - T.serifTheme.fonts.length,\n                    serifStatus = $(\".v-fontinfo-serif > #fontset-status\");\n                if (serifLoadedCount < T.serifTheme.fontCount)\n                    serifStatus.t(loadingMsg + \"... (\" + JS_mathRound(serifLoadedCount / T.serifTheme.fontCount * 100) + \"%)\");\n                else\n                    serifStatus.t(readyMsg);\n            });\n        }\n    }\n\n    /**\n     * 检测指定自定义字体是否已加载\n     * @param fontFamily 自定义字体名称\n     * @param fontStyle 字体样式\n     * @param fontWeight 字重\n     */\n    T.isExist = function (fontFamily, fontStyle, fontWeight) {\n        let values = document.fonts.values(),\n            isHave = gFalse,\n            item = values.next();\n\n        while (!item.done && !isHave) {\n            let fontFace = item.value;\n            if (fontFace.family === fontFamily\n                && fontFace.style === fontStyle\n                && fontFace.weight === fontWeight) {\n                    isHave = gTrue;\n                    LOG(\"///// FONT IS EXIST /////\");\n                    LOG(fontFamily + \"/\" + fontStyle + \"/\" + fontWeight);\n            }\n            item = values.next();\n        }\n        return isHave;\n    }\n\n    /**\n     * 显示字体风格选择器\n     */\n    T.show = function () {\n        T.mask.show();\n        V_ui_moveToCenter(T.ui);\n        T.ui.show();\n\n        LOG(\"'\" + T.theme + \"'\");\n        if (T.theme === \"local\") {\n            JQ_addClass(T.localTheme.ui, s_Selected);\n            JQ_removeClass(T.sansTheme.ui, s_Selected);\n            JQ_removeClass(T.serifTheme.ui, s_Selected);\n        }\n        else if (T.theme === \"sans\") {\n            JQ_addClass(T.sansTheme.ui, s_Selected);\n            JQ_removeClass(T.localTheme.ui, s_Selected);\n            JQ_removeClass(T.serifTheme.ui, s_Selected);\n        }\n        else {\n            JQ_addClass(T.serifTheme.ui, s_Selected);\n            JQ_removeClass(T.localTheme.ui, s_Selected);\n            JQ_removeClass(T.sansTheme.ui, s_Selected);\n        }\n    }\n\n    /**\n     * 显示/隐藏字体风格选择器\n     */\n    T.tg = function () {\n        if (T.ui.c(s_Display) === s_Block) {\n            T.hide();\n        }\n        else {\n            T.show();\n        }\n    }\n\n    /**\n     * 隐藏字体风格选择器\n     */\n    T.hide = function () {\n        T.ui.hide();\n        T.mask.hide();\n    }\n\n    /**\n     * 应用指定字体风格\n     * @param theme 指定应用的字体风格（sans/serif），不指定则以为当前字体风格\n     */\n    T.apply = function (theme) {\n        // 修正无指定样式的情况\n        if (theme === gUndefined)\n            theme = T.theme;\n        T.theme = theme;\n\n        // V_report_push([s_Style, 'FontTheme', theme, 0]);\n\n        // CSS 变量名称列表\n        const varList = [\n            \"--v-f-fm-title\",\n            \"--v-f-fm-subtitle\",\n            \"--v-f-fm-h\",\n            \"--v-f-fm-text\",\n            \"--v-f-fm-bd\",\n            \"--v-f-fm-key\",\n            \"--v-f-fm-num\",\n            \"--v-f-fm-tag\",\n            \"--v-f-fm-code\",\n            \"--v-f-w-bd\",\n            \"--v-f-w-title\",\n            \"--v-f-w-text\"\n        ];\n        // 生成目标字体主题变量值列表\n        let fontVarList = [];\n        for (let i = 0, len = varList.length; i < len; i++) {\n            fontVarList.push(V_util_getVarVal(varList[i] + \"-\" + T.theme));\n        }\n        // 遍历所有变量实现字体主题的切换\n        for (let i = 0, len = varList.length; i < len; i++) {\n            V_util_setVarVal(varList[i], fontVarList[i]);\n        }\n    }\n\n    /**\n     * 处理热键操作\n     * @param code 非功能键键\n     * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n     */\n    T.disposeHotkey = function (code, combKeys) {\n        if (T.ui.isHidden())\n            return;\n\n        switch (code) {\n            case 27: // ESC\n                T.hide();\n                break;\n        }\n    }\n}\n\n// ==================== 脚注类 ==================== //\n\n/**\n * 构造函数\n * @param mask 遮罩对象\n */\nfunction FootNote(mask) {\n    let T = this;\n    T.ui = $(\".v-foot-note-panel\"); // 脚注主界面\n    T.content = $(\".v-foot-note-panel-content\"); // 脚注内容区\n\n    T.buttonSeeAll = $(\".v-foot-note-panel-all\"); // 查看所有脚注按钮\n    T.buttonSeeAll.uC().ck(function () {\n        T.hide();\n        // 跳转至所有脚注区域\n        WINDOW_setHref(\"#vk-footer-area\");\n    });\n\n    // 遮罩\n    T.mask = mask;\n    T.mask.bindPartner(this, T.ui);\n\n    /**\n     * 显示脚注弹层\n     */\n    T.show = function () {\n        // 显示关联的遮罩\n        T.mask.show();\n\n        if (V_ui_isSmallScreen())\n            T.ui.c(s_Left, 20)\n                .c(s_Right, 20);\n        else\n            T.ui.c(s_Left, \"15%\")\n                .c(s_Right, \"15%\");\n\n        T.ui.show();\n    }\n\n    /**\n     * 隐藏脚注弹层\n     */\n    T.hide = function () {\n        T.ui.hide();\n        T.mask.hide();\n    }\n\n    /**\n     * 处理热键操作\n     * @param code 非功能键键\n     * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n     */\n    T.disposeHotkey = function (code, combKeys) {\n        if (T.ui.isHidden())\n            return;\n\n        switch (code) {\n            case 27: // ESC\n                T.hide();\n                break;\n        }\n    }\n}\n\n/**\n * 初始化脚注\n */\nFootNote.init = function () {\n    // 将 Typora 的脚注调整到封底前，VLOOK 规范的文档中最后一个 <h6> 是封底\n    let footnotesArea = $(\".\" + s_FootnotesArea);\n    // 「有封面」模式\n    if (VOM_backcover() !== gUndefined)\n        footnotesArea.insertBefore(VOM_backcover());\n    // 「无封面」模式\n    else\n        VOM_doc().append(footnotesArea);\n\n    // 将 VLOOK 生成的脚注区锚点调整到生成 HTML 后的实际位置\n    $(\"#vk-footer-area\").insertBefore(footnotesArea);\n\n    // 移除默认的跳转属性\n    let a = $(\"a[name^='ref-footnote-'], a[id^='ref-footnote-']\");\n    a.removeAttr(s_Href);\n    // 将脚注角标的事件替换为指定的处理事件\n    a.uC().ck(function () {\n        // 获取脚注【返回】链接对应的脚注原文信息\n        let _t = $(this),\n            target = $(\"a[name='df\" + _t.a(s_Name) + \"'], a[id='df\" + _t.a(s_Name) + \"']\").p().clone();\n\n        // 更新脚注弹层内容区\n        LOG(target, target.t());\n        iFootNote.content.h(target);\n        // 移除默认的返回链接\n        JQ_remove(target.f(\"a[name^='dfref-footnote'], a[id^='dfref-footnote']\"));\n\n        // 显示脚注弹层\n        iFootNote.show();\n    });\n}\n\n// ==================== 状态栏类 ==================== //\n\nlet StatusBar_ui = gUndefined,\n    StatusBar_items = [], // 状态栏条目集\n    StatusBar_options = V_util_getParamVal(\"stsbar\");\n/**\n * 构造函数\n */\nfunction StatusBar_init() {\n    StatusBar_ui = $(\".v-status-bar\");\n    if (V_type !== \"max\")\n        StatusBar_ui.hide();\n}\n\n/**\n * 添加状态栏条目\n * @param name 条目标识\n * @param item 条目对象\n */\nfunction StatusBar_add(name, item) {\n    StatusBar_items[name] = item;\n    if (StatusBar_options !== gUndefined && StatusBar_options.i(name) > -1) {\n        item.enabled = gFalse;\n        JQ_remove(item.ui);\n    }\n}\n\n/**\n * 自适应显示状态栏\n */\nfunction StatusBar_adjust() {\n    // 移动端下隐藏不必要的功能入口\n    if (env.device.mobile) {\n        JQ_remove(StatusBar_items[\"zoom-view\"]);\n    }\n}\n\n// ==================== 文档信息类 ==================== //\n\nlet DocInfo_ui = gUndefined,\n    DocInfo_enabled = gTrue;\n/**\n * 构造函数\n */\nfunction DocInfo_init() {\n    DocInfo_ui = $(\".v-doc-info\");\n}\n\n/**\n * 统计字数\n */\nfunction DocInfo_countWord() {\n    if (!DocInfo_enabled)\n        return;\n\n    let latin = VOM_doc().t().m(/[\\w\\-]+/g),\n        cjk = VOM_doc().t().m(/\\p{Unified_Ideograph}/ug);\n        // docInfo = $(\".v-doc-info\");\n    let latinCount = (latin == null) ? 0 : latin.length,\n        cjkCount = (cjk == null) ? 0 : cjk.length,\n        wordCount = latinCount + cjkCount,\n        readCountPerMin = 180;\n\n    // 计算阅读时长\n    let mins = wordCount < readCountPerMin ? 1 : JS_parseInt(wordCount / readCountPerMin),\n        times = mins + \" \" + [\n            \"分钟\",\n            // \"分鐘\",\n            \"minutes\",\n            // \"minutes\", \"minute\", \"minutos\", \"минута\", \"分\", \"분.\"\n        ][V_lang_id];\n    if (mins > 60)\n        times = (mins / 60).toFixed(1) + \" \" + [\n            \"小时\",\n            // \"小時\",\n            \"hours\",\n            // \"heures\", \"stunden\", \"horas\", \"час\", \"時間\", \"시간.\"\n        ][V_lang_id];\n    // 默认信息\n    DocInfo_ui.a(s_DataDefault,\n        times + \" / \" + V_formatting_thousands(wordCount.toString()) + \" \"\n        + [\n            \"字\",\n            // \"字\",\n            \"words\",\n            // \"mots\", \"Wörter\", \"palabras\", \"слова\", \"言葉\", \"말\"\n        ][V_lang_id]);\n    // 扩展信息\n    DocInfo_ui.a(s_DataExtend,\n        \"( \" + V_formatting_thousands(cjkCount.toString()) + \" \" + [\n            \"中日韩，\",\n            // \"中日韓，\",\n            \"CJK, \",\n            // \"CJK, \", \"CJK, \", \"CJK, \", \"CJK, \", \"CJK，\", \"CJK, \"\n        ][V_lang_id]\n        + V_formatting_thousands(latinCount.toString()) + \" \" + [\n            \"非中日韩\",\n            // \"非中日韓\",\n            \"Non-CJK\",\n            // \"Non CJC\", \"Nicht-CJK\", \"No CJK\", \"Не-CJK\", \"非CJK\", \"비 CJK\"\n        ][V_lang_id] + \" )\");\n    // hover 时显示扩展信息\n    DocInfo_ui.hover(function () {\n        DocInfo_ui.h(DocInfo_ui.a(s_DataDefault) + \"&nbsp;<span style='color: var(--d-f-c-alt)'>\" + DocInfo_ui.a(s_DataExtend) + \"</span>\");\n    }, function () {\n        DocInfo_ui.h(DocInfo_ui.a(s_DataDefault));\n    });\n    DocInfo_ui.h(DocInfo_ui.a(s_DataDefault));\n}\n\n// ==================== 缩放显示类 ==================== //\n\nlet ZoomView_ui = gUndefined,\n    ZoomView_enabled = gTrue;\n/**\n * 构造函数\n */\nfunction ZoomView_init() {\n    ZoomView_ui = $(\".v-zoom-view\");\n\n    ZoomView_ui.uC().ck(function () {\n        let cmdKey = env.os.macOS ? V_ui_getMetaKeyUI() : V_ui_getCtrlKeyUI();\n        iInfoTips.inform([\n            \"放大 - \",\n            // \"放大 - \",\n            \"Zoom In - \",\n            // \"Zoom - \",\n            // \"Vergrößern In - \",\n            // \"Ampliación - \",\n            // \"Увеличить - \",\n            // \"ズーム - \",\n            // \"확대 - \"\n        ][V_lang_id] + tag_2space + cmdKey + tag_2space + V_ui_wrap_kbd(\"&nbsp;+&nbsp;\") + s_Br + s_Br + [\n            \"缩小 - \",\n            // \"縮小 - \",\n            \"Zoom Out - \",\n            // \"Réduction - \",\n            // \"Vergrößern Sie - \",\n            // \"Encoger - \",\n            // \"Уменьшить - \",\n            // \"ズームアウト - \",\n            // \"줄다 - \"\n        ][V_lang_id] + tag_2space + cmdKey + tag_2space + V_ui_wrap_kbd(\"&nbsp;-&nbsp;\") + s_Br + s_Br + [\n            \"实际大小 - \",\n            // \"實際大小 - \",\n            \"Actual Size - \",\n            // \"Taille réelle - \",\n            // \"Tatsächliche Größe - \",\n            // \"Tamaño real - \",\n            // \"Фактический Размер - \",\n            // \"実物大 - \",\n            // \"실제 치수 - \"\n        ][V_lang_id] + tag_2space + cmdKey + tag_2space + V_ui_wrap_kbd(\"&nbsp;0&nbsp;\")\n        , null, gTrue);\n    });\n}\n\n// ==================== 链接检查器类 ==================== //\n\nlet LinkTool_ui = gUndefined,\n    LinkTool_panel_list = gUndefined,\n    LinkTool_panel_header = gUndefined,\n    LinkTool_panel_body = gUndefined,\n    LinkTool_enabled = gTrue,\n    LinkTool_icon_error = \"\",\n    LinkTool_icon_close = \"\",\n    LinkTool_mask = gUndefined;\n\n/**\n * 构造函数\n */\nfunction LinkTool_init(mask) {\n    // let T = this;\n    LinkTool_ui = $(\".v-link-chk-result\"); // 检查结果\n    LinkTool_panel_list = $(\".v-link-error-list\"); // 坏链主界面\n    LinkTool_panel_header = $(\".v-link-error-list-header\");\n    LinkTool_panel_body = $(\".v-link-error-list-items\"); // 坏链内容列表\n    LinkTool_enabled = gTrue;\n\n    LinkTool_icon_error = V_ui_generateSvgIcon(\"icoLinkError\", 16, 14, s_Light);\n    LinkTool_icon_close = V_ui_generateSvgIcon(\"icoClose\", 16, 16, s_Light);\n\n    // 遮罩\n    LinkTool_mask = mask;\n    LinkTool_mask.bindPartner(function () {\n        LinkTool_hide()\n    }, LinkTool_panel_list);\n\n    // 滚动事件处理\n    LinkTool_panel_body.scroll(function () {\n        // 滚出了顶部则显示顶部渐变条\n        if (LinkTool_panel_header.isHidden() && LinkTool_panel_body.scrollTop() > 10)\n            LinkTool_panel_header.show()\n        // 否则隐藏\n        else if (LinkTool_panel_body.scrollTop() <= 10)\n            LinkTool_panel_header.hide()\n    });\n}\n\n/**\n * 将 .md 的链接转换为 .html 链接（或指定后缀）\n */\nfunction LinkTool_mdToHtml() {\n    let mdx = V_util_getParamVal(\"mdx\"),\n        newExt = \".html\";\n    // 全局配置，禁用转换，则停止\n    if (mdx === s_Off)\n        return;\n\n    // 全局配置，指定转换的后缀\n    if (mdx !== gUndefined)\n        newExt = \".\" + mdx;\n\n    $(\"a[href*='.md']\").e(function () {\n        let _t = $(this),\n            href = _t.a(s_Href),\n            mdx = V_util_getQueryParams(href)[\"mdx\"];\n        // 单个链接指定禁用转换，则停止\n        if (mdx === s_Off)\n            return gFalse;\n\n        // 单个链接指定转换的后缀\n        if (mdx !== gUndefined)\n            _t.a(s_Href, href.r(\".md\", \".\" + mdx));\n        else // 默认的全局后缀\n            _t.a(s_Href, href.r(\".md\", newExt));\n    });\n}\n\n/**\n * 添加坏链项目\n * @param id 坏链对象的标识\n * @param content 坏链项目显示的内容\n */\nfunction LinkTool_addToCheck(id, content) {\n    let item = $('<span ' + s_DataAnchor + '=\"#' + id + '\" class=\"' + s_CssTocItem + '\">' + content + \"</span>\");\n    // 添加链接异常样式及属性\n    JQ_addClass($(item.a(s_DataAnchor)).a(s_Tabindex, 0), \"v-link-error-source\");\n    // 添加节点\n    LinkTool_panel_body.append(item);\n    item.uC().ck(function () {\n        JQ_removeClass(LinkTool_panel_body.ch(\".\" + s_CssTocItemCurrent), s_CssTocItemCurrent);\n        JQ_addClass(item, s_CssTocItemCurrent);\n\n        V_util_gotoHash(item.a(s_DataAnchor));\n        LinkTool_hide();\n    });\n}\n\n/**\n * 检查链接\n */\nfunction LinkTool_checkLink() {\n    if (!LinkTool_enabled)\n        return;\n\n    let count = 0;\n    // 检查所有页内链接对应的锚点是否都存在\n    $(\"#write a\").e(function () {\n        let _t = $(this),\n            href = _t.a(s_Href);\n        // 忽略空链接，如 href=\"#\"\n        if (href === gUndefined || href.length <= 1)\n            return gTrue;\n\n        // --------------------\n        // 页内链接\n        // 以 #mjx- 开始的链接为行间公式的页内引用，会导致 jQuery 的正则表达式解析错误，须跳过\n        if (href.sW(\"#\") && !href.sW(\"#mjx-\")) {\n            // 检索是否存在与该内链对应的锚点\n            let anchor = href.s(1, href.length);\n            // 没有检索到对应的锚点\n            if ($(\"#write #\" + anchor + \", #write a[name='\" + anchor + \"']\").length === 0) {\n                count++;\n\n                // 设置坏链 id 值，用于跳转定位\n                let id = \"vk-error-anchor\" + count;\n                _t.a(s_Id, id);\n\n                LinkTool_addToCheck(id, \"🔗 <strong>\" + [\n                    \"无效页内链接\",\n                    // \"無效頁內鏈接\",\n                    \"Invalid Inner Link\",\n                    // \"Lien de page non valide\",\n                    // \"Ungültiger innerer Link\",\n                    // \"Enlace interno no válido\",\n                    // \"Недопустимая ссылка на страницу\",\n                    // \"ページリンクが無効です\",\n                    // \"잘못된 페이지 링크\"\n                ][V_lang_id] + \":</strong> \" + $(this).t());\n            }\n        }\n    });\n\n    // 无错误链接\n    if (count === 0) {\n        JQ_remove(LinkTool_ui);\n    }\n    else {\n        // 显示错误链接错误图标\n        JQ_addClass(LinkTool_ui, s_Error);\n        LinkTool_ui.h(LinkTool_icon_error);\n\n        // 点击图标行为\n        LinkTool_ui.uC().ck(function () {\n            if (LinkTool_panel_list.isHidden())\n                LinkTool_show();\n            else\n                LinkTool_hide();\n        });\n    }\n}\n\n/**\n * 显示坏链列表\n */\nfunction LinkTool_show() {\n    LinkTool_panel_list.show()\n    LinkTool_mask.show();\n}\n\n/**\n * 隐藏坏链列表\n */\nfunction LinkTool_hide() {\n    LinkTool_panel_list.hide()\n    LinkTool_mask.hide();\n\n    LinkTool_ui.h(LinkTool_icon_error);\n    V_doc_scroll_unfreeze();\n}\n\n/**\n * 处理热键操作\n * @param code 非功能键键\n * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n */\nfunction LinkTool_disposeHotkey(code, combKeys) {\n    if (LinkTool_panel_list.isHidden())\n        return;\n\n    switch (code) {\n        case 27: // ESC\n            LinkTool_hide();\n            break;\n    }\n}\n\n// ==================== 背景遮罩类 ==================== //\n\n/**\n * 构造函数\n * @param id 标识\n * @param style 扩展样式：left / right / bottom / center\n * @param close 是否显示关闭提示器\n */\nfunction BgMask(id, style, close) {\n    let T = this;\n    T.style = style;\n\n    // DOM_body().after\n    VOM_doc().after('<div class=\"v-mask '\n        + (style !== gUndefined ? style + ' ' : '') + id + ' v-backdrop-blurs\">'\n        + V_ui_copyrightInfo()\n        + '</div>');\n\n    // 根据动效等级初始化遮罩样式\n    V_ui_initEffectLevel();\n\n    T.ui = $(\".v-mask.\" + id);\n    T.close = gUndefined;\n\n    // 生成关闭提示器\n    if (close !== gUndefined && close) {\n        T.ui.append('<div class=\"v-mask-close ' + T.style + '\">'\n            + V_ui_generateSvgIcon(\"icoCloseTo-\" + T.style, 60, 60, s_Light)\n            + '</div>');\n        T.close = T.ui.ch(\".v-mask-close\");\n    }\n\n    T.partner = gUndefined;\n    T.partnerUI = gUndefined;\n\n    /**\n     * 绑定联动对象\n     * @param partner 联动对象\n     * @param ui 联动对象的 UI\n     */\n    T.bindPartner = function (partner, ui) {\n        T.partner = partner;\n        T.partnerUI = ui;\n    }\n\n    /**\n     * 显示遮罩\n     */\n    T.show = function () {\n        // 冻结滚动\n        V_doc_scroll_freeze();\n        V_doc_block = gTrue;\n\n        // 总是在 target 下显示\n        T.ui.c(s_Zindex, T.partnerUI.c(s_Zindex) - 1);\n\n        // 「关闭提示器」的处理\n        if (T.close !== gUndefined) {\n            // 默认是 style = left 的位置\n            let offset = 30,\n                x = JS_parseInt(T.partnerUI.c(s_Left)) + T.partnerUI.w() + offset,\n                y = JS_parseInt(T.partnerUI.c(s_Top)) + (T.partnerUI.ht() - T.close.ht()) / 2;\n            // left / right 的处理\n            if (T.style === s_Left || T.style === s_Right) {\n                T.close.c(s_Left, T.style === s_Right\n                        ? JS_parseInt(T.partnerUI.c(s_Left)) - T.close.w() - offset\n                        : x)\n                    .c(s_Top, y);\n            }\n            // bottom 的处理\n            else if (T.style === s_Bottom) {\n                // x = JS_parseInt(T.partnerUI.c(s_Left)) + (T.partnerUI.w() - T.close.w()) / 2;\n                y = JS_parseInt(T.partnerUI.c(s_Bottom)) + T.partnerUI.ht() + offset;\n                T.close.c(s_Left, s_Auto)\n                    .c(s_Top, s_Auto)\n                    .c(s_Bottom, y)\n                    .c(s_MarginLeft, \"-\" + (T.close.w() / 2) + 'px')\n                    .c(s_Padding, \"0px 50%\");\n            }\n        }\n\n        // 绑定 VLOOK logo 的点击事件\n        T.ui.f(\".v-copyright .v-copyright-svg-ico\").uC().ck(function () {\n            env.show($(this));\n        });\n\n        // 点击遮罩隐藏联动对象\n        T.ui.uC().ck(function () {\n            // 取消冻结滚动\n            V_doc_scroll_unfreeze();\n            // 隐藏联动对应\n            if (typeof(T.partner) === s_Function)\n                 T.partner();\n            else\n                T.partner.hide();\n\n            T.hide();\n        });\n\n        T.ui.show();\n        // V_ui_show(T.ui);\n    }\n\n    /**\n     * 隐藏遮罩\n     */\n    T.hide = function () {\n        // 取消冻结滚动\n        V_doc_scroll_unfreeze();\n        V_doc_block = gFalse;\n\n        T.ui.hide();\n    }\n}\n\n// ==================== 长内容折叠类 ==================== //\n\nlet ContentFolder_enabled = true,\n    ContentFolder_enabled_table = true,\n    ContentFolder_enabled_figure = true,\n    ContentFolder_enabled_codeblock = true,\n    ContentFolder_ui = gUndefined, // 展开操作区的 UI 模板\n    ContentFolder_limit = V_debugMode ? 300 : 640, // 内容须折叠的高度限值\n    ContentFolder_contents = [], // 须进行折叠判断和处理的内容集\n    ContentFolder_buildTimers = [],\n    ContentFolder_rowNumFilter = s_Table + \" tbody tr\";\n\nfunction ContentFolder_init() {\n    if (!ContentFolder_enabled)\n        return;\n    ContentFolder_ui = $(\".\" + s_CssContentExpander)\n}\n\n/**\n * 添加内容\n */\nfunction ContentFolder_add(content, type) {\n    if (!ContentFolder_enabled)\n        return;\n\n    if (type === s_Table && ContentFolder_enabled_table === false)\n        return;\n    if (type === s_Figure && ContentFolder_enabled_figure === false)\n        return;\n    if (type === s_Codeblock && ContentFolder_enabled_codeblock === false)\n        return;\n\n    ContentFolder_contents.push(content);\n}\n\n/**\n * 适配内容展开操作区\n */\nfunction ContentFolder_adjust() {\n    if (!ContentFolder_enabled)\n        return;\n\n    // 提前中断未完成的处理\n    if (ContentFolder_buildTimers.length > 0) {\n        for (let i = 0, len = ContentFolder_buildTimers.length; i < len; i++)\n            clearTimeout(ContentFolder_buildTimers.shift());\n    }\n    // 重新开始构建内容展开操作区\n    ContentFolder_rebuild();\n}\n\n/**\n * 重建部分内容展开操作区，主要是 img, table, .md-fences 等会因导航中心的显示/关闭\n * 导致文档宽度变化而引起的内容高度也跟随变化的情况\n * 如在不显示导航中心时因宽度较变，高度等比变高，或高度反而变短\n * 会导致应该显示展开操作区即不显示，或不应显示却显示的情况\n */\nfunction ContentFolder_rebuild() {\n    if (!ContentFolder_enabled)\n        return;\n\n    // 重建需要重建的部分\n    for (let i = 0, len = ContentFolder_contents.length; i < len; i++) {\n        // img 类长内容\n        if (ContentFolder_contents[i].prop(s_TagName).l().sW(\"i\")) {\n            // 创建一个Image对象，实现图片的预下载\n            let img = new Image();\n            img.src = ContentFolder_contents[i].a(s_Src);\n            // 如果图片已经存在于浏览器缓存，直接处理\n            if (img.complete)\n                ContentFolder_buildTimers.push(\n                    setTimeout(function () {\n                        ContentFolder_checkAndProcess(ContentFolder_contents[i], gTrue);\n                    }, 50)\n                );\n            // 等待图片下载完成后再处理\n            else\n                img.onload = function () {\n                    // DEBUG(\"img [\" + img.src + \"] loaded\");\n                    ContentFolder_checkAndProcess(ContentFolder_contents[i], gTrue);\n                }\n        }\n        // 非 img 类长内容\n        else {\n            // 设置按不同时间间隔执行，减少在处理数量过多时，会阻塞 UI\n            ContentFolder_buildTimers.push(\n                setTimeout(function () {\n                    ContentFolder_checkAndProcess(ContentFolder_contents[i], gTrue);\n                }, 50)\n            );\n        }\n    }\n}\n\n/**\n * 检测内容是否过长，过长则进行处理。适用于「插图、表格、代码块」等\n * @param target 折叠的目标对象\n * @param rebuild 本次折叠是否属于重建的（如在页面加载后，由于页面正文区宽度变化后调用时属于重建）\n */\nfunction ContentFolder_checkAndProcess(target, rebuild) {\n    if (!ContentFolder_enabled)\n        return;\n\n    let container = target.p(),\n        tagName = target.prop(s_TagName).l();\n\n    // 重建时已生成题注，所以实际容器对象与初始化时第一次构建会不同\n    if (rebuild)\n        container = container.p();\n\n    // 获得上一轮构建时生成的展开操作区，没有则初始为 undefined\n    let oldExpander = container.next(),\n        className = oldExpander.a(s_Class);\n    if (className === gUndefined || className.i(s_CssContentExpander) === -1)\n        oldExpander = gUndefined;\n\n    // 已被点击展开过了，在重建时则跳过\n    let expanded = container.a(s_DataContentExpanded);\n    if (expanded !== gUndefined && expanded.sW(\"t\")) {\n        let folded = container.a(s_DataBeforePrintFolded);\n        if (folded !== gUndefined && !expanded.sW(\"t\")) {\n            ContentFolder_buildTimers.shift();\n            return;\n        }\n    }\n\n    // 针对 img 内容，进行父容器的正确性处理\n    if (tagName.sW(\"i\")) {\n        // 图像若加载晚于 img 的题注生成，其父容器则题注而不是 VLOOK 标记的 img 父容器\n        if (container.a(s_DataContainer) === gUndefined)\n            container = container.p();\n    }\n\n    // 初始化折叠配置\n    container.a(s_DataContentFolded, s_False); // 未折叠\n    container.a(s_DataContentExpanded, s_False); // 已被点击扩展了\n    container.c(s_Height, s_Auto);\n    // 针对 Mermaid 图表，不添加会导致出现滚动条\n    if (tagName.sW(\"s\"))\n        container.c(s_PaddingBottom, \"10px\");\n\n    let h = JS_parseInt(target.c(s_Height));\n    // 高度超出折叠要求高度时进行折叠\n    if (h > ContentFolder_limit) {\n        // 构建内容展开操作区\n        ContentFolder_buildContentExpander(target, container, tagName, h, oldExpander);\n    }\n    // 高度没有超出折叠要求\n    else {\n        // 若之前须折叠，目前不需要折叠，则清除对应的展开操作区\n        if (oldExpander !== gUndefined && className !== gUndefined\n            && className.i(s_CssContentExpander) > -1)\n                JQ_remove(oldExpander);\n    }\n\n    ContentFolder_buildTimers.shift();\n}\n\n/**\n * 构建内容展开操作区\n * @param target 为目标对象创建展开操作区（如 table）\n * @param container 指定对象所属的容器（如 table 的容器为父元素 figure）\n * @param tagName target 的 HTML 标签名\n * @param tHeight target 的高度\n * @param oldExpander 上一轮重建前的展开操作区（没有则为 undefined）\n */\nfunction ContentFolder_buildContentExpander(target, container, tagName, tHeight, oldExpander) {\n    if (!ContentFolder_enabled)\n        return;\n\n    // 设置为已折叠\n    container.a(s_DataContentFolded, s_True);\n\n    // 表格 <table>、Mermaid <svg> 图表的特性处理\n    if (tagName.sW(\"t\") || tagName.sW(\"s\")) {\n        container.c(s_Height, ContentFolder_limit)\n            .c(s_OverflowX, s_Auto) // 可横向滚动\n            .c(s_OverflowY, s_Hidden);\n    }\n    // 非表格，非 Mermaid 图表的处理\n    else {\n        container.c(s_Height, ContentFolder_limit)\n            .c(s_OverflowY, s_Hidden);\n    }\n\n    let expander,\n        w = JS_mathCeil(JS_parseFloat(container.c(s_Width)));\n        // w = JS_parseInt(container.c(s_Width));\n\n    // 上一轮构建时没有生成展开操作区，则生成一个新的\n    if (oldExpander === gUndefined) {\n        expander = ContentFolder_ui.clone();\n        container.after(expander);\n    }\n    // 直接复用上一轮构建时生成的展开操作区\n    else\n        expander = oldExpander;\n\n    // 如果处理对象为表格，先隐藏表格行号，find 过滤器的内容与对应的 css 要同步更新\n    if (container.f(s_Table).length > 0)\n        JQ_addClass(container.f(ContentFolder_rowNumFilter), s_CssTableRowNumHidden);\n\n    // 动态生成按钮文本内容\n    let btn = expander.f(\"div>span\");\n    btn.h(btn.a(s_Title) + \" <span style='font-weight: normal;'>\"\n        + JS_mathRound((1 - ContentFolder_limit / tHeight) * 100) + \"%</span>\");\n\n    // 重新适配展开操作区尺寸\n    let tW = JS_mathCeil(JS_parseFloat(target.c(s_Width)));//JS_parseInt(target.c(s_Width));\n    if (w > tW) {\n        w = tW;// + JS_parseInt(target.c(s_BorderWidth)) * 2;\n        // 表格、mermarid 插图与比容器宽度小时，右下角不是圆角，须进行适配调整\n        expander.c(s_BorderBottomRightRadius, 0);\n    }\n    expander.a(s_DataContentType, tagName);\n    expander.c(s_MarginLeft, container.c(s_MarginLeft))\n        .c(s_Width, w + \"px\");\n    // 设置为可视\n    expander.c(s_Visibility, \"visible\");\n\n    // 展开按钮 click 事件处理\n    expander.ch(\".v-btn\").uC().ck(function () {\n        ContentFolder_expand(expander);\n    });\n\n    // 展开按钮 hover 事件处理\n    V_ui_bindHover(expander.ch(\".v-btn\"));\n}\n\n/**\n * 展开被折叠的内容\n * @param expander 点击的按钮所在父元素\n */\nfunction ContentFolder_expand(expander) {\n    if (!ContentFolder_enabled)\n        return;\n\n    let container = expander.prev(),\n        tagName = expander.a(s_DataContentType);\n    // V_report_push([s_Interactive, V_report_transTagName(tagName), 'ExpandLongContent', 0]);\n\n    // 移除内容展开操作区\n    JQ_remove(expander);\n\n    // 展开对应的内容\n    container.a(s_DataContentFolded, s_False);\n    container.a(s_DataContentExpanded, s_True);\n    container.c(s_Height, s_Auto);\n    // 针对表格 <table>、Mermaid <svg> 图表增加滚动属性\n    if (tagName.sW(\"t\") || tagName.sW(\"s\"))\n        container.c(s_Overflow, s_Auto);\n    // 非表格、非 Mermaid 图表的处理\n    else\n        container.c(s_OverflowY, \"initial\");\n\n    // 如果处理对象为表格，恢复显示表格行号，find 过滤器的的内容与对应的 css 要同步更新\n    if (container.f(s_Table).length > 0)\n        JQ_removeClass(container.f(ContentFolder_rowNumFilter), s_CssTableRowNumHidden);\n}\n\n// ==================== 工具提示信息类 ==================== //\n\nlet ToolTips_ui = gUndefined,\n    ToolTips_continueShow = gFalse, // 是否激活持续显示\n    ToolTips_lastStyle = gUndefined,\n    ToolTips_aniTimer = null,\n    ToolTips_continueTimer = null,\n    ToolTips_delay = 2000;\n\n/**\n * 构造函数\n */\nfunction ToolTips_init() {\n    ToolTips_ui = $(\".v-tool-tips\");\n\n    V_ui_addAnimate(ToolTips_ui, s_Opacity);\n}\n\n/**\n * 显示工具提示信息\n *\n * @param follow 提示的目标元素\n * @param align 强制指定工具提示的水平对齐方式（auto/left/center/right）\n * @param style 指定微调的样式\n */\nfunction ToolTips_show(follow, align, style) {\n    if (env.device.mobile)\n        return;\n\n    ToolTips_ui.h(follow.a(s_DataTips));\n\n    // 强制取消最后一次延时显示的处理\n    clearTimeout(ToolTips_aniTimer);\n    // 强制取消隐藏后指定时间内取消持续显示的处理\n    clearTimeout(ToolTips_continueTimer);\n\n    ToolTips_lastStyle = style;\n\n    const ow = ToolTips_ui.w();\n    const ww = $(window).w();\n    const gap = 20;\n    let left = follow.o().left;\n    ToolTips_ui.c(s_BorderTopLeftRadius, \"0\")\n        .c(s_BorderTopRightRadius, s_varRB);\n\n    // 指定对齐方式或提示超出屏幕\n    if (align !== s_Auto || (left + ow + gap) > ww) {\n        // align: right\n        ToolTips_ui.c(s_BorderTopLeftRadius, s_varRB)\n            .c(s_BorderTopRightRadius, \"0\");\n        left = follow.o().left - ow + follow.w() - gap;\n        // 右侧顶边，则微调\n        if (left + ow + gap>= ww)\n            left = left - gap;\n\n        // align: center\n        if (align === s_Center) {\n            left = follow.o().left + (follow.w() - ow) / 2 - gap / 2;\n            ToolTips_ui.c(s_BorderTopLeftRadius, s_varRB)\n                .c(s_BorderTopRightRadius, s_varRB);\n        }\n    }\n    // 左侧顶边，则微调\n    if (left <= 0)\n        left = 10;\n\n    if (ToolTips_lastStyle !== gUndefined)\n        JQ_addClass(ToolTips_ui, ToolTips_lastStyle);\n\n    ToolTips_ui.c(s_Left, left)\n        .c(s_Top, follow.o().top - $(document).scrollTop() + follow.ht() + 10);\n\n    // 延时，或立即显示提示\n    let waitTime = (ToolTips_continueShow) ? 0 : ToolTips_delay;\n    ToolTips_aniTimer = setTimeout(function () {\n        ToolTips_continueShow = gTrue; // 一旦显示后，激活持续显示\n        V_ui_show(ToolTips_ui);\n    }, waitTime);\n}\n\n/**\n * 隐藏工具提示\n */\nfunction ToolTips_hide() {\n    // 隐藏后在指定时间内取消持续显示\n    clearTimeout(ToolTips_continueTimer);\n    ToolTips_continueTimer = setTimeout(function () {\n        ToolTips_continueShow = gFalse;\n    }, ToolTips_delay);\n\n    // V_doc_scroll_unfreeze();\n    // 强制取消最后一次延时显示的处理\n    clearTimeout(ToolTips_aniTimer);\n    V_ui_hide(ToolTips_ui);\n\n    if (ToolTips_lastStyle !== gUndefined)\n        JQ_removeClass(ToolTips_ui, ToolTips_lastStyle);\n}\n\n// ==================== 弹层提示信息类 ==================== //\n\n/**\n * 构造函数\n * @param mask 遮罩对象\n */\nfunction InfoTips(mask) {\n    let T = this;\n    T.ui = $(\".v-info-tips\");\n    T.aniTimer = null;\n\n    // 绑定点击事件\n    T.ui.uC().click = function () {\n        T.hide();\n    }\n\n    // 遮罩\n    T.mask = mask;\n    T.mask.bindPartner(this, T.ui);\n\n    /**\n     * 显示通知信息\n     * @param message 提示内容\n     * @param delay 延时指定 ms 时间后自动关闭提示\n     * @param mask 是否显示遮罩\n     * @param target 事件源，不为空时则跟随显示\n     */\n    T.inform = function (message, delay, mask, target) {\n        T.show(message, delay, mask, \"inform\", target);\n    }\n\n    /**\n     * 显示泡泡信息\n     * @param message 提示内容\n     * @param delay 延时指定 ms 时间后自动关闭提示\n     * @param mask 是否显示遮罩\n     * @param target 事件源，不为空时则跟随显示\n     */\n    T.bubble = function (message, delay, mask, target) {\n        T.show(message, delay, mask, s_Bubble, target);\n    }\n\n    /**\n     * 显示错误信息\n     * @param message 提示内容\n     * @param delay 延时指定 ms 时间后自动关闭提示\n     * @param mask 是否显示遮罩\n     * @param target 事件源，不为空时则跟随显示\n     */\n    T.error = function (message, delay, mask, target) {\n        T.show(message, delay, mask, s_Error, target);\n    }\n\n    /**\n     * 显示通知提示信息\n     * @param message 提示内容\n     * @param delay 延时指定 ms 时间后自动关闭提示\n     * @param mask 是否显示遮罩\n     * @param type 类型。info/error\n     * @param target 事件源，不为空时则跟随显示\n     */\n    T.show = function (message, delay, mask, type, target) {\n        clearTimeout(T.aniTimer);\n\n        T.ui.h(message);\n\n        // 先重置为默认值\n        JQ_removeClass(T.ui, s_Error);\n        JQ_removeClass(T.ui, s_Bubble);\n        T.ui.c(s_Width, \"\")\n            .c(s_Height, \"\")\n            .c(s_Right, s_Auto)\n            .c(s_Bottom, s_Auto)\n            .c(s_BorderRadius, s_varRB);\n        if (type === s_Error)\n            JQ_addClass(T.ui, s_Error);\n        else if (type === s_Bubble)\n            JQ_addClass(T.ui, s_Bubble);\n\n        // 跟随事件源显示\n        if (target !== gUndefined) {\n            V_ui_moveToTarget(T.ui, target);\n        }\n        // 居中显示\n        else\n            V_ui_moveToCenter(T.ui);\n\n        // V_ui_show(T.ui);\n        T.ui.show();\n\n        // 延时后自动关闭\n        if (delay != null) {\n            T.aniTimer = setTimeout(function () {\n                    T.hide();\n                }, delay);\n        }\n\n        // 显示遮罩\n        if (mask)\n            T.mask.show();\n    }\n\n    /**\n     * 隐藏弹窗信息\n     */\n    T.hide = function () {\n        T.ui.hide();\n        T.mask.hide();\n    }\n\n    /**\n     * 处理热键操作\n     * @param code 非功能键键\n     * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n     */\n    T.disposeHotkey = function (code, combKeys) {\n        if (T.ui.isHidden())\n            return;\n\n        switch (code) {\n            case 27: // ESC\n                T.hide();\n                break;\n        }\n    }\n}\n\n// ==================== 底部提示信息类 ==================== //\n\n/**\n * 构造函数\n * @param id 对象标识\n */\nfunction BottomTips(id) {\n    let T = this;\n    // DOM_body().after('<div class=\"v-bottom-tips ' + id + '\"><div></div></div>');\n    VOM_doc().after('<div class=\"v-bottom-tips ' + id + '\"><div></div></div>');\n\n    T.ui = $(\".v-bottom-tips.\" + id);\n\n    /**\n     * 显示底部提示栏\n     * @param message 提示内容\n     */\n    T.show = function (message) {\n        T.ui.ch(\"div\").h(message);\n        T.ui.show();\n    }\n\n    /**\n     * 隐藏底部提示栏\n     */\n    T.hide = function () {\n        T.ui.hide();\n    }\n}\n\n// ==================== 文档更多内容遮罩栏 ==================== //\n\nlet MoreDocContent_ui_before = gUndefined,\n    MoreDocContent_ui_after = gUndefined;\n/**\n * 构造函数\n */\nfunction MoreDocContent_init() {\n    // let T = this;\n    // T.chpNav = chpNav;\n    // MoreDocContent_ui = {\n    //     before : $(\".v-more-doc-content-before\"),\n    //     after : $(\".v-more-doc-content-after\")\n    // }\n    MoreDocContent_ui_before = $(\".v-more-doc-content-before\");\n    MoreDocContent_ui_after = $(\".v-more-doc-content-after\")\n}\n\n/**\n * 刷新显示更多内容遮罩栏\n * @param scrollTop 文档当前滚动位置，如果为空则自动获取\n */\nfunction MoreDocContent_refresh(scrollTop) {\n    if (scrollTop === gUndefined)\n        scrollTop = $(document).scrollTop();\n\n    // if (T.chpNav.ui.c(gStrDisplay) === s_Block &&  scrollTop > 800)\n    if (scrollTop > 10)\n        MoreDocContent_ui_before.show();\n    else\n        MoreDocContent_ui_before.hide();\n\n    if (scrollTop + $(window).ht() > ($(document).ht() - 10))\n        MoreDocContent_ui_after.hide();\n    else\n        MoreDocContent_ui_after.show();\n}\n\n/**\n * 隐藏更多内容遮罩栏\n */\nfunction MoreDocContent_hideAfter() {\n    MoreDocContent_ui_after.hide();\n}\n\n// ==================== 题注生成器类 ==================== //\n\nlet CaptionGenerator_spliter = \". \",\n    CaptionGenerator_autoContent = gFalse; // 自动根据内索引对象内容生成题注\n\n/**\n * 生成题注\n * @param target 需要添加题注的对象\n * @param tagName HTML 标签名称\n */\nfunction CaptionGenerator_actionForTextContent(target, tagName) {\n    let caption = \"\",\n        indexObj = gUndefined,\n        anchor = \"\",\n        dataForSearch = \"\";\n\n    // 代码块 <pre>\n    if (tagName.sW(\"p\")) {\n        indexObj = iNavCenter.codeblock;\n        caption = [\n            \"代码块 \",\n            // \"代碼塊 \",\n            \"Code Block \",\n            // \"Bloc de Code \", \"Codeblock \", \"Bloque de código \", \"Блок Кода \", \"コードブロック \", \"코드 블록 \"\n        ][V_lang_id]\n            + (V_doc_counter_codeblock);\n    }\n    // 表格 <table>\n    else if (tagName.sW(\"t\")) {\n        indexObj = iNavCenter.table;\n        caption = [\n            \"表 \",\n            // \"表 \",\n            \"Table \",\n            // \"Table \", \"Tabelle \", \"Mesa \", \"Таблица \", \"テーブル \", \"표 \"\n        ][V_lang_id] + (V_doc_counter_table);\n    }\n\n    // 尝试获得带题注语法的内容\n    let fcSet = CaptionGenerator_getCaptions(target.p().prev(), tagName);\n    let fc = fcSet[0], // 第 1 题注\n        fc2 = fcSet[1]; // 第 2 题注\n\n    // 无指定的题注文本，同时开启了自动生成题注，则取其部分内容作为自动题注内容\n    if (fc == null || fc.x().length === 0) {\n        fc = \"\";\n        if (CaptionGenerator_autoContent) {\n            if (tagName.sW(\"p\")) // 代码块\n                fc = target.f(\".\" + s_CssCodeMirrorLine).t().x();\n            else if (tagName.sW(\"t\")) // 表格，并过滤掉列格式相关语法标记内容\n                fc = target.f(\"td\").t().x().r(/(==|\\[\\s]|\\.\\.|<<|\\^\\^|##\\s)/ig, \"\");\n            // 省略中间内容处理\n            fc = V_util_ellipsisText(fc.x(), 20);\n        }\n    }\n    caption = \"<span>\" + caption + CaptionGenerator_spliter + \"</span>\" + fc;\n\n    // 代码块 <pre>\n    if (tagName.sW(\"p\")) {\n        anchor = \"vk-id-codeblock\" + V_doc_counter_codeblock;\n        target.wrap(\"<div id='\" + anchor + \"' class='v-caption' style='width: 100%'>\");\n        dataForSearch += target.f(\".\" + s_CssCodeMirrorLine).t();\n    }\n    // 表格 <table>\n    else if (tagName.sW(\"t\")) {\n        anchor = \"vk-id-tbl\" + V_doc_counter_table;\n        target.wrap(\"<div id='\" + anchor + \"' class='v-caption'>\");\n        dataForSearch += target.t();\n    }\n\n    // 添加第 1 题注\n    target.before(\"<p class='v-cap-1'>\" + caption + \"</p>\");\n    // 添加第 2 题注\n    let has2Captions = (fc2 != null && fc2.length > 0);\n    if (has2Captions) {\n        target.after(\"<p class='v-cap-2'>\" + fc2 + \"</p>\");\n        target.p().a(s_DataCaptionCount, \"2\");\n    }\n    // ----------------------------------------\n    // 添加到对应的内容索引\n    if (indexObj !== gUndefined) {\n        dataForSearch += has2Captions ? fc2 : \"\";\n        $(\"#\" + anchor).a(s_DataTitle, caption);\n        indexObj.add(caption, anchor, dataForSearch);\n    }\n}\n\n/**\n * 针对插图（img、mermaid）生成题注\n * @param target 需要添加题注的对象\n * @param tagName 添加题注的目标对象的 HTML 标签名称\n */\nfunction CaptionGenerator_actionForMediaContent(target, tagName) {\n    let fc = target.a(s_Alt), // 默认尝试获取图片的 alt 内容作为题注内容\n        fc2 = target.a(s_Title), // 默认尝试获得图片的 title 作为第二题注内容\n        indexObj = iNavCenter.figure,\n        anchor = \"\",\n        dataForSearch = \"\";\n\n    let fcSet = null;\n    // 若图片 alt 无内容，则尝试获取前面段落（如<p>、<h6>）作为第 1、2 题注的内容\n    if (fc === gUndefined || fc.x().length === 0) {\n        fcSet = CaptionGenerator_getCaptions(target.p().prev(), tagName);\n        if (fcSet[0] != null)\n            fc = fcSet[0];\n        if (fcSet[1] != null)\n            fc2 = fcSet[1];\n    }\n\n    // 插图（img、mermaid）题注前缀\n    let caption = [\n        \"图 \",\n        // \"圖 \",\n        \"Figure \",\n        // \"La figure \", \"Zahl \", \"Figura \", \"карта \", \"図 \", \"그림 \"\n    ][V_lang_id] + (V_doc_counter_fig);\n    // 音频题注 audio\n    if (tagName.sW(\"a\")) {\n        indexObj = iNavCenter.media;\n        caption = [\n            \"音频 \",\n            // \"音頻 \",\n            \"Audio \",\n            // \"l'audio \", \"Audio \", \"Audio \", \"аудио \", \"オーディオ \", \"오디오 \"\n        ][V_lang_id] + (V_doc_counter_audio);\n    }\n    // 视频频题注 video\n    else if (tagName.sW(\"v\")) {\n        indexObj = iNavCenter.media;\n        caption = [\n            \"视频 \",\n            // \"視頻 \",\n            \"Video \",\n            // \"Vidéo \", \"Video \", \"Vídeo \", \"видео \", \"ビデオ \", \"비디오 \"\n        ][V_lang_id] + (V_doc_counter_video);\n    }\n\n    // 无指定的题注文本，同时开启了自动生成题注，则取其部分内容作为自动题注内容\n    if (fc == null || fc.x().length === 0) {\n        fc = \"\";\n        if (CaptionGenerator_autoContent) {\n            if (tagName.sW(\"s\")) // Mermaid SVG\n                fc = target.f(\"g\").t().x();\n            // 省略中间内容处理\n            fc = V_util_ellipsisText(fc.x(), 20);\n        }\n    }\n    if (fc != null && fc.x().length > 0)\n        caption = \"<span>\" + caption + CaptionGenerator_spliter + \"</span>\" + fc;\n    else\n        caption = \"<span>\" + caption + \"</span>\";\n\n    // 为插图（mermaid）增加题注 <svg>\n    if (tagName.sW(\"s\")) {\n        anchor = \"vk-id-fig\" + V_doc_counter_fig;\n        // 针对 Mermaid 插图，添加额外的类，用于打印前后处理时直接定位 Mermaid 插图的题注\n        target.wrap(\"<div id='\" + anchor + \"' \" + s_DataFigType + \"='\" + tagName\n            + \"' class='v-caption mermaid'></div>\");\n        dataForSearch += target.f(\"div, span, tspan, text\").t();\n    }\n    // 为插图（img）增加题注 <img>\n    else if (tagName.sW(\"i\")) {\n        anchor = \"vk-id-fig\" + V_doc_counter_fig;\n        target.wrap(\"<div id='\" + anchor + \"' \" + s_DataFigType + \"='\" + tagName\n            + \"' class='v-caption'></div>\");\n        dataForSearch += target.a(s_Src);\n    }\n    // 为音频增加题注 audio\n    else if (tagName.sW(\"a\")) {\n        anchor = \"vk-id-audio\" + V_doc_counter_audio;\n        target.wrap(\"<div id='\" + anchor + \"' \" + s_DataFigType + \"='\" + tagName\n            + \"' class='v-caption'>\");\n        dataForSearch += target.a(s_Src);\n    }\n    // 为视频增加题注 video\n    else if (tagName.sW(\"v\")) {\n        anchor = \"vk-id-video\" + V_doc_counter_video;\n        target.wrap(\"<div id='\" + anchor + \"' \" + s_DataFigType + \"='\" + tagName\n            + \"' class='v-caption'>\");\n    }\n\n    // 生成第 1 题注\n    target.before(\"<p class='v-cap-1'>\" + caption + \"</p>\");\n    // 生成第 2 题注\n    let has2Captions = (fc !== gUndefined && fc2 != null && fc2.length > 0);\n    if (has2Captions) {\n        target.after(\"<p class='v-cap-2'>\" + fc2 + \"</p>\");\n        target.p().a(s_DataCaptionCount, \"2\");\n    }\n    // ----------------------------------------\n    // 添加到对应的内容索引\n    if (indexObj !== gUndefined) {\n        dataForSearch += has2Captions ? fc2 : \"\";\n        $(\"#\" + anchor).a(s_DataTitle, caption);\n        indexObj.add(caption, anchor, dataForSearch);\n    }\n\n    // ----------------------------------------\n    // 修正在 SVG 插图套上题注后的自适应尺寸 <svg>\n    if (tagName.sW(\"s\")) {\n        if (target.a(s_Height) !== s_None || target.c(s_Height) !== s_None) { // 有指定高度的\n            target.removeAttr(s_Height);\n            target.c(s_Height, \"\");\n        }\n\n        // 调整SVG插图，尽量按其真实插图的大小显示，超出浏览器宽度的，则左右滚动浏览\n        let style = gUndefined;\n        if (target.c(s_MaxWidth) !== s_None) // CSS 中指定了最大宽度\n            target.p().c(s_Width, target.c(s_MaxWidth));\n        else if ((style = target.a(s_Style)) !== gUndefined && style.i(s_Width) > -1) // 通过 style 指定了宽度\n            target.p().c(s_Width, target.c(s_Width));\n        else if (target.a(s_Width) !== \"100%\") // 指定了 width 属性，且不为 100%\n            target.p().c(s_Width, JS_parseInt(target.a(s_Width)) + 4); // 4 为两边 border 的宽度\n        else if (target.a(s_ViewBox) !== s_None) // 指定 width 为 100% 的情况\n            target.p().c(s_Width, target.a(s_ViewBox).split(\" \")[2] + \"px\");\n        else\n            target.p().c(s_Width, \"100%\");\n    }\n}\n\n/**\n * 返回插图、表格、代码块上方的题注\n * @param caption 潜在的题注内容对象\n * @param tagName 添加题注的目标对象的 HTML 标签名称\n */\nfunction CaptionGenerator_getCaptions(caption, tagName) {\n    let fcSet = [], // 题注集\n        captionTagName = caption.prop(s_TagName),\n        hideCaptionSrc = gFalse; // 是否隐藏题注源\n\n    if (captionTagName !== gUndefined)\n        captionTagName = captionTagName.l();\n\n    let capResult = __parseCaptionSyntax(caption);\n    // 双题注\n    if (capResult[1] === 2) {\n        fcSet = __getCaptionSet(caption, 2, capResult[0]);\n        hideCaptionSrc = gTrue;\n    }\n    // 单题注\n    else if (capResult[1] === 1) {\n        fcSet = __getCaptionSet(caption, 1, capResult[0]);\n        fcSet[1] = null;\n        hideCaptionSrc = gTrue;\n    }\n    // 无题注语法，但由有 h1-h6 引导\n    else if (captionTagName !== gUndefined && captionTagName.sW(\"h\")) {\n        fcSet[0] = caption.t().x();\n        fcSet[1] = null;\n        // 不能直接隐藏，会影响页内链接跳转至该位置\n        // 设置为不可见，并调整位置布局实现隐藏效果，同时不影响跳转\n        if (captionTagName === \"h6\") { // 只针对 h6，h1-h5不隐藏\n           caption.c(s_Visibility, s_Hidden)\n                .c(s_Position, s_Absolute);\n        }\n    }\n\n    // 若成功匹配出题注，且内容不是 <img> 则隐藏原始内容\n    if (hideCaptionSrc && (!tagName.sW(\"i\") || capResult[0] === 200)) {\n        caption.hide();\n    }\n    return fcSet;\n\n    /**\n     * 返回匹配的题注数量\n     * @returns [0] type, [1] number\n     */\n    function __parseCaptionSyntax(target) {\n        let reg2 = /^!\\[.+]\".+\"$/, // 有 2 个题注\n            reg1 = /^!\\[.+]$/, // 只有 1 个题注\n            html = \"\";\n        // 标准语法，双题注\n        if (reg2.test(target.t().x()))\n            return [100, 2]; // 100: 标准语法\n        // 标准语法，单题注\n        else if (reg1.test(target.t().x()))\n            return [100, 1]; // 100: 标准语法\n        // 简化语法\n        else if ((html = target.h()) !== gUndefined) {\n            if (html.sW(\"<em><mar\") && html.eW(\"/em>\")) {\n                if (html.i(\"/u></mark>\") === -1)\n                    return [200, 1]; // 200: 简化语法\n                else\n                    return [200, 2]; // 200: 简化语法\n            }\n        }\n        return [0, 0]; // 无题注\n    }\n\n    /**\n     * 返回题注数据数组\n     * @param target 题注数据的目标对象\n     * @param count 题注数量\n     * @param type 题注语法类型，100：标准，200：简化语法\n     * @returns [0] 为第 1 个题注，[1] 为第 2 个题注\n     */\n    function __getCaptionSet(target, count, type) {\n        let fcSet = [];\n        // 标准语法\n        if (type === 100) {\n            let text = target.t().x();\n            fcSet[0] = text.s(2, text.i(\"]\", 2));\n            if (count === 2)\n                fcSet[1] = \"▲ \" + text.s(text.i(\"]\\\"\", 2) + 2, text.length - 1);\n        }\n        // 简化语法\n        else if (type === 200) {\n            if (count === 2)\n                fcSet[1] = \"▲ \" + target.f(\"u\").t().x();\n            JQ_remove(target.f(\"mark > em\"));\n            fcSet[0] = target.t().x();\n        }\n        return fcSet;\n    }\n}\n\n// ==================== 代码块增强类 ==================== //\n\n/**\n * 初始化代码块\n */\nfunction ExtCodeBlock_init() {\n    // 获取自动生成题注并编号的行数下限，大于该行数的代码才会自动生成题注和编号\n    let lmc = V_util_getParamVal(\"lmc\");\n    lmc = (lmc === gUndefined ? 1 : JS_parseInt(lmc));\n    // 遍历所有代码块\n    $(\".\" + s_CssFences).e(function () {\n        let _t = $(this);\n\n        // 绑定内容助手\n        ContentAssistor_bind(_t, s_Codeblock);\n\n        // 折叠长代码块\n        // if (ExtCodeBlock_blockCapNum !== gTrue)\n            ContentFolder_add(_t, s_Codeblock);\n\n        // 生成代码块插图题注（行数 > 1 的才进行处理）\n        if (_t.f(\".\" + s_CssCodeMirrorLine).length > lmc) {\n            V_doc_counter_codeblock++;\n            // 外套一个 <p> 标签，用于内容折叠时与插图、表格的 DOM 结构一致\n            _t.wrap(\"<p \" + s_DataContainer + \"='pre' class='v-cap-cntr'></p>\");\n\n            // 先根据题注语法生成题注\n            // if (ExtCodeBlock_blockCapNum !== gTrue)\n                CaptionGenerator_actionForTextContent(_t, \"pre\");\n        }\n        else {\n            _t.a(s_DataLmc, s_True);\n        }\n    });\n}\n\n/**\n * 复制代码块内容\n */\nfunction ExtCodeBlock_copyContent(source) {\n    // V_report_push([s_Interactive, 'CodeBlock', 'Copy', 0]);\n    // if (iCtAss.lastHover === undefined)\n    //     return;\n    let content = \"\",\n        lines = ContentAssistor_lastHover.ch().f(\".CodeMirror-code .\" + s_CssCodeMirrorLine),\n        lineNum = 0,\n        lineCount = lines.length,\n        // 用于清除或转换特殊字符\n        badChars = [\n            \"%E2%80%8B\", // ZERO WIDTH SPACE \\u200b\n            \"%C2%A0\", // NO-BREAK SPACE \\u00A0\n            \"%0A\" // NO-BREAK SPACE \\u0A\n        ],\n        goodChars = [\n            \"\", // 替换 ZERO WIDTH SPACE\n            \"%20\", // for NO-BREAK SPACE\n            \"\" // for NO-BREAK SPACE\n        ];\n    // 逐行读取代码\n    lines.e(function () {\n        lineNum++;\n        let encodeText = encodeURI($(this).t());\n        // 清除或转换特殊字符\n        for (let i = 0; i < badChars.length; i++) {\n            if (encodeText.i(badChars[i]) > -1)\n                encodeText = encodeText.rA(badChars[i], goodChars[i]);\n        }\n        // ERROR(\"encodeText\", \"'\" + encodeText + \"'\");\n        content += JS_decodeURI(encodeText) + (lineNum < lineCount ? \"\\n\" : \"\");\n    });\n\n    // 复制目标内容\n    if (V_util_holdKey_Alt()) {\n        let lang = \"\";\n        if (ContentAssistor_lastHover !== gUndefined)\n            lang = ContentAssistor_lastHover.a(s_Lang);\n        content = \"```\" + (lang !== gUndefined ? lang : \"\") + \"\\n\" + content + \"\\n```\";\n    }\n    Copyer_action(source, content, gFalse, function () {\n        WARN(\"copy code done\");\n        // 显示已复制动效\n        let codeBlock = ContentAssistor_lastHover.ch().f(\".CodeMirror-sizer>div\"),\n            orgBg = codeBlock.c(s_BackgroundColor);\n        V_ui_removeAnimate(codeBlock);\n        codeBlock.c(s_BackgroundColor, s_varMarkBg);\n        // 延时后消退\n        setTimeout(function () {\n            V_ui_addAnimate(codeBlock);\n            codeBlock.c(s_BackgroundColor, orgBg);\n        }, 400);\n    });\n}\n\n// ==================== 复制类 ==================== //\n\nlet Copyer_lastActionTime = 0,\n    Copyer_processing = gFalse;\n\n/**\n * 执行复制\n * @param source 触发复制动作的对象\n * @param content 要复制的内容\n * @param asMarkdown 是否复制为 Markdown\n * @param successCallback 复制成功后的回调函数\n * @param errorCallback 复制失败后的回调函数\n */\nfunction Copyer_action(source, content, asMarkdown, successCallback, errorCallback) {\n    Copyer_processing = gTrue;\n    // 控制两次复制操作的时间间隔（同时也是解决嵌套情况下的复制失效问题）\n    let ts = new Date().getTime();\n    if (ts - Copyer_lastActionTime < 200) {\n        Copyer_processing = gFalse;\n        return;\n    }\n\n    Copyer_lastActionTime = ts;\n\n    // 将要复制的内容赋予给 clipboard.js 指定的对象属性 data-clipboard-text\n    let targetName = \".\" + source.a(s_Class).rA(\" \", \".\");\n    $(targetName).a(s_DataClipboardText, content);\n\n    // 创建 clipboard.js 对象用于实现复制\n    let clipboard = new ClipboardJS(targetName);\n\n    // 复制成功事件\n    clipboard.on(\"success\", function(e) {\n        // 显示复制成功提示\n        let note = (asMarkdown && V_util_holdKey_Alt()) ? \" (<strong>as Markdown</strong>)\" : \"\";\n        iInfoTips.bubble([\n            \"已复制\",\n            // \"已復制\",\n            \"Copied\",\n            // \"Copié\",\n            // \"Kopiert\",\n            // \"Copiado\",\n            // \"Скопировано\",\n            // \"コピー\",\n            // \"복사\"\n        ][V_lang_id] + note, 2000, gFalse, source);\n\n        e.clearSelection();\n\n        typeof(successCallback) === s_Function && successCallback();\n        Copyer_processing = gFalse;\n\n        // 销毁处理已有对象，避免多次监听\n        clipboard.destroy();\n    });\n    // 复制失败事件\n    clipboard.on(s_Error, function() {\n        // 显示复制失败提示\n        iInfoTips.error(\"<strong>\" + [\n            \"非常抱歉～暂不支持在该浏览器中复制\",\n            // \"非常抱歉～暫不支持在該瀏覽器中復制\",\n            \"I'm very sorry~ I don't support copying in this browser\",\n            // \"Je suis vraiment désolé ~ Je ne supporte pas la copie dans ce navigateur\",\n            // \"Es tut mir sehr leid ~ Ich unterstütze das Kopieren in diesem Browser nicht\",\n            // \"Lo siento mucho ~ No apoyo la copia en este navegador\",\n            // \"Я очень сожалею ~ Я не поддерживаю копирование в этом браузере\",\n            // \"すみません〜このブラウザでのコピーはサポートしていません\",\n            // \"죄송합니다 ~이 브라우저에서 복사를 지원하지 않습니다\"\n        ][V_lang_id] + \"</strong>\", 3000, gFalse, source);\n\n        typeof(errorCallback) === s_Function && errorCallback();\n        Copyer_processing = gFalse;\n\n        // 销毁处理已有对象，避免多次监听\n        clipboard.destroy();\n    });\n}\n\n// ==================== 章节目录自动编号增强类 ==================== //\n\nlet ChpAutoNum_tocContent = gUndefined,\n    ChpAutoNum_counter = [],\n    ChpAutoNum_lastLevel = 1,\n    // 自定义的自动编号格式模板（可只指定任意 h1~h6）\n    ChpAutoNum_tpl = \"h1{{###. }},h2{{### }},h3{{### }},h4{{### }},h5{{### }},h6{{❖ ### }}\",\n    // 默认的自动编号格式模板\n    ChpAutoNum_tplSet = ChpAutoNum_tpl.split(\",\"),\n    ChpAutoNum_tpl_syntax = /h([1-6]){{(.*)(#(0*)(#|zh|ZH|alpha|ALPHA|roman|ROMAN|none)(-min|-sup)?#)(.*)}}/,\n    ChpAutoNum_tpl_leftPad = [\"\", \"\", \"\", \"\", \"\", \"\"],\n    ChpAutoNum_tpl_format = [\"#\", \"#\", \"#\", \"#\", \"#\", \"#\"], // 编号格式\n    ChpAutoNum_tpl_formatOpt = [0, 0, 0, 0, 0, 0], // 特殊格式选项\n    ChpAutoNum_tpl_prefix = [\"\", \"\", \"\", \"\", \"\", \"\"], // 前缀\n    ChpAutoNum_tpl_suffix = [\"\", \"\", \"\", \"\", \"\", \"\"]; // 后缀\n\n// 特殊格式选项\nconst CHPAUTONUM_TPL_FORMAT_OPT_NONE = 0, // 无\n    CHPAUTONUM_TPL_FORMAT_OPT_MIN = 1, // -min\n    CHPAUTONUM_TPL_FORMAT_OPT_SUP = 2; // -sup\n\n/**\n * 初始化章节目录自动编号\n */\nfunction ChpAutoNum_initToc() {\n    if (ChpAutoNum_tocContent.isEmpty())\n        return;\n\n    // 重置自动编号格式模板\n    ChpAutoNum_resetTpl();\n\n    // 对目录大纲内的章节条目进行处理\n    ChpAutoNum_resetCounter();\n    ChpAutoNum_tocContent.ch(\".md-toc-item\").e(function () {\n        let item = $(this);\n        __genNumContent(item,\n            ChpAutoNum_parseTocHeaderLevel(item.a(s_Class)));\n    });\n\n    // 对文档中的章节条目进行处理\n    ChpAutoNum_resetCounter();\n    VOM_doc().ch(\"h1:not(:last-child), h2, h3, h4, h5\").e(function () {\n        let item = $(this);\n        __genNumContent(item,\n            ChpAutoNum_parseTocHeaderLevel(item.prop(s_TagName).l()));\n    });\n\n    // 对文档中的 h6 章节条目进行处理\n    ChpAutoNum_resetCounter();\n    VOM_doc().ch(\"h6:not(:first-child)\").e(function () {\n        $(this).a(s_DataHeaderNum, ChpAutoNum_tpl_prefix[5]);\n    });\n\n    function __genNumContent(item, lv) {\n        let diff = lv - ChpAutoNum_lastLevel,\n            absDiff = Math.abs(diff);\n        // 当前层级比上一层级低\n        if (diff > 0) {\n            for (let i = 0; i < absDiff; i++)\n                ChpAutoNum_push();\n        }\n        // 当前层级比上一层级高\n        else if (diff < 0) {\n            for (let i = 0; i < absDiff; i++)\n                ChpAutoNum_pop();\n        }\n        // 当前层级与上一层级一样\n        else {\n            ChpAutoNum_counter[ChpAutoNum_lastLevel - 1]++;\n        }\n\n        item.a(s_DataHeaderNum, ChpAutoNum_toString());\n    }\n}\n\n/**\n * 进入下一级的处理\n */\nfunction ChpAutoNum_push() {\n    ChpAutoNum_lastLevel++;\n    ChpAutoNum_counter[ChpAutoNum_lastLevel - 1] = 1;\n}\n\n/**\n * 返回上一级的处理\n */\nfunction ChpAutoNum_pop() {\n    ChpAutoNum_counter[ChpAutoNum_lastLevel - 1] = 0;\n    ChpAutoNum_lastLevel--;\n    ChpAutoNum_counter[ChpAutoNum_lastLevel - 1]++;\n}\n\n/**\n * 重置自动编号计数器\n */\nfunction ChpAutoNum_resetCounter() {\n    ChpAutoNum_counter = [0, 0, 0, 0, 0, 0];\n    ChpAutoNum_lastLevel = 1;\n}\n\n/**\n * 根据自动编号格式模板重新重置 h1~h6 自动编号格式\n */\nfunction ChpAutoNum_resetTpl() {\n    // 判断是否有指定自定义自动编号模板\n    let metaTpl = V_util_getMetaByName(\"vlook-chp-autonum\");\n    if (metaTpl !== gUndefined)\n        ChpAutoNum_tpl = metaTpl;\n    // ChpAutoNum_tpl = \"h1{{###. }},h2{{### }},h3{{### }},h4{{### }},h5{{### }}\";\n    // ChpAutoNum_tpl = \"h1{{第#zh#章 }}\";\n    // ChpAutoNum_tpl = \"h1{{第#zh#章 }},h2{{Chapter #alpha# }},h5{{### }},h4{{### - }},h3{{§ ###}}\";\n    // ChpAutoNum_tpl = \"h1{{第#zh#章 }},h2{{步骤 #000## }}\";\n    // ChpAutoNum_tpl = \"h6{{X ### }}\";\n    // ChpAutoNum_tpl = \"h1{{###. }},h2{{### }}\";\n\n    if (ChpAutoNum_tpl.length === 0)\n        return;\n\n    // 对自动编号格式模板内容进行处理\n    let tplSet = ChpAutoNum_tpl.split(\",\"),\n        lv;\n    for (let i = 0; i < tplSet.length; i++) {\n        lv = tplSet[i].s(1, 2);\n        if (!isNaN(lv))\n            ChpAutoNum_tplSet[lv - 1] = tplSet[i].x();\n    }\n\n    // 解析自定义编码格式模板内容\n    __parseTplItem(0); // h1\n    __parseTplItem(1); // h2\n    __parseTplItem(2); // h3\n    __parseTplItem(3); // h4\n    __parseTplItem(4); // h5\n    __parseTplItem(5); // h6\n\n    // 解析模板条目\n    function __parseTplItem(lv) {\n        let result;// = null;\n        // result = ChpAutoNum_tplSet[lv].m(ChpAutoNum_tpl_syntax);\n        // DEBUG(result);\n        if ((result = ChpAutoNum_tplSet[lv].m(ChpAutoNum_tpl_syntax)) != null\n            && result.length === 8) {\n                ChpAutoNum_tpl_prefix[lv] = result[2];\n                ChpAutoNum_tpl_leftPad[lv] = result[4];\n                ChpAutoNum_tpl_format[lv] = result[5];\n                ChpAutoNum_tpl_formatOpt[lv] =\n                    (result[6] === \"-min\") ? CHPAUTONUM_TPL_FORMAT_OPT_MIN\n                    : (result[6] === \"-sup\") ? CHPAUTONUM_TPL_FORMAT_OPT_SUP\n                    : CHPAUTONUM_TPL_FORMAT_OPT_NONE;\n                ChpAutoNum_tpl_suffix[lv] = result[7];\n            // DEBUG(lv, ChpAutoNum_tpl_prefix[lv], ChpAutoNum_tpl_format[lv], ChpAutoNum_tpl_suffix[lv]);\n        }\n    }\n}\n\n/**\n * 将当前层级信息转换为字符串\n */\nfunction ChpAutoNum_toString() {\n    let lv = ChpAutoNum_lastLevel - 1,\n        superLv = (lv > 0) ? lv - 1 : -1,\n        opt = ChpAutoNum_tpl_formatOpt[lv],\n        numStr = \"\";\n\n    // 若指定了特殊的格式选项\n    if (opt > CHPAUTONUM_TPL_FORMAT_OPT_NONE) {\n        if (opt === CHPAUTONUM_TPL_FORMAT_OPT_SUP && superLv >= 0)\n            numStr =  __formatNum(superLv, opt) + \".\";\n        numStr += __formatNum(lv, opt);\n        // 结束并返回\n        return ChpAutoNum_tpl_prefix[lv]\n            + numStr\n            + ChpAutoNum_tpl_suffix[lv];\n    }\n\n    // 没有指定特殊的格式选项\n    for (let i = 0; i < ChpAutoNum_lastLevel; i++) {\n        numStr += __formatNum(i, false);\n        if (i < lv)\n            numStr += \".\";\n    }\n\n    return ChpAutoNum_tpl_prefix[lv]\n        + numStr\n        + ChpAutoNum_tpl_suffix[lv];\n\n    /**\n     * 指定层级的编号进行格式化\n     * @param i 层级\n     * @param opt 特殊格式选项\n     */\n    function __formatNum(i, opt) {\n        let ns = \"\",\n            counter = ChpAutoNum_counter[i],\n            upperCase = (ChpAutoNum_tpl_format[i].s(0, 1).m(/[A-Z]/) != null),\n            format = ChpAutoNum_tpl_format[i].l();\n\n        // 十进制数字\n        if (format === \"#\")\n            ns += ChpAutoNum_leftPadForDecimal(counter, i);\n        // 中文数字\n        else if (format === \"zh\") {\n            ns += (ChpAutoNum_lastLevel === 1)\n                // h1\n                ? ChpAutoNum_decimalToZh(counter, upperCase)\n                // h2~h5\n                : ChpAutoNum_leftPadForDecimal(counter, i);\n        }\n        // 英文字母\n        else if (format === \"alpha\") {\n            ns += (ChpAutoNum_lastLevel === 1 || opt > CHPAUTONUM_TPL_FORMAT_OPT_NONE)\n                // h1\n                ? ChpAutoNum_decimalToAlpha(counter, upperCase)\n                // h2~h5\n                : ChpAutoNum_leftPadForDecimal(counter, i);\n        }\n        // 罗马数字\n        else if (format === \"roman\") {\n            ns += (ChpAutoNum_lastLevel === 1 || opt > CHPAUTONUM_TPL_FORMAT_OPT_NONE)\n                // h1\n                ? ChpAutoNum_decimalToRoman(counter, upperCase)\n                // h2~h5\n                : ChpAutoNum_leftPadForDecimal(counter, i);\n        }\n        else if (format === \"off\")\n            ns += \"\";\n        return ns;\n    }\n}\n\n/**\n * 解析 Typora 生成的目录大纲节点样式名称对应的目录层级（h1~h6）\n * @param value 包含 h1~h6 的标识内容，如：md-toc-h1、h1 等\n * @returns 目录层级：1~6\n */\nfunction ChpAutoNum_parseTocHeaderLevel(value) {\n    let lv = value.m(/(h([1-5]))/)[2];\n    return isNaN(lv) ? 0 : JS_parseInt(lv);\n}\n\n/**\n * 左侧补 0\n * @param value 当前值\n * @param lv 级别\n * @returns\n */\nfunction ChpAutoNum_leftPadForDecimal(value, lv) {\n    let pad = ChpAutoNum_tpl_leftPad[lv].length,\n        gap = pad - value.toString().length,\n        padStr = \"\";\n    if (gap > 0) {\n        for (let i = 0; i < gap; i++)\n            padStr += \"0\";\n    }\n    return padStr + value;\n}\n\n// 算法参考：https://blog.csdn.net/lavendersue/article/details/81066091\nlet ChpAutoNum_zhNum = [\"零\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\", \"七\", \"八\", \"九\"], // 数字\n    ChpAutoNum_zhUnit = [\"\", \"十\", \"百\", \"千\", \"万\"]; // 单位，最大支持 99,999,999\n/**\n * 数字格式转换：十进制 to 中文\n * @param num 十进制数字\n * @param upperCase 是否使用大写\n */\nfunction ChpAutoNum_decimalToZh(num, upperCase) {\n    let overWan = Math.floor(num / 10000),\n        noWan = num % 10000;\n    if (noWan.toString().length < 4)\n        noWan = \"0\" + noWan;\n\n    let numeral = overWan ? __numToZh(overWan) + \"万\" + __numToZh(noWan) : __numToZh(num);\n    // 对于 10－19 的特殊处理\n    if (num >= 10 && num <= 19)\n        numeral = numeral.r(\"一十\", \"十\");\n    return upperCase ? __toZhUpperCase(numeral) : numeral;\n\n    // 阿拉伯数字转换为中文数字\n    function __numToZh(value) {\n        let strArr = value.toString().split(\"\").reverse();\n        let newNum = \"\";\n        for (let i = 0; i < strArr.length; i++) {\n          newNum = (\n            (i === 0 && strArr[i] === 0) ? \"\"\n            : (i > 0 && strArr[i] === 0 && strArr[i - 1] === 0 ? \"\"\n            : ChpAutoNum_zhNum[strArr[i]] + (strArr[i] === 0 ? ChpAutoNum_zhUnit[0] : ChpAutoNum_zhUnit[i])\n            ))\n            + newNum;\n        }\n        return newNum;\n    }\n\n    // 将中文数字转换为大写\n    function __toZhUpperCase(value) {\n        return value.rA(/一/g, \"壹\")\n            .rA(/二/g, \"贰\")\n            .rA(/三/g, \"叁\")\n            .rA(/四/g, \"肆\")\n            .rA(/五/g, \"伍\")\n            .rA(/六/g, \"陆\")\n            .rA(/七/g, \"柒\")\n            .rA(/八/g, \"捌\")\n            .rA(/九/g, \"玖\")\n            .rA(/十/g, \"拾\")\n            .rA(/百/g, \"佰\")\n            .rA(/千/g, \"仟\");\n    }\n}\n\n/**\n * 数字格式转换：十进制 to 英文字母\n * @param value 十进制数字\n * @param upperCase 是否使用大写\n */\nfunction ChpAutoNum_decimalToAlpha(value, upperCase) {\n    let numeral = \"\";\n    while (value > 0) {\n        let m = value % 26\n        if (m === 0)\n            m = 26;\n        numeral = String.fromCharCode(64 + JS_parseInt(m)) + numeral;\n        value = (value - m) / 26;\n    }\n    return upperCase ? numeral : numeral.l();\n}\n\n// 罗马数字参考：https://baike.baidu.com/item/%E7%BD%97%E9%A9%AC%E6%95%B0%E5%AD%97/772296\n// 算法参考：https://www.mianshigee.com/note/detail/180314zvm/\nlet ChpAutoNum_romanNum = [\"M\", \"CM\", \"D\", \"CD\", \"C\", \"XC\", \"L\", \"XL\", \"X\", \"IX\", \"V\", \"IV\", \"I\"], // 罗马数字\n    ChpAutoNum_romanNumArea = [1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1]; // 进位区间\n/**\n * 数字格式转换：十进制 to 罗马\n * @param value 十进制数字\n * @param upperCase 是否使用大写\n */\nfunction ChpAutoNum_decimalToRoman(value, upperCase) {\n    if (value <= 0 || value >= 4000)\n       return value;\n    let numeral = \"\";\n    for (let i = 0; i < ChpAutoNum_romanNum.length; i++) {\n       while (value >= ChpAutoNum_romanNumArea[i]) {\n          value -= ChpAutoNum_romanNumArea[i];\n          numeral += ChpAutoNum_romanNum[i];\n       }\n    }\n    return upperCase ? numeral : numeral.l();\n}\n\n// ==================== 引用块增强类 ==================== //\n\nlet ExtQuote_icoClosed = '<svg width=\"16px\" height=\"16px\" class=\"v-svg-small-ico\"><use xlink:href=\"#icoFolded\" class=\"v-blockquote-folder-ico\"/></svg>&nbsp;',\n    ExtQuote_icoOpened = '<svg width=\"16px\" height=\"16px\" class=\"v-svg-small-ico\"><use xlink:href=\"#icoUnfold\" class=\"v-blockquote-folder-ico\"/></svg>&nbsp;',\n    ExtQuote_columnsGroupCount = 0,\n    ExtQuote_processingUCH = gFalse;\n\n/**\n * 初始化引用块以实现折叠支持\n */\nfunction ExtQuote_init() {\n    // 初始化彩虹引用的默认颜色标识\n    let dcQuote = V_util_getParamVal(\"quote\");\n    if (dcQuote !== gUndefined) {\n        RainbowQuote_defalutColor = dcQuote;\n        RainbowQuote_defalutColorPrefix = \">(\" + dcQuote + \")\".m(RainbowQuote_syntax)[0];\n    }\n\n    // 遍历所有引用\n    $(s_Blockquote).e(function () {\n        let _t = $(this),\n            matched = gFalse;\n        // ====================\n        // 针对引用内的段落\n        _t.ch(\"p\").e(function () {\n            matched = __disposeQuoteFolder($(this));\n        });\n        // 针对引用内列表下的段落\n        _t.f(\"li>p\").e(function () {\n            matched = __disposeQuoteFolder($(this));\n        });\n        // 注意：以上两个操作，须在插图初始化 ExtFigure_init() 之前执行，\n        // 避免折叠段落内容的插图处理因以上操作重置了 DOM 导致失效\n        // ====================\n\n        // 存在折叠，则标记，不参与分栏引用的统一高度处理\n        if (matched)\n            _t.a(s_DataFoldingQuote, gTrue);\n\n        // --------------------\n        // 默认引用，转换为彩虹引用\n        let parentTag = _t.p().prop(s_TagName).l();\n        // 跳过列表内、引用内的嵌套引用\n        if (parentTag === \"li\" || parentTag === s_Blockquote)\n            return gTrue;\n        let rainbowQuoteEnabled = gFalse;\n        // 判断引用内是否包含了彩虹引用语法\n        _t.f(\"code\").e(function () {\n            if ($(this).t().m(/^>(\\(.+\\))?$/i) != null) {\n                rainbowQuoteEnabled = gTrue;\n                return gFalse;\n            }\n        });\n        // 引用内不包含彩虹引用语法的，才进行处理\n        if (!rainbowQuoteEnabled) {\n            // let preObj = _t.prev().a(s_Class);\n            // DEBUG(preObj, _t.text());\n            // 不处理紧跟表格、插图、代码块、媒体后的引用\n            // if (preObj !== gUndefined && preObj.i(\"v-cap-\") === -1)\n                    _t.append(\"<p><code>&gt;(\" + RainbowQuote_defalutColor + \")</code></p>\");\n        }\n    });\n\n    // 针对分栏引用进行初始化\n    ExtQuote_initColumns();\n    // 针对分栏列表进行初始化\n    ExtList_initColumns();\n\n    /**\n     * 展开/收起引用块\n     * @param target 用于折叠其下引用块对象\n     */\n    function __toggleQuoteFolding(target) {\n        if (target.a(s_DataBlockquoteFolded).sW(\"t\")) {\n            ExtQuote_unfold(target);\n        }\n        else {\n            ExtQuote_fold(target);\n        }\n    }\n\n    /**\n     * 对引用的折叠进行处理\n     * @param target 带折叠引子的行对象\n     * @returns 是否存在折叠\n     */\n    function __disposeQuoteFolder(target) {\n        let next = target.next(s_Blockquote),\n            text = target.t(),\n            matched = gFalse;\n\n        // 默认收起\n        if (text.sW(\"[+] \")\n            && next.length > 0\n            && next.prop(s_TagName).l().sW(\"bl\")) { // <blockquote>\n                matched = gTrue;\n                // 分离折叠引子中的标题\n                __separateTitle(target);\n\n                // target.c(s_Color, \"var(--h-f)\");\n                target.next(s_Blockquote).c(s_Display, s_None);\n                target.rHTML(\"[+] \", \"<span class='\" + s_CssBlockquoteFolder + \"'>\" + ExtQuote_icoClosed + \"</span>\");\n                target.a(s_DataBlockquoteFolded, s_True);\n\n                // // 因此处的 click 会与 $(document).uC().ck() 冲突\n                // // 所以改为 mouseup\n                // target.f(\".\" + s_CssBlockquoteFolder).unbind(s_MouseUp).mouseup(function () {\n                //     V_report_push([s_Interactive, 'Quote', 'Fold/Unfold', 0]);\n                //     __toggleQuoteFolding(target);\n                // });\n        }\n        // 默认展开\n        else if (text.sW(\"[-] \")) {\n            matched = gTrue;\n            // 分离折叠引子中的标题\n            __separateTitle(target);\n\n            // target.c(s_Color, \"var(--h-f)\");\n            target.rHTML(\"[-] \", \"<span class='\" + s_CssBlockquoteFolder + \"'>\" + ExtQuote_icoOpened + \"</span>\"); // ⊖▽\n            target.a(s_DataBlockquoteFolded, s_False);\n\n            // // 因此处的 click 会与 $(document).uC().ck() 冲突\n            // // 所以改为 mouseup\n            // target.f(\".\" + s_CssBlockquoteFolder).unbind(s_MouseUp).mouseup(function () {\n            //     V_report_push([s_Interactive, 'Quote', 'Fold/Unfold', 0]);\n            //     __toggleQuoteFolding(target);\n            // });\n        }\n\n        if (matched) {\n            // target.a(s_DataBlockquoteFolded, s_True);\n\n            // 因此处的 click 会与 $(document).uC().ck() 冲突\n            // 所以改为 mouseup\n            target.f(\".\" + s_CssBlockquoteFolder).parent().parent().unbind(s_MouseUp).mouseup(function () {\n                // V_report_push([s_Interactive, 'Quote', 'Fold/Unfold', 0]);\n                __toggleQuoteFolding(target);\n            });\n        }\n        return matched;\n    }\n\n    /**\n     * 分离折叠引子中的标题\n     * @param target 带折叠引子的行对象\n     */\n    function __separateTitle(target) {\n        let firstSpan = target.ch(\"span:first\"),\n            text = firstSpan.t();\n        // 折叠的标题与引子在同一个 <span> 对象内，则需要进行剥离\n        if (text.length > 4) {\n            let folder = text.s(0, 4);\n            firstSpan.h(firstSpan.rHTML(/\\[([+\\-])]\\s/, \"\"));\n            firstSpan.before(\"<span>\" + folder + \"</span>\");\n        }\n    }\n}\n\n/**\n * 在自动生成题注处理后，进行引用的二次初始化处理\n */\nfunction ExtQuote_initAfterCap() {\n    // 遍历所有 RainbowQuote_defalutColorPrefix 的彩虹引用\n    $(s_Blockquote + \".v-q.\" + RainbowQuote_defalutColorPrefix + \".em\").e(function () {\n        let _t = $(this);\n        let preObj = _t.prev(),\n            preObjClass = preObj.a(s_Class);\n        // 对紧跟表格、插图、代码块、媒体后的引用样式进行微调\n        if (preObjClass !== gUndefined &&\n            (preObjClass.i(\"v-cap-\") > -1 || preObjClass.i(s_CssContentExpander) > -1))\n                JQ_removeClass(_t, RainbowQuote_defalutColorPrefix + \" em\");\n    });\n}\n\n/**\n * 对分栏引用进行初始化\n */\nfunction ExtQuote_initColumns() {\n    // 针对分栏引用进行修正\n    // let groupId = 1;\n    $(\"hr + blockquote\").e(function () {\n        ExtQuote_columnsGroupCount++;\n        let _t = $(this),\n            hr = _t.prev(),\n            colCount = 0;\n\n        // ----------------------------------------\n        // 隐藏标识分栏的 <hr>\n        __hideHr(hr);\n        // hr.c(s_Display, s_None);\n        // hr.c(s_Visibility, s_Hidden)\n        //     .c(s_Margin, 0)\n        //     .c(s_Border, 0);\n        colCount = hr.prevUntil(\":not(hr)\").length + 2; // 计算分栏数量\n        // 有更多的 <hr> 则进行处理\n        if (colCount > 2) {\n            __hideHr(hr.prevUntil(\":not(hr)\"));\n            // hr.prevUntil(\":not(hr)\").c(s_Display, s_None);\n            // hr.prevUntil(\":not(hr)\").c(s_Visibility, s_Hidden)\n            //     .c(s_Margin, 0)\n            //     .c(s_Border, 0);\n        }\n        // 隐藏标识分栏的 <hr>\n        function __hideHr(target) {\n            target.c(s_Visibility, s_Hidden)\n                .c(s_Margin, 0)\n                .c(s_Border, 0);\n        }\n\n        // ----------------------------------------\n        // 对分栏按组进行初始处理\n        __groupingColumns(_t);\n        _t.nextUntil(\":not(blockquote)\").e(function () {\n            if (colCount > 0) {\n                __groupingColumns($(this));\n            }\n        });\n\n        // 进行分组标识\n        function __groupingColumns(quote) {\n            // 若为带折叠的引用，则跳过\n            if (quote.a(s_DataFoldingQuote))\n                return;\n\n            quote.a(s_DataQuoteGroup, ExtQuote_columnsGroupCount);\n            colCount--;\n        }\n    });\n}\n\n/**\n * 对文档内所有分栏，按组为单位进行统一高度处理\n */\nfunction ExtQuote_uniteColumnsHeight() {\n    if (ExtQuote_processingUCH)\n        return;\n\n    ExtQuote_processingUCH = gTrue;\n    for (let i = 1; i <= ExtQuote_columnsGroupCount; i++) {\n        ExtQuote_uniteColumnsHeightForGroup(i);\n    }\n    ExtQuote_processingUCH = gFalse;\n}\n\n/**\n * 对指定组的分栏进行统一高度处理\n * @param groupId 分栏组 id\n */\nfunction ExtQuote_uniteColumnsHeightForGroup(groupId) {\n    // 找出同一组中最大的高度\n    let maxHeight = 0,\n        quote = $(s_Blockquote + \"[\" + s_DataQuoteGroup + \"=\" + groupId + \"]\");\n    quote.e(function () {\n        let _t = $(this);\n        _t.c(s_Height, s_Auto);\n        // 没有被小屏强制适配为不分栏时才处理\n        if (_t.c(s_Display) !== s_Block) {\n            let height = JS_parseInt(_t.c(s_Height));\n            if (height > maxHeight)\n                maxHeight = height;\n        }\n    });\n\n    // 没有被小屏强制适配为不分栏时才处理\n    if (quote.c(s_Display) !== s_Block) {\n        // 将同一组中最大的高度\n        quote.c(s_Height, maxHeight);\n    }\n}\n\n/**\n * 根据设备类型自适应 hover 样式\n */\nfunction ExtQuote_adjustHoverStyle() {\n    if (env.device.mobile) // 移动设备时解绑样式事件\n        $(\".\" + s_CssBlockquoteFolder).uH();\n    else // 为折叠的引用的折叠控件绑定 hover 事件\n        V_ui_bindHover($(\".\" + s_CssBlockquoteFolder));\n}\n\n/**\n * 收起引用块\n * @param target 用于折叠其下引用块对象\n */\nfunction ExtQuote_fold(target) {\n    // 先恢复默认高度\n    target.parentsUntil(s_Blockquote + \"[\" + s_DataQuoteGroup + \"]\").c(s_Height, s_Auto);\n\n    target.next(s_Blockquote).c(s_Display, s_None);\n    target.a(s_DataBlockquoteFolded, s_True);\n    target.f(\".\" + s_CssBlockquoteFolder).h(ExtQuote_icoClosed);\n}\n\n/**\n * 展开引用块\n */\nfunction ExtQuote_unfold(target) {\n    // 先恢复分组引用、普通引用默认高度\n    target.parentsUntil(s_Blockquote + \"[\" + s_DataQuoteGroup + \"]\").c(s_Height, s_Auto);\n    target.p().c(s_Height, s_Auto);\n\n    target.next(s_Blockquote).c(s_Display, s_Block);\n    target.a(s_DataBlockquoteFolded, s_False);\n    target.f(\".\" + s_CssBlockquoteFolder).h(ExtQuote_icoOpened);\n}\n\n/**\n * 自动展开引用块\n */\nfunction ExtQuote_autoUnfold() {\n    if (iParagraphNav.cur() === gUndefined)\n        return;\n\n    let target = iParagraphNav.cur();\n    // 或目标段是引用块折叠操作区，且为未展开状态\n    if (target.a(s_Class) !== gUndefined) {\n        let folded = target.a(s_DataBlockquoteFolded);\n        if (folded !== gUndefined && folded.sW(\"t\"))\n            // 模拟操作\n            ExtQuote_unfold(target);\n    }\n}\n\n// ==================== 列表增强类 ==================== //\n\n/**\n * 对分栏列表进行初始化\n */\nfunction ExtList_initColumns() {\n    // 针对分栏列表进行修正\n    $(\"hr + ul, hr + ol\").e(function () {\n        let _t = $(this),\n            hr = _t.prev();\n\n        // ----------------------------------------\n        // 隐藏标识分栏的 <hr>\n        hr.c(s_Display, s_None);\n        let colCount = hr.prevUntil(\":not(hr)\").length + 2; // 计算分栏数量\n        if (colCount > 2) // 有更多的 <hr>\n            hr.prevUntil(\":not(hr)\").c(s_Display, s_None);\n    });\n}\n\n// ==================== 表格增强类 ==================== //\n\n/**\n * 初始化表格数据\n */\nfunction ExtTable_init() {\n    let sw = new Stopwatch();\n\n    // ----------------------------------------\n    // 表格预处理\n    sw.st();\n    $(s_Table).e(function () {\n        let _t = $(this),\n            container = _t.p();\n\n        V_doc_counter_table++;\n\n        // 绑定内容助手\n        ContentAssistor_bind(_t, s_Table);\n\n        // 表格自定义属性数据\n        container.a(s_DataContainer, s_Table);\n        JQ_addClass(container, s_CssCaptionContainer);\n\n        // 表格滚动事件\n        container.scroll(function () {\n            TableCross_hide();\n        });\n\n        // 表格单元格初始化处理\n        __initCell(_t);\n\n        // if (ExtTable.blockCapNum !== gTrue) {\n            // 折叠长表格\n            ContentFolder_add(_t, s_Table);\n            // 先根据题注语法生成题注\n            CaptionGenerator_actionForTextContent(_t, s_Table);\n        // }\n    }); // table\n    sw.ed(\"    ├ Prepare: \");\n\n    // ----------------------------------------\n    // 表格单元格合并\n    sw.st();\n    $(s_Table + \"[\" + s_DataCellMerge + \"='true']\").e(function () {\n        let _t = $(this);\n        CellMerge_dispose(_t);\n\n        // 合并后，针对列头纵向合并的情况二次执行列格式处理\n        _t.f(\"thead>tr>th\").e(function () {\n            let cell = $(this);\n            ColumnFormatting_init(_t, cell, cell.t());\n        });\n    });\n    sw.ed(\"    ├ Merge: \");\n\n    // ----------------------------------------\n    // 对表格单元格初始化处理中标记为带列格式的表格，进行列格式化处理\n    sw.st();\n    $(s_Table + \"[\" + s_DataColumnFmting + \"='true']\").e(function () {\n        ColumnFormatting_format($(this));\n    });\n    sw.ed(\"    ├ Column Format: \");\n\n    // ----------------------------------------\n    // 表格行折叠\n    sw.st();\n    $(s_Table + \"[\" + s_DataRowGroup + \"='true']\").e(function () {\n        let _t = $(this);\n        RowGroup_init(_t);\n\n        // 修正行分组的首个单元格的缩进\n        _t.f(\"tr[\" + s_DataFolder + \"='true']\").e(function () {\n            let td = $(this).ch(\"td:first\");\n            if (td.a(s_DataIdentLevel) !== gUndefined)\n                td.c(s_PaddingLeft, \"0.5em\");\n        });\n    });\n    sw.ed(\"    ├ Row Group: \");\n\n    // ----------------------------------------\n    // 表格单元格重复表头引用处理，group 模式重复将在行分组展开/收起时再进行处理\n    sw.st();\n    $(s_Table + \"[\" + s_DataThRpt + \"='true']\").e(function () {\n        ThRepeater_init( $(this));\n    });\n    sw.ed(\"    └ Th Repeater: \");\n\n    /**\n     * 表格单元格初始化\n     * @param table 表格对象\n     */\n    function __initCell(table) {\n        // 遍历表格「列头」行\n        let colIndex = 0,\n            maxCol = 0;\n        table.f(\"thead>tr\").e(function () {\n            colIndex = 0;\n            let needCheckCellMerge = gTrue,\n                needCheckColumnFormatting = gTrue,\n                needCheckThRpt = gTrue;\n            // ----------------------------------------\n            // 遍历单元格\n            $(this).f(\"th\").e(function () {\n                let th = $(this),\n                    text = th.t();\n\n                // ---------- 表格排版增强预处理 ----------\n                // 检测是否带合并单元格语法\n                if (needCheckCellMerge\n                    && table.a(s_DataCellMerge) !== s_True\n                    && (CellMerge_syntax_row.test(text)\n                    || CellMerge_syntax_col.test(text))) {\n                        // 将表格标记为带合并单元格语法\n                        table.a(s_DataCellMerge, s_True);\n                        needCheckCellMerge = gFalse;\n                }\n                // 检测是否带列格式语法\n                if (needCheckColumnFormatting) {\n                    if (ColumnFormatting_init(table, th, text))\n                        needCheckColumnFormatting = gFalse;\n                }\n                // 检测是否带重复表头语法\n                if (needCheckThRpt\n                    && colIndex === 0 // 只检测第 1 列\n                    && ThRepeater_syntax_tag.test(text)) {\n                        // 将表格标记为带行折叠语法\n                        table.a(s_DataThRpt, s_True);\n                        th.rHTML(\"## \", \"\");\n                        needCheckThRpt = gFalse;\n                }\n\n                // ----------------------------------------\n                // 添加列号标识，用于列格式化时使用\n                th.a(s_DataTblCol, \"tbl-\" + V_doc_counter_table + \"-\" + colIndex);\n                colIndex++;\n\n                // ---------- 非列头的单元格阅读模式（十字光标）处理 ----------\n                // 鼠标点击单元格时显示阅读模式（十字光标）\n                TableCross_bind(table, th);\n            });\n            if (colIndex > maxCol)\n                maxCol = colIndex;\n        });\n\n        // ----------------------------------------\n        // 遍历表格「非列头」行\n        table.f(\"tbody>tr\").e(function () {\n            let colIndex = 0,\n                needCheckCellMerge = gTrue,\n                needCheckRowGroup = gTrue;\n            // ----------------------------------------\n            // 遍历单元格\n            $(this).f(\"td\").e(function () {\n                let td = $(this),\n                    text = td.t();\n                // ---------- 表格排版增强预处理 ----------\n                // 检测是否带合并单元格语法\n                if (needCheckCellMerge\n                    && table.a(s_DataCellMerge) !== s_True\n                    && (CellMerge_syntax_row.test(text)\n                    || CellMerge_syntax_col.test(text))) {\n                        // 将表格标记为带合并单元格语法\n                        table.a(s_DataCellMerge, s_True);\n                        needCheckCellMerge = gFalse;\n                }\n                // 检测是否带行折叠语法\n                if (needCheckRowGroup\n                    && colIndex === 0 // 只检测第 1 列\n                    && table.a(s_DataRowGroup) !== s_True\n                    && RowGroup_syntax_tag.test(text)) {\n                        // 将表格标记为带行折叠语法\n                        table.a(s_DataRowGroup, s_True);\n                        needCheckRowGroup = gFalse;\n                }\n                // 对于单元格的内容，都以 <mark> 标签包裹的，则转换为单元格的样式\n                // 同时转换后，在 Table.columnFormatting 的 init 处理中对应添加对应的过滤条件\n                if (/^<ma.+rk>$/.test(td.h())) {\n                    td.ch().ch().unwrap(); // 解包 <mark>\n                    JQ_addClass(td, s_CssTableColumnFormat_Mark);\n                }\n\n                // 添加列号标识，用于列格式化时使用\n                td.a(s_DataTblCol, \"tbl-\" + V_doc_counter_table + \"-\" + colIndex);\n                colIndex++;\n\n                // ---------- 列头的单元格阅读模式（十字光标）处理 ----------\n                // 鼠标点击单元格时显示阅读模式（十字光标）\n                TableCross_bind(table, td);\n            }); // find(th, td)\n        }); // find(tr)\n    }\n}\n\n/**\n * 复制表格内容\n */\nfunction ExtTable_copyContent(source) {\n    let content = \"\",\n        asMarkdown = V_util_holdKey_Alt(),\n        trSet = ContentAssistor_lastHover.f(\"tr\"),\n        theadCount = ContentAssistor_lastHover.f(\"thead > tr\").length,\n        columnFmting = ContentAssistor_lastHover.a(s_DataColumnFmting),\n        theadRepeater = ContentAssistor_lastHover.a(s_DataThRpt),\n        rowGroup = ContentAssistor_lastHover.a(s_DataRowGroup),\n        rowIndex = 0,\n        rowCount = trSet.length,\n        colIndex = 0, // 表格行的当前列（包括被合并列的）\n        colCount = 0,\n        alignSet = [], // 列的对齐方式\n        xspanMatrix = []; // 单元格合并标记矩阵\n\n    // 逐行读取表格内容\n    trSet.e(function () {\n        // 复制为 Markdown 时，在表头后添加分隔格式\n        if (asMarkdown && rowIndex === 1)\n            content = __createTheadSpliter(content, colIndex, alignSet);\n\n        let cellSet = $(this).f(\"th, td\")\n        colIndex = 0;\n\n        // 逐个单元格处理\n        cellSet.e(function () {\n            let htmlText = \"\",\n                rowspan, colspan;\n\n            // ====== 根据合并单元格预处理结果进行实际处理 =====\n            // 对单元格纵向合并的填充处理\n            htmlText = __disposeRowspan(htmlText);\n\n            // ====== 对普通单元格的处理 ======\n\n            // 读取单元格数据\n            let cell = $(this),\n                cellHTML = cell.h(),\n                colFmtChkbox = false,\n                colFmtBold = false,\n                colFmtEm = false,\n                colFmtU = false,\n                colFmtMark = false,\n                colFmtDel = false;\n\n            // 含有表格列格式时\n            if (columnFmting !== gUndefined && columnFmting === s_True) {\n                // 转换列格式（复选框）\n                let css = cell.a(s_Class);\n                if (css !== gUndefined) {\n                    if (css.i(s_CssTableColumnFormat_Checkbox) !== -1) {\n                        let yes = cell.ch('svg[data-chk=\"yes\"]');\n                        if (yes.length > 0)\n                            cellHTML = cellHTML.r(/<svg .*?>([\\s\\S]*?)<\\/svg>/i, \"Y\");\n                        else {\n                            let un = cell.ch('svg[data-chk=\"un\"]');\n                            if (un.length > 0)\n                                cellHTML = cellHTML.r(/<svg .*?>([\\s\\S]*?)<\\/svg>/i, \"?\");\n                        }\n                        // 复制为 Markdown 时，对表头列格式进行处理\n                        if (asMarkdown && rowIndex < theadCount)\n                            colFmtChkbox = true;\n                    }\n\n                    // ----- 复制为 Markdown 时的列格式处理 01 -----\n                    // 常规（加粗/斜体/下划线/高亮/删除线）\n                    if (asMarkdown && rowIndex < theadCount) {\n                        if (css.i(s_CssTableColumnFormat_Bold) !== -1) // 加粗\n                            colFmtBold = true;\n                        if (css.i(s_CssTableColumnFormat_Em) !== -1) // 斜体\n                            colFmtEm = true;\n                        if (css.i(s_CssTableColumnFormat_U) !== -1) // 下划线\n                            colFmtU = true;\n                        if (css.i(s_CssTableColumnFormat_Mark) !== -1) // 高亮\n                            colFmtMark = true;\n                        if (css.i(s_CssTableColumnFormat_Del) !== -1) // 删除线\n                            colFmtDel = true;\n                    }\n                }\n\n                // 记录列的对齐方式，用于在复制为 Markdown 时生成表头分隔分隔格式\n                if (asMarkdown)\n                    alignSet[colIndex] = cell.c(s_TextAlign);\n            }\n\n            // 转换表格分组\n            if (rowGroup !== gUndefined && rowGroup === s_True) {\n                let css = cell.a(s_Class);\n                if (css !== gUndefined && css.i(s_CssTableRowGroupSub) !== -1) {\n                    let identerCount = cell.ch('.' + s_CssTableRowGroupIdenter).length;\n                    for (let i = 0; i < identerCount; i++) {\n                        cellHTML = cellHTML.r(/<label .*?><\\/label>/i,\n                            i === identerCount - 1 ? \"> \" : \">\");\n                    }\n                }\n            }\n\n            // 转换单元格内容\n            cellHTML = __transCellContent(asMarkdown, cellHTML);\n\n            // ----- 复制为 Markdown 时的列格式处理 02 -----\n            if (asMarkdown && rowIndex < theadCount) {\n                if (colFmtChkbox) // 复选框\n                    cellHTML = \"[ ] \" + cellHTML;\n                if (colFmtBold) // 加粗\n                    cellHTML = \"**\" + cellHTML + \"**\";\n                if (colFmtEm) // 斜体\n                    cellHTML = \"*\" + cellHTML + \"*\";\n                if (colFmtU) // 下划线\n                    cellHTML = \"<u>\" + cellHTML + \"</u>\";\n                if (colFmtMark) // 高亮\n                    cellHTML = \"==\" + cellHTML + \"==\";\n                if (colFmtDel) // 删除线\n                    cellHTML = \"~~\" + cellHTML + \"~~\";\n                // 重复表头\n                if (rowIndex === 0 && colIndex === 0 && theadRepeater !== gUndefined)\n                    cellHTML = \"## \" + cellHTML;\n            }\n\n            // 生成要被复制的单元格内容\n            htmlText += __maybeAsMarkdown(\"| \", \"\")\n                + __maybeAsMarkdown(\"\", '\"') + cellHTML + __maybeAsMarkdown(\"\", '\"');\n\n            // ====== 对合并单元格的处理 ======\n\n            // 对单元格有纵向合并 rowspan 属性的处理\n            rowspan = cell.a(s_Rowspan);\n            rowspan = (rowspan === gUndefined) ? 0 : JS_parseInt(rowspan);\n            if (rowspan > 0) {\n                for (let i = 0; i < rowspan - 1; i++) {\n                    // 对应纵向合并的矩阵行为空则进行创建\n                    if (xspanMatrix[rowIndex + i + 1] === gUndefined)\n                        xspanMatrix[rowIndex + i + 1] = [];\n                    // 在对应矩阵单元中标记被纵向合并的单元格\n                    // 预处理，在下一轮处理中继续\n                    xspanMatrix[rowIndex + i + 1][colIndex] = 1;\n                }\n            }\n\n            // 对单元格有横向合并 colspan 属性的处理\n            colspan = cell.a(s_Colspan);\n            colspan = (colspan === gUndefined) ? 0 : JS_parseInt(colspan);\n            if (colspan > 0) {\n                // 横向合并填充处理\n                for (let i = 0; i < colspan - 1; i++) {\n                    htmlText += __maybeAsMarkdown(\"| == \", \" \") + \"\\t\";\n                    // 对应纵向合并的矩阵行为空则进行创建\n                    if (xspanMatrix[rowIndex] === gUndefined)\n                        xspanMatrix[rowIndex] = [];\n                    // 在对应矩阵单元中标记被横向合并的单元格\n                    xspanMatrix[rowIndex][colIndex + 1] = 2;\n                    colIndex++;\n                }\n            }\n\n            colIndex++;\n            content += htmlText + __maybeAsMarkdown(\" \", \"\\t\");\n        }); // 逐个单元格处理结束\n\n        // 记录表格实际列数\n        if (colIndex > colCount)\n            colCount = colIndex;\n\n        // 每行最后一个非合并单元格的后续合并单元格的填充处理\n        content = __disposeRowspan(content);\n\n        rowIndex++;\n        content = content.substring(0, content.length - 1)\n            + __maybeAsMarkdown(\" |\", \"\") + (rowIndex < rowCount ? \"\\n\" : \"\");\n\n        // ==========\n        // 对单元格纵向合并的处理\n        function __disposeRowspan(htmlText) {\n            // 对已处理行中带纵向合并 rowspan 标识的数据进行适配处理\n            if (xspanMatrix[rowIndex] !== gUndefined) {\n                let rowspan = xspanMatrix[rowIndex][colIndex];\n                while (rowspan !== gUndefined && rowspan === 1) {\n                    htmlText += __maybeAsMarkdown(\"| : \", \" \") + \"\\t\";\n                    colIndex++;\n                    rowspan = xspanMatrix[rowIndex][colIndex];\n                }\n            }\n            else\n                xspanMatrix[rowIndex] = [];\n\n            return htmlText;\n        }\n\n\n    }); // 逐行处理\n\n    // 调试：打印标识矩阵\n    __printXspanArr();\n\n    Copyer_action(source, content, gFalse, function () {\n        // 显示已复制动效\n        V_ui_removeAnimate(ContentAssistor_lastHover);\n        let orgBg = ContentAssistor_lastHover.c(s_BackgroundColor);\n        ContentAssistor_lastHover.c(s_BackgroundColor, s_varMarkBg);\n        // 延时后消退\n        setTimeout(function () {\n            V_ui_addAnimate(ContentAssistor_lastHover);\n            ContentAssistor_lastHover.c(s_BackgroundColor, orgBg);\n        }, 300);\n    });\n\n    // ==========\n\n    function __createTheadSpliter(content, colNum, alignSet) {\n        // 复制为 Markdown 时，在表头后添加分隔格式\n        // if (asMarkdown && rowNum === 1) {\n            let lastAlign = s_Left,\n                spliter = \"| ---- \";\n            for (let i = 0; i < colCount; i++) {\n                // 读取每列的对齐方式\n                if (alignSet[i] !== gUndefined)\n                    lastAlign = alignSet[i];\n\n                if (lastAlign === s_Left) // 左对齐\n                    spliter = \"| ---- \";\n                else if (lastAlign === s_Right) // 右对齐\n                    spliter = \"| ---: \";\n                else if (lastAlign === s_Center) // 中间对齐\n                    spliter = \"| :--: \";\n                // 无对齐方式，可能是横向合并单元格的，则跟随最近一次对齐方式\n                else if (xspanMatrix[0][i] === 2)\n                    spliter = spliter;\n\n                content += spliter;\n            }\n            content += \"|\\n\";\n        // }\n        return content;\n    }\n\n    // 适配是否要复制为 Markdown\n    function __maybeAsMarkdown(mdStr, plainStr) {\n        return (asMarkdown ? mdStr : plainStr)\n    }\n\n    // 转换单元格内容\n    function __transCellContent(asMarkdown, cellHTML) {\n        // 转换徽章\n        cellHTML = cellHTML.rA(/(<code .*?>)([\\s\\S]*?)(<code .*?>)([\\s\\S]*?)(<\\/code>)(<\\/code>)/gi,\n            __maybeAsMarkdown(\"`#$2|$4#`\", \"#$2|$4#\"));\n        // 转换标签\n        cellHTML = cellHTML.rA(/(<code class=\"v-tag.*?>)([\\s\\S]*?)(<\\/code>)/gi,\n            __maybeAsMarkdown(\"`#$2#`\", \"#$2#\"));\n        // 转换代码\n        cellHTML = cellHTML.rA(/(<code .*?>)([\\s\\S]*?)(<\\/code>)/gi,\n            \"`$2`\");\n\n        // 用于清除或转换特殊字符\n        let badChars = [\n                // /<br\\s?\\/?>/i, // <br>\n                /&nbsp;/i, // 空格\n                /&lt;/, // <\n                /&gt;/, // >\n                \"'\", // 英文单引号\n                \"\\\"\", // 英文双引号\n                /(“)([^“]+)(“)/, // 连续第2个中文单引号\n                /(‘)([^‘]+)(‘)/, // 连续第2个中文双引号\n                /<.*?>/i // HTML 标签\n                // /<[^>]+>/g // HTML 标签\n            ],\n            goodChars = [\n                // \"\\n\", // for <br>\n                \" \", // 空格\n                \"<\", // <\n                \">\", // >\n                \"‘\", // 中文单引号\n                \"“\", // 中文双引号\n                \"$1$2”\", // 中文反单引号\n                \"$1$2’\", // 中文反双引号\n                \"\" // for HTML 标签\n            ];\n\n        // 对 <br> 的处理 01\n        let brTmp = \"___br___\";\n        if (asMarkdown) {\n            cellHTML = cellHTML.rA(/<br\\s?\\/?>/i, brTmp);\n            cellHTML = cellHTML.rA(/\\$/, \"\\\\$\");\n        }\n        else\n            cellHTML = cellHTML.rA(/<br\\s?\\/?>/i, \"\\n\");\n\n        // 清除或转换特殊字符，包括 HTML 标签\n        for (let i = 0; i < badChars.length; i++)\n            cellHTML = cellHTML.rA(badChars[i], goodChars[i]);\n\n        // 对 <br> 的处理 02\n        if (asMarkdown)\n            cellHTML = cellHTML.rA(brTmp, \"<br>\");\n\n        return cellHTML;\n    }\n\n    // 调试：打印标识矩阵\n    function __printXspanArr() {\n        if (!debugMode)\n            return;\n\n        console.log(\"Table:\", rowCount + \" x \" + colCount);\n        let sss = \"   \";\n        for (let i = 0; i < colCount; i++)\n            sss += \" \" + i;\n        console.log(sss);\n        sss = \"   \";\n        for (let i = 0; i < colCount; i++)\n            sss += \" -\";\n        console.log(sss);\n        for (let i = 0; i < rowCount; i++) {\n            sss = \"\";\n            if (xspanMatrix[i] !== gUndefined) {\n                for (let j = 0; j < colCount; j++)\n                    sss += (xspanMatrix[i][j] === gUndefined) ? \". \" : xspanMatrix[i][j] + \" \";\n                console.log(i + \" | \" + sss);\n            }\n        }\n    }\n}\n\n// ==================== 表格单元格合并类 ==================== //\n\n// 单元格合并语法\nlet CellMerge_syntax_row = /^(:|\\^\\^)$/, // 行，纵向合并\n    CellMerge_syntax_col = /^(==|<<)$/ // 列，横向合并\n\n/**\n * 表格单元格合并\n * @param table 要进行单元格合并处理的表格对象\n */\nfunction CellMerge_dispose(table) {\n    let colSpanCount = 0,\n        colSpanCell = null,\n        colIndex = 0,\n        colCount = 0,\n        lastCell = null,\n        tblData = [],\n        tblSpan = [],\n        tblTd2ThData = [],\n        rowIndex = 0,\n        needRowSpan = gFalse;\n\n    // 遍历表格行\n    table.f(\"tr\").e(function () {\n        tblData[rowIndex] = [];\n        tblSpan[rowIndex] = [];\n        let tr = $(this);\n        tr.f(\"td, th\").e(function () {\n            let cell = $(this);\n\n            // --- 行合并：预处理（纵向） ---\n            // 克隆表格数据\n            tblData[rowIndex][colIndex] = cell;\n            tblSpan[rowIndex][colIndex] = 0;\n            if (CellMerge_syntax_row.test(cell.t())) {\n                tblSpan[rowIndex][colIndex] = 1;\n                needRowSpan = gTrue;\n            }\n            colIndex++;\n            colCount++;\n\n            // --- 列合并（横向） ---\n            // 是列合并标记\n            if (CellMerge_syntax_col.test(cell.t())) {\n                colSpanCount++;\n                JQ_remove(cell);\n                if (colSpanCount === 1)\n                    colSpanCell = lastCell;\n            }\n            // 不是列标记，则进行最近列标记数据进行处理\n            else {\n                if (colSpanCount > 0 && colSpanCell != null) {\n                    colSpanCell.a(s_Colspan, colSpanCount + 1);\n                    CellMerge_emptyBlankCell(colSpanCell);\n                    colSpanCell.c(s_TextAlign, s_Center);\n                    // colSpanCell.c(s_VerticalAlign, \"middle\");\n                }\n                colSpanCount = 0;\n            }\n            lastCell = cell;\n        }); // find(td, th)\n\n        // 如果列合并了所有列，且内容为空，则取消表格行号等样式\n        if (colCount === colSpanCount + 1 && tr.t().x().length === 0) {\n            JQ_addClass(tr, \"v-table-colspan-all\");\n        }\n\n        // 列间合并：对于最后一列的补充处理\n        if (colSpanCount > 0 && colSpanCell != null) {\n            colSpanCell.a(s_Colspan, colSpanCount + 1);\n            CellMerge_emptyBlankCell(colSpanCell);\n            colSpanCell.c(s_TextAlign, s_Center);\n            // colSpanCell.c(s_VerticalAlign, \"middle\");\n        }\n        colSpanCount = 0;\n\n        rowIndex++;\n        colIndex = 0;\n        colCount = 0;\n    }); // tr\n\n    rowIndex = 0;\n\n    // --- 行间合并（纵向）---\n    if (needRowSpan) {\n        tblTd2ThData = [];\n        // 列式遍历（从左到右）\n        for (let c = 0, len = tblSpan[0].length; c < len; c++) {\n            let rowSpanCount = 0,\n                rowSpanCell = null;\n            let r = 0,\n                thSpanFlag = gFalse;\n\n            // 列式遍历（从上到下）\n            while (r < tblSpan.length) {\n                if (tblSpan[r][c] === 1) { // 要合并\n                    rowSpanCount++;\n                    if (rowSpanCell == null) {\n                        rowSpanCell = tblData[r - 1][c];\n                    }\n                    // 记录最大列头行合并深度\n                    if (r === 1)\n                        thSpanFlag = gTrue;\n                    if (thSpanFlag)\n                        tblTd2ThData[tblTd2ThData.length] = tblData[r][c].p();\n                    JQ_remove(tblData[r][c]); // 移除要被合并的单元格\n\n                    // 后接的单元格会变成第 1 列，但不需要预留表格行号显示的空间\n                    if (c + 1 < tblSpan[r].length)\n                        tblData[r][c + 1].c(s_PaddingLeft, \"5px\");\n                } else {\n                    thSpanFlag = gFalse;\n                    // 单元格行合并\n                    if (rowSpanCount > 0 && rowSpanCell != null) {\n                        rowSpanCell.a(s_Rowspan, rowSpanCount + 1);\n                        CellMerge_emptyBlankCell(rowSpanCell);\n                        // rowSpanCell.c(s_TextAlign, s_Center);\n                        rowSpanCell.c(s_VerticalAlign, \"middle\");\n                        rowSpanCount = 0;\n                        rowSpanCell = null;\n                    }\n                }\n                r++;\n            } // while\n\n            // 行合并：对于最后一行的补充处理\n            if (rowSpanCount > 0 && rowSpanCell != null) {\n                rowSpanCell.a(s_Rowspan, rowSpanCount + 1);\n                CellMerge_emptyBlankCell(rowSpanCell);\n                // rowSpanCell.c(s_TextAlign, s_Center);\n                rowSpanCell.c(s_VerticalAlign, \"middle\");\n            }\n        } // for\n\n        // 处理列头的纵向合并\n        for (let i = 0, len = tblTd2ThData.length; i < len; i++) {\n            tblData[0][0].p().p().append(tblTd2ThData[i]);\n            // 将 thead 内的 td 标签转换为 th\n            let foundTd = gFalse;\n            tblTd2ThData[i].f(\"td\").e(function () {\n                foundTd = gTrue;\n                // 暂存 td 的属性数据\n                let td = $(this),\n                    style = td.a(s_Style),\n                    tblCol = td.a(s_DataTblCol),\n                    classValue = td.a(s_Class),\n                    colspan = td.a(s_DataColspan);\n                // td 转换为 th 标签\n                td.a(s_DataTd2th, s_True);\n                td.prop(\"outerHTML\", td.prop(\"outerHTML\").rA(\"<td \", \"<th \"));\n                // 将暂存的 td 的属性数据，恢复到新标签中\n                td.p().a(s_Style, style);\n                td.p().a(s_DataTblCol, tblCol);\n                td.p().a(s_Class, classValue);\n                td.p().a(s_DataColspan, colspan);\n            });\n            // 对被从 td 转换为 th 单元格，重新绑定：鼠标点击单元格时显示阅读模式（十字光标）\n            if (foundTd) {\n                tblTd2ThData[i].f(\"th[\" + s_DataTd2th + \"]\").e(function () {\n                    TableCross_bind(table, $(this));\n                });\n            }\n        }\n    } // if\n\n    needRowSpan = gFalse;\n}\n\n/**\n * 清空单元格内容（无内容情况下清空空格 &nbsp;）\n * @param cell 表格单元格对象\n */\nfunction CellMerge_emptyBlankCell(cell) {\n    if (cell.t().x().length === 0) {\n        cell.h(\"\");\n        JQ_addClass(cell, \"v-empty-cell\");\n    }\n}\n\n// ==================== 表格阅读模式（十字光标）类 ==================== //\n\nlet TableCross_enabled = gFalse,\n    TableCross_ui = gUndefined,\n    TableCross_lastTable = gUndefined, // 最后/当前显示阅读模式（十字光标）的表格\n    TableCross_lastCell = gUndefined; // 最后/当前显示阅读模式（十字光标）的表格单元格\n\nfunction TableCross_init() {\n    TableCross_ui = $(\".v-table-cross\");\n    V_ui_addAnimate(TableCross_ui);\n}\n\n/**\n * 切换表格阅读模式（十字光标）开关\n */\nfunction TableCross_toggle(table) {\n    // 已打开，则关闭\n    if (TableCross_enabled)\n        TableCross_disable();\n    // 未打开，则打开\n    else\n        TableCross_enable(table);\n}\n\n// 打开表格阅读模式（十字光标）\nfunction TableCross_enable(table) {\n    // V_report_push([s_Presentation, 'Table Cross', s_Enabled, 0]);\n\n    TableCross_enabled = gTrue;\n    JQ_addClass(ContentAssistor_btns_tableCross, s_Selected);\n\n    if (table !== gUndefined && table != null)\n        table.p().p().next(\".\" + s_CssContentExpander).ch(\".v-btn\").tr(s_Click);\n}\n\n// 关闭表格阅读模式（十字光标）\nfunction TableCross_disable() {\n    TableCross_enabled = gFalse;\n    JQ_removeClass(ContentAssistor_btns_tableCross, s_Selected);\n    TableCross_hide();\n}\n\n/**\n * 绑定单元格，鼠标点击单元格时显示阅读模式（十字光标）\n * @param table 单元格所属表格对象\n * @param cell 单元格对象\n */\nfunction TableCross_bind(table, cell) {\n    cell.uC().ck(function () {\n        if (!TableCross_enabled || Copyer_processing)\n            return;\n\n        // vvv 不同表格之间点击，先强制移除动画 vvv\n        if (TableCross_lastTable !== table)\n            V_ui_removeAnimate(TableCross_ui);\n\n        // 同一单元格不重复处理\n        if (TableCross_lastCell === cell)\n            return;\n\n        let container = table.p().p();\n        // 跳过被折叠表格\n        if (container.a(s_DataContentFolded).sW(\"t\"))\n            return;\n\n        // 若点击同时也触发了「代码 / 标签 / 徽章」的复制\n        if (!Copyer_processing)\n            event.stopPropagation(); // 停止事件冒泡，避免与其他事件的处理冲突（如：document.click）\n\n        TableCross_hide();\n        JQ_addClass(cell, s_CssTableCrossCell);\n\n        TableCross_lastCell = cell;\n        TableCross_lastTable = table;\n\n        let tblWidth = JS_parseInt(table.c(s_Width)),\n            tblHeight = JS_parseInt(table.c(s_Height));\n            // scrollLeft = container.scrollLeft();\n\n        let cellWidth = JS_parseInt(cell.c(s_Width)),\n            cellHeight = JS_parseInt(cell.c(s_Height)),\n            cornerLeftX = table.o().left,\n            cornerUpY = table.o().top,\n            cornerLeftWidth = cell.o().left - table.o().left,\n            cornerUpHeight = cell.o().top - table.o().top,\n            cornerRightX = cell.o().left  + cellWidth,\n            cornerDownY = cell.o().top + cellHeight,\n            cornerRightWidth = tblWidth - cornerLeftWidth - cellWidth,\n            cornerDownHeight = tblHeight - cornerUpHeight - cellHeight;\n\n        // 1. 左上角\n        let leftUp = $(s_CssTableCross + \".left-up\");\n        leftUp.c(s_Left, cornerLeftX)\n            .c(s_Top, cornerUpY)\n            .c(s_Width, cornerLeftWidth)\n            .c(s_Height, cornerUpHeight)\n            .c(s_Zindex, 9);\n\n        // 2. 右上角\n        let rightUp = $(s_CssTableCross + \".right-up\");\n        rightUp.c(s_Left, cornerRightX)\n            .c(s_Top, cornerUpY)\n            .c(s_Width, cornerRightWidth)\n            .c(s_Height,  cornerUpHeight)\n            .c(s_Zindex, 9);\n\n        // 3. 左下角\n        let leftDown = $(s_CssTableCross + \".left-down\");\n        leftDown.c(s_Left, cornerLeftX)\n            .c(s_Top, cornerDownY)\n            .c(s_Width, cornerLeftWidth)\n            .c(s_Height, cornerDownHeight)\n            .c(s_Zindex, 9);\n\n        // 4. 右下角\n        let rightDown = $(s_CssTableCross + \".right-down\");\n        rightDown.c(s_Left, cornerRightX)\n            .c(s_Top, cornerDownY)\n            .c(s_Width, cornerRightWidth)\n            .c(s_Height, cornerDownHeight)\n            .c(s_Zindex, 9);\n\n        // 须延时后再执行显示，让以上代码先完成\n        setTimeout(function () {\n            // 针对不同表格之间点击强制移除动画后的恢复\n            V_ui_addAnimate(TableCross_ui);\n            V_ui_show(leftUp);\n            V_ui_show(rightUp);\n            V_ui_show(leftDown);\n            V_ui_show(rightDown);\n        }, 50);\n    });\n}\n\n/**\n * 隐藏表格阅读模式（十字光标）\n */\nfunction TableCross_hide() {\n    if (TableCross_lastCell === gUndefined)\n        return;\n\n    V_ui_hide(TableCross_ui);\n\n    JQ_removeClass(TableCross_lastCell, s_CssTableCrossCell);\n    // TableCross_lastCell = gUndefined;\n    TableCross_lastTable = gUndefined;\n}\n\n/**\n * 判断当前内容块是否与已显示了阅读模式（十字光标）的表格重叠\n * @param target 内容块对象\n*/\nfunction TableCross_checkFallWith(target) {\n    return (TableCross_lastTable !== gUndefined\n        && target.ch().a(s_Id) === TableCross_lastTable.a(s_Id));\n}\n\n// ==================== 表格列格式化类 ==================== //\n\nlet ColumnFormatting_syntax_checkbox_header = \"[ ] \"; // 复选框列头格式语法\nlet ColumnFormatting_syntax_checkbox = /(^((\\[[x-]])|[Yy?？])(\\s.+)*)/; // 复选框列内单元格格式语法\n\n/**\n * 初始化\n * @param table 表格对象\n * @param cell 单元格对象\n * @param text 单元格文本内容\n */\nfunction ColumnFormatting_init(table, cell, text) {\n    // WARN(cell.t(), ColumnFormatting_syntax_checkbox.test(cell.t()));\n    if (table.a(s_DataColumnFmting) !== s_True\n        && (cell.f(\"strong, em, u, mark, del\").length > 0 // 普通列格式\n        || cell.c(s_TextAlign) === s_Right // 右对齐表示使用数值格式\n        || text.sW(ColumnFormatting_syntax_checkbox_header))) { // 复选框列格式\n            // 将表格标记为带列格式语法\n            table.a(s_DataColumnFmting, s_True);\n            return gTrue; // 匹配到列格式\n    }\n    return gFalse; // 未匹配到列格式\n}\n\n/**\n * 返回表格内所有非合并的同列单元格对象集合\n * @param table 表格格对象\n * @param th 列头单元格对象\n * @param cells 集合变量\n */\nfunction ColumnFormatting_getCells(table, th, cells) {\n    if (cells === gUndefined)\n        cells = table.f(\"[\" + s_DataColspan + \"!='true'][\" + s_DataTblCol + \"='\" + th.a(s_DataTblCol) + \"']\");\n    return cells;\n}\n\n/**\n * 返回表格 tbody 内的同列单元格对象集合\n * @param table 表格格对象\n * @param th 列头单元格对象\n * @param tbodyCells 集合变量，为 gUndefined 则重新生成\n */\nfunction ColumnFormatting_getTbodyCells(table, th, tbodyCells) {\n    if (tbodyCells === gUndefined)\n        tbodyCells = table.f(\"td[\" + s_DataTblCol + \"='\" + th.a(s_DataTblCol) + \"']\");\n    return tbodyCells;\n}\n\n/**\n * 列格式化\n * @param table 表格对象\n */\nfunction ColumnFormatting_format(table) {\n    table.f(\"thead th\").e(function () {\n        let th = $(this),\n            cells = gUndefined,\n            tbodyCells = gUndefined,\n            cellsCSS = \"\";\n\n        // 粗体\n        if (th.f(\"strong:first-child\").length > 0) {\n            cells = ColumnFormatting_getCells(table, th, cells);\n            cellsCSS += s_CssTableColumnFormat_Bold + \" \";\n        }\n\n        // 斜体\n        if (th.f(\"em:first-child\").length > 0) {\n            cells = ColumnFormatting_getCells(table, th, cells);\n            cellsCSS += s_CssTableColumnFormat_Em + \" \";\n        }\n\n        // 高亮\n        let thHTML = th.h();\n        if (thHTML.sW(\"<mar\") && thHTML.eW(\"rk>\") // <mark>...</mark>\n            || th.a(s_Class) !== gUndefined\n            && th.a(s_Class).i(s_CssTableColumnFormat_Mark) > -1) {\n                $(\"[\" + s_DataTblCol + \"='\" + th.a(s_DataTblCol) + \"']\").f(\"mark\").ch().unwrap();\n                cells = ColumnFormatting_getCells(table, th, cells);\n                cellsCSS += s_CssTableColumnFormat_Mark + \" \";\n        }\n\n        // 批量添加以上列的常规样式\n        if (cells !== gUndefined && cellsCSS.length > 0)\n            JQ_addClass(cells, cellsCSS);\n\n        // 下划线\n        if (th.f(\"u:first-child\").length > 0) {\n            JQ_addClass(th, s_CssTableColumnFormat_U);\n            tbodyCells = ColumnFormatting_getTbodyCells(table, th, tbodyCells);\n            tbodyCells.contents().wrap(\"<u></u>\");\n        }\n\n        // 删除线\n        if (th.f(\"del:first-child\").length > 0) {\n            JQ_addClass(th, s_CssTableColumnFormat_Del);\n            tbodyCells = ColumnFormatting_getTbodyCells(table, th, tbodyCells);\n            tbodyCells.contents().wrap(\"<del></del>\");\n        }\n\n        // 复选框\n        if (th.t().sW(ColumnFormatting_syntax_checkbox_header)) {\n            cells = ColumnFormatting_getCells(table, th, cells);\n            JQ_addClass(cells, s_CssTableColumnFormat_Checkbox);\n\n            // 删除列头的复选框语法\n            ColumnFormatting_removeCheckboxSyntax(th, ColumnFormatting_syntax_checkbox_header);\n\n            tbodyCells = ColumnFormatting_getTbodyCells(table, th, tbodyCells);\n\n            tbodyCells.e(function () {\n                let ce = $(this),\n                    typeFlag = ce.t().m(ColumnFormatting_syntax_checkbox),\n                    chkStatus = \"no\",\n                    chkStyle = s_Dark;\n\n                typeFlag = (typeFlag != null) ? typeFlag[2] : \"\";\n\n                // 跳过横向合并的单元格\n                if (ce.a(s_Colspan) !== gUndefined)\n                    return gTrue;\n\n                // 移除单元格的复选框语法内容\n                ColumnFormatting_removeCheckboxSyntax(ce, typeFlag);\n\n                // 指定为 yes - 已选择\n                if (typeFlag === \"[x]\" || typeFlag === \"Y\")\n                    chkStatus = s_Checked;\n                // 指定为 un - 不确定选择\n                else if (typeFlag === \"[-]\" || typeFlag === \"?\" || typeFlag === \"？\")\n                    chkStatus = \"un\";\n                // 无指定\n                else\n                    ce.rHTML(\"&nbsp;\", \"\");\n\n                // 添加复选框样式\n                ce.prepend('<svg width=\"14px\" height=\"14px\" class=\"v-svg-small-ico\" data-chk=\"' + chkStatus + '\"><use xlink:href=\"#icoChkbox_'\n                    + chkStatus + '\" class=\"v-svg-ico-' + chkStyle + '\"/></svg>');\n            });\n        }\n\n        // 数值格式\n        if (th.c(s_TextAlign).sW(\"r\")) {\n            tbodyCells = ColumnFormatting_getTbodyCells(table, th, tbodyCells);\n            // 设置为等宽字体\n            JQ_addClass(tbodyCells, \"v-tbl-col-fmt-num\");\n            // 数值格式化处理\n            tbodyCells.e(function () {\n                let ce = $(this),\n                    text = ce.t();\n                // 内容为数值\n                if (text.isNumber()) {\n                    // 添加千位符\n                    ce.h(V_formatting_decimal( // 添加千位符\n                        V_formatting_thousands(ce.h()))); // 对小数进行格式化处理\n                    // 根据正负号进行着色处理\n                    ColumnFormatting_coloringNumber(ce, text, gTrue);\n                }\n                // 内容为百分数\n                else if (text.isPercent()) {\n                    // 对小数进行处理\n                    ce.h(V_formatting_percent( // 对小数进行处理\n                        V_formatting_decimal(ce.h()))); // 对百分数进行格式化处理\n                    // 根据正负号进行着色处理\n                    let coloring = ColumnFormatting_coloringNumber(ce, text, gTrue),\n                        percent = text.r(/(-|\\+|\\s)/g, \"\"),\n                        percentValue = JS_mathRound(percent.r(\"%\", \"\")),\n                        bg1 = \"rgba(128, 128, 128, 0.1)\",\n                        bg2 = \"rgba(128, 128, 128, 0.4)\",\n                        bgSplit = \"rgba(128, 128, 128, 0.8)\";\n                    // 对有首色的进行渐变颜色调整\n                    if (coloring) {\n                        let baseBg = ce.c(s_Color).r(\"rgb\", \"rgba\");\n                        bg1 = baseBg.r(\")\", \", 0.05)\");\n                        bg2 = baseBg.r(\")\", \", 0.2)\");\n                        bgSplit = baseBg.r(\")\", \", 0.7)\");\n                    }\n                    // 根据百分比生成渐变背景色、最小宽度\n                    ce.c(s_Background, \"linear-gradient(90deg, \" + bg1 + \" 0%, \" + bg2 + \" \" + (percentValue > 1 ? percentValue - 1 : 0)\n                        + \"%, \" + bgSplit + \" \" + percent\n                        + \", transparent \" + percent + \")\")\n                            .c(s_MinWidth, \"100px\");\n                    // 对 +/- 符号进行处理\n                    ce.h(ce.h().r(\">+\", \">▴ \").r(\">-\", \">▾ \"));\n                }\n                // 内容为货币\n                else if (text.isCurrency()) {\n                    // 对货币符号进行格式货\n                    ce.h(V_formatting_decimal( // 对货币符号进行格式货\n                        V_formatting_thousands( // 添加千位符\n                            V_formatting_currency(ce.h())))); // 对小数进行格式化处理\n                    // 根据正负号进行着色处理\n                    ColumnFormatting_coloringNumber(ce, text, gFalse);\n                }\n            });\n        } // 数值格式\n\n        // 标记单元格是否为横向合并，横向合并的单元不应用列格式\n        if (th.a(s_Colspan) !== gUndefined)\n            th.a(s_DataColspan, s_True);\n        else\n            th.a(s_DataColspan, s_False);\n    });\n}\n\n/**\n * 根据数值的正、负号进行着色处理\n * @param target 着色的对象\n * @param text 依据的数值文本\n * @param mode 正负号位置模式，true：在开头，false: 在任意位置\n * @returns boolean 着色结果，true：有着色，false：没有着色\n */\nfunction ColumnFormatting_coloringNumber(target, text, mode) {\n    // 正、负号在文本的开头\n    if (mode) {\n        if (text.sW(\"-\")) {\n            JQ_addClass(target, s_CssTableColumnFormat_NumNeg);\n            return gTrue;\n        }\n        else if (text.sW(\"+\")) {\n            JQ_addClass(target, s_CssTableColumnFormat_NumPos);\n            return gTrue;\n        }\n    }\n    // 正、负号在文本的任意位置\n    else {\n        if (text.i(\"-\") > -1) {\n            JQ_addClass(target, s_CssTableColumnFormat_NumNeg);\n            return gTrue;\n        }\n        else if (text.i(\"+\") > -1) {\n            JQ_addClass(target, s_CssTableColumnFormat_NumPos);\n            return gTrue;\n        }\n    }\n    return gFalse;\n}\n\n/**\n * 移除复选框的语法内容\n * @param target 目标单元格对象\n * @param syntaxText 要移除的语法内容\n */\nfunction ColumnFormatting_removeCheckboxSyntax(target, syntaxText) {\n    target.rHTML(syntaxText, \"\");\n    // if (syntaxText != null && syntaxText.length === 1) // Y\n    //     target.rHTML(/Y/, \"\");\n    // else\n    //     target.rHTML(/\\[(\\s|x|-)]\\s*/, \"\");\n}\n\n// ==================== 表格行分组/折叠类 ==================== //\n\nlet RowGroup_folderCount = 0, // 折叠行内行分组类型的数量\n    RowGroup_syntax_tag = /^>+(\\s)./, // 用于匹配行折叠语法\n    RowGroup_syntax_tag2Replace = /(&gt;)+(\\s)/, // 用于匹配将行折叠语法替换为指定字符\n    RowGroup_spliter = \"> \", // 行折叠语法与内容的分隔标识\n    RowGroup_parentStack = [], // 上级行的堆栈\n    RowGroup_colorStack = [], // 不同分组的背景颜色堆栈\n    // 表格折叠行图标：已收起\n    RowGroup_icoClosed = '<svg width=\"16px\" height=\"16px\" class=\"v-svg-small-ico\"><use xlink:href=\"#icoFolded\" class=\"v-rowgroup-folder-ico\"/></svg>',\n    // 表格折叠行图标：已展开\n    RowGroup_icoOpened = '<svg width=\"16px\" height=\"16px\" class=\"v-svg-small-ico\"><use xlink:href=\"#icoUnfold\" class=\"v-rowgroup-folder-ico\"/></svg>';\n\n/**\n * 初始化\n * @param table 表格对象\n */\nfunction RowGroup_init(table) {\n    // 若不是在新标签打开的，将第 1 列的设置缩进样式\n    JQ_addClass(table.f(\"[\" + s_DataTblCol + \"$='-0']\"), s_CssTableRowGroupNotFolder);\n\n    let lastLevel = 0, // 上一个缩进等级\n        currentLevel = 0; // 当前缩进等级\n        // bgColor = new RandomColor();\n\n    // 遍历所有行的第 1 个单元格\n    table.f(\"td:first-child\").e(function () {\n        let td = $(this),\n            tr = td.p(),\n            text = td.t();\n\n        // 判断每行的首列，是否有行折叠标记\n        // 没有则进入下一个循环\n        if (!RowGroup_syntax_tag.test(text)) {\n            lastLevel = 0;\n            RowGroup_parentStack.length = 0;\n            RowGroup_colorStack.length = 0;\n            return gTrue;\n        }\n\n        // 从语法中获得当前缩进等级\n        currentLevel = text.i(RowGroup_spliter) + 1;\n        // 当前等级比上一次等级要深\n        if (currentLevel > lastLevel) {\n            let beforeChanged = lastLevel;\n            lastLevel = currentLevel;\n            // 设置为新的行分组\n            RowGroup_newFolder(tr, currentLevel, beforeChanged === 0,\n                RandomColor_format(RandomColor_dissimilarRgb(), s_varTblRowAlpha));\n            // 设置为行缩进行\n            RowGroup_ident(tr, td, currentLevel);\n        }\n        // 当前等级不比上一次等级要深\n        else {\n            // 获得等级差进行\n            let count = lastLevel - currentLevel;\n            // 获得当前行对应的上级行\n            if (count > 0) {\n                for (let i = 0; i < count; i++) {\n                    RowGroup_parentStack.pop();\n                    RowGroup_colorStack.pop();\n                }\n            }\n            lastLevel = currentLevel;\n            // 设置为行缩进行\n            RowGroup_ident(tr, td, currentLevel);\n        }\n    });\n}\n\n/**\n * 获得最近一个分组行分组对象\n */\nfunction RowGroup_lastParent() {\n    return RowGroup_parentStack[RowGroup_parentStack.length - 1];\n}\n\n/**\n * 获得最近一个分组颜色对象\n */\nfunction RowGroup_lastColor() {\n    return RowGroup_colorStack[RowGroup_colorStack.length - 1];\n}\n\n/**\n * 设置为新的行分组\n * @param tr 对应的行对象\n * @param level 缩进层级\n * @param reset 是否重置回第一级\n * @param color 该分组背景色\n */\nfunction RowGroup_newFolder(tr, level, reset, color) {\n    let folderRow = tr.prev();\n    RowGroup_folderCount++;\n\n    // 将当前行分组的 id 入栈\n    RowGroup_parentStack.push(RowGroup_folderCount);\n    // 将当前行分组的随机背景颜色入栈\n    RowGroup_colorStack.push(color);\n\n    // 设置折叠行分组的属性\n    folderRow.a(s_DataFolderId, RowGroup_folderCount);\n    folderRow.a(s_DataFolder, s_True);\n    folderRow.a(s_DataRowFolded, s_True);\n\n    // // 生成新的行分组的标识颜色\n    // let tbody = tr.p(),\n    //     prevLevel = folderRow.prev().ch(\"td:first\").a(s_DataIdentLevel),\n    //     curentLevel = folderRow.ch(\"td:first\").a(s_DataIdentLevel),\n    //     c1 = folderRow.prev().c(gStrBackgroundColor);\n\n    // // 修正背景色中的透明度不为 CSS 变量的情况\n    // if (c1 !== gUndefined) {\n    //     let alphaIdx = c1.i(\", 0.\");\n    //     if (alphaIdx > -1)\n    //     c1 = c1.s(0, alphaIdx) + \", var(--tbl-row-g-alpha))\";\n    // }\n    // // 当前行分组的缩进等级，与前一行的缩进等级不同，则用父分组的背景色\n    // if (curentLevel !== gUndefined && prevLevel !== gUndefined && curentLevel !== prevLevel) {\n    //     let parentFolder = tbody.f(\"tr[\" + s_DataFolder + \"-id=\" + folderRow.a(s_DataParentFolderId) +\"]\");\n    //     c1 = parentFolder.a(\"vk-bg\");\n    // }\n\n    // // 上一行没有背景，直接单色填充\n    // if (c1 === \"rgba(0, 0, 0, 0)\" || reset === gT) {\n    //     c1 = RowGroup_lastColor();\n    //     folderRow.a(\"vk-bg\", c1);\n    //     folderRow.c({\n    //         gStrBackgroundColor : c1\n    //     });\n    // }\n    // // 上一行有背景色，则采用组合背景色表达其从属的相关性\n    // else {\n    //     let c2 = RowGroup_lastColor(),\n    //         c1Width = level * 50;\n    //     folderRow.a(\"vk-bg\", c1);\n    //     folderRow.c({\n    //         s_Background :\n    //             \"linear-gradient(135deg, \" + c1 + \" \" + c1Width + \"px, var(--pn-c-alt) \" + (c1Width + 1) + \"px, \"\n    //             + c2 + \" \" + (c1Width + 1) + \"px)\"\n    //     });\n    // }\n\n    // 获得折叠行分组首个单元格\n    let td = folderRow.ch(\"td:first\"),\n        tdHadIdent = td.f(\".\" + s_CssTableRowGroupIdenter + \":last\");\n\n    // 设置折叠控件样式\n    if (tdHadIdent.length > 0)\n        tdHadIdent.after(\"<span class='v-tbl-row-g-btn'>\" + RowGroup_icoClosed + \"</span>\");\n    else\n        td.prepend(\"<label class='v-tbl-row-g-btn'>\" + RowGroup_icoClosed + \"</label>\");\n\n    // 调整折叠行的缩进样式\n    JQ_removeClass(td, s_CssTableRowGroupNotFolder);\n    JQ_addClass(td, \"v-tbl-row-g-folder\");\n    JQ_addClass(tdHadIdent, \"v-tbl-row-g-identer-folder\");\n\n    // 添加代表目录的括号及样式\n    // 重新组合生成新的单元格内容，以支持原始带格式的单元格内容\n    let preClass = \".\" + s_CssTableRowGroupIdenter + \", \" + s_CssTableRowGroupBtn,\n        preObjs = td.f(preClass),\n        cloneTd = td.clone();\n    JQ_remove(cloneTd.ch(preClass));\n    td.h(__echoOuterHTML(preObjs) + \" <span class='folder-marker'>[</span> <strong>\" + cloneTd.h() + \" </strong><span class='folder-marker'>]</span>\");\n\n    // 设置展开、收起事件\n    td.ch(s_CssTableRowGroupBtn).ck(function () {\n        RowGroup_toggle(folderRow);\n    });\n\n    /**\n     * 遍历获得指定对象集合的所有 outerHTML 内容\n     * @param objectSet 对象集合\n     * @returns String\n     */\n    function __echoOuterHTML(objectSet) {\n        let outerHTML = \"\";\n        objectSet.e(function () {\n            outerHTML += $(this).prop(\"outerHTML\");\n        });\n        return outerHTML;\n    }\n}\n\n/**\n * 展开、收起表格行分组下的表格行\n * @param folderRow 折叠按钮所在的表格行对象\n */\nfunction RowGroup_toggle(folderRow) {\n    // 取消事件冒泡，用于避免显示表格的阅读模式（十字光标）\n    event.stopPropagation();\n\n    // 处理行分组的打开、关闭\n    if (folderRow.a(s_DataRowFolded).sW(\"t\"))\n        RowGroup_open(folderRow);\n    else\n        RowGroup_close(folderRow);\n\n    // 隐藏表格的阅读模式（十字光标）\n    TableCross_hide();\n}\n\n/**\n * 展开所有表格行分组\n * @param table 指定的表格对象\n * @param mode 指定打开模式。auto：系统自动打开\n * @returns 处理结果。true: 已展开，false: 不符合展开条件\n */\nfunction RowGroup_openAll(table, mode) {\n    if (table.a(s_DataRowGroup) !== s_True)\n        return gFalse;\n\n    table.f(s_CssTableRowGroupBtn).e(function () {\n        let folderRow = $(this).p().p();\n        if (folderRow.a(s_DataRowFolded) === s_True)\n            RowGroup_open(folderRow, mode);\n    });\n    return gTrue;\n}\n\n/**\n * 收起全部表格行分级\n * @param table 指定的表格对象\n * @param mode 指定处理范围。auto：关闭被自动打开的，不指定时默认全部关闭\n * @returns 处理结果。true: 已展开，false: 不符合展开条件\n */\nfunction RowGroup_closeAll(table, mode) {\n    if (table.a(s_DataRowGroup) !== s_True)\n        return gFalse;\n\n    // 只对第一级的行分组进行处理，非第一级的行分级为 span.v-tbl-row-g-btn\n    table.f(\"label\" + s_CssTableRowGroupBtn).e(function () {\n        let folderRow = $(this).p().p();\n        LOG(mode, folderRow.a(s_DataRowOpenMode), folderRow.a(s_DataRowFolded));\n        if (mode === s_Auto) {\n            if (folderRow.a(s_DataRowOpenMode) === s_Auto && folderRow.a(s_DataRowFolded) === s_False)\n                RowGroup_close(folderRow);\n        }\n        else {\n            if (folderRow.a(s_DataRowFolded) !== s_True)\n                RowGroup_close(folderRow);\n        }\n    });\n    return gTrue;\n}\n\n/**\n * 重置清空表格中的行分组相关信息\n * @param target 目标表格\n */\nfunction RowGroup_reset(target) {\n    target.removeAttr(s_DataRowGroup);\n    target.f(\"tr[\" + s_DataParentFolderId + \"]\").removeAttr(s_DataParentFolderId);\n}\n\n/**\n * 设置为缩进行\n * @param tr 对应的行对象\n * @param td 对应的行的首个单元格\n * @param level 缩进层级\n */\nfunction RowGroup_ident(tr, td, level) {\n    // 统一缩进节点符号转换，尾行在完成的有处理后再进行修正\n    td.rHTML(RowGroup_syntax_tag2Replace, \"\");\n\n    // 设置被折叠行的属性\n    tr.a(s_DataParentFolderId, RowGroup_lastParent());\n    // 设置缩进样式\n    td.a(s_DataIdentLevel, level);\n    // 调整样式\n    JQ_removeClass(td, s_CssTableRowGroupNotFolder);\n    JQ_addClass(td, s_CssTableRowGroupSub);\n    // 设置被折叠行的背景色\n    tr.c(s_BackgroundColor, RowGroup_lastColor());\n\n    // 生成缩进占位元素\n    for (let i = 0; i < level; i++) {\n        let identer = td.f(\".\" + s_CssTableRowGroupIdenter + \":last\"),\n            identObj = \"<label class='\" + s_CssTableRowGroupIdenter + \"'></label>\";\n        if (identer.length > 0)\n            identer.after(identObj);\n        else\n            td.prepend(identObj);\n    }\n\n    // 隐藏被折叠的行\n    tr.c(s_Display, s_Table + \"-column\");\n}\n\n/**\n * 展开表格行分组\n * @param folderRow 行分组对象\n * @param mode 指定打开模式。auto：系统自动打开\n */\nfunction RowGroup_open(folderRow, mode) {\n    // 处理展开行分组\n    let id = folderRow.a(s_DataFolderId),\n        table = folderRow.p().p(),\n        subRows = table.f(\"tr[\" + s_DataParentFolderId + \"='\" + id + \"']\"),\n        folderButton = folderRow.ch(\"td:first\").ch(s_CssTableRowGroupBtn + \":last\");\n\n    folderRow.a(s_DataRowFolded, s_False);\n    if (mode !== gUndefined)\n        folderRow.a(s_DataRowOpenMode, mode);\n    folderButton.prop(\"innerHTML\", RowGroup_icoOpened);\n    subRows.c(s_Display, \"\");\n\n    // 如表格指定了重复表头则进行对应处理\n    let thRow = table.f(\"thead>tr:last-child\");\n    if (table.a(s_DataThRpt) === \"group\") {\n        // 从第 2 列开始进行处理\n        folderRow.f(\"td:not(:first-child)\").e(function () {\n            let td = $(this),\n                tdHTML = td.h().x();\n            if (tdHTML.length === 0 || tdHTML === \"&nbsp;\") {\n                let colID = td.a(s_DataTblCol),\n                    th = thRow.f(\"th[\" + s_DataTblCol + \"='\" + colID + \"']\").h();\n                // 如果对应的列头可能因向下合并单元格为空时，尝试找上一行对应的列头\n                if (th === gUndefined) {\n                    let prevThRow = thRow.prev();\n                    if (prevThRow !== gUndefined)\n                        th = prevThRow.f(\"th[\" + s_DataTblCol + \"='\" + colID + \"']\").h();\n                }\n                // 临时将行分组中的单元格替换为对应的列头\n                td.h(th);\n                JQ_addClass(td, s_CssThRepeater);\n            }\n        });\n    }\n}\n\n/**\n * 折叠表格行分组\n * @param folderRow 行分组对象\n */\nfunction RowGroup_close(folderRow) {\n    // 处理折叠行分组\n    let id = folderRow.a(s_DataFolderId),\n        subRows = $(\"tr[\" + s_DataParentFolderId + \"='\" + id + \"']\"),\n        folderButton = folderRow.ch(\"td:first\").ch(s_CssTableRowGroupBtn + \":last\");\n\n    folderRow.a(s_DataRowFolded, s_True);\n    folderRow.removeAttr(s_DataRowOpenMode);\n    folderButton.prop(\"innerHTML\", RowGroup_icoClosed);\n\n    // 折叠所有子行（包括行分组）\n    subRows.e(function () {\n        let tr = $(this),\n            folder = tr.a(s_DataFolder);\n        if (folder !== gUndefined && folder.sW(\"t\"))\n            RowGroup_close(tr);\n        tr.c(s_Display, s_Table + \"-column\");\n    });\n\n    // 如表格指定了重复表头则进行对应处理\n    let table = folderRow.p().p();\n    if (table.a(s_DataThRpt) === \"group\") {\n        // 从第 2 列开始进行处理\n        folderRow.f(\"td:not(:first-child)\").e(function () {\n            let td = $(this);\n            // 将行分组中临时替换的列头删除\n            if (td.a(s_Class).i(s_CssThRepeater) > -1) {\n                td.h(\"\");\n                JQ_removeClass(td, s_CssThRepeater);\n            }\n        });\n    }\n}\n\n/**\n * 根据设备类型自适应hover样式\n */\nfunction RowGroup_adjustHoverStyle() {\n    if (env.device.mobile) // 移动设备时解绑样式事件\n        $(s_CssTableRowGroupBtn).uH();\n    else // 为表格行分组的折叠控件绑定 hover 事件\n        V_ui_bindHover($(s_CssTableRowGroupBtn));\n}\n\n// ==================== 表格列头重复生成器 ==================== //\n\nlet ThRepeater_syntax_tag = /^(##\\s).+/; // 用于匹配表格列头重复的语法\n\n/**\n * 初始化重复表头处理\n */\nfunction ThRepeater_init(table) {\n    let hasRowGroup = table.a(s_DataRowGroup) === s_True;\n\n    // 带行分组时，表头重复模式为 group，其他则为 page\n    table.a(s_DataThRpt, hasRowGroup ? \"group\" : \"page\");\n    if (hasRowGroup)\n        return;\n\n    // 处理 page 模式的表头重复\n    let rowIndex = 1,\n        pageSize = 15 + rowIndex,\n        thRow = table.f(\"thead>tr\"),\n        skipRowCount = 0,\n        lastSkipRowCount = 0,\n        tbody = table.f(\"tbody>tr\"),\n        rowCount = tbody.length;\n\n    tbody.e(function () {\n        let tr = $(this),\n            td = tr.ch(\"td[rowspan]\");\n\n        // 跳过有跨行合并的行\n        if (td.length > 0) {\n            td.e(function () {\n                let rowSpan = JS_parseInt($(this).a(s_Rowspan));\n                if (rowSpan > skipRowCount) {\n                    skipRowCount = rowSpan - 1;\n                }\n                lastSkipRowCount = skipRowCount - 1;\n            });\n        }\n\n        // 每 15 行为 1 页\n        if (skipRowCount === 0 && rowIndex % (pageSize + lastSkipRowCount - 1) === 0\n            && rowIndex < rowCount) {\n                let colIndex = 0;\n                thRow.e(function () {\n                    tr.after($(this).prop(\"outerHTML\").rA(\"<th \", \"<td \"));\n                    JQ_addClass(tr.next().ch(\"td\"), s_CssThRepeater);\n                    if (colIndex === 0)\n                        JQ_addClass(tr.next().ch(\".\" + s_CssThRepeater), \"first\");\n                    else\n                        JQ_addClass(tr.next().ch(\".\" + s_CssThRepeater), \"not-first\");\n                    tr = tr.next();\n                    // 取消表格行号\n                    JQ_addClass(tr, \"v-tr-repeater\");\n\n                    colIndex++;\n                });\n        }\n        rowIndex++;\n\n        // 未完成须跳过的行\n        if (skipRowCount > 0)\n            skipRowCount--;\n        // 已完成须跳过的行\n        else\n            lastSkipRowCount = 0;\n    });\n}\n\n// ==================== 音频增强类 ==================== //\n\nlet ExtAudio_icon_loading = V_ui_generateSvgIcon(\"icoLoading\", 16, 16, s_Light),\n    ExtAudio_icon_play = V_ui_generateSvgIcon(\"icoPlay\", 16, 16, s_Light),\n    ExtAudio_icon_pause = V_ui_generateSvgIcon(\"icoPause\", 16, 16, s_Light),\n    ExtAudio_icon_stop = V_ui_generateSvgIcon(\"icoStop\", 16, 16, s_Light),\n    ExtAudio_icon_forbidden = V_ui_generateSvgIcon(\"icoForbidden\", 16, 16, s_Light);\n\n/**\n * 初始化音频数据\n */\nfunction ExtAudio_init() {\n    // 支持指定类型的音频，以及支持带参数的 URL\n    $(\"#write img[src$='.mp3'], #write [src$='.m4a'], #write [src$='.ogg'], #write [src$='.wav'],\"\n    + \"[src*='.mp3?'], #write [src*='.m4a?'], #write [src*='.ogg?'], #write [src*='.wav?']\").e(function () {\n        let audioLike = $(this),\n            audio = gUndefined,\n            src = audioLike.a(s_Src),\n            container = audioLike.p(),\n            params = V_util_getQueryParams(src);\n\n        // 指定为 mini 模式（扩展的自定义控件）\n        if (params[s_Controls] === s_Mini) {\n            V_doc_counter_audiomini++;\n\n            // 将 URL 为音频资源的 img 标签转换为 audio\n            audio = __transToAudio(audioLike, src);\n            // 设置 audio id 用于自定义 mini 控件\n            audio.a(s_Id, \"vk-id-mini-audio\" + V_doc_counter_audiomini);\n\n            // 添加音频播放 mini 控件\n            audio.after(\"<div id='vk-id-mini-audio\" + V_doc_counter_audiomini + \"-control\"\n                + \"' \" + s_DataTitle + \"='mini audio \" + (V_doc_counter_audiomini)\n                + \"' class='v-audio-mini-control'></div>\");\n\n            // 开始加载音频\n            audio.bind(\"loadstart\", function () {\n                let controls = $(\"#\" + $(this).a(s_Id) + \"-control\");\n                JQ_addClass(controls, s_CssAudioMiniControl);\n                JQ_addClass(controls, s_Loading);\n                controls.h(ExtAudio_icon_loading);\n            });\n\n            // 音频就绪可以开始播放\n            audio.bind(\"canplay\", function () {\n                let controls = $(\"#\" + $(this).a(s_Id) + \"-control\");\n                JQ_removeClass(controls, s_Loading);\n\n                // 绑定点击事件\n                controls.uC().ck(function () {\n                    __play(this, audio[0]);\n                });\n                controls.h(ExtAudio_icon_play);\n                controls.a(s_DataPause, params[\"pause\"]);\n\n                // 须显示持续时长\n                let dur = params[\"duration\"];\n                if (dur !== gUndefined && dur.sW(\"t\")) {\n                    let dur2 = audio.a(s_DataDuration);\n                    if (dur2 === gUndefined || !dur2.sW(\"t\")) {\n                        // 计算音频时长\n                        let duration = audio[0].duration,\n                            min = Math.floor(duration / 60),\n                            sec = Math.floor(duration -  min * 60);\n                        let minStr = min > 0 ? min + \"′\" : \"\";\n                        audio.next().after(\" <sup class='v-duration-info'>\" + minStr + sec + \"″</sup>\");\n                        audio.a(s_DataDuration, s_True);\n                    }\n                }\n            });\n\n            // 正在播放\n            audio.bind(s_Playing, function () {\n                let controls = $(\"#\" + $(this).a(s_Id) + \"-control\"),\n                    pause = controls.a(s_DataPause);\n\n                JQ_addClass(controls, s_CssAudioMiniControl)\n                JQ_addClass(controls, s_Playing);\n\n                // 支持暂停播放\n                if (pause !== gUndefined && pause.sW(\"t\")) {\n                    controls.h(ExtAudio_icon_pause);\n                }\n                // 不支持暂停播放，暂时即结束\n                else {\n                    controls.h(ExtAudio_icon_stop);\n                    audio.currentTime = 0; // 播放都是从头开始\n                }\n            });\n\n            // 播放结束后恢复按钮状态\n            audio.bind(\"ended\", function () {\n                let controls = $(\"#\" + $(this).a(s_Id) + \"-control\");\n                controls.h(ExtAudio_icon_play);\n                JQ_removeClass(controls, s_Playing);\n            });\n\n            // 故障或不可用\n            audio.bind(\"emptied\", function () {\n                let id = $(this).a(s_Id) + \"-control\",\n                    controls = $(\"#\" + id);\n                JQ_removeClass(controls, s_Loading);\n                controls.h(ExtAudio_icon_forbidden);\n                JQ_addClass(controls, s_CssAudioMiniControl);\n                JQ_addClass(controls, s_Disabled);\n                // 将无法加载的音频信息添加到链接检查器\n                __addToLinkChecker(id, controls.a(s_DataTitle));\n            });\n\n            // 加载错误\n            audio.bind(s_Error, function () {\n                audio.tr(\"emptied\");\n            });\n\n            // 鼠标 hover 事件\n            audio.hover(function () {\n                let _t =  $(this);\n                if (_t.a(s_Class).i(s_Disabled) === -1)\n                    JQ_addClass(_t, s_Hover);\n            }, function () {\n                JQ_removeClass($(this), s_Hover);\n            });\n        }\n        // 标准控件模式\n        else {\n            V_doc_counter_audio++;\n\n            // 确保 video 有独立的父容器，一般情况下 Typora 导出的为 <p>\n            if (container.prop(s_TagName).l() !== \"p\") {\n                audioLike.wrap(\"<p></p>\");\n                container = audioLike.p();\n            }\n            // 设置容器样式数据，用于折叠内容时使用\n            container.a(s_DataContainer, \"audio\");\n            JQ_addClass(container, s_CssCaptionContainer);\n\n            // 先根据题注语法生成题注\n            // if (ExtAudio_blockCapNum !== gTrue)\n                CaptionGenerator_actionForMediaContent(audioLike, s_Audio);\n\n            // 将 URL 为音频资源的 img 标签转换为 audio\n            audio = __transToAudio(audioLike, src);\n            // 设置 audio 为标准控件\n            audio.a(s_Controls, s_Controls);\n\n            // 若有第 2 题注，则微调样式\n            if (audio.next(s_Caption2).length > 0)\n                audio.c(s_MarginBottom, \"-10px\");\n\n            // 故障或不可用\n            audio.bind(\"emptied\", function () {\n                // 将无法加载的音频信息添加到链接检查器\n                __addToLinkChecker(audio.p().a(s_Id), audio.p().a(s_DataTitle));\n            });\n\n            // 加载错误\n            audio.bind(s_Error, function () {\n                audio.tr(\"emptied\");\n            });\n        }\n\n        /**\n         * 将无效音频源的信息添加到链接检查器\n         *\n         * @param id 坏链对象的标识\n         * @param content 显示的内容\n         */\n        function __addToLinkChecker(id, content) {\n            // 将无法加载的音频信息添加到链接检查器\n            LinkTool_addToCheck(id, \"🔈 <strong>\" + [\n                \"无效的音频源\",\n                // \"無效的音頻源\",\n                \"Invalid audio source\",\n                // \"Source audio invalide\",\n                // \"Ungültige Audioquelle\",\n                // \"Fuente de audio no válida\",\n                // \"Недействительный источник звука\",\n                // \"無効なオーディオ ソース\",\n                // \"잘못된 오디오 소스\"\n            ][V_lang_id] + \":</strong> \" + content);\n        }\n    });\n\n    /**\n     * 转换为 audio 标签\n     * @param audioLike 类 audio 标签（即 src 为音频的 img 标签)\n     * @param src 音频 URL\n     */\n    function __transToAudio(audioLike, src) {\n        let tips = [\n            \"您的浏览器不支持音频标签。\",\n            // \"您的瀏覽器不支持音頻標籤。\",\n            \"Your browser does not support the audio tag.\",\n            // \"Votre navigateur ne prend pas en charge la balise audio.\",\n            // \"Ihr Browser unterstützt das audio -Tag nicht.\",\n            // \"Su navegador no es compatible con la etiqueta audio.\",\n            // \"Ваш браузер не поддерживает аудио тег.\",\n            // \"お使いのブラウザは音声タグをサポートしていません。\",\n            // \"브라우저가 오디오 태그를 지원하지 않습니다.\"\n        ][V_lang_id];\n\n        // 对 audio 标签的属性进行支持\n        let autoplay = V_util_getQueryParams(src)[s_Autoplay],\n            loop = V_util_getQueryParams(src)[s_Loop],\n            preload = V_util_getQueryParams(src)[s_Preload];\n\n        // 将 URL 为音频资源的 img 标签转换为 audio\n        audioLike.wrap(\"<audio src='\" + src + \"'>\" + tips + \"</audio>\");\n        let audio = audioLike.p();\n        // 移除图片 img 标签\n        JQ_remove(audioLike);\n\n        // 设置 audio 属性\n        if (autoplay !== gUndefined) audio.a(s_Autoplay, s_Autoplay);\n        if (loop !== gUndefined) audio.a(s_Loop, s_Loop);\n        if (preload !== gUndefined) audio.a(s_Preload, s_Auto);\n\n        return audio;\n    }\n\n    /**\n     * 播放音频\n     * @param self 自定义的播放控件对象\n     * @param audio 音频的 JavaScript 对象\n     */\n    function __play(self, audio) {\n        let controls = $(self);\n\n        // 已暂停、未播放\n        if (audio.paused) {\n            audio.play();\n        }\n        // 播放中\n        else {\n            controls.h(ExtAudio_icon_play);\n            JQ_removeClass(controls, s_Playing);\n            audio.pause();\n\n            // 不支持暂时播放时，暂时即结束\n            if (controls.a(s_DataPause) === gUndefined)\n                audio.currentTime = 0; // 播放都是从头开始\n        }\n    }\n}\n\n// ==================== 音频增强类 ==================== //\n\n/**\n * 初始化音频数据\n */\nfunction ExtVideo_init() {\n    // 支持指定类型的音频，以及支持带参数的 URL\n    $(\"#write img[src$='.ogv'], #write img[src$='.mp4'], #write img[src$='.webm'],\"\n    + \"#write img[src*='.ogv?'], #write img[src*='.mp4?'], #write img[src*='.webm?']\").e(function () {\n        let videoLike = $(this),\n            video = gUndefined,\n            src = videoLike.a(s_Src),\n            container = videoLike.p();\n        V_doc_counter_video++;\n\n        // 确保 video 有独立的父容器，一般情况下 Typora 导出的为 <p>\n        if (container.prop(s_TagName).l() !== \"p\") {\n            videoLike.wrap(\"<p></p>\");\n            container = videoLike.p();\n        }\n        // 设置容器样式数据，用于折叠内容时使用\n        container.a(s_DataContainer, \"video\");\n        JQ_addClass(container, s_CssCaptionContainer);\n\n        // 先根据题注语法生成题注\n        // if (ExtVideo_blockCapNum !== gTrue)\n            CaptionGenerator_actionForMediaContent(videoLike, s_Video);\n\n        // 将 URL 为音频资源的 img 标签转换为 video\n        video = __transToVideo(videoLike, src);\n\n        // 故障或不可用\n        video.bind(\"emptied\", function () {\n            // 将无法加载的音频信息添加到链接检查器\n            __addToLinkChecker(video.p().a(s_Id), video.p().a(s_DataTitle));\n        });\n\n        // 加载错误\n        video.bind(s_Error, function () {\n            video.tr(\"emptied\");\n        });\n    });\n\n    /**\n     * 将无效视频源的信息添加到链接检查器\n     * @param id 坏链对象的标识\n     * @param content 用于显示的内容\n     */\n    function __addToLinkChecker(id, content) {\n        // 将无法加载的音频信息添加到链接检查器\n        LinkTool_addToCheck(id, \"📺 <strong>\" + [\n            \"无效的视频源\",\n            // \"無效的視頻源\",\n            \"Invalid video source\",\n            // \"Source vidéo non valide\",\n            // \"Ungültige Videoquelle\",\n            // \"Fuente de video no válida\",\n            // \"Недействительный источник видео\",\n            // \"無効なビデオ ソース\",\n            // \"잘못된 비디오 소스\"\n        ][V_lang_id] + \":</strong> \" + content);\n    }\n\n    /**\n     * 转换为 video 标签\n     * @param videoLike 类 video 标签（即 src 为视频的 img 标签)\n     * @param src 视频 URL\n     */\n    function __transToVideo(videoLike, src) {\n        let tips = [\n            \"您的浏览器不支持视频标签。\",\n            // \"您的瀏覽器不支持視頻標籤。\",\n            \"Your browser does not support the video tag.\",\n            // \"Votre navigateur ne prend pas en charge la balise video.\",\n            // \"Ihr Browser unterstützt das video -Tag nicht.\",\n            // \"Su navegador no es compatible con la etiqueta video.\",\n            // \"Ваш браузер не поддерживает видео тег.\",\n            // \"お使いのブラウザは動画タグをサポートしていません。\",\n            // \"브라우저가 비디오 태그를 지원하지 않습니다.\"\n        ][V_lang_id];\n\n        // 对 video 标签的属性进行支持\n        let autoplay = V_util_getQueryParams(src)[s_Autoplay],\n            loop = V_util_getQueryParams(src)[s_Loop],\n            preload = V_util_getQueryParams(src)[s_Preload],\n            width = V_util_getQueryParams(src)[s_Width],\n            height = V_util_getQueryParams(src)[s_Height];\n\n        // 将 URL 为音频资源的 img 标签转换为 video\n        videoLike.wrap(\"<video src='\" + src + \"'>\" + tips + \"</video>\");\n        let video = videoLike.p();\n        // 移除图片 img 标签\n        JQ_remove(videoLike);\n\n        // 设置 video 为标准控件\n        video.a(s_Controls, s_Controls);\n\n        // 设置 video 属性\n        if (autoplay !== gUndefined) video.a(s_Autoplay, s_Autoplay);\n        if (loop !== gUndefined) video.a(s_Loop, s_Loop);\n        if (preload !== gUndefined) video.a(s_Preload, s_Auto);\n        if (width !== gUndefined) video.a(s_Width, width);\n        if (height !== gUndefined) video.a(s_Height, height);\n\n        return video;\n    }\n}\n\n// ==================== 文本输入框类 ==================== //\n\n/**\n * 构造函数\n * @param target 须在其后添加文本输入组件的目标对象\n * @param id 对象标识\n * @param append 添加模式。true：作为子元素添加，false：作为兄弟元素添加\n */\nfunction TextField(target, id, append) {\n    let T = this;\n    // 文本输入框属性\n    T.ui = gUndefined;\n    T.icon = gUndefined;\n    T.input = gUndefined;\n    T.reset = gUndefined;\n    T.action = gUndefined;\n\n    T.lastValue = \"\";\n    T.timerValueChanged = null;\n\n    // 文本输入框事件\n    T.onInput = gUndefined;\n    T.onFocus = gUndefined;\n    T.onBlur = gUndefined;\n    T.onKeyDown = gUndefined;\n    T.onAction = gUndefined;\n    T.pressEnter = gUndefined;\n    T.pressESC = gUndefined;\n\n    /**\n     * 将文本输入框实例添加到指定对象之后\n     * @param target 指定对象\n     * @param id 添加到目标对象的 id 值\n     * @param append true: 添加，false: 插入\n     */\n    T.__appendTo = function (target, id, append) {\n        // 文本输入框 UI\n        let ui = '<div class=\"v-textfield ' + id + '\">'\n            + '<div class=\"v-textfield-icon\" style=\"display: none\"></div>'\n            + '<input type=\"' + s_Text + '\">'\n            + '<div class=\"v-textfield-action\" style=\"display: none\"></div>'\n            + '<div class=\"v-textfield-reset\">'\n            + V_ui_generateSvgIcon(\"icoResetInput\", 16, 16, \"alpha\")\n            + '</div></div>';\n        if (append) {\n            target.append(ui);\n            T.ui = target.ch(\".v-textfield.\" + id);\n        }\n        else {\n            target.after(ui);\n            T.ui = target.p().ch(\".v-textfield.\" + id);\n        }\n\n        // 获得实例的各关键对象\n        T.input = T.ui.ch(\"input\");\n        T.reset = T.ui.ch(\".v-textfield-reset\");\n\n        /**\n         * 绑定文本输入事件\n         */\n        T.input.on(\"input\", function () {\n            // 跳过中文输入法过程\n            if ($(this).prop(\"compositionStatus\") !== \"start\")\n                __processInput();\n        });\n        /**\n         * 绑定开始中文输入事件\n         */\n        T.input.on(\"compositionstart\", function () {\n            $(this).prop(\"compositionStatus\", \"start\");\n        });\n        /**\n         * 绑定结束中文输入事件\n         */\n        T.input.on(\"compositionend\", function () {\n            $(this).prop(\"compositionStatus\", \"end\");\n        });\n        /**\n         * 绑定文本按键事件\n         */\n        T.input.on(\"keypress\", function (event) {\n            __processInput();\n        });\n        /**\n         * 绑定文本获得焦点事件\n         */\n        T.input.focus(function () {\n            JQ_addClass(T.ui, s_CssTextFieldFocus);\n            __checkComValueChanged();\n\n            // 针对输入中文的情况，若输入了新的内容则进行查询\n            function __checkComValueChanged() {\n                if (T.input.prop(\"compositionStatus\") !== \"start\" && T.lastValue !== T.input.val()) {\n                    clearTimeout(T.timerValueChanged);\n                    T.lastValue = T.input.val();\n                    __processInput();\n                }\n                T.timerValueChanged = setTimeout(__checkComValueChanged, 800);\n            }\n            // 触发外部重定义事件\n            typeof(T.onFocus) === s_Function && T.onFocus(T.input);\n        });\n        /**\n         * 绑定文本失去焦点事件\n         */\n        T.input.blur(function () {\n            JQ_removeClass(T.ui, s_CssTextFieldFocus);\n            clearTimeout(T.timerValueChanged);\n            // 触发外部重定义事件\n            typeof(T.onBlur) === s_Function && T.onBlur(T.input);\n        });\n\n        /**\n         * 处理文本框输入的内容\n         */\n        function __processInput() {\n            let value = T.input.val().x();\n            if (value === \"\") {\n                T.reset.hide();\n\n                // 无内容时移除样式\n                if (T.action !== gUndefined && T.action.a(s_Class).i(s_Enabled) !== -1) {\n                    JQ_removeClass(T.action, s_Enabled);\n                    V_ui_unbindHover(T.action);\n                }\n            }\n            else {\n                T.reset.show();\n\n                // 有内容时移除样式\n                if (T.action !== gUndefined && T.action.a(s_Class).i(s_Enabled) === -1) {\n                    JQ_addClass(T.action, s_Enabled);\n                    T.action.hover(function () {\n                        T.actionHover(gTrue);\n                    }, function () {\n                        T.actionHover(gFalse);\n                    });\n                }\n            }\n            // 触发外部重定义事件\n            typeof(T.onInput) === s_Function && T.onInput(T.input, value);\n        }\n\n        /**\n         * 绑定键盘按下事件\n         */\n        T.input.bind(\"keydown\", function (event) {\n            let code = event.keyCode || event.which || event.charCode,\n                value = T.input.val();\n            switch (code) {\n                case 13: // ENTER\n                    if (T.action !== gUndefined)\n                        T.action.tr(s_Click);\n                    typeof(T.pressEnter) === s_Function && T.pressEnter(T.input, value);\n                    break;\n                case 27: // ESC\n                    T.reset.tr(s_Click);\n                    typeof(T.pressESC) === s_Function && T.pressESC(T.input);\n                    break;\n            }\n            // 触发外部重定义事件\n            typeof(T.onKeyDown) === s_Function && T.onKeyDown(T.input, value, code);\n        });\n\n        /**\n         * 绑定重置输入内容按钮\n         */\n        T.reset.uC().ck(function () {\n            T.input.val(\"\");\n            T.input.select();\n            T.reset.hide();\n\n            if (T.action !== gUndefined && T.action.a(s_Class).i(s_Enabled) !== -1) {\n                JQ_removeClass(T.action, s_Enabled);\n                V_ui_unbindHover(T.action);\n            }\n            // 触发外部重定义事件\n            typeof(T.onInput) === s_Function && T.onInput(T.input, \"\");\n        });\n    }\n\n    /**\n     * 清空输入框内容\n     */\n    T.clear = function () {\n        T.reset.tr(s_Click);\n    }\n\n    /**\n     * 开启输入框前图标\n     * @param icon 图标\n     */\n    T.setIcon = function (icon) {\n        T.icon = T.ui.ch(\".v-textfield-icon\");\n        T.icon.h(icon);\n        T.icon.show();\n    }\n\n    /**\n     * 开启动作按钮\n     * @param icon 按钮图标\n     */\n    T.setAction = function (icon) {\n        T.action = T.ui.ch(\".v-textfield-action\");\n        T.action.h(icon);\n        T.action.show();\n\n        T.action.hover(function () {\n            T.actionHover(gTrue);\n        }, function () {\n            T.actionHover(gFalse);\n        });\n        T.action.uC().ck(function () {\n            let value = T.input.val();\n            // 输入内容不为空\n            if (value.length > 0)\n                T.input.select();\n\n            // 触发外部重定义事件\n            typeof(T.onAction) === s_Function && T.onAction(T.input, value);\n        });\n    }\n\n    /**\n     * 动作按钮鼠标 hover 处理\n     * @param enter true: 鼠标光标进入，false: 鼠标光标离开\n     */\n    T.actionHover = function (enter) {\n        if (enter) {\n            JQ_addClass(T.action, s_Hover);\n            if (T.action.a(s_Class).i(s_Enabled) !== -1)\n                JQ_addClass(T.ui, s_HoverAction);\n        }\n        else {\n            JQ_removeClass(T.action, s_Hover);\n            JQ_removeClass(T.ui, s_HoverAction);\n        }\n    }\n\n    /**\n     * 设置提示文本\n     * @param text 提示文本\n     */\n    T.placeholder = function (text) {\n        T.input.a(s_Placeholder, text);\n    }\n\n    /**\n     * 显示文本输入框\n     */\n    T.show = function () {\n        T.ui.show();\n    }\n\n    /**\n     * 隐藏文本输入框\n     */\n    T.hide = function () {\n        T.ui.hide();\n    }\n\n    /**\n     * 设置文本框宽度\n     * @param width 宽度\n     */\n    T.setWidth = function (width) {\n        T.ui.c(s_Width, width);\n        T.input.c(s_Width, width\n            - (T.reset.w() + JS_parseInt(T.reset.c(s_PaddingLeft)) * 2)\n            - (T.icon === gUndefined ? 0 : T.icon.w() + JS_parseInt(T.icon.c(s_PaddingLeft)) * 2)\n            - (T.action === gUndefined ? 0 : T.action.w() + JS_parseInt(T.action.c(s_PaddingLeft)) * 2));\n        if (T.icon !== gUndefined)\n            JQ_addClass(T.input, \"set-icon\");\n    }\n\n    // 生成控件\n    T.__appendTo(target, id, append);\n}\n\n// ==================== 过滤结果导航器类 ==================== //\n\nfunction FilterResultNavigator(result) {\n    let T = this;\n    T.index = 0;\n    T.result = result;\n\n    T.nextItem = function () {\n        if (T.result.isHidden())\n            return;\n\n        let set = T.result.ch(\":visible\"),\n            item = set.eq(T.index);\n        T.index++;\n        if (T.index >= set.length)\n            T.index = 0;\n        return item;\n    }\n\n    T.reset = function () {\n        T.index = 0;\n    }\n}\n\n// ==================== 导航中心【目录】组件类 ==================== //\n\n/**\n * 构造函数\n * @param holder 关联的上级容器\n * @param hidden 是否默认为隐藏\n */\nfunction TocCatalog(holder, hidden) {\n    let T = this;\n    T.ui = {\n        entry : $(\".\" + s_CssSegmentBtn + \".catalog\"), // 入口\n        body : $(\".v-toc-catalog-body\"), // 目录索引内容\n        result : $(\".\" + s_CssTocFilterResult + \".catalog\") // 过滤结果面板\n    }\n\n    T.holder = holder;\n\n    T.h = []; // 目录集\n    // 针对无封面的情况\n    if (VOM_cover() === gUndefined)\n        T.h.push(\"vk-id-doc-title\");\n\n    T.currentHeaderIndex = -1; // 当前章节在目录集中的索引\n    T.currentItem = gUndefined; // 当前章节对象\n\n    T.foldItems = []; // 非叶子章节集\n    T.lastHeaderFolder = gUndefined; // 上一个非叶子章节\n    T.lastHeaderLevel = 0; // 上一个章节的层级\n\n    T.lastDocScrollTop = 0; // 记录最后一次文档滚动位置\n\n    T.resultNav = new FilterResultNavigator(T.ui.result); // 过滤结果导航器\n\n    // V_ui_addAnimate(T.panel.body.f(\".md-toc-item, .v-toc-item\"));\n\n    // 当前章节变化事件\n    T.onChapterChanged = gUndefined;\n\n    // 目录相关图标集\n    T.icon = {\n        // 章节：已收起\n        folded : '<svg width=\"16px\" height=\"16px\" class=\"v-svg-small-ico\"><use xlink:href=\"#icoTocFolded\" class=\"v-toc-folder-ico\"/></svg>',\n        // 章节：已展开\n        unfold : '<svg width=\"16px\" height=\"16px\" class=\"v-svg-small-ico\"><use xlink:href=\"#icoTocUnfold\" class=\"v-toc-folder-ico\"/></svg>',\n    };\n\n    // 更新无目录情况下的提示信息\n    T.ui.body.a(s_DataCatalogEmpty, [\n        \"( 无目录 )\",\n        // \"( 無目錄 )\",\n        \"( Catalog is Empty )\",\n        // \"( Le Répertoire Est Vide )\",\n        // \"( Katalog ist Leer )\",\n        // \"( El Directorio Está Vacío )\",\n        // \"( Каталог Пуст )\",\n        // \"( カタログは空です )\",\n        // \"( 디 렉 터 리 가 비어 있 음 )\"\n        ][V_lang_id]);\n\n    /**\n     * 返回 Toc 组件类型名称\n     * @returns Toc 组件类型名称\n     */\n    T.typeName = function () {\n        return \"catalog\";\n    }\n\n    /**\n     * 是否有目录索引项目\n     */\n    T.hasIndexItem = function () {\n        return (T.ui.body.ch().length > 0);\n    }\n\n    /**\n     * 根据设备类型自适应hover样式\n     */\n    T.adjustHoverStyle = function () {\n        if (env.device.mobile) // 移动设备时解绑样式事件\n            $(s_CssTocFolder).uH();\n        else // 非移动设备时绑定样式事件\n            V_ui_bindHover($(s_CssTocFolder));\n    }\n\n    /**\n     * 添加目录节点\n     * @param item 由 Typora 生成的 [TOC] 目录节点\n     */\n    T.add = function (item) {\n        T.holder.segs.sts(this, gTrue);\n\n        // 将章节记录到目录集中\n        let a = item.ch(\"a\"),\n            href = a.a(s_Href);\n        T.h.push(href.s(1, href.length));\n\n        // 自定义目录节点元数据\n        item.a(s_Id, \"vk-header-\" + item.a(s_DataRef)); // 添加id属性\n        item.a(s_DataNode, \"0\"); // 添加节点类型：0:叶子节点, 1:目录节点\n        item.a(s_DataFolded, s_False); // 添加节点状态：true:收起, false:展开\n        item.a(s_Title, a.t().x());\n        // item.addClass(\"v-toc-item\");\n        // V_ui_addAnimate(item);\n\n        // 使用完 <a> 的内容后，将章节中的链接文字提到链接外，用于实现长章节内容截断的 CSS 新式\n        a.after(a.t());\n        a.t(\"\");\n\n        // 点击目录节点事件\n        item.uC().ck(function () {\n            // 跳转至对应的页内锚点\n            let hash = $(\"#\" + item.a(s_Id)).ch(\"a\").a(s_Href);\n            V_util_gotoHash(hash);\n\n            // 触发锚点点击事件\n            typeof(T.holder.onInteractive) === s_Function && T.holder.onInteractive();\n            // typeof(T.onClickHash) === s_Function && T.onClickHash();\n        });\n\n        // -----------------------------------\n        // 目录非叶子章节的折叠功能实现\n        // 所有目录节点都添加 folding 空白控件备用\n        $(\"<div id='fd-vk-header-\" + item.a(s_DataRef)\n            + \"' class='v-toc-folder'>&nbsp;</div>\").insertBefore(item.f(\"a\"));\n\n        // 记录所有非叶子节点的folder控件\n        let lv = ChpAutoNum_parseTocHeaderLevel(item.a(s_Class));\n        if (T.lastHeaderFolder !== gUndefined) {\n            // 当前节点比上一个节点层级低，则上一节点为可折叠的节点\n            if (lv > T.lastHeaderLevel) {\n                // 将最近一个子目录节点折叠控件入栈\n                T.foldItems.push(T.lastHeaderFolder);\n\n                // 为非叶子的章节添加折叠图标\n                let folder = T.lastHeaderFolder.h(T.icon.unfold),\n                    folderParent = folder.p();\n                folderParent.a(s_DataNode, \"1\"); // 0:叶子, 1:目录\n                folderParent.a(s_DataFolded, s_False); // true:收起， false:展开\n\n                // 折叠控件事件\n                folder.uC().ck(function () {\n                    let id = $(this).p().a(s_Id);\n                    T.disposeFold(id, ($(\"#\" + id).a(s_DataFolded).sW(\"t\")) ? \"e\" : \"c\", gTrue);\n                    event.cancelBubble = gTrue;\n                });\n            }\n            // 右当前节点比上一个节点层级高，则视为从下级回到上级\n            // 并将最近一个子目录节点折叠控件出栈\n            else if (lv < T.lastHeaderLevel)\n                T.foldItems.pop();\n\n            // 设置当前节点的父级信息\n            if (T.foldItems.length > 0)\n                item.a(s_DataPid, T.foldItems[T.foldItems.length - 1].p().a(s_Id));\n        }\n\n        // 更新最后处理的folder控件\n        T.lastHeaderFolder = $(\"#fd-vk-header-\" + item.a(s_DataRef));\n        T.lastHeaderLevel = lv;\n    }\n\n    /**\n     * 页面滚动时根据页面当前的位置，高亮对应目录中的章节\n     */\n    T.focusHeader = function () {\n        // ----------------------------------------\n        // 控制执行频率，避免处理过快影响性能\n        let scrollTop = $(document).scrollTop();\n        if (Math.abs(scrollTop - T.lastDocScrollTop) < 20)\n            return;\n\n        T.lastDocScrollTop = scrollTop;\n\n        // ----------------------------------------\n        // 寻找文档当前显示的章节\n        // 默认为最后一章\n        let curIdx = T.h.length - 1;\n        for (let i = 0, len = T.h.length; i < len; i++) {\n            let anchor = (!env.browser.Firefox)\n                    ? T.h[i] // 非 Firefox 浏览器\n                    : JS_decodeURI(T.h[i]), // Firefox 浏览器\n                target = $(\"#\" + JS_decodeURI(anchor));\n                // target = $(\"#\" + JS_decodeURI(anchor) + \", a[name='\" + anchor + \"']\");\n            let headerHeight = target.ht();\n            // 将最近一个章节从文档可视空间上方滚出的章节定义为「当前章节」\n            if ((target.o().top - $(document).scrollTop()) > (headerHeight * 3)) {\n                curIdx = i - 1;\n                break;\n            }\n        }\n\n        // 章节没有变化则直接退出\n        if (T.currentHeaderIndex === curIdx)\n            return;\n\n        // 章节有变化，并记录\n        T.currentHeaderIndex = curIdx;\n\n        // 当前文档位置在实际内容章节中时\n        if (T.inHeader()) {\n            // ----------------------------------------\n            // 更新目录内当前节点的样式\n            // 先清除目录中上一次的「当前章节」的样式\n            if (T.currentItem !== gUndefined)\n                JQ_removeClass(T.currentItem, s_CssTocItemCurrent);\n            // 更新「当前章节」的样式\n            T.currentItem = $(\"#vlook-toc a[href='#\" + T.h[curIdx] + \"']\").p();\n            JQ_addClass(T.currentItem, s_CssTocItemCurrent);\n\n            // 若当前目录节点被折叠隐藏，则向上展开父级目录节点\n            if (T.currentItem.isHidden())\n                __expandUpFolder(T.currentItem.a(s_DataPid));\n\n            // 导航中心内容自动滚动当前章节所在位置\n            T.scrollToCurrent();\n        }\n\n        // 触发当前章节变化事件\n        typeof(T.onChapterChanged) === s_Function && T.onChapterChanged();\n\n        /**\n         * 向上展开父级目录\n         *\n         * @param id 父级目录 id 值\n         */\n        function __expandUpFolder(id) {\n            // 展开\n            T.disposeFold(id, \"e\", gTrue);\n            // 若未到 h1（即第一级目录），则继续向上展开\n            let item = $(\"#\" + id),\n                tagName = item.prop(s_TagName);\n            if (tagName !== gUndefined && tagName.l() !== \"h1\")\n                __expandUpFolder(item.a(s_DataPid));\n        }\n    }\n\n    /**\n     * 导航中心内容自动滚动到当前章节所在位置\n     */\n    T.scrollToCurrent = function () {\n        if (T.currentItem === gUndefined || T.currentItem.position() === gUndefined)\n            return;\n\n        // 根据当前节点情况，目录内的可视空间自动滚动该节点所在位置\n        const preDis = T.currentItem.ht() * 3, // 用于目录节点触动滚动的大小\n            sTop = T.ui.body.scrollTop(), // 目录内当前滚动位置\n            sBottom = sTop + T.ui.body.ht(); // 当前可视空间中位于目录底部的位置\n\n        // 若当前节点在可视区域的上方，则滚动到该节点的位置\n        if (T.currentItem.position().top < sTop)\n            T.ui.body.scrollTop(T.currentItem.position().top);\n        // 若当前节点在可视区域的下方，则滚动到该节点的位置\n        else if (T.currentItem.position().top > (sBottom - preDis))\n            T.ui.body.scrollTop(T.currentItem.position().top - T.ui.body.ht() + preDis);\n    }\n\n    /**\n     * 文档当前位置是否在章节内\n     */\n    T.inHeader = function () {\n        return T.currentHeaderIndex > -1;\n    }\n\n    /**\n     * 当前章节为第 1 章时特殊处理（有封面模式时）\n     */\n    T.inFirstHeader = function () {\n        return (VOM_cover() !== gUndefined && T.currentHeaderIndex === 0);\n    }\n\n    /**\n     * 当前文档位置位于文档标题（无封面模式时）\n     */\n    T.inDocTitle = function () {\n        return (VOM_cover() === gUndefined && T.currentHeaderIndex === 0);\n    }\n\n    /**\n     * 按关键字过滤\n     * @param value 过滤的关键字内容\n     * @returns true - 有匹配的结果，false - 无匹配的结果\n     */\n    T.filter = function (value) {\n        if (value.x() === \"\")\n            return gFalse;\n\n        if (T.holder.segs.checkedItem() === T.typeName())\n            T.showFilterResult();\n\n        let matched = gFalse;\n        T.ui.result.empty();\n        // 遍历目录节点进行关键字匹配\n        $(s_Toc).e(function () {\n            let item = $(this),\n                title = item.a(s_DataHeaderNum) + item.a(s_Title);\n            if (title.l().i(value) > -1) {\n                // 匹配结果后，从目录节点中复制节点并移除不必要的样式和内容\n                let cloneItem = item.clone();\n                JQ_addClass(cloneItem, s_CssTocItem);\n                JQ_removeClass(cloneItem, \"md-toc-item md-toc-h1 md-toc-h2 md-toc-h3 md-toc-h4 md-toc-h5\");\n                JQ_remove(cloneItem.ch(s_CssTocFolder));\n                cloneItem.prepend(\"<span>\" + cloneItem.a(s_DataHeaderNum) + \" </span>\");\n                cloneItem.show();\n                cloneItem.a(s_DataKeywordMatch, s_True);\n\n                // V_ui_addAnimate(cloneItem);\n                // 绑定同源的点击事件\n                cloneItem.uC().ck(function () {\n                    JQ_removeClass(T.ui.result.ch(\".\" + s_CssTocItemCurrent), s_CssTocItemCurrent);\n                    item.tr(s_Click);\n                    JQ_addClass($(this), s_CssTocItemCurrent);\n                });\n                // 将匹配的节点添加到过滤结果中\n                T.ui.result.append(cloneItem);\n                matched = gTrue;\n            }\n        });\n\n        // 过滤结果为空\n        if (!matched) {\n            T.ui.result.empty();\n            T.ui.result.append(\"<div class='v-toc-filter-result-none'>\" + [\n                \"无匹配结果!\",\n                // \"無匹配結果!\",\n                \"No Results!\",\n                // \"Aucun résultat!\",\n                // \"Keine Ergebnisse!\",\n                // \"¡No hay resultados!\",\n                // \"Нет результатов!\",\n                // \"結果がありません!\",\n                // \"결과가 없습니다!\"\n            ][V_lang_id] + \"</div>\");\n            // if (T.holder.segs.checkedItem() !== T.typeName())\n                TocIndex_updateStatus(this);\n        }\n\n        return gTrue;\n    }\n\n    /**\n     * 更新所属分段状态\n     */\n    T.updateStatus = function () {\n        if ($(s_Toc).length > 0)\n            T.holder.segs.sts(this, gTrue);\n        else\n            T.holder.segs.sts(this, gFalse);\n    }\n\n    /**\n     * 显示目录索引组件\n     */\n    T.show = function () {\n        if (T.holder.keyword.input.val().length > 0) {\n            T.ui.body.hide();\n            T.showFilterResult();\n        }\n        else {\n            T.ui.body.show();\n            T.hideFilterResult();\n        }\n    }\n\n    /**\n     * 隐藏目录索引组件\n     */\n    T.hide = function () {\n        T.ui.body.hide();\n        T.hideFilterResult();\n    }\n    if (hidden) T.hide();\n\n    /**\n     * 显示过滤结果\n     */\n    T.showFilterResult = function () {\n        T.ui.body.hide();\n\n        T.ui.result.show();\n        JQ_removeClass(T.ui.result.ch(\".\" + s_CssTocItemCurrent), s_CssTocItemCurrent);\n    }\n\n    /**\n     * 隐藏过滤结果\n     */\n    T.hideFilterResult = function () {\n        T.ui.result.hide();\n    }\n\n    /**\n     * 跳转至指定章节\n     */\n    T.gotoHeader = function (target) {\n        V_util_gotoHash(\"#\" + target.a(s_DataAnchor));\n    }\n\n    /**\n     * 处理展开或收起指定章节下的子章节\n     * @param id 对象的id值\n     * @param action 执行动作（c: collect, e: expand）\n     * @param traversal 是否遍历子元素\n     */\n    T.disposeFold = function (id, action, traversal) {\n        let lastItem = null,\n            item = $(\"#\" + id),\n            itemSet = item.nextAll(),\n            btnFolder = $(\"#fd-\" + id);\n\n        // 更新折叠控件图标\n        item.a(s_DataFolded, (action === \"e\") ? s_False : s_True);\n        btnFolder.h((action === \"e\") ? T.icon.unfold : T.icon.folded);\n\n        // 将指定节点后的所有节点进行处理\n        for (let i = 0, len = itemSet.length; i < len; i++) {\n            let item = $(itemSet[i]);\n            // 对前后节点层级不一致的处理\n            if (lastItem != null) {\n                const hd1 = ChpAutoNum_parseTocHeaderLevel(item.a(s_Class));\n                const hd2 = ChpAutoNum_parseTocHeaderLevel(lastItem.a(s_Class));\n                if (hd1 > hd2) // 当前节点层级大于上一个节点的层级，继续\n                    continue;\n                else if (hd1 < hd2) // 当前节点层级小于上一个节点的层级，终止\n                    break;\n            }\n\n            // 如果是目录节点，同时是已展开，且执行动作为「收起」，才进行递归调用展开子节点\n            if (traversal\n                && item.a(s_DataNode) === \"1\"\n                && item.a(s_DataFolded).sW(\"f\")\n                && action === \"c\") {\n                    item.a(s_DataFolded, s_True);\n                    // 递归处理\n                    T.disposeFold(item.a(s_Id), action, traversal);\n            }\n\n            // 收起 / 展开\n            item.c(s_Display, (action === \"c\") ? s_None : s_Block);\n            lastItem = item;\n        }\n    }\n}\n\n// ==================== 导航中心分类索引通用类 ==================== //\n\nlet TocIndex_segments = gUndefined;\n\n/**\n * 初始化 UI\n * @param indexObj 目标对象\n */\nfunction TocIndex_initUI(indexObj) {\n    let ui = indexObj.ui;\n\n    V_ui_addAnimate(ui.entry);\n\n    // 生成提示信息 UI\n    ui.result.append(\"<div class='v-toc-filter-result-none'></div>\");\n    ui.tips = ui.result.ch(\".v-toc-filter-result-none\");\n\n    TocIndex_showTips(ui);\n}\n\n/**\n * 无输入关键字的处理\n * @param indexObj 目标对象\n */\nfunction TocIndex_noneKeyword(indexObj) {\n    let ui = indexObj.ui,\n        items = ui.result.ch(\".\" + s_CssTocItem);\n    items.show();\n    if (items.length === 0)\n        TocIndex_showTips(ui);\n    else {\n        ui.tips.hide();\n        items.a(s_DataKeywordMatch, s_True);\n        TocIndex_updateStatus(indexObj);\n    }\n    // __showTips();\n}\n\n/**\n * 更新所属分段状态\n * @param indexObj 目标对象\n */\nfunction TocIndex_updateStatus(indexObj) {\n    TocIndex_segments.sts(indexObj,\n        indexObj.ui.result.ch(\".\" + s_CssTocItem + \"[\" + s_DataKeywordMatch + \"]\").length > 0);\n}\n\n/**\n * 显示提示信息\n */\nfunction TocIndex_showTips(ui) {\n    ui.tips.t(\"( \" + [\n        \"无此类内容\",\n        // \"無此類內容\",\n        \"No such content\",\n        // \"Aucun contenu de ce type\",\n        // \"Kein solcher Inhalt\",\n        // \"No hay tal contenido\",\n        // \"Нет такого контента\",\n        // \"そのようなコンテンツはありません\",\n        // \"그러한 콘텐츠 없음\"\n    ][V_lang_id] + \" )\");\n    ui.tips.show();\n}\n\n/**\n * 添加索引项目\n * @param indexObj 目标对象\n * @param text 显示的文本\n * @param anchor 锚点\n * @param forSearch 用于搜索时检索的内容\n */\nfunction TocIndex_add(indexObj, text, anchor, forSearch) {\n    TocIndex_segments.sts(indexObj, gTrue);\n\n    if (indexObj.ui.tips.isShowed())\n        indexObj.ui.tips.hide();\n    let item = $('<span class=\"' + s_CssTocItem + '\" data-for-search=\"'\n            + V_util_clearHtmlQuot((forSearch === gUndefined || forSearch.x().length === 0) ? \"\" : forSearch)\n            + '\">' + text + \"</span>\");\n    indexObj.ui.result.append(item);\n    // V_ui_addAnimate(item);\n    item.uC().ck(function () {\n        JQ_removeClass(indexObj.ui.result.ch(\".\" + s_CssTocItemCurrent), s_CssTocItemCurrent);\n        JQ_addClass(item, s_CssTocItemCurrent);\n\n        V_util_gotoHash(\"#\" + anchor);\n\n        // 触发锚点点击事件\n        typeof(indexObj.holder.onInteractive) === s_Function && indexObj.holder.onInteractive();\n        // typeof(indexObj.onClickHash) === s_Function && indexObj.onClickHash();\n    });\n}\n\n/**\n * 按关键字过滤\n * @param indexObj 目标对象\n * @param value 过滤的关键字内容\n * @returns true - 有匹配的结果，false - 无匹配的结果\n */\nfunction TocIndex_filter(indexObj, value) {\n    if (value.x().length === 0) {\n        TocIndex_segments.sts(indexObj, gFalse);\n        return gFalse;\n    }\n\n    // 清空索引列表项\n    indexObj.ui.tips.hide();\n    indexObj.ui.result.ch().hide();\n    JQ_removeClass(indexObj.ui.result.ch(\".\" + s_CssTocItemCurrent), s_CssTocItemCurrent);\n    indexObj.ui.result.ch().removeAttr(s_DataKeywordMatch);\n\n    // 遍历目录节点进行关键字匹配\n    let matched = gFalse;\n    indexObj.ui.result.ch(\".\" + s_CssTocItem).e(function () {\n        let item = $(this),\n            dataForSearch = item.a(s_DataForSearch);\n        if (item.t().l().i(value) > -1\n            || (dataForSearch !== gUndefined && dataForSearch.l().i(value) > -1)) {\n                item.show();\n                item.a(s_DataKeywordMatch, s_True);\n                TocIndex_segments.sts(indexObj, gTrue);\n                matched = gTrue;\n        }\n    });\n\n    // 过滤结果为空\n    if (!matched) {\n        indexObj.ui.tips.t([\n            \"无匹配结果!\",\n            // \"無匹配結果!\",\n            \"No Results!\",\n            // \"Aucun résultat!\",\n            // \"Keine Ergebnisse!\",\n            // \"¡No hay resultados!\",\n            // \"Нет результатов!\",\n            // \"結果がありません!\",\n            // \"결과가 없습니다!\"\n        ][V_lang_id]);\n        indexObj.ui.tips.show();\n        TocIndex_segments.sts(indexObj, gFalse);\n    }\n\n    return gTrue;\n}\n\n/**\n * 是否有对应的索引项目\n * @param indexObj 目标对象\n */\nfunction TocIndex_hasIndexItem(indexObj) {\n    return (indexObj.ui.result.ch(\"span\").length > 0);\n}\n\n/**\n * 显示索引组件\n * @param indexObj 目标对象\n */\nfunction TocIndex_show(indexObj) {\n    indexObj.ui.result.show();\n    JQ_removeClass(indexObj.ui.result.ch(\".\" + s_CssTocItemCurrent), s_CssTocItemCurrent);\n}\n\n/**\n * 隐藏索引组件\n * @param indexObj 目标对象\n */\nfunction TocIndex_hide(indexObj) {\n    indexObj.ui.result.hide();\n}\n\n// ==================== 导航中心【插图】组件类 ==================== //\n\n/**\n * 构造函数\n * @param holder 关联的上级容器\n * @param hidden 是否默认为隐藏\n */\nfunction TocFigure(holder, hidden) {\n    let T = this;\n    T.ui = {\n        entry : $(\".\" + s_CssSegmentBtn + \".figure\"), // 入口\n        result : $(\".\" + s_CssTocFilterResult + \".figure\"), // 过滤结果面板\n        tips : gUndefined\n    };\n\n    T.holder = holder;\n\n    T.resultNav = new FilterResultNavigator(T.ui.result); // 过滤结果导航器\n\n    // 关键字输入组件属性设置\n    TocIndex_initUI(this);\n\n    /**\n     * 返回 Toc 组件类型名称\n     * @returns Toc 组件类型名称\n     */\n    T.typeName = function () {\n        return \"figure\";\n    }\n\n    /**\n     * 是否有图片索引项目\n     */\n    T.hasIndexItem = function () {\n        return TocIndex_hasIndexItem(this);\n    }\n\n    /**\n     * 初始化插图索引\n     * @param text 显示的文本\n     * @param anchor 锚点\n     * @param forSearch 用于搜索时检索的内容\n     */\n    T.add = function (text, anchor, forSearch) {\n        TocIndex_add(this, text, anchor, forSearch);\n    }\n\n    /**\n     * 更新所属分段状态\n     */\n    T.updateStatus = function () {\n        TocIndex_updateStatus(this);\n    }\n\n    /**\n     * 显示插图组件\n     */\n    T.show = function () {\n        // T.ui.figureNav.show();\n        TocIndex_show(this);\n    }\n\n    /**\n     * 隐藏插图组件\n     */\n    T.hide = function () {\n        // T.ui.figureNav.hide();\n        TocIndex_hide(this);\n    }\n    if (hidden) T.hide();\n}\n\n// ==================== 导航中心【表格】组件类 ==================== //\n\n/**\n * 构造函数\n * @param holder 关联的上级容器\n * @param hidden 是否默认为隐藏\n */\nfunction TocTable(holder, hidden) {\n    let T = this;\n    T.ui = {\n        entry : $(\".\" + s_CssSegmentBtn + \".table\"), // 入口\n        result : $(\".\" + s_CssTocFilterResult + \".table\"), // 过滤结果面板\n        tips : gUndefined\n    };\n\n    T.holder = holder;\n\n    T.resultNav = new FilterResultNavigator(T.ui.result); // 过滤结果导航器\n\n    // 关键字输入组件属性设置\n    TocIndex_initUI(this);\n\n    /**\n     * 返回 Toc 组件类型名称\n     * @returns Toc 组件类型名称\n     */\n    T.typeName = function () {\n        return s_Table;\n    }\n\n    /**\n     * 是否有表格索引项目\n     */\n    T.hasIndexItem = function () {\n        return TocIndex_hasIndexItem(this);\n    }\n\n    /**\n     * 初始化表格索引\n     * @param text 显示的文本\n     * @param anchor 锚点\n     * @param forSearch 用于搜索时检索的内容\n     */\n    T.add = function (text, anchor, forSearch) {\n        TocIndex_add(this, text, anchor, forSearch);\n    }\n\n    /**\n     * 更新所属分段状态\n     */\n     T.updateStatus = function () {\n        TocIndex_updateStatus(this);\n    }\n\n    /**\n     * 显示表格组件\n     */\n    T.show = function () {\n        TocIndex_show(this);\n    }\n\n    /**\n     * 隐藏表格组件\n     */\n    T.hide = function () {\n        TocIndex_hide(this);\n    }\n    if (hidden) T.hide();\n}\n\n// ==================== 导航中心【多媒体】组件类 ==================== //\n\n/**\n * 构造函数\n * @param holder 关联的上级容器\n * @param hidden 是否默认为隐藏\n */\nfunction TocMedia(holder, hidden) {\n    let T = this;\n    T.ui = {\n        entry : $(\".\" + s_CssSegmentBtn + \".media\"), // 入口\n        result : $(\".\" + s_CssTocFilterResult + \".media\"), // 过滤结果面板\n        tips : gUndefined\n    };\n\n    T.holder = holder;\n\n    T.resultNav = new FilterResultNavigator(T.ui.result); // 过滤结果导航器\n\n    // 关键字输入组件属性设置\n    TocIndex_initUI(this);\n\n    /**\n     * 返回 Toc 组件类型名称\n     * @returns Toc 组件类型名称\n     */\n    T.typeName = function () {\n        return \"mulitmedia\";\n    }\n\n    /**\n     * 是否有多媒体索引项目\n     */\n    T.hasIndexItem = function () {\n        return TocIndex_hasIndexItem(this);\n    }\n\n    /**\n     * 初始化多媒体索引\n     * @param text 显示的文本\n     * @param anchor 锚点\n     * @param forSearch 用于搜索时检索的内容\n     */\n    T.add = function (text, anchor, forSearch) {\n        TocIndex_add(this, text, anchor, forSearch);\n    }\n\n    /**\n     * 更新所属分段状态\n     */\n    T.updateStatus = function () {\n        TocIndex_updateStatus(this);\n    }\n\n    /**\n     * 显示多媒体组件\n     */\n    T.show = function () {\n        TocIndex_show(this);\n    }\n\n    /**\n     * 隐藏多媒体组件\n     */\n    T.hide = function () {\n        TocIndex_hide(this);\n    }\n    if (hidden) T.hide();\n}\n\n// ==================== 导航中心【代码块】组件类 ==================== //\n\n/**\n * 构造函数\n * @param holder 关联的上级容器\n * @param hidden 是否默认为隐藏\n */\nfunction TocCodeblock(holder, hidden) {\n    let T = this;\n    T.ui = {\n        entry : $(\".\" + s_CssSegmentBtn + \".codeblock\"), // 入口\n        result : $(\".\" + s_CssTocFilterResult + \".codeblock\"), // 过滤结果面板\n        tips : gUndefined\n    };\n\n    T.holder = holder;\n\n    T.resultNav = new FilterResultNavigator(T.ui.result); // 过滤结果导航器\n\n    // 关键字输入组件属性设置\n    TocIndex_initUI(this);\n\n    /**\n     * 返回 Toc 组件类型名称\n     * @returns Toc 组件类型名称\n     */\n    T.typeName = function () {\n        return s_Codeblock;\n    }\n\n    /**\n     * 是否有代码块索引项目\n     */\n    T.hasIndexItem = function () {\n        return TocIndex_hasIndexItem(this);\n    }\n\n    /**\n     * 初始化代码块索引\n     * @param text 显示的文本\n     * @param anchor 锚点\n     * @param forSearch 用于搜索时检索的内容\n     */\n    T.add = function (text, anchor, forSearch) {\n        TocIndex_add(this, text, anchor, forSearch);\n    }\n\n    /**\n     * 更新所属分段状态\n     */\n    T.updateStatus = function () {\n        TocIndex_updateStatus(this);\n    }\n\n    /**\n     * 显示代码块组件\n     */\n    T.show = function () {\n        TocIndex_show(this);\n    }\n\n    /**\n     * 隐藏代码块组件\n     */\n    T.hide = function () {\n        TocIndex_hide(this);\n    }\n    if (hidden) T.hide();\n}\n\n// ==================== 导航中心【访问历史】组件类 ==================== //\n\n/**\n * 构造函数\n * @param holder 关联的上级容器\n * @param hidden 是否默认为隐藏\n */\nfunction TocHistory(holder, hidden) {\n    let T = this;\n    T.ui = {\n        entry : $(\".\" + s_CssSegmentBtn + \".history\"), // 入口\n        title : $(\".\" + s_CssTocHistory + \"-title\"), // 历史记录标题\n        result : $(\".\" + s_CssTocHistory + \"-result\") // 历史记录面板\n    };\n\n    T.holder = holder;\n\n    /**\n     * 返回 Toc 组件类型名称\n     * @returns Toc 组件类型名称\n     */\n    T.typeName = function () {\n        return \"history\";\n    }\n\n    /**\n     * 是否有访问历史索引项目\n     */\n    T.hasIndexItem = function () {\n        return TocIndex_hasIndexItem(this);\n    }\n\n    /**\n     * 添加访问历史记录\n     * @param hash 页内锚点链接\n     */\n    T.add = function (hash) {\n        if (hash === gUndefined || hash === \"#\" || hash.x().length === 0)\n            return;\n\n        // 清空当前条目的样式\n        JQ_removeClass(T.ui.result.ch(\".\" + s_CssTocItemCurrent), s_CssTocItemCurrent);\n\n        // 对由 VLOOK 生成的页内锚点，对其显示的条目文本进行处理\n        let title = gUndefined,\n            anchor = hash.s(1, hash.length);\n        if (anchor.sW(\"vk-id\"))\n            title = $(hash).a(s_DataTitle);\n        else if (anchor.sW(\"vk-err\")) // 错误的内链\n            title = $(hash).t();\n        if (title === gUndefined) {\n            let hashObj = $(s_Toc + \">.md-toc-inner[href='\" + JS_decodeURI(hash) + \"']\").p();\n            title = \"<span>\" + hashObj.a(s_DataHeaderNum) + \" </span>\"\n                + JS_decodeURI(anchor);\n        }\n        let result = T.ui.result.ch(\"span[\" + s_DataHistory + \"='\" + hash + \"']\");\n\n        // 不存在相同的历史访问记录\n        if (result.length === 0) {\n            T.ui.result.prepend('<span ' + s_DataHistory + '=\"'\n                + hash + '\" class=\"' + s_CssTocItem + '\">'\n                + title + '</span>');\n        }\n        // 已存在相同的历史访问记录\n        else {\n            // 将相同的记录移动到最前面\n            let existsItem = result.clone();\n            T.ui.result.prepend(existsItem);\n            JQ_addClass(existsItem, s_CssTocItemCurrent);\n            JQ_remove(result);\n        }\n\n        // 为新增加 / 移动后的记录添加鼠标事件\n        let item = T.ui.result.ch(\"span[\" + s_DataHistory + \"='\" + hash + \"']\");\n        JQ_addClass(item, s_CssTocItemCurrent);\n        item.a(s_DataKeywordMatch, s_True);\n        // V_ui_addAnimate(item);\n        item.uC().ck(function () {\n            V_util_gotoHash(hash);\n            // 触发锚点点击事件\n            typeof(T.holder.onInteractive) === s_Function && T.holder.onInteractive();\n            // typeof(T.onClickHash) === s_Function && T.onClickHash();\n        });\n\n        T.updateStatus();\n    }\n\n    /**\n     * 更新所属分段状态\n     */\n    T.updateStatus = function () {\n        TocIndex_updateStatus(this);\n    }\n\n    /**\n     * 显示历史组件\n     */\n    T.show = function () {\n        T.ui.title.show();\n        T.ui.result.show();\n\n        let tocItem = \"span.\" + s_CssTocItem,\n            noneHistory = \"div.v-toc-history-none\";\n        // 没有历史访问记录，也没有提示信息内容\n        if (T.ui.result.ch(tocItem + \", \" + noneHistory).length === 0) {\n            // 添加提示信息\n            T.ui.result.append(\"<div class='v-toc-history-none'>\" + [\n                \"暂无记录!\",\n                // \"暫無記錄!\",\n                \"No records!\",\n                // \"Pas d'enregistrements!\",\n                // \"Keine Aufzeichnungen!\",\n                // \"¡No hay registros!\",\n                // \"Нет записей!\",\n                // \"記録なし!\",\n                // \"기록이 없습니다!\"\n            ][V_lang_id] + \"</div>\");\n        }\n        // 有历史访问记录\n        else if (T.ui.result.ch(tocItem).length > 0) {\n            // 移除提示信息\n            JQ_remove(T.ui.result.ch(noneHistory));\n        }\n    }\n\n    /**\n     * 隐藏历史组件\n     */\n    T.hide = function () {\n        T.ui.title.hide();\n        T.ui.result.hide();\n    }\n    if (hidden) T.hide();\n}\n\n// ==================== 导航中心 DocLib 文库类 ==================== //\n\n/**\n * 构造函数\n * @param mask 遮罩对象\n * @param holder 关联的上级容器\n */\nfunction DocLib(mask, holder) {\n    let T = this;\n    T.ui = $(\".v-doc-lib\");\n    T.iframe = gUndefined;\n    T.handle = $(\".v-doc-lib-board>.item\");\n    T.enabled = gFalse;\n    T.page = gUndefined;\n    T.hash = \"\";\n    T.wf = \"\";\n    T.identifier = \"vlook-doc-lib://\";\n\n    T.holder = holder;\n\n    // 遮罩\n    T.mask = mask;\n    T.mask.bindPartner(this, T.ui);\n\n    V_ui_addAnimate(T.ui);\n\n    T.init = function () {\n        let docLibBoard = $(\".v-doc-lib-board\"),\n            src = V_util_getMetaByName(\"vlook-doc-lib\"),\n            timerGetTitle = null,\n            getTitleTimes = 10; // 最多尝试 10 次\n\n        T.iframe = $(\"iframe[name='vlook-doc-lib']\");\n\n\n        // 有指定文库\n        if (src !== gUndefined) {\n            LOG(\"    ├ DocLib: \" + T.page + T.hash);\n            T.enabled = gTrue;\n            // 拆分页面路径和锚点\n            T.page = V_util_getURLwithoutHash(src);\n            T.hash = V_util_getHash(src);\n            // 传递父页面的 wf 启动参数\n            let wf = V_util_getParamVal(\"wf\");\n            T.wf = (wf !== gUndefined) ? \"&wf=\" + wf : \"\";\n\n            T.reload();\n            // 尝试获得 DocLib 的文档标题\n            __getDocLibTitle();\n        }\n        else {\n            LOG(\"    ├ DocLib: none\");\n        }\n\n        T.handle.uC().ck(function () {\n            T.show();\n        });\n\n        // ------------------------------\n        // 处理文库专用链接\n        $(\"a[href^='\" + T.identifier + \"']\").e(function () {\n            let a = $(this),\n                hash = V_util_getHash(a.a(s_Href));\n            a.a(s_Target, a.a(s_Href)); // 记录文库标识\n            a.a(s_DataDocLibHash, hash); // 记录文库中指定的锚点\n            a.removeAttr(s_Href); // 移除 href\n            a.uC().ck(function () {\n                T.show($(this).a(s_DataDocLibHash));\n            });\n        });\n\n        /**\n         * 获得文库的文档标题\n         */\n        function __getDocLibTitle() {\n            V_data_set(\"doc-lib-title\", \"\");\n            timerGetTitle = setTimeout(function () {\n                getTitleTimes--;\n                WARN(\"Try to get DocLib title (\" + getTitleTimes + \")\");\n                let title = V_data_get(\"doc-lib-title\");\n                if (getTitleTimes > 0 && (title === gUndefined || title.length === 0)) {\n                    __getDocLibTitle();\n                }\n                else {\n                    if (getTitleTimes <= 0) {\n                        title = [\n                            \"浏 览 文 库\",\n                            // \"瀏 覽 文 庫\",\n                            \"Document Library\",\n                            // \"Bibliothèque de documents\",\n                            // \"Bibliothek der Dokumente\",\n                            // \"Biblioteca de documentos\",\n                            // \"библиотека документов\",\n                            // \"ドキュメントライブラリ\",\n                            // \"문서 라 이브 러 리\"\n                        ][V_lang_id];\n                        ERROR(\"    ├ DocLib: timeout\");\n                    }\n                    docLibBoard.show();\n                    T.handle.t(title);\n                    T.handle.a(s_Title, title);\n                    JQ_addClass($(\".v-nav-center-body, .v-nav-center-footer\"), \"has-doc-lib\");\n                    clearTimeout(timerGetTitle);\n                }\n            }, 1000);\n        }\n    }\n\n    /**\n     * 重新加载文库内容\n     * @param scheme （可选）指定的颜色方案，light / dark\n     * @param hash 指定的锚点\n     */\n    T.reload = function (scheme, hash) {\n        let cs = \"\";\n        // 指定的颜色方案不为空时\n        if (scheme !== gUndefined)\n            cs = \"&cs=\" + scheme;\n        // 指定的锚点不为空时\n        if (hash === gUndefined || hash.length === 0)\n            hash = T.hash;\n        T.iframe.a(s_Src, T.page + \"?ws=none&type=mini\" + T.wf + cs + hash);\n    }\n\n    /**\n     * 显示文库\n     */\n    T.show = function (hash) {\n        typeof(T.holder.onInteractive) === s_Function && T.holder.onInteractive();\n\n        T.mask.show();\n        T.ui.show();\n\n        // 指定的锚点或默认 URL 的锚点不为空时\n        if (hash === gUndefined)\n            hash = T.hash;\n        if (hash.length > 0)\n            T.reload(gUndefined, hash);\n    }\n\n    /**\n     * 隐藏文库\n     */\n    T.hide = function () {\n        T.ui.hide();\n        T.mask.hide();\n    }\n\n    /**\n     * 处理热键操作\n     * @param code 非功能键键\n     * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n     */\n    T.disposeHotkey = function (code, combKeys) {\n        if (T.ui.isHidden())\n            return;\n\n        switch (code) {\n            case 27: // ESC\n                T.hide();\n                break;\n        }\n    }\n}\n\n// ==================== 插图增强类 ==================== //\n\n/**\n * 初始化插图数据\n */\nfunction ExtFigure_init() {\n    let ignoreImgLost = gFalse,\n        sw = new Stopwatch();\n\n    // ----------------------------------------\n    // 对 svg 类插图（Mermaid）进行初始化处理\n    sw.st();\n    // 针对 Mermaid 饼图为双 SVG 结构（标准的 Mermaid 是单 SVG 结构），进行规范化调整\n    $(\".md-diagram-panel>svg>svg>g\").e(function () {\n        $(this).unwrap();\n    });\n    sw.ed(\"    ├ prepare svg: \");\n\n    // ----------------------------------------\n    // 对 img 类插图（Mermaid）进行初始化处理\n    sw.st();\n\n    // ！！！注意！！！为适配浏览器安全策略！！！\n    // 由于不同浏览器的安全策略不同，所以针对不同浏览器的图片颜色替换处理进行微调\n    // 若 SVG 文件与当前 HTML 文件不在同一域名下，浏览顺会存跨域权限问题无法完成处理\n    // 非 Firefox / Safari 以本地打开方式下无法进行处理\n    let httpMode = WINDOW_getHref().sW(\"http\"),\n        canFillAlter = (httpMode || env.browser.Firefox || env.browser.Safari),\n        hostname = window.location.hostname,\n        imgHost = V_util_getMetaByName(\"vlook-image-host\");\n    if (imgHost !== gUndefined && !imgHost.eW(\"/\"))\n        imgHost += \"/\";\n\n    $(\"#write p>img, #write .md-diagram-panel svg,\"\n    + \"img[src*='mode=figure'], img[src*='mode=icon'], img[src*='mode=logo'], img[src*='mode=frame'], \"\n    + \"img[src*='#figure'], img[src*='#icon'], img[src*='#logo'], img[src*='#frame']\").e(function () {\n        let fig = $(this),\n            src = fig.a(s_Src),\n            src2FillAlter = src,\n            container = fig.p(),\n            tagName = (src !== gUndefined ? \"img\" : \"svg\");\n        // ----------------------------------------\n        // img 类插图的处理\n        if (src !== gUndefined) {\n            // 对于 img 类插图的预处理\n            let params = V_util_getQueryParams(src),\n                hash = V_util_getHash(src);\n\n            // 当前 HTML 的打开方式可进行图片「颜色替换」的适配处理\n            if (canFillAlter === true) {\n                // 获得图片路径的域名\n                let matchRes = src2FillAlter.match(/^https?:\\/\\/([^\\/?#]+)(?:[\\/?#]|$)/i);\n                let srcHost = matchRes && matchRes[1];\n                // 对于相对路径，或与当前 HTML 域名一致\n                if (srcHost == null || hostname === srcHost) {\n                    // 针对 Safari 且指定了默认图床域名\n                    // 进行颜色替换前，先调整原始 <img> 的 src\n                    let needImgHost = (env.browser.Safari && !httpMode && imgHost !== gUndefined);\n                    if (needImgHost) {\n                        src2FillAlter = imgHost + src2FillAlter;\n                        fig.a(s_Src, src2FillAlter);\n                    }\n\n                    // 正式进行图片颜色替换处理\n                    __initFillAlter(fig, params, src2FillAlter);\n\n                    // 恢复原始 <img> 的 src\n                    if (needImgHost)\n                        fig.a(s_Src, src);\n                }\n            }\n\n            // 初始化图片对「颜色方案」的适配处理\n            __initColorScheme(fig, params);\n\n            // 初始化图片对「高分屏」的适配处理\n            __initHighDPI(fig, params);\n\n            // 对图片「加载结果」进行是跟踪检查\n            __bindLoadChecker(fig);\n\n            // 跳过带指定显示版式的图片\n            if (__isNotFigure(src))\n                return gTrue;\n\n            // 初始化图片背景的适配处理\n            __initBackground(fig, params);\n\n            // 添加插图容器\n            container = fig.p();\n            // 确保 img 有独立的父容器，一般情况下 Typora 导出的为 <p>\n            if (container.prop(s_TagName).l() !== \"p\") {\n                fig.wrap(\"<p></p>\");\n                container = fig.p();\n            }\n\n            // 初始化对齐方式\n            __initAlign(container, hash, params);\n        }\n\n        // 绑定内容助手\n        if (src !== gUndefined)\n            ContentAssistor_bind(fig, s_Fig + s_SuffixImg);\n        else\n            ContentAssistor_bind(fig, s_Fig + s_SuffixSvg);\n\n        V_doc_counter_fig++;\n\n        // 处理题注\n        __disposeCaption(fig, tagName);\n\n        // 设置容器数据，用于折叠内容时使用\n        container.a(s_DataContainer, tagName);\n        JQ_addClass(container, s_CssCaptionContainer);\n        // 折叠长插图\n        // if (ExtFigure_blockCapNum !== gTrue)\n            ContentFolder_add(fig, s_Figure);\n    }); // 结束初始化处理\n    sw.ed(\"    ├ figure set: \");\n\n    // ----------------------------------------\n    // srcset 为 auto 模式的处理\n    sw.st();\n    // 在当前环境的 DPR > 1 时，对于没有指定 srcset 的 img 类插图，自动强制将 src 直接指定 2x 图片\n    // 可通过 URL 参数 srcset=auto 来启用\n    if (env.display.DPR > 1\n        && V_util_getParamVal(s_Srcset) === s_Auto) {\n            $(\"p[\" + s_DataContainer + \"='img'] img\").e(function () {\n                let fig = $(this);\n                if (fig.a(s_Src).i(s_SuffixSvg, 1) === -1 // 跳过 svg 文件\n                    && fig.a(s_Srcset) === gUndefined) {\n                        fig.a(s_Srcset, fig.a(s_Src) + \" 2x\");\n                }\n            });\n    }\n\n    // 进行图片对颜色方案的适配处理\n    ExtFigure_adjustColorScheme(gFalse);\n    sw.ed(\"    └ DPR & misc.: \");\n\n    /**\n     * 处理题注\n     * @param fig 插图对象\n     * @param tagName 插图所属标签 img、svg\n     */\n    function __disposeCaption(fig, tagName) {\n       // 设置插图属性数据\n       fig.a(s_DataFigNum, V_doc_counter_fig);\n       JQ_addClass(fig, s_CssFig);\n\n       // 先根据题注语法生成题注\n    //    if (ExtFigure_blockCapNum !== gTrue)\n           CaptionGenerator_actionForMediaContent(fig, tagName);\n    }\n\n    /**\n     * 绑定加载失败处理\n     * @param fig 插图对象\n     */\n    function __bindLoadChecker(fig) {\n        let src = fig.a(s_Src);\n        // 图片无法加载时加载默认图片\n        fig.bind(s_Error, function () {\n            if (!ignoreImgLost) {\n                // 将无法加载的图片信息添加到链接检查器\n                let cp1 = fig.p().f(s_Caption1).h(),\n                    cp2 = fig.p().f(s_Caption2).t();\n                LinkTool_addToCheck(fig.p().a(s_Id), \"🖼 <strong>\" + [\n                    \"无效的图片源\",\n                    // \"無效的圖片源\",\n                    \"Invalid image source\",\n                    // \"Source d'image non valide\",\n                    // \"Ungültige Bildquelle\",\n                    // \"Fuente de imagen no válida\",\n                    // \"Неверный источник изображения\",\n                    // \"無効な画像ソース\",\n                    // \"잘못된 이미지 소스\"\n                ][V_lang_id] + \":</strong> \" + cp1 + (cp2.x().length > 0 ? \" | \" + cp2 : \"\"));\n            }\n\n            __loadDefaultOnError($(this));\n        });\n\n        // 强制重新加载一次以触发error事件\n        fig.a(s_Src, src);\n    }\n\n    /**\n     * 判断是否属于插图\n     * @param src 插图路径\n     * @returns true：不属于插图，false：属于插图\n     */\n    function __isNotFigure(src) {\n        let ai = src.i(\"#\", 4),\n            mi = src.i(\"mode\", 5), // 分段检过提高处理性能\n            iconMode = src.i(\"#icon\", ai - 1) > -1 || src.i(\"=icon\", mi + 4) > -1,\n            logoMode = src.i(\"#logo\", ai - 1) > -1 || src.i(\"=logo\", mi + 4) > -1,\n            frameMode = src.i(\"#frame\", ai - 1) > -1 || src.i(\"=frame\", mi + 4) > -1;\n        return (iconMode || logoMode || frameMode);\n    }\n\n    /**\n     * 初始化图片对齐方式的处理\n     * 注意：在 Typora 编辑模式时的对齐方式，直接通过 CSS 实现\n     * @param container img 的题注容器对象\n     * @param hash img 对象 src 值的锚点内容（如：#center#logo）\n     * @param params img 对象 src 值的 URL 参数数组\n     */\n    function __initAlign(container, hash, params) {\n        let align = gUndefined;\n        // 针对通过锚点设置对齐方式\n        if (hash.i(\"#center\") > -1)\n            align = s_Center;\n        else if (align === gUndefined && hash.i(\"#right\") > -1)\n            align = s_Right;\n        else if (align === gUndefined && hash.i(\"#left\") > -1)\n            align = s_Left;\n        // 针对通过 URL 参数设置对齐方式\n        else if (align === gUndefined && params[\"align\"] !== gUndefined)\n            align = params[\"align\"];\n        else\n            return;\n        // 设置父级对象的对齐方式\n        container.c(s_TextAlign, align);\n    }\n\n    /**\n     * 初始化图片对网格背景的的适配处理\n     * @param img img 对象\n     * @param params img 对象 src 值的 URL 参数数组\n     */\n    function __initBackground(img, params) {\n        let grid = params[\"grid\"];\n        if (grid === gUndefined)\n            return;\n        img.a(s_DataFigureGrid, grid);\n    }\n\n    /**\n     * 初始化图片颜色替换的适配处理\n     * @param img img 对象\n     * @param params img 对象 src 值的 URL 参数数组\n     * @param src img 对象的 src 值\n     */\n    function __initFillAlter(img, params, src) {\n        if (params[s_Fill] === gUndefined)\n            return;\n\n        img.a(s_DataImgFill, params[s_Fill]);\n\n        // 图片为 SVG 格式时，将源文件通过 SVGInject 注入到 HTML 文档中\n        if (src.i(s_SuffixSvg, 1) > -1) {\n            SVGInject(img[0], {\n                // SVG 注入成功\n                afterInject : function (img, svg) {\n                    let svgObj = $(svg);\n                    // 属于插图的，则绑定内容助手\n                    if (!__isNotFigure(src))\n                        ContentAssistor_bind(svgObj, s_Fig + s_SuffixSvg);\n                    // 对颜色进行替换的适配处理\n                    ExtFigure_adjustFillAlterForSVG(svgObj.a(s_DataImgFill), svgObj);\n                },\n                // SVG 注入失败\n                onFail : function (img, svg) {\n                    ERROR(\"SVGInject ERROR:\", $(img).a(s_Src));\n                }\n            });\n        }\n    }\n\n    /**\n     * 初始化图片对颜色方案（Light / Dark）的适配处理\n     * @param img img 对象\n     * @param params img 对象 src 值的 URL 参数数组\n     */\n    function __initColorScheme(img, params) {\n        // 未指定 darksrc 参数，或同时指定了 fill 参数，则跳过\n        if (params[s_Darksrc] === gUndefined)\n            return;\n\n        // 适配 Dark Mode 的方式：反转\n        if (params[s_Darksrc] === s_Invert) {\n            img.a(s_DataDarkSrc, s_Invert);\n        }\n        // 适配 Dark Mode 的方式：替换\n        else {\n            img.a(s_DataDarkSrc, \"alter\");\n\n            let src = img.a(s_Src),\n                path = V_util_getPath(src),\n                queryString = V_util_getQueryString(src);\n            // 补全 URL 参数内容\n            let darksrc = params[s_Darksrc] + (queryString !== \"\" ? (\"?\" + queryString) : \"\");\n            // 如果 darksrc 只含文件名，则用 src 的路径进行补全\n            if (darksrc.i(\"/\") === -1)\n                darksrc = path + darksrc;\n\n            // 初始化不同颜色方案的 src 内容\n            img.a(s_DataSrcLight, img.a(s_Src));\n            img.a(s_DataSrcDark, darksrc);\n\n            // 初始化不同颜色方案的 srcset 内容\n            if (params[s_Srcset] !== gUndefined)\n                img.a(s_DataSrcsetLight, params[s_Srcset]);\n            if (params[s_Darksrcset] !== gUndefined)\n                img.a(s_DataSrcsetDark, params[s_Darksrcset]);\n        }\n    }\n\n    /**\n     * 初始化图片高分屏的适配处理\n     * @param img img 对象\n     * @param params img 对象 src 值的 URL 参数数组\n     */\n    function __initHighDPI(img, params) {\n        let src = img.a(s_Src),\n            srcset = params[s_Srcset],\n            darksrcset = params[s_Darksrcset];\n\n        // Light Mode 对应的图片集\n        if (srcset !== gUndefined) {\n            srcset = __transUrlSrcSet(src, srcset);\n            img.a(s_DataSrcsetLight, srcset);\n            // 设置默认值\n            img.a(s_Srcset, srcset);\n        }\n\n        // Dark Mode 对应的图片集\n        if (darksrcset !== gUndefined) {\n            darksrcset = __transUrlSrcSet(img.a(s_DataSrcDark), darksrcset);\n            img.a(s_DataSrcsetDark, darksrcset);\n        }\n    }\n\n    /**\n     * 加载默认图片\n     * @param target 目标 img 对象\n     */\n    function __loadDefaultOnError(target) {\n        let alt = target.a(s_Alt);\n        // 将 alt 替换为 title 避免无法指定 width、height 属性\n        if (alt !== gUndefined && alt.length > 0) {\n            target.a(s_Title, alt);\n            target.removeAttr(s_Alt);\n        }\n        JQ_addClass(target, \"v-img-lost\");\n    }\n\n    /**\n     * 转换图片 URL 中的 srcset / darksrcset 参数为符合 <img> srcset 属性的格式\n     * @param src 图片 URL\n     * @param srcset srcset 或 darksrcset 参数的内容\n     */\n    function __transUrlSrcSet(src, srcset) {\n        // 针对 html 与 图片同一目录的情况\n        let path = V_util_getPath(src);\n\n        // @2x/@3x 图片资源为自动匹配名称的语法\n        // 2x/3x 的文件名为 <文件名@2x.xxx> 或 <文件名@3x.xxx> 的情况\n        if (/^@2x(,@3x)?$/.test(srcset)) {\n            let pureSrc = src.s(0, src.i(\"?\", 5)),\n                fileName = pureSrc.s(0, pureSrc.lastIndexOf(\".\")), // 图片资源文件名（不含扩展名）\n                suffix = pureSrc.s(pureSrc.lastIndexOf(\".\"), pureSrc.length); // 图片资源扩展名\n            // 自动补全图片资源 URL\n            srcset = srcset.r(/@2x/, fileName + \"@2x\" + suffix + \" 2x\");\n            srcset = srcset.r(/@3x/, fileName + \"@3x\" + suffix + \" 3x\");\n        }\n        // @2x/@3x 图片资源为指定文件名的语法\n        else {\n            // 将倍数标识转换为 srcset 标准语法\n            // 要从图片扩展名开始替换，避免将文件中的 @2x @3x 误替换掉\n            srcset = srcset.rAfter(\".\", \"@2x\", \" 2x\");\n            srcset = srcset.rAfter(\".\", \"@3x\", \" 3x\");\n        }\n\n        // 为 2x 图添加图片路径\n        let sss = srcset.split(\",\");\n        if (sss[0].i(\"/\") === -1) // 仅为文件名时才添加路径\n            srcset = path + srcset;\n        // 为 3x 图添加图片路径\n        if (sss.length > 1 && sss[1].i(\"/\") === -1) // 仅为文件名时才添加路径\n            srcset = srcset.r(\" 2x,\", \" 2x,\" + path);\n\n        return srcset;\n    }\n}\n\n/**\n * 复制图片地址\n */\nfunction ExtFigure_copySrc(source) {\n    let content = ContentAssistor_lastHover.a(s_Src);\n    // 若复制为 Markdown\n    if (V_util_holdKey_Alt()) {\n        let alt = ContentAssistor_lastHover.a(s_Alt),\n            title = ContentAssistor_lastHover.a(s_Title);\n        content = \"![\" + (alt !== gUndefined ? alt : \"\")\n            + \"](\" + content + (title !== gUndefined ? ' \"' + title + '\"' : \"\") + \")\";\n    }\n    Copyer_action(source, content, gTrue);\n }\n\n/**\n * 适配指定图片在 Light / Dark Mode 的适配处理\n * @param grid 是否进行网格背景适配处理：true / false\n */\nfunction ExtFigure_adjustColorScheme(grid) {\n    let scheme = ColorScheme.scheme,\n        darkMode = scheme === s_Dark;\n    // --------------------\n    // 对图片在 Dark Mode 时的适配处理\n    // 1. 对适配方式为「反转」的处理\n    $(\"img[\" + s_DataDarkSrc + \"='invert'], svg[\" + s_DataDarkSrc + \"='invert']\").e(function () {\n        let img = $(this),\n            src = img.a(s_Src);\n        if (darkMode) {\n            // 如果图片没有指定替换颜色时才进行处理\n            if (img.a(s_DataImgFill) === gUndefined) {\n                // 设置默认的 srcset\n                if (src !== gUndefined)\n                    img.a(s_Srcset, img.a(s_DataSrcsetLight));\n                // 添加反转样式\n                JQ_addClass(img, s_CssImgInvertDark);\n            }\n        }\n        else {\n            JQ_removeClass(img, s_CssImgInvertDark);\n            if (src !== gUndefined)\n                img.a(s_Srcset, img.a(s_DataSrcsetLight));\n        }\n    });\n    // 2. 对适配方式为「替换」的处理\n    $(\"img[\" + s_DataDarkSrc + \"='alter']\").e(function () {\n        let img = $(this);\n        JQ_removeClass(img, s_CssImgInvertDark);\n        img.a(s_Src, img.a(s_DataSrc_ + scheme));\n        img.a(s_Srcset, img.a(s_DataSrcset_ + scheme));\n    });\n\n    // --------------------\n    // 对图片指定为颜色替换的处理\n    $(\"img[\" + s_DataImgFill + \"='text'], img[\" + s_DataImgFill + \"='theme1'], img[\" + s_DataImgFill + \"='theme2'], svg[\" + s_DataImgFill + \"='text'], svg[\" + s_DataImgFill + \"='theme1'], svg[\" + s_DataImgFill + \"='theme2']\").e(function () {\n        let fig = $(this),\n            fill = fig.a(s_DataImgFill);\n        // SVG 对象，或 src 为 .svg 的 img 对象\n        if (fig.prop(s_TagName).l().sW(\"s\") || fig.a(s_Src).i(s_SuffixSvg, 1) > -1) {\n            ExtFigure_adjustFillAlterForSVG(fill, fig);\n        }\n        // 其他情况\n        else {\n            if (fill === s_Text)\n                fig.c(s_Filter, \"drop-shadow(12345px 0px \" + fig.p().c(s_Color) + \")\");\n            else\n                fig.c(s_Filter, \"drop-shadow(12345px 0px var(--ac-\" + fill + \"-lg))\");\n\n            if (fig.a(s_DataFigNum) !== gUndefined)\n                fig.c(s_Background, s_None);\n        }\n    });\n\n    // --------------------\n    // 非初始化时执行，避免与 CSS 默认配置冲突\n    // 如：@media (prefers-color-scheme: dark) 部分\n    if (grid) {\n        // 适配图片网格背景的处理\n        $(\"img[\" + s_DataFigureGrid + \"='line'],img[\" + s_DataFigureGrid + \"='block']\").e(function () {\n            let img = $(this);\n            // 先清空所有涉及的样式\n            if (darkMode) {\n                JQ_removeClass(img, \"v-fig-solid-bg-light\");\n                JQ_removeClass(img, \"v-fig-grid-line-light\");\n                JQ_removeClass(img, \"v-fig-grid-block-light\");\n            }\n            else {\n                JQ_removeClass(img, \"v-fig-solid-bg-dark\");\n                JQ_removeClass(img, \"v-fig-grid-line-dark\");\n                JQ_removeClass(img, \"v-fig-grid-line-dark-invert\");\n                JQ_removeClass(img, \"v-fig-grid-block-dark\");\n                JQ_removeClass(img, \"v-fig-grid-block-dark-invert\");\n            }\n\n            let gridType = img.a(s_DataFigureGrid),\n                darkInvert = img.a(s_DataDarkSrc) === s_Invert;\n            // 网络背景\n            if (gridType === s_Line || gridType === s_Block) {\n                if (darkMode && darkInvert)\n                    // 先添加反色后的背景，以适配反色样式后能正常显示\n                    JQ_addClass(img, \"v-fig-grid-\" + gridType + \"-\" + scheme + \"-invert\");\n                else\n                    JQ_addClass(img, \"v-fig-grid-\" + gridType + \"-\" + scheme);\n            }\n            // 非网格背景\n            else\n                JQ_addClass(img, \"v-fig-solid-bg-\" + scheme);\n        });\n    }\n}\n\n/**\n * 适配 *.svg 格式的 img 图片注入为 SVG 实例后，对颜色进行替换的适配处理\n * @param fill 图片颜色替换方式：text / theme1 / theme2\n * @param svg SVG 实例对象\n */\nfunction ExtFigure_adjustFillAlterForSVG(fill, svg) {\n    // 先取消可能会因数 darksrc=invert 的 CSS 配置影响\n    svg.c(s_Filter, s_None);\n    // 再针对进行微调\n    if (fill === s_Text)\n        svg.f(\"path, rect, ellipse, polygon\").c(s_Fill, svg.p().c(s_Color));\n    else\n        svg.f(\"path, rect, ellipse, polygon\").c(s_Fill, \"var(--ac-\" + fill + \"-lg)\");\n}\n\n// ==================== 插图导航模块 ==================== //\n\nfunction FigureNav() {\n    let T = this;\n    T.ui = $(\".v-fig-nav\"); // 插图导航主界面\n    T.btns = {\n        ui : $(s_CssFigNavBtns), // 所有导航按钮\n        prev : $(s_CssFigNavBtns + \".prev\"), // 上一张插图按钮\n        next : $(s_CssFigNavBtns + \".next\"), // 下一张插图按钮\n        close : $(\".v-btn-close-figure-nav\"), // 关闭按钮\n    };\n    T.content = $(\".v-fig-content\"); // 显示插图内容的控件\n    T.figNum = 1; // 当前插图索引序号，对应 vk-id-fig 中的值\n\n    V_ui_addAnimate(T.content.ch(\"img, svg\"));\n\n    // 绑定各按钮事件\n    T.btns.prev.uC().ck(function () {\n        T.prev();\n    });\n    T.btns.next.uC().ck(function () {\n        T.next();\n    });\n    T.btns.close.uC().ck(function () {\n        T.hide();\n    });\n    T.content.uC().ck(function () {\n        T.hide();\n    });\n\n    /**\n     * 插图导航导航按钮在不同终端的适配处理\n     */\n    T.adjustHoverStyle = function () {\n        // 移动设备时解绑样式事件\n        if (env.device.mobile) {\n            T.btns.prev.uH();\n            T.btns.next.uH();\n        }\n        // 非移动设备时绑定样式事件\n        else {\n            T.btns.ui.hover(function () {\n                $(this).c(s_Transform, \"translateY(-2px)\");\n            }, function () {\n                $(this).c(s_Transform, s_None);\n            });\n            // 鼠标键按下事件，模拟 :active\n            T.btns.ui.mousedown(function () {\n                $(this).c(s_Transform, s_None);\n            });\n            // 鼠标键释放事件，模拟恢复正常\n            T.btns.ui.mouseup(function () {\n                $(this).c(s_Transform, \"translateY(-2px)\");\n            });\n        }\n    }\n\n    /**\n     * 显示插图导航\n     */\n    T.show = function (fig) {\n        // V_report_push([s_Interactive, 'Figure Nav', 'Show/Hide', 0]);\n        if (V_doc_counter_fig === 0)\n            return;\n\n        V_doc_scroll_freeze();\n        V_doc_block = gTrue;\n\n        if (fig == null)\n            fig = $(\"[\" + s_DataFigNum + \"='\" + T.figNum + \"']\");\n\n        // 在插图导航中显示对应插图\n        T.figNum = JS_parseInt(fig.a(s_DataFigNum));\n\n        V_ui_show(T.ui);\n\n        T.display();\n        T.updateUI();\n    }\n\n    /**\n     * 关闭插图导航\n     */\n    T.hide = function () {\n        T.content.empty();\n        V_ui_hide(T.ui);\n\n        V_doc_scroll_unfreeze();\n        V_doc_block = gFalse;\n    }\n\n    /**\n     * 显示插图内容\n     */\n    T.display = function () {\n        let fig = $(\"[\" + s_DataFigNum + \"='\" + T.figNum + \"']\");\n        T.content.empty();\n        T.content.show();\n        T.content.c(s_Width, $(window).w())\n            .c(s_Height, $(window).ht());\n\n        let newFig = fig.clone();\n        newFig.c(s_MaxWidth, $(window).w() - 90)\n            .c(s_MaxHeight, $(window).ht() - 90)\n            .c(s_BorderRadius, s_varRB);\n        JQ_addClass(newFig, \"v-interactive\");\n        V_ui_hide(newFig);\n\n        // 添加鼠标移入/移出事件\n        V_ui_bindHover(newFig);\n\n        // 添加鼠标点击事件\n        newFig.uC().ck(function () {\n            // 跳转到对应位置\n            V_util_gotoHash(\"#vk-id-fig\" + T.figNum);\n            T.hide();\n        });\n\n        T.content.append(newFig);\n        V_ui_show(newFig);\n    }\n\n    /**\n     * 查看上一个插图\n     */\n    T.prev = function () {\n        if (T.figNum > 1) {\n            T.figNum--;\n            T.display();\n            T.updateUI();\n        }\n    }\n\n    /**\n     * 查看下一个插图\n     */\n    T.next = function () {\n        if (T.figNum < V_doc_counter_fig) {\n            T.figNum++;\n            T.display();\n            T.updateUI();\n        }\n    }\n\n    /**\n     * 更新插图导航界面\n     */\n    T.updateUI = function () {\n        let pageNum = $(\".v-fig-nav-title\");\n\n        pageNum.h(\"<span class='v-fig-page-num'>\"\n            + T.figNum + \"/\" + V_doc_counter_fig + \"</span> \"\n            + $(\"#vk-id-fig\" + T.figNum + \">.v-cap-1\").t());\n\n        // 更新导航按钮位置\n        T.btns.prev.c(s_Top, (T.ui.ht() - T.btns.prev.ht()) / 2);\n        T.btns.next.c(s_Top, T.btns.prev.c(s_Top))\n            .c(s_Right, \"10px\");\n\n        // 根据当前插图索引更新浏览按钮有效状态\n        T.btns.prev.c(s_Opacity, \"0\");\n        T.btns.next.c(s_Opacity, \"0\");\n        if (T.figNum > 1) {\n            T.btns.prev.c(s_Opacity, \"1\");\n        }\n        if (T.figNum < V_doc_counter_fig) {\n            T.btns.next.c(s_Opacity, \"1\");\n        }\n    }\n\n    /**\n     * 处理热键操作\n     * @param code 非功能键键\n     * @param combKeys 功能组合键 Ctrl / Shift / Alt / Win / Cmd\n     */\n    T.disposeHotkey = function (code, combKeys) {\n        if (iFigNav.ui.isHidden())\n            return;\n\n        switch (code) {\n            case 188: // <\n            case 37: // ←\n                T.prev();\n                break;\n            case 190: // >\n            case 39: // →\n                T.next();\n                break;\n            case 27: // ESC\n                T.hide();\n                break;\n        }\n    }\n}\n\n// ==================== 样式重制类 ==================== //\n\n/**\n * 调整任务列表复选框的样式\n */\nfunction Restyler_forTaskList() {\n    // 遍历所有正文下的无序列表\n    $(\"#write>ul\").e(function () {\n        // 遍历所有含 checkbox 组件的无序列表项\n        $(this).f(\".md-task-list-item input[type='checkbox']\").e(function () {\n            let li = $(this).p();\n            // 遍历其下级无序列表\n            li.ch(\"ul\").e(function () {\n                let chkCount = 0,\n                    notDone = gFalse;\n                // 遍历下级无序列表的所有一级子元素内 checkbox 的 checked 状态\n                $(this).ch(\"li\").e(function () {\n                    // 只对有两个或以上的 checkbox 子元素，因为只有 1 个 checkbox 是无法判断是否为不确定选择\n                    if (chkCount > 0 && $(this).f(\"input\").a(s_Checked) === gUndefined) {\n                        notDone = gTrue;\n                        return gFalse;\n                    }\n                    chkCount++;\n                });\n                // 若下级无序列表的一级子元素中，有任意一个 checkbox 为未完成的，则视为不确定选择\n                if (notDone)\n                    li.ch(\"input\")[0].indeterminate = gTrue;\n            });\n        });\n    });\n\n    // 对任务列表的 checkbox 组件转换为 SVG 图标\n    $(\"#write input[type='checkbox']\").e(function () {\n        let chkStatus = \"no\", // 默认为未完成\n            chkStyle = s_Dark; // 默认样式\n\n        // 已完成\n        let _t =  $(this),\n            checked = _t.a(s_Checked);\n        if (checked !== gUndefined && checked.sW(\"c\")) { // checked\n            chkStatus = s_Checked;\n            // chkStyle = \"btn\";\n        }\n        // 部分完成（不确定选择）\n        else if (_t[0].indeterminate) {\n            chkStatus = \"un\";\n            // chkStyle = \"btn\";\n        }\n\n        // 替换为 SVG 图标\n        _t.before(\"<svg width='14px' height='14px' class='v-svg-input-checkbox'><use xlink:href='#icoChkbox_\"\n            + chkStatus + \"' class='v-svg-ico-\" + chkStyle + \"'/></svg>\");\n        JQ_remove(_t);\n    });\n}\n\n/**\n * 调整默认的 Mermaid 样式\n */\nfunction Restyler_forMermaid() {\n    // 修正顺序图整体的样式\n    $(\".md-diagram-panel svg[id^='mermaidChart'][viewBox^='-']\").e(function () {\n        let target = $(this),\n            viewBox = target.a(s_ViewBox).split(/\\s+/),\n            paddingBottom = (target.c(s_PaddingBottom));\n        // 修正顺序图的下边距，前提先在 CSS 中设置了合适的 padding-bottom 值\n        target.a(s_ViewBox,\n            viewBox[0] + \" \" + viewBox[1] + \" \" + viewBox[2] + \" \"\n            + (JS_parseInt(viewBox[3]) + JS_parseInt(paddingBottom)));\n        // 重置 CSS 中的 padding-bottom 值，因为已由上面的下边距值替换\n        JQ_addClass(target, s_CssMermaidRestyler);\n    });\n\n    // 更新顺序图中的角色样式\n    $(\".md-diagram-panel svg[id^='mermaidChart'] g>rect[class='actor']\").e(function () {\n        let actor = $(this),\n            text = actor.next(s_Text).ch(), // actor text object\n            tmpText = text.t(),\n            prefix = \"\";\n        const front = /@.+/g, // 前端触点角色\n            keySys = /^\\*\\*.+/g, // 重要系统角色\n            extSys = /^--.+/g; // 外部系统角色\n\n        // 更新 <前端触点角色> 样式\n        if (front.test(tmpText)) {\n            let h = actor.ht(),\n                line = (actor.parent().prev(s_Line) || actor.prev(s_Line));\n            actor.a(s_Rx, (h - 20) / 2);\n            actor.a(s_Ry, (h - 20) / 2);\n            actor.a(\"y\", JS_parseInt(actor.a(\"y\")) + 10);\n            actor.a(s_Height, h - 20);\n            line.a(\"y1\", JS_parseInt(line.a(\"y1\")) + 10);\n            line.a(\"y2\", JS_parseInt(line.a(\"y2\")) - 20);\n            JQ_addClass(actor.prev(s_Line), \"v-actor-front\");\n            text.t(prefix + tmpText.s(1, tmpText.length));\n        }\n        // 更新 <重要系统角色> 样式\n        else if (keySys.test(tmpText)) {\n            JQ_addClass(actor, s_CssActorKeySys);\n            JQ_addClass(actor.prev(s_Line), s_CssActorKeySys);\n            JQ_addClass(actor.nextAll(s_Text).ch(), s_CssActorKeySys);\n            text.t(prefix + tmpText.s(2, tmpText.length));\n        }\n        // 更新 <外部系统角色> 样式\n        else if (extSys.test(tmpText)) {\n            JQ_addClass(actor, s_CssActorExtSys);\n            JQ_addClass(actor.nextAll(s_Text).ch(), s_CssActorExtSys);\n            text.t(prefix + tmpText.s(2, tmpText.length));\n        }\n        else {\n            text.t(prefix + tmpText);\n        }\n    });\n\n    // 更新顺序图中消息序号的样式\n    $(\".md-diagram-panel svg[id^='mermaidChart']>text.sequenceNumber\").e(function () {\n        // 移除文本宽度，避免不同字体大小时显示效果问题\n        $(this).removeAttr(s_TextLength);\n    });\n\n    // 更新顺序图中的片断（如：loop、opt、par、alt）样式和位置\n    $(\".md-diagram-panel polygon+.labelText\").e(function () {\n        let fragment = $(this),\n            g = fragment.p(),\n            segType = fragment.t();\n\n        // 默认的样式（par 片断）\n        let bgColor = s_varMmOrange,\n            borderColor = s_varMmOrange,\n            titleColor = s_varMmOrange;\n            // labelText = s_varMmOrangeAlt;\n        // 为 alt 片断设置样式\n        if (segType === s_Alt) {\n            bgColor = s_varMmRed;\n            borderColor = s_varMmRed;\n            titleColor = s_varMmRed;\n            // labelText = s_varMmRedAlt;\n        }\n        // 为 loop 片断设置样式\n        else if (segType === s_Loop) {\n            bgColor = s_varMmCyan;\n            borderColor = s_varMmCyan;\n            titleColor = s_varMmCyan;\n            // labelText = s_varMmCyanAlt;\n        }\n\n        // 为 alt、loop、par 片断应用样式设置\n        if (segType !== \"opt\") {\n            // // 背景色\n            // g.f(\"polygon.labelBox\").addClass(\"v-seq-\" + segType);\n            // // 边框色\n            // g.f(\"line.loopLine\").addClass(\"v-seq-\" + segType);\n            // // 片断标题颜色\n            // g.f(\"text.loopText, text.loopText>tspan\").addClass(\"v-seq-\" + segType + \"-text\");\n            // 背景色\n            g.f(\"polygon.labelBox\").c(s_CssText, \"fill: \" + bgColor + \" !important;\");\n            // 边框色\n            g.f(\"line.loopLine\").c(s_CssText, \"stroke: \" + borderColor + \" !important;\");\n            // 片断类型名称颜色\n            // g.f(\"text.labelText\").c(s_CssText, \"fill:\" + labelText + \" !important;\");\n            // 片断标题颜色\n            g.f(\"text.loopText, text.loopText>tspan\").c(s_CssText, \"fill:\" + titleColor + \" !important;\");\n        }\n\n        // 将 alt(alternative)、opt(optional)、loop(loops) 片断文本翻译为其他语言\n        if (segType === s_Alt)\n            fragment.t([\n                \"分支\",\n                // \"選擇\",\n                \"Alt.\",\n                // \"Alt.\", \"Alt.\", \"Alt.\", \"Alt.\", \"代替\", \"대안\"\n            ][V_lang_id]);\n        else if (segType === \"opt\")\n            fragment.t([\n                \"可选\",\n                // \"可選\",\n                \"Opt.\",\n                // \"Opt.\", \"Opt.\", \"Opt.\", \"Opt.\", \"ション\", \"매칭\"\n            ][V_lang_id]);\n        else if (segType === s_Loop)\n            fragment.t([\n                \"循环\",\n                // \"循環\",\n                \"Loop.\",\n                // \"Loop.\", \"Loop.\", \"Loop.\", \"Loop.\", \"ループ\", \"루프\"\n            ][V_lang_id]);\n        else if (segType === \"par\")\n            fragment.t([\n                \"平行\",\n                // \"平行\",\n                \"Par.\",\n                // \"Par.\", \"Par.\", \"Par.\", \"Par.\", \"平行\", \"평행\"\n            ][V_lang_id]);\n    });\n\n    // 调整片断的标题文本\n    $(\"svg text.loopText>tspan\").e(function () {\n        // 去掉文本内容前后的中括号\n        let fragmentTitle = $(this);\n        fragmentTitle.p().a(s_Style, \"text-anchor: start\");\n\n        // 调整文本的位置\n        let label = fragmentTitle.p().p().f(\".labelBox\"),\n            rect = label[0].getBBox();\n            // y = JS_parseInt(fragmentTitle.p().a(\"y\"));\n        fragmentTitle.a(\"x\", rect.x + rect.width + 10);\n\n        let nextText = fragmentTitle.p().next();\n        if (nextText !== gUndefined && nextText.a(s_Class) !== gUndefined && nextText.a(s_Class).i(\"loopText\") > -1) {\n            nextText.a(\"x\", rect.x + rect.width + 40);\n        }\n    });\n\n    // 针对 VLOOK 衍生的 Mermaid 的状态机图节点\n    let radius = V_util_getVarVal(\"--v-r-b\");\n    // 针对 VLOOK 顺序图开始、结束节点、子图\n    // $(\"#START rect, #END rect, g[id^=flowchart-START] rect, g[id^=flowchart-END] rect, .cluster rect, rect[class=rect]\").e(function () {\n    $(\"svg .cluster rect\").e(function () {\n        // __processStatusNodes($(this));\n        $(this).a(s_Rx, radius);\n        $(this).a(s_Ry, radius);\n    });\n}\n\n// ==================== 第三方库修复工具类 ==================== //\n\n// Mermaid 相关的 DPR\nlet RepairTool_mermaidDPR_builder = 1, // 生成 Mermaid 时系统的 DPR\n    RepairTool_mermaidDPR_render = 1; // Mermaid 流程图显示的 DPR\n\n/**\n * 按倍数调整函数元组数据，目前只支持单个函数，且只能有两个参数\n * @param funcString 函数字符串，如：translate(-12,-18)\n * @param rate1 对第1个参数的调整倍数\n * @param rate2 对第2个参数的调整倍数\n */\nfunction RepairTool_scaleTupleByTimes(funcString, rate1, rate2) {\n    let lbIndex = funcString.i(\"(\"),\n        dotIndex = funcString.i(\",\"),\n        rbIndex = funcString.i(\")\");\n\n    // 提取两个参数值\n    let r1 = funcString.s(lbIndex + 1, dotIndex),\n        r2 = funcString.s(dotIndex + 1, rbIndex);\n\n    if (rate1 !== 1) r1 = r1 * rate1;\n    if (rate2 !== 1) r2 = r2 * rate2;\n\n    return funcString.s(0, lbIndex + 1) +\n        r1 + \",\" + r2 + \")\";\n}\n\n// ==================== Code Magic 模块 ==================== //\n\n/**\n * 初始化\n */\nfunction CodeMagic_init() {\n    // 初始化彩虹标签、彩虹徽章、刮刮卡的默认颜色标识\n    // 注：彩虹引用的初始化在 ExtQuote 中进行\n    let dcTag = V_util_getParamVal(\"tag\"),\n        dcBadge = V_util_getParamVal(\"badge\"),\n        dcCoat = V_util_getParamVal(\"coat\");\n    if (dcTag !== gUndefined)\n        RainbowTag_defalutColor = dcTag;\n    if (dcBadge !== gUndefined)\n        RainbowBadge_defalutColor = dcBadge;\n    if (dcCoat !== gUndefined)\n        RainbowCoat_defalutColor = dcCoat;\n\n    // 遍历所有 code\n    $(\"code\").e(function () {\n        let _t = $(this),\n            codeText = _t.t(),\n            stdCount = 0,\n            result;\n\n        // 徽章格式\n        if ((result = codeText.m(RainbowBadge_syntax_color)) != null)\n            RainbowBadge_build(_t, result);\n        // 彩虹单标签格式\n        else if ((result = codeText.m(RainbowTag_syntax)) != null)\n            RainbowTag_build(_t, result);\n        // 文字注音格式\n        else if ((result = codeText.m(TextPhonetic_syntax)) != null)\n            TextPhonetic_build(_t, result);\n        // 刮刮卡格式\n        else if ((result = codeText.m(RainbowCoat_syntax)) != null)\n            RainbowCoat_build(_t, result);\n        // 彩虹引用\n        else if ((result = codeText.m(RainbowQuote_syntax)) != null)\n            RainbowQuote_build(_t, result);\n        // 普通代码增加样式标识，以用于深色模式时的识别\n        else {\n            stdCount++;\n            JQ_addClass(_t, \"v-std-code\" + \" id-\" + stdCount);\n            _t.uC().ck(function () {\n                let content = _t.t();\n                if (V_util_holdKey_Alt())\n                    content = \"`\" + content + \"`\";\n                Copyer_action(_t, content, gTrue);\n            });\n        }\n    });\n}\n\n// ==================== Code Magic：彩虹单标签模块 ==================== //\n\n// 语法：#tag#(color)\nlet RainbowTag_syntax = /^#(.+)#(\\((red|orange|yellow|lime|green|aqua|cyan|blue|sea|steel|purple|rose|pink|gold|brown|gray|black|theme1|theme2)(!)?\\))?$/i,\n    RainbowTag_count = 0,\n    RainbowTag_defalutColor = \"theme1\";\n\n/**\n * 构建单标签样式\n * @param target 目标 code 对象\n * @param result code 内容与语法正则表达式匹配后的结果数组\n */\nfunction RainbowTag_build(target, result) {\n    let tag = result[1],\n        color = RainbowTag_getColor(result[3]),\n        em = (result[4] !== gUndefined) ? \" em\" : \" \"; // 强调样式的标识\n\n    RainbowTag_count++;\n\n    // 过滤语法内容\n    target.t(tag);\n    target.a(s_Class, \"v-tag \" + color + em + \" id-\" + RainbowTag_count);\n    // 复制标签内容\n    target.uC().ck(function () {\n        let _t = $(this),\n            content = _t.t();\n        if (V_util_holdKey_Alt())\n            content = __asMarkdown(content);\n        Copyer_action(_t, content, gTrue);\n    });\n\n    /**\n     * 生成标签的 Markdown 格式\n     * @param value 标签内容\n     */\n    function __asMarkdown(value) {\n        let content = \"#\" + value + \"#\";\n        if (color !== RainbowBadge_defalutColor)\n            content += \"(\" + color + \")\";\n        content = \"`\" + content + \"`\";\n        return content;\n    }\n}\n\n/**\n * 获得获取对应的颜色标识\n * @param color 文档中指定的预置颜色标识\n * @returns string 返回有效的的颜色值\n */\nfunction RainbowTag_getColor(color) {\n    // 没有指定颜色，则为默认颜色\n    if (color === gUndefined)\n        return RainbowTag_defalutColor;\n    return color;\n}\n\n// ==================== Code Magic：徽章模块 ==================== //\n\n// 语法：#badge_name|badge_value#(color{{variable}})\nlet RainbowBadge_syntax_color = /^#(.+)\\|(.+)#(\\((red|orange|yellow|lime|green|aqua|cyan|blue|sea|steel|purple|rose|pink|gold|brown|gray|black|theme1|theme2)(!)?\\))?$/i, // 颜色\n    RainbowBadge_syntax_variable = /^(.*)({{.+}}|%.+%|\\${.+}|#{.+}|\\$.+\\$|var\\(.+\\))(.*)$/i, // 变量语法\n    // RainbowBadge_syntax_variable = /^(.*)({{.+}}|%.+%|\\${.+})(.*)$/i, // 变量语法\n    RainbowBadge_defalutColor = \"gray\",\n    RainbowBadge_count = 0;\n\n/**\n * 构建徽章样式\n * @param target 目标 code 对象\n * @param result code 内容与语法正则表达式匹配后的结果数组\n */\nfunction RainbowBadge_build(target, result) {\n    let color = RainbowBadge_getColor(result[4], target), // 颜色标识\n        em = result[5], // 强调样式的标识\n        badgeName = result[1],\n        badgeValue = result[2],\n        varStr;\n\n    RainbowBadge_count++;\n\n    // ----- 徽章标题\n    target.wrap(\"<code class='v-badge-name \" + color + \" id-\" + RainbowBadge_count + \"'>\" + badgeName + \"</code>\");\n    // 复制徽章标题内容\n    $(\".v-badge-name.\" + color + \".id-\" + RainbowBadge_count).uC().ck(function () {\n        if (Copyer_processing)\n            return;\n\n        // $(this)[0].childNodes[0].nodeValue\n        let content = badgeName,\n            _t = $(this);\n        if (V_util_holdKey_Alt())\n            content = __asMarkdown(_t.ch().t());\n        Copyer_action(_t, content, gTrue);\n    });\n\n    // ----- 徽章内容\n    JQ_addClass(target, \"v-badge-value id-\" + RainbowBadge_count);\n    // 处理含变量的情况\n    if ((varStr = badgeValue.m(RainbowBadge_syntax_variable)) != null)\n        badgeValue = badgeValue.r(varStr[2], \"<span class='var \" + color + \"'>\" + varStr[2] + \"</span>\");\n    target.h(badgeValue);\n    // 指定的颜色标识带强调样式\n    if (em !== gUndefined)\n        JQ_addClass(target, color);\n    // 复制徽章内容内容\n    target.uC().ck(function () {\n        if (Copyer_processing)\n            return;\n\n        let _t = $(this),\n            content = _t.t();\n        if (V_util_holdKey_Alt())\n            content = __asMarkdown(_t.t());\n        Copyer_action(_t, content, gTrue);\n    });\n\n    /**\n     * 生成徽章的 Markdown 格式\n     * @param value 徽章内容\n     */\n    function __asMarkdown(value) {\n        let content = \"#\" + badgeName + \"|\" + value + \"#\";\n        if (color !== RainbowBadge_defalutColor)\n            content += \"(\" + color + (em !== gUndefined ? \"!\" : \"\") +\")\";\n        content = \"`\" + content + \"`\";\n        return content;\n    }\n}\n\n/**\n * 获得获取对应的颜色标识\n * @param color 文档中指定的预置颜色标识\n * @param target 目标 code 对象\n * @returns string 返回有效的的颜色值\n */\nfunction RainbowBadge_getColor(color, target) {\n    // 没有指定颜色，则为默认颜色\n    if (color === gUndefined) {\n        // 若父级元素是 h6 (封面)，则默认使用颜色 theme2\n        if (target.p().prop(s_TagName).l() === \"h6\")\n            return \"theme2\";\n        return RainbowBadge_defalutColor;\n    }\n    return color;\n}\n\n// ==================== Code Magic：彩虹引用模块 ==================== //\n\n// 语法：>(color)\nlet RainbowQuote_syntax = /^>\\((red|orange|yellow|lime|green|aqua|cyan|blue|sea|steel|purple|rose|pink|gold|brown|gray|theme1|theme2)(!)?\\)$/i,\n    RainbowQuote_defalutColor = \"theme1!\",\n    RainbowQuote_defalutColorPrefix = \"theme1\";\n\n/**\n * 构建彩虹引用样式\n * @param target 目标 code 对象\n * @param result code 内容与语法正则表达式匹配后的结果数组\n */\nfunction RainbowQuote_build(target, result) {\n    let quote = target.p().p(),\n        color = RainbowQuote_getColor(result[1]), // 颜色标识\n        em = (result[2] !== gUndefined) ? \" em\" : \" \"; // 判断是否指定了强调样式\n    if (quote.prop(s_TagName).l().sW(\"bl\")) { // <blockquote>\n        let p = target.p();\n        JQ_remove(target); // 删除原始彩虹颜色标记\n        // 删除原始彩虹颜色标记后，若其所在行为空，则同时也删除所在行\n        if (p.length === 0)\n            JQ_remove(p);\n        JQ_addClass(quote, \"v-q \" + color + em);\n        JQ_addClass(quote.ch(\"h6\"), \"title-\" + color + em);\n    }\n}\n\n/**\n * 获得获取对应的颜色标识\n * @param color 文档中指定的预置颜色标识\n * @returns string 返回有效的的颜色值\n */\nfunction RainbowQuote_getColor(color) {\n    // 没有指定颜色，则为默认颜色\n    if (color === gUndefined)\n        return RainbowQuote_defalutColorPrefix;\n    return color;\n}\n\n// ==================== Code Magic：刮刮卡模块 ==================== //\n\n// 语法：*{tips}(text \"color\")\nlet RainbowCoat_syntax = /^\\*{(.*)}\\(([^\"]+)(\\s\"(red|orange|yellow|lime|green|aqua|cyan|blue|sea|steel|purple|rose|pink|gold|brown|gray|theme1|theme2)\")?\\)$/,\n    RainbowCoat_defalutColor = \"gray\";\n\n/**\n * 构建「刮刮卡」\n * @param target 源对象\n * @param result 语法通过正则解析后的结果数组\n */\nfunction RainbowCoat_build(target, result) {\n    let tips = \" **** \",\n        text = result[2],\n        color = \"var(--ac-\" + RainbowCoat_getColor(result[4]) + \"-lg)\";\n\n    // 自定义提示信息\n    if (result[1] !== gUndefined && result[1] !== \"\")\n        tips = result[1];\n\n    // 初始化「刮刮卡」数据\n    JQ_addClass(target, s_CssRbCoat);\n    target.a(s_DataRbCoatData, text);\n    target.a(s_DataRbCoatShowed, s_False);\n    target.a(s_Title, [\n        \"点击查看有效的原始内容\",\n        // \"點擊查看有效的原始內容\",\n        \"Click to view valid original content\",\n        // \"Cliquez pour afficher le contenu original valide\",\n        // \"Klicken Sie hier, um gültigen Originalinhalt anzuzeigen\",\n        // \"Haga clic para ver contenido original válido\",\n        // \"Нажмите, чтобы просмотреть действительный исходный контент\",\n        // \"クリックして有効なオリジナルコンテンツを表示\",\n        // \"유효한 원본 콘텐츠를 보려면 클릭하십시오.\"\n        ][V_lang_id]);\n    target.t(tips);\n    target.c(s_Background, __generateBg(tips.length, color))\n        .c(s_BorderColor, color);\n\n    // 「刮刮卡」的点击事件\n    target.uC().ck(function () {\n        RainbowCoat_toggle($(this));\n    });\n\n    /**\n     * 根据提示信息字数生成条纹背景\n     * @param charCount 提示信息字数\n     * @param color 条纹背景色\n     * @returns string 生成 CSS 规范的背景\n     */\n    function __generateBg(charCount, color) {\n        let count = 16,\n            result = \"linear-gradient(45deg, \";\n        // 根据字数调整条纹数量\n        if (charCount <= 8)\n            count = 4;\n        else if (charCount <= 12)\n            count = 8;\n        else if (charCount <= 20)\n            count = 10;\n        // 计算每个条纹的步长\n        let step = 100 / count;\n        // 自动生成条纹背景\n        for (let i = 0; i < count; i++) {\n            let start = i * step,\n                end = start + step,\n                c = (i % 2 === 0) ? color : s_varDFC;\n            result += c + \" \" + start + \"%, \" + c + \" \" + end + \"%\"; // 分段渐变\n            result += (i < count - 1) ? \",\" : \")\";\n        }\n        return result;\n    }\n}\n\n/**\n * 获得获取对应的颜色标识\n * @param color 文档中指定的预置颜色标识\n * @returns string 返回有效的的颜色值\n */\nfunction RainbowCoat_getColor(color) {\n    // 没有指定颜色，则为默认颜色\n    if (color === gUndefined)\n        return RainbowCoat_defalutColor;\n    return color;\n}\n\n/**\n * 显示 / 隐藏「刮刮卡」的内容\n * @param target 刮刮卡对象\n */\nfunction RainbowCoat_toggle(target) {\n    event.stopPropagation(); // 停止事件冒泡\n\n    if (target.a(s_DataRbCoatShowed).sW(\"f\"))\n        RainbowCoat_show(target);\n    else\n        RainbowCoat_hide(target);\n}\n\n/**\n * 显示「刮刮卡」的内容\n * @param target 刮刮卡对象\n */\nfunction RainbowCoat_show(target) {\n    let tmp = target.t();\n    JQ_addClass(target, s_Opened);\n    target.c(s_Color, target.c(s_BorderColor));\n    // 显示原始信息\n    target.t(target.a(s_DataRbCoatData));\n    // 「刮刮卡」自定义数据\n    target.a(s_DataRbCoatData, tmp);\n    target.a(s_DataRbCoatShowed, s_True)\n}\n\n/**\n * 隐藏「刮刮卡」的内容\n * @param target 刮刮卡对象\n */\nfunction RainbowCoat_hide(target) {\n    let tmp = target.t();\n    JQ_removeClass(target, s_Opened);\n    target.c(s_Color, s_varDBc);\n    // 显示提示信息\n    target.t(target.a(s_DataRbCoatData));\n    // 「刮刮卡」自定义数据\n    target.a(s_DataRbCoatData, tmp);\n    target.a(s_DataRbCoatShowed, s_False);\n}\n\n// ==================== Code Magic：文本注音模块 ==================== //\n\n// 语法：{text}(symbol)\nlet TextPhonetic_syntax = /^{(.+)}\\((.+)\\)$/i;\n\n/**\n * 构建「注音」\n * @param target 源对象\n * @param result 语法通过正则解析后的结果数组\n */\nfunction TextPhonetic_build(target, result) {\n    let text = result[1],\n        symbol = result[2];\n    target.after(\"<ruby>\" + text\n        + \"<rp>(</rp><rt onclick='TextPhonetic_translation(\\\"\" + text + \"\\\", \\\"\" + symbol + \"\\\")'>\"\n        + symbol + \"</rt><rp>)&nbsp;</rp></ruby>\");\n    JQ_remove(target);\n}\n\n/**\n * 释义或翻译\n * @param text 被注音的内容\n * @param symbol 注音\n */\nfunction TextPhonetic_translation(text, symbol) {\n    event.stopPropagation(); // 停止事件冒泡\n    // 默认跳转至 Google 翻译 text\n    let url = \"https://translate.google.cn/?langpair=auto&sl=auto&op=translate&text=\" + encodeURI(text);\n    // 若 symbol 为日文假名，则跳转至 Google 翻译 symbol\n    if (/^[\\u3040-\\u30FF]/.test(symbol))\n        url = \"https://translate.google.cn/?langpair=auto&sl=auto&op=translate&text=\" + encodeURI(symbol);\n    // 若 text 为中文，则跳转至汉典，翻译 text\n    else if (/^[\\u4e00-\\u9fa5]/.test(text))\n        url = \"https://www.zdic.net/hans/\" + encodeURI(text);\n\n    window.open(url, text);\n}\n\n// ==================== VLOOK UI 模块 ==================== //\n\n/**\n * 加载欢迎页资源\n */\nfunction VLOOKui_loadWelcomePage() {\n    let ui = '',\n        // defalutContent = '<div>Don\\'t worry, the best will always appear in the most casual time.</div>'\n        //     + '<div>不要著急，最好的總會在最不經意的時候出現。</div>'\n        //     + '<div>Keine Sorge, das Beste wird immer in der ungezwungensten Zeit erscheinen.</div>'\n        //     + '<div>心配しないで、最高のものが常に最もカジュアルな時間に表示されます。</div>'\n        //     + '<div>No te preocupes, lo mejor siempre aparecerá en el momento más casual.</div>'\n        //     + '<div>걱정하지 마세요. 최고는 항상 가장 캐주얼 한 시간에 나타납니다.</div>'\n        //     + '<div>Ne vous inquiétez pas, le meilleur apparaîtra toujours au moment le plus décontracté.</div>'\n        //     + '<div>Не волнуйтесь, лучшее всегда будет появляться в самое случайное время.<br><br>:</div>',\n        title = V_util_getDocTitle(),\n        date = V_util_getMetaByName(\"date\"),\n        author = V_util_getMetaByName(\"author\"),\n        defalutContent = (title !== gUndefined ? \"<div>\" + title + \"</div>\" : \"\")\n            + (date !== gUndefined ? \"<div class='v-date'>( \" + date + \" )</div>\" : \"\")\n            + (author !== gUndefined ? \"<div class='v-author'>\" + author + \"</div>\" : \"\"),\n        metaContent = V_util_getMetaByName(\"vlook-welcome\");\n\n    // 无指定欢迎页内容，则使用默认内容\n    if (metaContent === gUndefined)\n        metaContent = defalutContent;\n    metaContent += s_Br + s_Br;\n    // --------------------------------------------------\n    // 欢迎页\n    ui += '<div class=\"v-welcome-page\">'\n            // 文档专属图标\n            + '<div class=\"v-doc-logo-light\"></div><div class=\"v-doc-logo-dark\"></div>'\n            // 欢迎信息\n            + '<div class=\"v-tips\">'\n                + metaContent.x()\n            + '</div>'\n            // 文档加载进度及进入按钮\n            + '<div class=\"v-loading\">Loading...</div>'\n        + '</div>';\n    return ui;\n}\n\n/**\n * 加载图标集资源\n */\nfunction VLOOKui_loadIconSet() {\n    let ui = '<svg style=\"display: none;\">';\n        // SVG 图标集：图标|VLOOK LOGO\n    ui += '<symbol id=\"icoVLOOK\">'\n        + '<path d=\"M17.15 0c2.382 0 3.245.248 4.116.714a4.856 4.856 0 0 1 2.02 2.02c.466.87.714 1.734.714 4.116v10.3c0 2.382-.248 3.245-.714 4.116a4.856 4.856 0 0 1-2.02 2.02c-.87.466-1.734.714-4.116.714H6.85c-2.382 0-3.245-.248-4.116-.714a4.856 4.856 0 0 1-2.02-2.02C.248 20.396 0 19.532 0 17.15V6.85c0-2.382.248-3.245.714-4.116a4.856 4.856 0 0 1 2.02-2.02C3.604.248 4.468 0 6.85 0h10.3zm-4.935 16.976a.26.26 0 0 0-.334 0l-.956.795a.26.26 0 0 0-.05.345l.956 1.432a.26.26 0 0 0 .434 0l.956-1.432a.26.26 0 0 0-.05-.345zM7.27 9.292a4.34 4.34 0 0 0-4.343 4.336 4.34 4.34 0 0 0 4.343 4.336 4.34 4.34 0 0 0 4.343-4.336A4.34 4.34 0 0 0 7.27 9.292zm9.554 0a4.34 4.34 0 0 0-4.343 4.336 4.34 4.34 0 0 0 4.343 4.336 4.34 4.34 0 0 0 4.343-4.336 4.34 4.34 0 0 0-4.343-4.336zm-9.554 1.3a3.038 3.038 0 0 1 3.04 3.036 3.038 3.038 0 0 1-3.04 3.035 3.038 3.038 0 0 1-3.04-3.035 3.038 3.038 0 0 1 3.04-3.035zm9.554 0a3.038 3.038 0 0 1 3.04 3.036 3.038 3.038 0 0 1-3.04 3.035 3.038 3.038 0 0 1-3.04-3.035 3.038 3.038 0 0 1 3.04-3.035zm2.883-5.174a.652.652 0 0 0-.853-.32l-.013.005-6.795 2.83-6.793-2.83-.014-.006a.65.65 0 1 0-.537 1.185l7.035 2.931.014.006c.097.043.2.06.299.055a.649.649 0 0 0 .293-.055l.014-.006 7.035-2.93.084-.048a.65.65 0 0 0 .23-.817z\" fill=\"#FFF\" fill-rule=\"evenodd\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|导航中心\n        + '<symbol id=\"icoNavCenter\">'\n        + '<path d=\"M10 0c5.518 0 10 4.482 10 10s-4.482 10-10 10S0 15.518 0 10 4.482 0 10 0zM4.286 4.286c.16.16 3.464 7.946 3.464 7.946s7.786 3.304 7.946 3.464c.09 0-3.482-7.946-3.482-7.946S4.125 4.125 4.286 4.286zm8.518 8.535c-.304-.66-1.25-3.071-1.572-3.803l-2.125 2.107c.59.268 3.572 1.643 3.697 1.696z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|导航中心分段控制|目录索引\n        + '<symbol id=\"icoTocTabCatalog\">'\n        + '<path d=\"M13.5 1A2.5 2.5 0 0 1 16 3.5v9a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 0 12.5v-9A2.5 2.5 0 0 1 2.5 1h11zm0 1h-11A1.5 1.5 0 0 0 1 3.5v9A1.5 1.5 0 0 0 2.5 14h11a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 13.5 2z\"/><rect x=\"5\" y=\"3.5\" width=\"9\" height=\"2\" rx=\"1\"/><rect x=\"2\" y=\"3.5\" width=\"2\" height=\"2\" rx=\"1\"/><rect x=\"8\" y=\"7\" width=\"6\" height=\"2\" rx=\"1\"/><rect x=\"5\" y=\"7\" width=\"2\" height=\"2\" rx=\"1\"/><rect x=\"8\" y=\"10.5\" width=\"6\" height=\"2\" rx=\"1\"/>'\n        + '<rect x=\"5\" y=\"10.5\" width=\"2\" height=\"2\" rx=\"1\"/>'\n        + '</symbol>'\n        + '<symbol id=\"icoTocTabCatalog-checked\">'\n        + '<path d=\"M13.5 1A2.5 2.5 0 0 1 16 3.5v9a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 0 12.5v-9A2.5 2.5 0 0 1 2.5 1h11zm-.5 9.5H9a1 1 0 0 0 0 2h4a1 1 0 0 0 0-2zm-7 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2zM13 7H9a1 1 0 1 0 0 2h4a1 1 0 0 0 0-2zM6 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm7-3.5H6a1 1 0 1 0 0 2h7a1 1 0 0 0 0-2zm-10 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|导航中心分段控制|插图索引\n        + '<symbol id=\"icoTocTabFigure\">'\n        + '<path d=\"M13.5 1A2.5 2.5 0 0 1 16 3.5v9a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 0 12.5v-9A2.5 2.5 0 0 1 2.5 1h11zm0 1h-11A1.5 1.5 0 0 0 1 3.5v9A1.5 1.5 0 0 0 2.5 14h11a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 13.5 2z\"/>'\n        + '<path d=\"M2.596 11.294l1.86-3.21a1 1 0 0 1 1.655-.112l1.821 2.343a1 1 0 0 0 1.34.221l1.567-1.034a1 1 0 0 1 1.331.21l1.188 1.483a.8.8 0 0 1-.624 1.3H3.288a.8.8 0 0 1-.692-1.201z\"/>'\n        + '<circle cx=\"10\" cy=\"6\" r=\"2\"/>'\n        + '</symbol>'\n        + '<symbol id=\"icoTocTabFigure-checked\">'\n        + '<path d=\"M13.5 1A2.5 2.5 0 0 1 16 3.5v9a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 0 12.5v-9A2.5 2.5 0 0 1 2.5 1h11zM5.823 7.72a1 1 0 0 0-1.367.364l-1.86 3.21a.8.8 0 0 0 .692 1.201h9.446a.8.8 0 0 0 .624-1.3L12.17 9.712a1 1 0 0 0-1.331-.21l-1.567 1.034a1 1 0 0 1-1.34-.221L6.111 7.972a1 1 0 0 0-.288-.252zM10 4a2 2 0 1 0 0 4 2 2 0 0 0 0-4z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|导航中心分段控制|表格索引\n        + '<symbol id=\"icoTocTabTable\">'\n        + '<path d=\"M13.286 1H2.714A2.717 2.717 0 0 0 0 3.714v8.57A2.718 2.718 0 0 0 2.714 15h10.572A2.717 2.717 0 0 0 16 12.285V3.714A2.716 2.716 0 0 0 13.286 1zM1.2 6.508h6.298v2.986H1.2V6.508zM2.714 2.2h4.783v3.108H1.2V3.714c0-.836.68-1.514 1.514-1.514zm4.784 8.494V13.8H2.714A1.517 1.517 0 0 1 1.2 12.285v-1.591h6.298zm7.302 0v1.59c0 .837-.678 1.515-1.514 1.516H8.49v-3.106h6.31zm0-4.186v2.986H8.49V6.508h6.31zM13.286 2.2c.835 0 1.514.678 1.514 1.514v1.594H8.49V2.2h4.796z\"/>'\n        + '</symbol>'\n        + '<symbol id=\"icoTocTabTable-checked\">'\n        + '<path d=\"M7.5 11v4H2.714A2.718 2.718 0 0 1 0 12.285V11h7.5zm8.5 0v1.285A2.717 2.717 0 0 1 13.286 15H8.5v-4H16zM7.5 6.199V9.8H0V6.2l7.5-.001zM16 6.2v3.6H8.5V6.199L16 6.2zM13.286 1A2.716 2.716 0 0 1 16 3.714V5l-7.5-.001V1zM7.5 4.999L0 5V3.714A2.717 2.717 0 0 1 2.714 1H7.5v3.999z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|导航中心分段控制|多媒体索引\n        + '<symbol id=\"icoTocTabMedia\">'\n        + '<path d=\"M9.748 8.4l-2.667 2a.503.503 0 0 1-.7-.1.495.495 0 0 1-.1-.3V6a.5.5 0 0 1 .8-.4l2.667 2a.499.499 0 0 1 0 .8zM2 1h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3c0-1.105.897-2 2-2zm10 1.001H4v12h8v-12zM1 5.001h2V2h-.998a1 1 0 0 0-1 1v2h-.002zM15 5V3a1 1 0 0 0-1-1h-.998v3h1.998zM1 10.999v2a1 1 0 0 0 1 1h.998v-3H1.001zm0-.999h2V6h-2v4zM15 11h-2v2.999h.998a1 1 0 0 0 1-1v-2h.002zm0-1V6h-2v4h2z\"/>'\n        + '</symbol>'\n        + '<symbol id=\"icoTocTabMedia-checked\">'\n        + '<path d=\"M3 11v4H2a2 2 0 0 1-2-2v-2h3zM14 1a2 2 0 0 1 2 2v2h-3V1h1zm-1 10h3v2a2 2 0 0 1-2 2h-1v-4zM6.78 5.5a.5.5 0 0 0-.499.5v4a.503.503 0 0 0 .8.4l2.667-2a.499.499 0 0 0 0-.8l-2.667-2a.515.515 0 0 0-.3-.1zM13 6h3v4h-3V6zM3 6v4H0V6h3zm0-5v4H0V3c0-1.105.897-2 2-2h1zm9 14H4V1h8v14z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|导航中心分段控制|代码块索引\n        + '<symbol id=\"icoTocTabCodeblock\">'\n        + '<path d=\"M13.333 1A2.667 2.667 0 0 1 16 3.667v8.666A2.667 2.667 0 0 1 13.333 15H2.667A2.667 2.667 0 0 1 0 12.333V3.667A2.667 2.667 0 0 1 2.667 1h10.666zm.164 1H2.503c-.733 0-1.445.673-1.5 1.41L1 3.514v8.97c0 .739.667 1.456 1.398 1.511l.105.004h10.994c.733 0 1.445-.673 1.5-1.41l.003-.105v-8.97c0-.739-.667-1.456-1.398-1.511L13.497 2zM9.701 3.817l-.02.076-2.08 8.642a.667.667 0 0 1-1.287-.342l.02-.075 2.08-8.643a.667.667 0 0 1 1.287.342zM5.396 5.768l-.047.07-1.61 2.147L5.35 10.13a.667.667 0 0 1-.07.88l-.063.054a.667.667 0 0 1-.88-.069l-.054-.064-1.91-2.547a.667.667 0 0 1-.048-.726l.048-.074 1.91-2.546a.667.667 0 0 1 1.113.729zm6.267-.793l.054.063 1.91 2.547.048.073a.667.667 0 0 1 0 .653l-.048.074-1.91 2.546-.054.065a.667.667 0 0 1-.809.115l-.07-.046-.064-.054a.667.667 0 0 1-.116-.809l.047-.07 1.61-2.147-1.61-2.147-.047-.07a.667.667 0 0 1 1.059-.793z\"/>'\n        + '</symbol>'\n        + '<symbol id=\"icoTocTabCodeblock-checked\">'\n        + '<path d=\"M13.333 1A2.667 2.667 0 0 1 16 3.667v8.666A2.667 2.667 0 0 1 13.333 15H2.667A2.667 2.667 0 0 1 0 12.333V3.667A2.667 2.667 0 0 1 2.667 1h10.666zM9.256 3.05a.667.667 0 0 0-.842.425l-2.08 8.643-.02.075a.667.667 0 0 0 1.287.342l2.08-8.642.02-.076a.667.667 0 0 0-.445-.766zM4.827 4.773l-.105.007a.667.667 0 0 0-.439.26l-1.91 2.546-.048.074c-.13.23-.11.515.048.726l1.91 2.547.054.064c.234.241.611.27.88.069l.063-.054a.667.667 0 0 0 .07-.88L3.74 7.985l1.61-2.147.046-.07a.666.666 0 0 0-.674-.99zm6.836.203a.666.666 0 0 0-1.059.793l.047.07 1.61 2.147-1.61 2.147-.047.07a.667.667 0 0 0 .116.81l.064.053.07.046c.264.15.597.103.809-.115l.054-.065 1.91-2.546.048-.074a.667.667 0 0 0 0-.653l-.048-.073-1.91-2.547z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|导航中心分段控制|访问史\n        + '<symbol id=\"icoTocTabHistory\">'\n        + '<path d=\"M8 0c4.411 0 8 3.589 8 8s-3.589 8-8 8-8-3.589-8-8 3.589-8 8-8zm0 1C4.142 1 1 4.142 1 8s3.142 7 7 7 7-3.142 7-7-3.142-7-7-7zm.695 1.77v5.2l2.394 2.544c.28.298.27.764-.02 1.05l-.012.013a.752.752 0 0 1-1.05-.02l-.013-.012-2.599-2.76a.752.752 0 0 1-.204-.497V2.786a.752.752 0 0 1 1.504-.016z\"/>'\n        + '</symbol>'\n        + '<symbol id=\"icoTocTabHistory-checked\">'\n        + '<path d=\"M8 0c4.411 0 8 3.589 8 8s-3.589 8-8 8-8-3.589-8-8 3.589-8 8-8zm-.057 2.034a.752.752 0 0 0-.752.752v5.502a.752.752 0 0 0 .204.496l2.599 2.76.012.014c.286.29.753.3 1.05.019l.014-.013c.29-.286.3-.752.019-1.05L8.695 7.97v-5.2a.752.752 0 0 0-.752-.736z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|检索\n        + '<symbol id=\"icoRetrieval\">'\n        + '<path d=\"M14.999 14.596a1.375 1.375 0 0 1-1.953 0L11.46 12.94a6.372 6.372 0 0 1-3.466 1.032c-3.559 0-6.444-2.904-6.444-6.486S4.435 1 7.994 1c3.56 0 6.445 2.904 6.445 6.486a6.47 6.47 0 0 1-1.026 3.488l1.586 1.656c.54.543.54 1.423 0 1.966zM7.993 2.32c-2.834 0-5.132 2.313-5.132 5.166s2.298 5.165 5.132 5.165c2.835 0 5.133-2.312 5.133-5.165s-2.298-5.166-5.133-5.166z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|向左关闭\n        + '<symbol id=\"icoCloseTo-left\">'\n        + '<path d=\"M13.98.176l.035.013c1.506.534 2.311 2.123 1.86 3.607L6.21 30l9.61 26.04c.546 1.475-.186 3.097-1.64 3.707l-.2.077c-1.502.532-3.154-.18-3.781-1.597l-.065-.16L.315 31.916a5.987 5.987 0 0 1 0-3.832l9.818-26.151C10.702.41 12.422-.375 13.979.176z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|向右关闭\n        + '<symbol id=\"icoCloseTo-right\">'\n        + '<path d=\"M2.02.176L1.986.19C.479.723-.326 2.312.125 3.796L9.79 30 .181 56.04c-.546 1.475.186 3.097 1.64 3.707l.2.077c1.502.532 3.154-.18 3.781-1.597l.065-.16 9.818-26.151a5.987 5.987 0 0 0 0-3.832L5.867 1.933C5.298.41 3.578-.375 2.021.176z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|向下关闭\n        + '<symbol id=\"icoCloseTo-bottom\">'\n        + '<path d=\"M.176 2.02l.013-.035C.723.479 2.312-.326 3.796.125L30 9.79 56.04.181c1.475-.546 3.097.186 3.707 1.64l.077.2c.532 1.502-.18 3.154-1.597 3.781l-.16.065-26.151 9.818a5.987 5.987 0 0 1-3.832 0L1.933 5.867C.41 5.298-.375 3.578.176 2.021z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|插图导航的上一张\n        + '<symbol id=\"icoPrevFig\">'\n        + '<path d=\"M11.03.091c.765.284 1.159 1.147.88 1.927L3.002 27l8.91 24.982a1.516 1.516 0 0 1-.75 1.87l-.13.057a1.462 1.462 0 0 1-1.834-.765l-.055-.134L.12 27.705C.112 27.685 0 27.435 0 27c0-.435.111-.684.12-.706L9.141.99A1.465 1.465 0 0 1 11.03.09z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|插图导航的下一张\n        + '<symbol id=\"icoNextFig\">'\n        + '<path d=\"M.97.091C.205.375-.19 1.238.09 2.018L8.998 27 .089 51.982a1.516 1.516 0 0 0 .75 1.87l.13.057c.72.267 1.511-.073 1.834-.765l.055-.134 9.023-25.305c.007-.02.119-.27.119-.705 0-.435-.111-.684-.12-.706L2.859.99A1.465 1.465 0 0 0 .97.09z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|逐章导航的上一章'\n        + '<symbol id=\"icoPrevChapter\">'\n        + '<path d=\"M7.364.293a1 1 0 0 1 0 1.414l-4.97 4.969 4.974 4.974a1 1 0 0 1-1.415 1.414L.296 7.407a.996.996 0 0 1-.291-.658.995.995 0 0 1 .288-.8L5.95.294a1 1 0 0 1 1.414 0z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|逐章导航的下一章\n        + '<symbol id=\"icoNextChapter\">'\n        + '<path d=\"M.296.293a1 1 0 0 0 0 1.414l4.97 4.969L.293 11.65a1 1 0 0 0 1.414 1.414l5.657-5.657a.996.996 0 0 0 .292-.658.995.995 0 0 0-.288-.8L1.71.294a1 1 0 0 0-1.415 0z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|已收起的 目录节点\n        + '<symbol id=\"icoTocFolded\">'\n        + '<path d=\"M11.614 8.72L7.37 12.961a1 1 0 0 1-1.414-1.414l3.542-3.543-3.542-3.543A1 1 0 1 1 7.37 3.048l4.243 4.243a.997.997 0 0 1 .293.707v.014a.997.997 0 0 1-.293.707z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|已展开的 目录节点\n        + '<symbol id=\"icoTocUnfold\">'\n        + '<path d=\"M7.29 11.614L3.049 7.37a1 1 0 1 1 1.414-1.414l3.543 3.542 3.543-3.542a1 1 0 0 1 1.414 1.414l-4.243 4.243a.997.997 0 0 1-.707.293h-.014a.997.997 0 0 1-.707-.293z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|已收起的 引用折叠 / 表格折叠行节点\n        + '<symbol id=\"icoFolded\">'\n        + '<path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm-.336 3.757A1 1 0 1 0 6.25 5.172l2.835 2.835-2.835 2.836a1 1 0 1 0 1.414 1.414l3.535-3.536a.997.997 0 0 0 .293-.707V8a.997.997 0 0 0-.293-.707z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|已展开的 引用折叠 / 表格折叠行节点\n        + '<symbol id=\"icoUnfold\">'\n        + '<path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm0 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1z\"/><path d=\"M7.243 11.25L3.707 7.714A1 1 0 1 1 5.121 6.3l2.836 2.836L10.792 6.3a1 1 0 1 1 1.415 1.414L8.67 11.25a.997.997 0 0 1-.707.293H7.95a.997.997 0 0 1-.707-.293z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|展开长内容\n        + '<symbol id=\"icoExtend\">'\n        + '<path d=\"M5.05 6.364A1 1 0 0 1 6.464 4.95L10 8.485l3.536-3.535a1 1 0 1 1 1.414 1.414l-4.243 4.243a1 1 0 0 1-1.414 0L5.05 6.364z\"/><path d=\"M5.05 12.364a1 1 0 0 1 1.414-1.414L10 14.485l3.536-3.535a1 1 0 1 1 1.414 1.414l-4.243 4.243a1 1 0 0 1-1.414 0L5.05 12.364z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|关闭\n        + '<symbol id=\"icoClose\">'\n        + '<path d=\"M7,7 L7,-1 C7,-1.55228475 7.44771525,-2 8,-2 C8.55228475,-2 9,-1.55228475 9,-1 L9,7 L17,7 C17.5522847,7 18,7.44771525 18,8 C18,8.55228475 17.5522847,9 17,9 L9,9 L9,17 C9,17.5522847 8.55228475,18 8,18 C7.44771525,18 7,17.5522847 7,17 L7,9 L-1,9 C-1.55228475,9 -2,8.55228475 -2,8 C-2,7.44771525 -1.55228475,7 -1,7 L7,7 Z\" transform=\"translate(8.000000, 8.000000) rotate(45.000000) translate(-8.000000, -8.000000) \"></path>'\n        + '</symbol>'\n        // SVG 图标集：图标|清空输入\n        + '<symbol id=\"icoResetInput\">'\n        + '<path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM5.737 4.606a.8.8 0 0 0-1.131 1.131L6.869 8l-2.263 2.263a.8.8 0 1 0 1.131 1.131L8 9.131l2.263 2.263a.8.8 0 1 0 1.131-1.131L9.131 8l2.263-2.263a.8.8 0 1 0-1.131-1.131L8 6.869z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|亮色模式\n        + '<symbol id=\"icoLightMode\">'\n        + '<path d=\"M10 17a1 1 0 0 1 1 1v1a1 1 0 0 1-2 0v-1a1 1 0 0 1 1-1zm6.364-2.05l.707.707a1 1 0 0 1-1.414 1.414l-.707-.707a1 1 0 1 1 1.414-1.414zm-11.314 0a1 1 0 0 1 0 1.414l-.707.707a1 1 0 1 1-1.414-1.414l.707-.707a1 1 0 0 1 1.414 0zM10 4a6 6 0 1 1 0 12 6 6 0 0 1 0-12zm9 5a1 1 0 0 1 0 2h-1a1 1 0 0 1 0-2h1zM2 9a1 1 0 0 1 0 2H1a1 1 0 0 1 0-2h1zm15.071-6.071a1 1 0 0 1 0 1.414l-.707.707a1 1 0 1 1-1.414-1.414l.707-.707a1 1 0 0 1 1.414 0zm-12.728 0l.707.707A1 1 0 1 1 3.636 5.05l-.707-.707A1 1 0 0 1 4.343 2.93zM10 0a1 1 0 0 1 1 1v1a1 1 0 0 1-2 0V1a1 1 0 0 1 1-1z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|深色模式\n        + '<symbol id=\"icoDarkMode\">'\n        + '<path d=\"M11.338 0C15.176 1.107 18 4.605 18 8.8c0 5.08-4.117 9.2-9.198 9.2C4.607 18 1.107 15.174 0 11.338c1.226.705 2.628 1.14 4.144 1.14a8.336 8.336 0 0 0 8.336-8.336c0-1.516-.435-2.919-1.142-4.142zM4.743 5.243l.83 2.106a1 1 0 0 0 .564.563l2.106.83-2.106.831a1 1 0 0 0-.564.564l-.83 2.106-.831-2.106a1 1 0 0 0-.563-.564l-2.106-.83 2.106-.831a1 1 0 0 0 .563-.563l.83-2.106zM8.828.828l.69 1.748a1 1 0 0 0 .563.563l1.747.69-1.747.689a1 1 0 0 0-.563.563l-.69 1.747-.689-1.747a1 1 0 0 0-.563-.563l-1.748-.69 1.748-.689a1 1 0 0 0 .563-.563L8.83.828zm-5.5 0l.548 1.39a1 1 0 0 0 .564.563l1.388.547-1.388.548a1 1 0 0 0-.564.564l-.548 1.388-.547-1.388a1 1 0 0 0-.564-.564L.828 3.328l1.39-.547a1 1 0 0 0 .563-.564L3.328.828z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|聚光灯\n        + '<symbol id=\"icoSpotlight\">'\n        + '<path d=\"M7 0a7 7 0 0 1 6.992 6.67A7.002 7.002 0 0 1 11 20a7 7 0 0 1-6.992-6.67A7.002 7.002 0 0 1 7 0zm4 6a7 7 0 0 0-6.992 7.33 7 7 0 0 0 9.985-6.662A6.984 6.984 0 0 0 11 6.001z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|激光笔\n        + '<symbol id=\"icoLaserPointer\">'\n        + '<path d=\"M10.951 5.006L12.04 6.57l5.306 7.63a3.662 3.662 0 0 1-.89 5.074l-.096.067a3.602 3.602 0 0 1-1.829.65l-.218.009a3.615 3.615 0 0 1-2.991-1.553L4.929 9.253a3.662 3.662 0 0 1 .887-5.075l.098-.067a3.602 3.602 0 0 1 5.037.895zm-3.853.504l-.147.094v-.002l-.097.07a1.83 1.83 0 0 0-.538 2.387l.094.148 1.088 1.565 3.06-2.158L9.47 6.051a1.801 1.801 0 0 0-2.372-.541zm-6.012.836l1.102.125a.862.862 0 0 1 .595.343c.143.192.2.435.159.672a.98.98 0 0 1-1.072.807L.767 8.168a.862.862 0 0 1-.595-.343.874.874 0 0 1-.16-.67v-.002a.98.98 0 0 1 1.074-.807zM4.608.696l.78 1.12A.93.93 0 0 1 5.15 3.09a.916.916 0 0 1-1.27-.213L3.1 1.757A.93.93 0 0 1 3.328.468h-.001a.916.916 0 0 1 1.28.228zm5.91-.681c.237.042.446.18.58.38.134.201.18.448.129.685l-.222 1.023a.957.957 0 0 1-1.102.743.882.882 0 0 1-.579-.38.893.893 0 0 1-.13-.684L9.418.76a.957.957 0 0 1 1.101-.744z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|段落导航\n        + '<symbol id=\"icoParagraphNav\">'\n        + '<path d=\"M3.698 17.714v-5.036A.68.68 0 0 0 3.02 12a.68.68 0 0 0-.678.678v5.047L1.155 16.54a.689.689 0 0 0-.96 0c-.26.26-.26.69 0 .96l2.294 2.294a.67.67 0 0 0 .474.204h.068a.65.65 0 0 0 .475-.204L5.799 17.5c.26-.26.26-.689 0-.96-.237-.271-.666-.271-.926 0l-1.175 1.175zm0-15.432V7.32a.68.68 0 0 1-.678.678.68.68 0 0 1-.678-.678V2.27L1.155 3.458c-.26.26-.689.26-.96 0a.689.689 0 0 1 0-.96L2.489.202A.67.67 0 0 1 2.963 0h.068c.17 0 .35.068.475.203l2.293 2.294c.26.26.26.69 0 .96-.237.272-.666.272-.926 0L3.698 2.283zM8 9h11a1 1 0 0 1 0 2H8a1 1 0 0 1 0-2zm0 3.5h7a1 1 0 0 1 0 2H8a1 1 0 0 1 0-2zM8 16h11a1 1 0 0 1 0 2H8a1 1 0 0 1 0-2zM8 5.5h7a1 1 0 0 1 0 2H8a1 1 0 0 1 0-2zM8 2h11a1 1 0 0 1 0 2H8a1 1 0 0 1 0-2z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|字体风格\n        + '<symbol id=\"icoFont\">'\n        + '<path d=\"M13.576 0l6.048 2.73a.5.5 0 0 1 .28.57l-.978 4.134a1 1 0 0 1-1.224.737l-1.093-.283.391 9.065a1 1 0 0 1-.999 1.043H4.022a1 1 0 0 1-1-1.04l.369-9.068-1.093.283a1 1 0 0 1-1.224-.737L.095 3.3a.5.5 0 0 1 .28-.571L6.425 0c.417 1.178 1.926 1.92 3.603 1.92 1.677 0 3.131-.742 3.55-1.92zm.76 15h-9a.5.5 0 0 0 0 1h9a.5.5 0 1 0 0-1zm0-2h-9a.5.5 0 0 0 0 1h9a.5.5 0 1 0 0-1zM10.17 4h-.675a1 1 0 0 0-.905.573L5.513 11.08a.644.644 0 0 0 .582.919h.38a1 1 0 0 0 .906-.578l.604-1.299h3.703l.566 1.28a1 1 0 0 0 .914.597h.391a.659.659 0 0 0 .595-.941L11.073 4.57A1 1 0 0 0 10.169 4zm-.333 1.813l1.308 2.967h-2.59l1.282-2.967z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|打印\n        + '<symbol id=\"icoPrint\">'\n        + '<path d=\"M15 0a2 2 0 0 1 2 2v4h1a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h1V2a2 2 0 0 1 2-2h10zm1 13H4v4a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-4zm-2 2v1H6v-1h8zm3.5-7h-1a.5.5 0 1 0 0 1h1a.5.5 0 1 0 0-1zm-3.372 0a.5.5 0 1 0 0 1 .5.5 0 0 0 0-1zM15 1H5a1 1 0 0 0-1 1v4h12V2a1 1 0 0 0-.883-.993L15 1z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|插图浏览器中打开\n        + '<symbol id=\"icoOpenInFigureNav\">'\n        + '<path d=\"M13 0a3 3 0 0 1 3 3v8a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V3a3 3 0 0 1 3-3h10zm.25 6.5a.75.75 0 0 0-.75.75v2.996l-.007.057a.25.25 0 0 1-.244.193H9.25l-.102.006a.75.75 0 0 0 .102 1.494h3l.143-.006A1.75 1.75 0 0 0 14 10.246V7.25l-.007-.102a.75.75 0 0 0-.743-.648zM6.748 2H3.75l-.144.006A1.75 1.75 0 0 0 2 3.75v2.996l.007.101A.75.75 0 0 0 3.5 6.746V3.75l.007-.057A.25.25 0 0 1 3.75 3.5h2.998l.101-.007A.75.75 0 0 0 6.748 2z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|表格阅读模式（十字光标）\n        + '<symbol id=\"icoTableCross\">'\n        + '<path d=\"M13.6 0A2.4 2.4 0 0 1 16 2.4v9.2a2.4 2.4 0 0 1-2.4 2.4H2.4A2.4 2.4 0 0 1 0 11.6V2.4A2.4 2.4 0 0 1 2.4 0h11.2zM11 1H5v4.5A1.5 1.5 0 0 1 3.5 7H1v3h2.5A1.5 1.5 0 0 1 5 11.5V13h6v-1.5a1.5 1.5 0 0 1 1.5-1.5H15V7h-2.5A1.5 1.5 0 0 1 11 5.5V1zM9.5 6A1.5 1.5 0 0 1 11 7.5v2A1.5 1.5 0 0 1 9.5 11h-3A1.5 1.5 0 0 1 5 9.5v-2A1.5 1.5 0 0 1 6.5 6h3zm-.167 1H6.667a.667.667 0 0 0-.66.568L6 7.667v1.666c0 .335.247.612.568.66l.099.007h2.666a.667.667 0 0 0 .66-.568L10 9.333V7.667A.667.667 0 0 0 9.333 7z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|画中画\n        + '<symbol id=\"icoPicInPic\">'\n        + '<path d=\"M14 7a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h4zm-2-7a3 3 0 0 1 3 3v3h-1V3a2 2 0 0 0-1.85-1.995L12 1H3a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h4v1H3a3 3 0 0 1-3-3V3a3 3 0 0 1 3-3h9zM2.663 2.663a.556.556 0 0 1 .786 0l2.94 2.909V3.61a.556.556 0 1 1 1.111 0v3.334a.556.556 0 0 1-.556.556H3.611a.556.556 0 0 1 0-1.111h2.023l-2.971-2.94a.556.556 0 0 1 0-.786z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|画中画的放大模式\n        + '<symbol id=\"icoZoomIn\">'\n        + '<path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm3.5 6.75a.75.75 0 0 0-.75.75v2.996l-.007.057a.25.25 0 0 1-.244.193H7.5l-.102.006a.75.75 0 0 0 .102 1.494h3l.143-.006a1.75 1.75 0 0 0 1.607-1.744V7.5l-.007-.102a.75.75 0 0 0-.743-.648zm-3.002-3H5.5l-.144.006A1.75 1.75 0 0 0 3.75 5.5v2.996l.007.101a.75.75 0 0 0 1.493-.101V5.5l.007-.057A.25.25 0 0 1 5.5 5.25h2.998l.101-.007a.75.75 0 0 0-.101-1.493z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|画中画的缩小模式\n        + '<symbol id=\"icoZoomOut\">'\n        + '<path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm4.998 8.25H10l-.144.006A1.75 1.75 0 0 0 8.25 10v2.996l.007.101a.75.75 0 0 0 1.493-.101V10l.007-.057A.25.25 0 0 1 10 9.75h2.998l.101-.007a.75.75 0 0 0-.101-1.493zM7 2.25a.75.75 0 0 0-.75.75v2.996l-.007.057a.25.25 0 0 1-.244.193H3l-.102.006A.75.75 0 0 0 3 7.746h3l.143-.006A1.75 1.75 0 0 0 7.75 5.996V3l-.007-.102A.75.75 0 0 0 7 2.25z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|复制\n        + '<symbol id=\"icoCopy\">'\n        + '<path d=\"M14.15 0A1.851 1.851 0 0 1 16 1.849V12.15A1.851 1.851 0 0 1 14.15 14H11.6v.151A1.85 1.85 0 0 1 9.751 16H1.85A1.85 1.85 0 0 1 0 14.151V3.85A1.85 1.85 0 0 1 1.849 2H4.4v-.151A1.851 1.851 0 0 1 6.25 0h7.9zM1.85 14.8h7.9a.65.65 0 0 0 .65-.649V3.85a.65.65 0 0 0-.649-.649H1.85a.65.65 0 0 0-.649.649V14.15a.65.65 0 0 0 .65.649zM8.2 5.6a.6.6 0 0 1 0 1.2H3.4a.6.6 0 0 1 0-1.2h4.8zm0 2.8a.6.6 0 0 1 0 1.2H3.4a.6.6 0 0 1 0-1.2h4.8zm-1.6 2.8a.6.6 0 0 1 0 1.2H3.4a.6.6 0 1 1 0-1.2h3.2z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|复制 as Markdown\n        + '<symbol id=\"icoCopyAsMd\">'\n        + '<path d=\"M14.15 0A1.851 1.851 0 0 1 16 1.849V12.15A1.851 1.851 0 0 1 14.15 14H11.6v.151A1.85 1.85 0 0 1 9.751 16H1.85A1.85 1.85 0 0 1 0 14.151V3.85A1.85 1.85 0 0 1 1.849 2H4.4v-.151A1.851 1.851 0 0 1 6.25 0h7.9zM9.752 3.2H1.85a.65.65 0 0 0-.649.649V14.15a.65.65 0 0 0 .65.649h7.9a.65.65 0 0 0 .65-.649V3.85a.65.65 0 0 0-.649-.649zM13.897 6h-1.549v2.574H10.8L13.123 11l2.322-2.426h-1.548V6zM4.248 6l1.549 1.838L7.345 6h1.549v5H7.345V8.132L5.797 9.971 4.248 8.132V11H2.7V6h1.548z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|加载中\n        + '<symbol id=\"icoLoading\">'\n        + '<rect x=\"7\" width=\"2\" height=\"4\" rx=\"1\"/><rect transform=\"rotate(45 12.243 3.757)\" x=\"11.243\" y=\"1.757\" width=\"2\" height=\"4\" rx=\"1\"/><rect transform=\"rotate(90 14 8)\" x=\"13\" y=\"6\" width=\"2\" height=\"4\" rx=\"1\"/><rect transform=\"rotate(135 12.243 12.243)\" x=\"11.243\" y=\"10.243\" width=\"2\" height=\"4\" rx=\"1\"/><rect transform=\"rotate(180 8 14)\" x=\"7\" y=\"12\" width=\"2\" height=\"4\" rx=\"1\"/><rect transform=\"rotate(-135 3.757 12.243)\" x=\"2.757\" y=\"10.243\" width=\"2\" height=\"4\" rx=\"1\"/><rect transform=\"rotate(-90 2 8)\" x=\"1\" y=\"6\" width=\"2\" height=\"4\" rx=\"1\"/><rect transform=\"rotate(-45 3.757 3.757)\" x=\"2.757\" y=\"1.757\" width=\"2\" height=\"4\" rx=\"1\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|播放\n        + '<symbol id=\"icoPlay\">'\n        + '<path d=\"M14.133 9.605l-7.86 6.028c-.93.633-2.223.427-2.887-.459A1.909 1.909 0 0 1 3 14.028V1.972C3 .882 3.927 0 5.07 0c.432 0 .852.128 1.203.367l7.86 6.028c.93.633 1.146 1.865.481 2.751a2.024 2.024 0 0 1-.481.459z\"/><path fill=\"none\" d=\"M0 0h16v16H0z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|暂停\n        + '<symbol id=\"icoPause\">'\n        + '<path d=\"M3 2h1a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm9 0h1a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z\"/><path fill=\"none\" d=\"M0 0h16v16H0z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|停止\n        + '<symbol id=\"icoStop\">'\n        + '<rect x=\"2\" y=\"2\" width=\"12\" height=\"12\" rx=\"2\"/><path fill=\"none\" d=\"M0 0h16v16H0z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|无法播放\n        + '<symbol id=\"icoForbidden\">'\n        + '<path d=\"M3.11 4.523a6.001 6.001 0 0 0 8.368 8.367L3.11 4.523zM4.522 3.11l8.368 8.367A6 6 0 0 0 4.522 3.11zM8 16A8.001 8.001 0 1 1 8.002.002 8.001 8.001 0 0 1 8 16z\" /><path fill=\"none\" d=\"M0 0h16v16H0z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|复选框（未选择）\n        + '<symbol id=\"icoChkbox_no\">'\n        + '<path d=\"M10 0a4 4 0 0 1 4 4v6a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4h6zm0 1H4l-.205.007a2.99 2.99 0 0 0-1.916.872A2.99 2.99 0 0 0 1 4v6l.007.205a2.99 2.99 0 0 0 .872 1.916A2.99 2.99 0 0 0 4 13h6l.205-.007a2.99 2.99 0 0 0 1.916-.872A2.99 2.99 0 0 0 13 10V4l-.007-.205a2.99 2.99 0 0 0-.872-1.916A2.99 2.99 0 0 0 10 1z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|复选框（已选择）\n        + '<symbol id=\"icoChkbox_yes\">'\n        + '<path d=\"M10 0a4 4 0 0 1 4 4v6a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4h6zm.435 3.36a1 1 0 0 0-1.393.245L5.703 8.372 4.421 7.09a1 1 0 1 0-1.414 1.414l2.121 2.121a1 1 0 0 0 1.225.15l.01-.007.01-.005a.997.997 0 0 0 .292-.277l4.015-5.734a1 1 0 0 0-.245-1.393z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|复选框（不确定选择）\n        + '<symbol id=\"icoChkbox_un\">'\n        + '<path d=\"M10 0a4 4 0 0 1 4 4v6a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4h6zm0 6H4a1 1 0 1 0 0 2h6a1 1 0 0 0 0-2z\" opacity=\".5\"/><path d=\"M10 0a4 4 0 0 1 4 4v6a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4h6zm0 1H4l-.205.007a2.99 2.99 0 0 0-1.916.872A2.99 2.99 0 0 0 1 4v6l.007.205a2.99 2.99 0 0 0 .872 1.916A2.99 2.99 0 0 0 4 13h6l.205-.007a2.99 2.99 0 0 0 1.916-.872A2.99 2.99 0 0 0 13 10V4l-.007-.205a2.99 2.99 0 0 0-.872-1.916A2.99 2.99 0 0 0 10 1z\"/>'\n        + '</symbol>'\n        // SVG 图标集：图标|链接检查结果异常\n        + '<symbol id=\"icoLinkError\">'\n        + '<path d=\"M8 0c.462 0 .887.24 1.11.626l6.73 11.572c.219.375.213.834-.016 1.204-.228.371-.645.598-1.095.598H1.271c-.45 0-.867-.227-1.095-.598a1.166 1.166 0 0 1-.016-1.204L6.89.626A1.28 1.28 0 0 1 8 0zm0 10.361c-.841 0-1.524.652-1.524 1.456 0 .52.29 1 .762 1.26.472.26 1.052.26 1.524 0 .471-.26.762-.74.762-1.26 0-.804-.683-1.456-1.524-1.456zm0-7.278l-.154.005c-.744.047-1.116.45-1.116 1.208v3.64c0 .808.424 1.212 1.27 1.212l.154-.005c.744-.047 1.116-.45 1.116-1.208V4.296c0-.808-.424-1.213-1.27-1.213z\"/>'\n        + '</symbol>'\n        + '</svg>';\n    return ui;\n}\n\n/**\n * 加载顶栏 UI 资源\n */\nfunction VLOOKui_loadTopbar() {\n    let ui = '';\n    // ui += '<div class=\"v-topbar v-focus-search\">';\n    // ==================================================\n    // 页面工具栏\n    ui += '<div class=\"v-toolbar v-focus-search\">'\n            // 导航中心\n            + '<div class=\"v-btn nav-center\">'\n                + V_ui_generateSvgIcon(\"icoNavCenter\", 20, 20, s_Light)\n            + '</div>'\n            // 打印\n            + '<div class=\"v-btn print\">'\n                + V_ui_generateSvgIcon(\"icoPrint\", 20, 19, s_Light)\n            + '</div>'\n            + '<div class=\"v-btn-group prs\">'\n                // 段落导航\n                + '<div ' + s_DataBtnGroup + '=\"prs\" class=\"v-btn paragraph-nav\">'\n                    + V_ui_generateSvgIcon(\"icoParagraphNav\", 20, 20, s_Light)\n                + '</div>'\n                // 聚光灯\n                + '<div ' + s_DataBtnGroup + '=\"prs\" class=\"v-btn spotlight\">'\n                    + V_ui_generateSvgIcon(\"icoSpotlight\", 18, 20, s_Light)\n                + '</div>'\n                // 激光笔\n                + '<div ' + s_DataBtnGroup + '=\"prs\" class=\"v-btn laser-pointer\">'\n                    + V_ui_generateSvgIcon(\"icoLaserPointer\", 18, 20, s_Light)\n                + '</div>'\n            + '</div>'\n            // 分隔符\n            + '<div class=\"v-toolbar-spliter\"></div>'\n            // Light/Dark模式\n            + '<div class=\"v-btn color-scheme\">'\n                + V_ui_generateSvgIcon(\"icoDarkMode\", 18, 18, s_Light)\n            + '</div>'\n            // 字体风格\n            + '<div class=\"v-btn font-theme\">'\n                + V_ui_generateSvgIcon(\"icoFont\", 20, 18, s_Light)\n            + '</div>'\n        + '</div>';\n\n    // ==================================================\n    // 逐章导航栏\n    ui += '<div class=\"v-chapter-nav v-focus-search\">'\n            // 上一章\n            + '<div class=\"v-chapter-nav-prev\">'\n                + V_ui_generateSvgIcon(\"icoPrevChapter\", 10, 15, s_Light, \"position: absolute; top: 18px; left: 15px;\")\n            + '<div class=\"v-chapter-nav-prev-text\"></div>'\n            + '</div>'\n            // 文档标题\n            + '<div class=\"v-chapter-nav-doc-title\">Document title</div>'\n            // 当前章节\n            + '<div class=\"v-chapter-nav-current\"></div>'\n            // 下一章\n            + '<div class=\"v-chapter-nav-next\">'\n                + '<div class=\"v-chapter-nav-next-text\">next</div>'\n                    + V_ui_generateSvgIcon(\"icoNextChapter\", 10, 15, s_Light, \"position: absolute; top: 18px; right: 15px;\")\n            + '</div>'\n        + '</div>';\n\n    // ui += '</div>';\n\n    return ui;\n}\n\n/**\n * 加载导航中心 UI 资源\n */\nfunction VLOOKui_loadNavCenter() {\n    let ui = '';\n    // --------------------------------------------------\n    // 导航中心\n    ui += '<div class=\"v-nav-center v-float-card\">'\n            // --- 导航中心头部 ---\n            + '<div class=\"v-nav-center-header\">'\n                // 关键字搜索\n                + '<div class=\"v-search-by-keyword\"></div>'\n                // 分段控制器组件\n                + '<div class=\"v-segment toc\"></div>'\n            // 访问历史标题\n            + '<div class=\"v-toc-history-title\">访问历史</div>'\n            + '</div>'\n            // --- 导航中心内容区 ---\n            + '<div class=\"v-nav-center-body\">'\n                + '<div class=\"v-toc-catalog-body\" ' + s_DataCatalogEmpty + '=\"( Catalog is Empty )\"></div>'\n                + '<div class=\"v-toc-filter-result catalog\"></div>'\n                + '<div class=\"v-toc-filter-result figure\"></div>'\n                + '<div class=\"v-toc-filter-result table\"></div>'\n                + '<div class=\"v-toc-filter-result media\"></div>'\n                + '<div class=\"v-toc-filter-result codeblock\"></div>'\n                + '<div class=\"v-toc-history-result\"></div>'\n            + '</div>'\n            + '<div class=\"v-nav-center-footer\"></div>'\n            // 文库\n            + '<div class=\"v-doc-lib-board\">'\n                + '<div class=\"item\"></div>'\n                + '<div class=\"flip\"></div>'\n                + '<div class=\"flip\"></div>'\n                + '</div>'\n        + '</div>';\n\n    // --------------------------------------------------\n    // 导航中心收起/展开引导把手\n    ui += '<div class=\"v-toc-handle\"></div>';\n\n    return ui;\n }\n\n/**\n * 加载共用的 UI 资源\n */\nfunction VLOOKui_loadCommon() {\n    let ui = '';\n\n    // --------------------------------------------------\n    // 聚光灯\n    ui += '<div class=\"v-spotlight\"><div></div></div>';\n\n    // --------------------------------------------------\n    // 字体风格选择器\n    ui += '<div class=\"v-font-theme\">'\n            + '<div style=\"display: inline-block; margin: 0 0 30px 0;\">'\n                + '<img alt=\"系统默认\" class=\"v-font-theme-opt-local\" src=\"https://madmaxchow.gitee.io/vlook/pic/fs-local.png\" srcset=\"https://madmaxchow.gitee.io/vlook/pic/fs-local@2x.png 2x\">'\n                + '<div class=\"v-fontinfo-local\"><div class=\"v-font-package\">Font</div><div id=\"fontset-status\">Ready</div></div>'\n            + '</div>'\n            + '<div style=\"display: inline-block; margin: 0 0 30px 10px;\">'\n                + '<img alt=\"小清新\" class=\"v-font-theme-opt-sans\" src=\"https://madmaxchow.gitee.io/vlook/pic/fs-sans.png\" srcset=\"https://madmaxchow.gitee.io/vlook/pic/fs-sans@2x.png 2x\">'\n                + '<div class=\"v-fontinfo-sans\"><div class=\"v-font-package\">Font</div><div id=\"fontset-status\">NOT LOADED</div></div>'\n            + '</div>'\n            + '<div style=\"display: inline-block; margin: 0 0 30px 10px;\">'\n                + '<img alt=\"文艺范\" class=\"v-font-theme-opt-serif\" src=\"https://madmaxchow.gitee.io/vlook/pic/fs-serif.png\" srcset=\"https://madmaxchow.gitee.io/vlook/pic/fs-serif@2x.png 2x\">'\n                + '<div class=\"v-fontinfo-serif\"><div class=\"v-font-package\">Font</div><div id=\"fontset-status\">NOT LOADED</div></div>'\n            + '</div>'\n            + '<div class=\"v-font-theme-info\">Download Font Package</div>'\n        + '</div>';\n\n    // --------------------------------------------------\n    // 插图导航面板\n    ui += '<div class=\"v-fig-nav v-backdrop-blurs\">'\n            + '<div class=\"v-fig-content\"></div>'\n            + '<div class=\"v-fig-nav-title\"></div>'\n            + '<div class=\"v-fig-nav-btns prev\">'\n                + V_ui_generateSvgIcon(\"icoPrevFig\", 12, 54, s_Light)\n            + '</div>'\n            + '<div class=\"v-fig-nav-btns next\">'\n                + V_ui_generateSvgIcon(\"icoNextFig\", 12, 54, s_Light)\n            + '</div>'\n            + '<div class=\"v-btn-close-figure-nav\">'\n                + V_ui_generateSvgIcon(\"icoClose\", 16, 16, s_Light)\n            + '</div>'\n            + V_ui_copyrightInfo()\n        + '</div>';\n\n    // --------------------------------------------------\n    // 脚注弹层\n    ui += '<div class=\"v-foot-note-panel\">'\n            + '<div class=\"v-foot-note-panel-content\"></div>'\n            + '<div class=\"v-foot-note-panel-header\"></div>'\n            + '<div class=\"v-foot-note-panel-all\"><a>查看所有脚注</a></div>'\n            + '<a id=\"vk-footer-area\"></a>'\n        + '</div>';\n\n    // --------------------------------------------------\n    // 复制内容的按钮\n    ui += '<div class=\"v-content-assistor v-float-card\">'\n            + '<div class=\"v-btn assistor copy\">'\n                + V_ui_generateSvgIcon(\"icoCopy\", 16, 16, s_Light)\n            + '</div>'\n            + '<div class=\"v-btn assistor open-in-figure-nav\">'\n                + V_ui_generateSvgIcon(\"icoOpenInFigureNav\", 16, 14, s_Light)\n            + '</div>'\n            + '<div class=\"v-btn assistor table-cross\">'\n                + V_ui_generateSvgIcon(\"icoTableCross\", 16, 14, s_Light)\n            + '</div>'\n            + '<div class=\"v-btn assistor pic-in-pic\">'\n                + V_ui_generateSvgIcon(\"icoPicInPic\", 16, 16, s_Light)\n            + '</div>'\n        + '</div>';\n\n    // --------------------------------------------------\n    // 画中画容器\n    ui += '<div class=\"v-pic-in-pic\">'\n            + '<div class=\"v-pip-btn v-zoom zoom-out v-float-card\">'\n                + V_ui_generateSvgIcon(\"icoZoomIn\", 16, 16, \"theme\")\n            + '</div>'\n            + '<div class=\"v-pip-btn v-close zoom-out v-float-card\">'\n                + V_ui_generateSvgIcon(\"icoResetInput\", 16, 16, \"theme\")\n            + '</div>'\n            + '<div class=\"v-content\">'\n            + '</div>'\n        + '</div>';\n\n    // --------------------------------------------------\n    // 提示信息\n    ui += '<div class=\"v-tool-tips\"></div>'\n        + '<div class=\"v-info-tips v-float-card\"></div>';\n\n    // --------------------------------------------------\n    // 文档更多内容遮罩栏\n    ui += '<div class=\"v-more-doc-content-before cover\"></div>'\n        + '<div class=\"v-more-doc-content-after\"></div>';\n\n    // --------------------------------------------------\n    // 表格阅读模式（十字光标）\n    ui += '<div class=\"v-table-cross left-up\">&nbsp;</div>'\n        + '<div class=\"v-table-cross right-up\">&nbsp;</div>'\n        + '<div class=\"v-table-cross left-down\">&nbsp;</div>'\n        + '<div class=\"v-table-cross right-down\">&nbsp;</div>';\n    // ui += '<div d-direction=\"1\" class=\"v-table-cross left-up\">&nbsp;</div>'\n    //     + '<div d-direction=\"2\" class=\"v-table-cross right-up\">&nbsp;</div>'\n    //     + '<div d-direction=\"3\" class=\"v-table-cross left-down\">&nbsp;</div>'\n    //     + '<div d-direction=\"4\" class=\"v-table-cross right-down\">&nbsp;</div>';\n\n    // --------------------------------------------------\n    // 内容展开操作区\n    ui += '<div class=\"v-content-expander\">'\n            + '<div class=\"v-btn\">'\n            + '<span></span>'\n                + V_ui_generateSvgIcon(\"icoExtend\", 20, 20, s_Light)\n            + '</div>'\n        + '</div>';\n\n    // --------------------------------------------------\n    // 页面坏链检查结果及错误列表\n    ui += '<div class=\"v-link-error-list v-float-card\">'\n            + '<div class=\"v-link-error-list-header\"></div>'\n            + '<div class=\"v-link-error-list-body\"><div class=\"v-link-error-list-items\"></div></div>'\n            + '<div class=\"v-link-error-list-footer\"></div>'\n        + '</div>'\n        + '<div class=\"v-status-bar v-float-card v-backdrop-blurs v-focus-search\">'\n            + '<div class=\"v-doc-info\">- - / - -</div>'\n            + '<div class=\"v-zoom-view\">- Zoom +</div>'\n            + '<div class=\"v-link-chk-result\">'\n                + V_ui_generateSvgIcon(\"icoLoading\", 16, 16, s_Light)\n            + '</div>'\n        + '</div>';\n\n    // --------------------------------------------------\n    //统计数据上报中转页面\n    ui += '<iframe name=\"vlook-stat-gitee\" style=\"display: block; margin: 0; border: none; overflow: hidden; width: 100%; height: 0;\"></iframe>';\n    ui += '<div class=\"v-doc-lib v-float-card\"><iframe name=\"vlook-doc-lib\"></iframe></div>';\n    return ui;\n}\n\n// ==================== 加载与初始化 VLOOK ==================== //\n\n/**\n * 文档加载完成后执行主流程\n */\n$(document).ready(function () {\n    // 完成页面加载后，移除预加载的初始 UI\n    // $(\"#VLOOK\").remove();\n\n    // ----------------------------------------\n    // 初始化启动参数\n    V_params_init();\n\n    // 判断文档类型\n    if (V_util_getParamVal(\"type\") === s_Mini) {\n        V_type = s_Mini;\n        V_data_set(\"doc-lib-title\", V_util_getDocTitle());\n    }\n\n    // ----------------------------------------\n    INFO(\"- Ready\");\n    gTimes = iStopwatch.ed(s_4space);\n    // 打印环境信息\n    env.print();\n\n    iStopwatch.st();\n    INFO(\"=== Load VLOOK ===\");\n\n    // ----------------------------------------\n    // 初始化语言\n    V_lang_init();\n\n    // ----------------------------------------\n    // 加载生成 VLOOK 界面\n    loadVLOOKui();\n\n    // ----------------------------------------\n    // 动效初始化\n    iStopwatch.st(\"* Effect\");\n    let effect = V_util_getParamVal(s_Effect);\n    V_ui_effect = (effect === gUndefined) ? 2 : JS_parseInt(effect);\n    V_ui_effect = env.device.mobile ? 0 : V_ui_effect;\n    LOG(\"    └ Level [ \" + V_ui_effect + \" ]\");\n    V_ui_initEffectLevel();\n    iStopwatch.ed(s_Cost);\n\n    // 先隐藏文档原始内容，减少页面重绘\n    VOM_doc().hide();\n\n    // ----------------------------------------\n    // 初始化欢迎页\n    iStopwatch.st(\"* Welcome Page Init\");\n    let wsMode = V_util_getParamVal(\"ws\");\n    wsMode = (wsMode === gUndefined) ? s_Auto : wsMode;\n    LOG(\"    └ mode: \" + wsMode);\n    WelcomePage_init(wsMode);\n\n    // 文档不符合 VLOOK 规范则不加载 VLOOK 插件\n    if (!V_checkSpec()) {\n        $(\".v-welcome-page\").hide();\n        $(\".v-toolbar\").hide();\n        $(\".v-btn\").hide();\n        return;\n    }\n    iStopwatch.ed(s_Cost);\n\n    // ----------------------------------------\n    // 初始化关键组件实例\n    iStopwatch.st(\"* Intance\");\n    V_init();\n    iStopwatch.ed(s_Cost);\n\n    // ----------------------------------------\n    // 延后加载 VLOOK 插件，避免欢迎页的 UI 刷新阻塞\n    // 独立线程进行处理\n    setTimeout(loadVLOOKplugin, 100);\n});\n\n/**\n * 字体加载完成后执行的主流程\n */\ndocument.fonts.ready.then(function() {\n    // 字体加载完成后的逻辑\n    LOG(\"!!! ALL FONT READY !!!\");\n});\n\n/**\n * 加载 VLOOK UI 资源\n */\nfunction loadVLOOKui() {\n    $(\".v-vlook-inside\").after(VLOOKui_loadWelcomePage()\n        + VLOOKui_loadIconSet()\n        + VLOOKui_loadTopbar()\n        + VLOOKui_loadNavCenter()\n        + VLOOKui_loadCommon());\n}\n\n/**\n * 加载 VLOOK 插件\n */\nfunction loadVLOOKplugin() {\n    // ----------------------------------------\n    // 推荐的浏览器类型检测\n    iStopwatch.st(\"* Browser Check\");\n    if (!env.browser.Chrome && !env.browser.Edge && !env.browser.Firefox && !env.browser.Safari) {\n        // V_report_push(['Error', 'Browser', navigator.userAgent, ]);\n        ALERT([\n            \"为获得最佳兼容性，建议使用 Chrome / Firefox / Edge 浏览器\",\n            // \"為獲得最佳兼容性，建議使用 Chrome / Firefox / Edge 瀏覽器\",\n            \"For best compatibility, it is recommended to use Chrome / Firefox / Edge browser\",\n            // \"Pour une meilleure compatibilité, il est recommandé d'utiliser le navigateur Chrome / Firefox / Edge\",\n            // \"Für eine optimale Kompatibilität wird empfohlen, den Chrome / Firefox / Edge-Browser zu verwenden\",\n            // \"Para una mejor compatibilidad, se recomienda utilizar el navegador Chrome / Firefox / Edge\",\n            // \"Для лучшей совместимости рекомендуется использовать браузер Chrome / Firefox / Edge.\",\n            // \"最高の互換性のために、Chrome / Firefox / Edgeブラウザを使用することをお勧めします\",\n            // \"최상의 호환성을 위해 Chrome / Firefox / Edge 브라우저를 사용하는 것이 좋습니다.\"\n        ][V_lang_id]);\n    }\n\n    iStopwatch.ed(s_4space);\n\n    // ========================================\n    // 初始化 VLOOK 核心模块\n    V_initKernel();\n\n    // ----------------------------------------\n    // 修改主题默认的圆角风格\n    let newRadius = V_util_getParamVal(\"radius\");\n    if (newRadius === \"small\" || newRadius === \"big\") {\n        // 批量修改圆角相关的 CSS 变量为指定的新值\n        V_util_changeCssVarSet([\n            s_varRB__,\n            s_varRS__,\n            s_varRT__,\n            s_varRTag__,\n            // \"--v-tag-small-radius\",\n            s_varRC__\n        ], newRadius);\n    }\n    else if (newRadius === s_None) {\n        // 批量修改圆角相关的 CSS 变量为 0\n        V_util_changeCssVarSet([\n            s_varRB__,\n            s_varRS__,\n            s_varRT__,\n            s_varRTag__,\n            s_varRC__\n        ]);\n    }\n\n    // ----------------------------------------\n    // 统一同组的分栏引用的高度\n    __fork(\"Quote Unite Columns Height\", function () {\n        ExtQuote_uniteColumnsHeight();\n    }, 1000);\n\n    // ----------------------------------------\n    // 段落导航初始化\n    __fork(\"Paragraph Nav\", function () {\n        ParagraphNav.init();\n    }, 100);\n\n    // ----------------------------------------\n    // 完成初始化后恢复显示\n    iStopwatch.st(\"* Write Ready\");\n    JQ_addClass(VOM_doc(), \"v-load-done v-focus-search\");\n    iStopwatch.ed(s_4space);\n\n    // ----------------------------------------\n    // 初始化外部链接\n    __fork(\"External Link\", function () {\n        V_doc_link_adjustExternal();\n    }, 100);\n\n    // ----------------------------------------\n    // 初始化全局热键\n    __fork(\"Hotkey\", function () {\n        V_ui_initHotkey();\n    }, 150);\n\n    // ----------------------------------------\n    // 初始化须在页面 body 显示后才能执行的部分\n    __fork(\"Restyle\", function () {\n        V_initRestyle();\n    }, 200);\n\n    // ----------------------------------------\n    // 检查页内链接坏链\n    __fork(\"Check Hash Link\", function () {\n        LinkTool_mdToHtml();\n        LinkTool_checkLink();\n    }, 250);\n\n    // ----------------------------------------\n    // 初始化，并安装自动适配器，实时跟随系统 Color Scheme 的变化\n    __fork(\"Color Scheme\", function () {\n        ColorScheme.scheme = V_util_getVarVal(\"--v-color-scheme\").x();\n        INFO(\"    System [ \" + ColorScheme.scheme + \" ]\");\n        ColorScheme.init();\n        // 判断当前文档是否强制指定了颜色方案\n        let colorScheme = V_util_getParamVal(\"cs\");\n        if (colorScheme === s_Light || colorScheme === s_Dark) {\n            INFO(\"    Force use [ \" + colorScheme + \" ]\");\n            ColorScheme.tg(colorScheme);\n        }\n        // 若系统当前颜色方案是 dark，则强制同步\n        else if (ColorScheme.scheme === s_Dark)\n            ColorScheme.tg(ColorScheme.scheme);\n    }, 300);\n\n    // ----------------------------------------\n    // 提交统计数据\n    __fork(\"Push Stat\", function () {\n        V_report_submit(gTotalTimes - gTimes);\n        // V_report_push(['DocLoadTime', 'All', 'Times', gTimes]);\n        // V_report_push(['VlookLoadTime', 'All', 'Times', gTotalTimes - gTimes]);\n    }, 350);\n\n    // ----------------------------------------\n    // 初始化内容助手\n    // 须隐藏文档原始内容前执行，避免部分样式失效\n    __fork(\"Content Assistor\", function () {\n        ContentAssistor_init();\n        PicInPic_init();\n\n        // 设置表格阅读模式的开关状态（不指定则默认开启）\n        if (V_util_getParamVal(\"tr\") !== s_Off)\n            TableCross_toggle();\n    }, 300);\n\n    // ----------------------------------------\n    // URL 带锚点的处理\n    __fork(\"Redirect to Hash\", function () {\n        let redirect = V_util_redirectTo();\n        if (VOM_cover() === gUndefined && !redirect) {\n            iNavCenter.catalog.currentHeaderIndex = 0;\n            V_ui_adjustAll();\n            ExtQuote_uniteColumnsHeight();\n        }\n    }, 450);\n\n    // ----------------------------------------\n    // 字数统计\n    // if (V_type === \"max\") {\n    __fork(\"Words count\", function () {\n        DocInfo_countWord();\n        // __countWord();\n    }, 500);\n    // }\n\n    // ----------------------------------------\n    // 更新欢迎页\n    iStopwatch.st();\n    INFO(\"* Welcome Page Done (\" + WelcomePage_mode + \")\");\n    WelcomePage_done();\n    iStopwatch.ed(s_Cost);\n\n    // ----------------------------------------\n    // VLOOK 加载完成\n    gTotalTimes = iStopwatch.stop() - 200;\n    INFO(\"=== !!! MAIN PROCESS DONE !!! ===\");\n    INFO(\"TOTAL COST   ⏱ \" + gTotalTimes + \" ms\");\n    INFO(\"    ├ HTML   ⏱ \" + gTimes + \" ms\");\n    INFO(\"    └ VLOOK  ⏱ \" + (gTotalTimes - gTimes) + \" ms\");\n\n    /**\n     * 创建独立线程执行\n     * @param msg 线程信息\n     * @param callback 线程执行的回调函数\n     * @param delay 0 - 立即时间，>0 - 延时执行（毫秒）\n     */\n    function __fork(msg, callback, delay) {\n        setTimeout(function () {\n            let sw = new Stopwatch();\n            sw.st(\"* thread * [\" + msg + \"]\");\n            typeof(callback) === s_Function && callback();\n            sw.ed(s_4space);\n        }, delay);\n    }\n}\n"]}